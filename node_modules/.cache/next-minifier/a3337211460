{"code":"module.exports=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};var threw=true;try{modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);threw=false}finally{if(threw)delete installedModules[moduleId]}module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!==\"undefined\"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:\"Module\"})}Object.defineProperty(exports,\"__esModule\",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value===\"object\"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,\"default\",{enumerable:true,value:value});if(mode&2&&typeof value!=\"string\")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module[\"default\"]}:function getModuleExports(){return module};__webpack_require__.d(getter,\"a\",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p=\"\";return __webpack_require__(__webpack_require__.s=\"wmU/\")}({\"+7ve\":function(module,exports,__webpack_require__){\"use strict\";var RingBuffer=__webpack_require__(\"u5A6\");var Pledge=function(){this._complete=false;this._callbacks=new RingBuffer(Pledge.QUEUE_SIZE)};Pledge.QUEUE_SIZE=4;Pledge.all=function(list){var pledge=new Pledge,pending=list.length,n=pending;if(pending===0)pledge.done();while(n--)list[n].then(function(){pending-=1;if(pending===0)pledge.done()});return pledge};Pledge.prototype.then=function(callback){if(this._complete)callback();else this._callbacks.push(callback)};Pledge.prototype.done=function(){this._complete=true;var callbacks=this._callbacks,callback;while(callback=callbacks.shift())callback()};module.exports=Pledge},\"+SFK\":function(module,exports,__webpack_require__){__webpack_require__(\"AUvm\");__webpack_require__(\"wgeU\");__webpack_require__(\"adOz\");__webpack_require__(\"dl0q\");module.exports=__webpack_require__(\"WEpk\").Symbol},\"+iuc\":function(module,exports,__webpack_require__){__webpack_require__(\"wgeU\");__webpack_require__(\"FlQf\");__webpack_require__(\"bBy9\");__webpack_require__(\"B9jh\");__webpack_require__(\"dL40\");__webpack_require__(\"xvv9\");__webpack_require__(\"V+O7\");module.exports=__webpack_require__(\"WEpk\").Set},\"+oT+\":function(module,exports,__webpack_require__){var _Promise=__webpack_require__(\"eVuF\");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{_Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new _Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"next\",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"throw\",err)}_next(undefined)})}}module.exports=_asyncToGenerator},\"+plK\":function(module,exports,__webpack_require__){__webpack_require__(\"ApPD\");module.exports=__webpack_require__(\"WEpk\").Object.getPrototypeOf},\"+v3u\":function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"match\")},\"/+P4\":function(module,exports,__webpack_require__){var _Object$getPrototypeOf=__webpack_require__(\"Bhuq\");var _Object$setPrototypeOf=__webpack_require__(\"TRZx\");function _getPrototypeOf(o){module.exports=_getPrototypeOf=_Object$setPrototypeOf?_Object$getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||_Object$getPrototypeOf(o)};return _getPrototypeOf(o)}module.exports=_getPrototypeOf},\"//qW\":function(module,exports,__webpack_require__){\"use strict\";var codePointAt=__webpack_require__(\"Gp07\");var InternalStateModule=__webpack_require__(\"LX9C\");var defineIterator=__webpack_require__(\"stQs\");var STRING_ITERATOR=\"String Iterator\";var setInternalState=InternalStateModule.set;var getInternalState=InternalStateModule.getterFor(STRING_ITERATOR);defineIterator(String,\"String\",function(iterated){setInternalState(this,{type:STRING_ITERATOR,string:String(iterated),index:0})},function next(){var state=getInternalState(this);var string=state.string;var index=state.index;var point;if(index>=string.length)return{value:undefined,done:true};point=codePointAt(string,index,true);state.index+=point.length;return{value:point,done:false}})},\"/0p4\":function(module,exports){module.exports=require(\"events\")},\"/HRN\":function(module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}module.exports=_classCallCheck},\"/a9y\":function(module,exports,__webpack_require__){\"use strict\";var _interopRequireDefault=__webpack_require__(\"KI45\");var _classCallCheck2=_interopRequireDefault(__webpack_require__(\"/HRN\"));var _createClass2=_interopRequireDefault(__webpack_require__(\"WaGi\"));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(\"ZDA2\"));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(\"/+P4\"));var _inherits2=_interopRequireDefault(__webpack_require__(\"N9n2\"));var __importDefault=void 0&&(void 0).__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,\"__esModule\",{value:true});var react_1=__importDefault(__webpack_require__(\"q1tI\"));var head_1=__importDefault(__webpack_require__(\"PgRs\"));var statusCodes={400:\"Bad Request\",404:\"This page could not be found\",500:\"Internal Server Error\",501:\"Not Implemented\"};var Error=function(_react_1$default$Comp){(0,_inherits2.default)(Error,_react_1$default$Comp);function Error(){(0,_classCallCheck2.default)(this,Error);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Error).apply(this,arguments))}(0,_createClass2.default)(Error,[{key:\"render\",value:function render(){var statusCode=this.props.statusCode;var title=statusCodes[statusCode]||\"An unexpected error has occurred\";return react_1.default.createElement(\"div\",{style:styles.error},react_1.default.createElement(head_1.default,null,react_1.default.createElement(\"title\",null,statusCode,\": \",title)),react_1.default.createElement(\"div\",null,react_1.default.createElement(\"style\",{dangerouslySetInnerHTML:{__html:\"body { margin: 0 }\"}}),statusCode?react_1.default.createElement(\"h1\",{style:styles.h1},statusCode):null,react_1.default.createElement(\"div\",{style:styles.desc},react_1.default.createElement(\"h2\",{style:styles.h2},title,\".\"))))}}],[{key:\"getInitialProps\",value:function getInitialProps(_ref){var res=_ref.res,err=_ref.err;var statusCode=res&&res.statusCode?res.statusCode:err?err.statusCode:404;return{statusCode:statusCode}}}]);return Error}(react_1.default.Component);Error.displayName=\"ErrorPage\";exports.default=Error;var styles={error:{color:\"#000\",background:\"#fff\",fontFamily:'-apple-system, BlinkMacSystemFont, Roboto, \"Segoe UI\", \"Fira Sans\", Avenir, \"Helvetica Neue\", \"Lucida Grande\", sans-serif',height:\"100vh\",textAlign:\"center\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\"},desc:{display:\"inline-block\",textAlign:\"left\",lineHeight:\"49px\",height:\"49px\",verticalAlign:\"middle\"},h1:{display:\"inline-block\",borderRight:\"1px solid rgba(0, 0, 0,.3)\",margin:0,marginRight:\"20px\",padding:\"10px 23px 10px 0\",fontSize:\"24px\",fontWeight:500,verticalAlign:\"top\"},h2:{fontSize:\"14px\",fontWeight:\"normal\",lineHeight:\"inherit\",margin:0,padding:0}}},\"0Bsm\":function(module,exports,__webpack_require__){\"use strict\";var _interopRequireDefault=__webpack_require__(\"KI45\");var _assign=_interopRequireDefault(__webpack_require__(\"UXZV\"));var _classCallCheck2=_interopRequireDefault(__webpack_require__(\"/HRN\"));var _createClass2=_interopRequireDefault(__webpack_require__(\"WaGi\"));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(\"ZDA2\"));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(\"/+P4\"));var _inherits2=_interopRequireDefault(__webpack_require__(\"N9n2\"));var __importDefault=void 0&&(void 0).__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,\"__esModule\",{value:true});var react_1=__importDefault(__webpack_require__(\"q1tI\"));var prop_types_1=__importDefault(__webpack_require__(\"17x9\"));function withRouter(ComposedComponent){var WithRouteWrapper=function(_react_1$default$Comp){(0,_inherits2.default)(WithRouteWrapper,_react_1$default$Comp);function WithRouteWrapper(){(0,_classCallCheck2.default)(this,WithRouteWrapper);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(WithRouteWrapper).apply(this,arguments))}(0,_createClass2.default)(WithRouteWrapper,[{key:\"render\",value:function render(){return react_1.default.createElement(ComposedComponent,(0,_assign.default)({router:this.context.router},this.props))}}]);return WithRouteWrapper}(react_1.default.Component);WithRouteWrapper.contextTypes={router:prop_types_1.default.object};WithRouteWrapper.getInitialProps=ComposedComponent.getInitialProps;return WithRouteWrapper}exports.default=withRouter},\"0Bu/\":function(module,exports,__webpack_require__){var isObject=__webpack_require__(\"kpns\");var anObject=__webpack_require__(\"bcPd\");module.exports=function(O,proto){anObject(O);if(!isObject(proto)&&proto!==null){throw TypeError(\"Can't set \"+String(proto)+\" as a prototype\")}}},\"0HDe\":function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},\"0KLy\":function(module,exports,__webpack_require__){\"use strict\";var _interopRequireDefault=__webpack_require__(\"KI45\");var _isArray=_interopRequireDefault(__webpack_require__(\"p0XB\"));var _classCallCheck2=_interopRequireDefault(__webpack_require__(\"0iUn\"));var _createClass2=_interopRequireDefault(__webpack_require__(\"sLSF\"));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(\"MI3g\"));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(\"a7VT\"));var _inherits2=_interopRequireDefault(__webpack_require__(\"Tit0\"));var _getIterator2=_interopRequireDefault(__webpack_require__(\"XXOK\"));var _assign=_interopRequireDefault(__webpack_require__(\"UXZV\"));var _promise=_interopRequireDefault(__webpack_require__(\"eVuF\"));var _keys=_interopRequireDefault(__webpack_require__(\"pLtp\"));var __importDefault=void 0&&(void 0).__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,\"__esModule\",{value:true});var react_1=__importDefault(__webpack_require__(\"q1tI\"));var loadable_context_1=__webpack_require__(\"Q0KE\");var ALL_INITIALIZERS=[];var READY_INITIALIZERS=[];var initialized=false;function load(loader){var promise=loader();var state={loading:true,loaded:null,error:null};state.promise=promise.then(function(loaded){state.loading=false;state.loaded=loaded;return loaded}).catch(function(err){state.loading=false;state.error=err;throw err});return state}function loadMap(obj){var state={loading:false,loaded:{},error:null};var promises=[];try{(0,_keys.default)(obj).forEach(function(key){var result=load(obj[key]);if(!result.loading){state.loaded[key]=result.loaded;state.error=result.error}else{state.loading=true}promises.push(result.promise);result.promise.then(function(res){state.loaded[key]=res}).catch(function(err){state.error=err})})}catch(err){state.error=err}state.promise=_promise.default.all(promises).then(function(res){state.loading=false;return res}).catch(function(err){state.loading=false;throw err});return state}function resolve(obj){return obj&&obj.__esModule?obj.default:obj}function render(loaded,props){return react_1.default.createElement(resolve(loaded),props)}function createLoadableComponent(loadFn,options){var _a;var opts=(0,_assign.default)({loader:null,loading:null,delay:200,timeout:null,render:render,webpack:null,modules:null},options);var res=null;function init(){if(!res){res=loadFn(opts.loader)}return res.promise}if(typeof window===\"undefined\"){ALL_INITIALIZERS.push(init)}if(!initialized&&typeof window!==\"undefined\"&&typeof opts.webpack===\"function\"){var moduleIds=opts.webpack();READY_INITIALIZERS.push(function(ids){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=(0,_getIterator2.default)(moduleIds),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var moduleId=_step.value;if(ids.indexOf(moduleId)!==-1){return init()}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}})}return _a=function(_react_1$default$Comp){(0,_inherits2.default)(LoadableComponent,_react_1$default$Comp);function LoadableComponent(props){var _this;(0,_classCallCheck2.default)(this,LoadableComponent);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(LoadableComponent).call(this,props));_this.retry=function(){_this.setState({error:null,loading:true,timedOut:false});res=loadFn(opts.loader);_this._loadModule()};init();_this.state={error:res.error,pastDelay:false,timedOut:false,loading:res.loading,loaded:res.loaded};return _this}(0,_createClass2.default)(LoadableComponent,[{key:\"componentWillMount\",value:function componentWillMount(){this._mounted=true;this._loadModule()}},{key:\"_loadModule\",value:function _loadModule(){var _this2=this;if(this.context&&(0,_isArray.default)(opts.modules)){opts.modules.forEach(function(moduleName){_this2.context(moduleName)})}if(!res.loading){return}if(typeof opts.delay===\"number\"){if(opts.delay===0){this.setState({pastDelay:true})}else{this._delay=setTimeout(function(){_this2.setState({pastDelay:true})},opts.delay)}}if(typeof opts.timeout===\"number\"){this._timeout=setTimeout(function(){_this2.setState({timedOut:true})},opts.timeout)}var update=function update(){if(!_this2._mounted){return}_this2.setState({error:res.error,loaded:res.loaded,loading:res.loading});_this2._clearTimeouts()};res.promise.then(function(){update()}).catch(function(err){update()})}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._mounted=false;this._clearTimeouts()}},{key:\"_clearTimeouts\",value:function _clearTimeouts(){clearTimeout(this._delay);clearTimeout(this._timeout)}},{key:\"render\",value:function render(){if(this.state.loading||this.state.error){return react_1.default.createElement(opts.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry})}else if(this.state.loaded){return opts.render(this.state.loaded,this.props)}else{return null}}}],[{key:\"preload\",value:function preload(){return init()}}]);return LoadableComponent}(react_1.default.Component),_a.contextType=loadable_context_1.LoadableContext,_a}function Loadable(opts){return createLoadableComponent(load,opts)}function LoadableMap(opts){if(typeof opts.render!==\"function\"){throw new Error(\"LoadableMap requires a `render(loaded, props)` function\")}return createLoadableComponent(loadMap,opts)}Loadable.Map=LoadableMap;function flushInitializers(initializers,ids){var promises=[];while(initializers.length){var init=initializers.pop();promises.push(init(ids))}return _promise.default.all(promises).then(function(){if(initializers.length){return flushInitializers(initializers,ids)}})}Loadable.preloadAll=function(){return new _promise.default(function(resolve,reject){flushInitializers(ALL_INITIALIZERS).then(resolve,reject)})};Loadable.preloadReady=function(ids){return new _promise.default(function(resolve){var res=function res(){initialized=true;return resolve()};flushInitializers(READY_INITIALIZERS,ids).then(res,res)})};exports.default=Loadable},\"0gFS\":function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.PHASE_EXPORT=\"phase-export\";exports.PHASE_PRODUCTION_BUILD=\"phase-production-build\";exports.PHASE_PRODUCTION_SERVER=\"phase-production-server\";exports.PHASE_DEVELOPMENT_SERVER=\"phase-development-server\";exports.PAGES_MANIFEST=\"pages-manifest.json\";exports.BUILD_MANIFEST=\"build-manifest.json\";exports.REACT_LOADABLE_MANIFEST=\"react-loadable-manifest.json\";exports.SERVER_DIRECTORY=\"server\";exports.CONFIG_FILE=\"next.config.js\";exports.BUILD_ID_FILE=\"BUILD_ID\";exports.BLOCKED_PAGES=[\"/_document\",\"/_app\"];exports.CLIENT_STATIC_FILES_PATH=\"static\";exports.CLIENT_STATIC_FILES_RUNTIME=\"runtime\";exports.CLIENT_STATIC_FILES_RUNTIME_PATH=\"\".concat(exports.CLIENT_STATIC_FILES_PATH,\"/\").concat(exports.CLIENT_STATIC_FILES_RUNTIME);exports.CLIENT_STATIC_FILES_RUNTIME_MAIN=\"\".concat(exports.CLIENT_STATIC_FILES_RUNTIME_PATH,\"/main.js\");exports.CLIENT_STATIC_FILES_RUNTIME_AMP=\"\".concat(exports.CLIENT_STATIC_FILES_RUNTIME_PATH,\"/amp.js\");exports.CLIENT_STATIC_FILES_RUNTIME_WEBPACK=\"\".concat(exports.CLIENT_STATIC_FILES_RUNTIME_PATH,\"/webpack.js\");exports.IS_BUNDLED_PAGE_REGEX=/^static[\\/\\\\][^\\/\\\\]+[\\/\\\\]pages.*\\.js$/;exports.ROUTE_NAME_REGEX=/^static[\\/\\\\][^\\/\\\\]+[\\/\\\\]pages[\\/\\\\](.*)\\.js$/},\"0i0S\":function(module,exports){module.exports={}},\"0iUn\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,\"default\",function(){return _classCallCheck});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}},\"0idE\":function(module,exports,__webpack_require__){var has=__webpack_require__(\"57wU\");var toObject=__webpack_require__(\"SAp2\");var IE_PROTO=__webpack_require__(\"qBi7\")(\"IE_PROTO\");var CORRECT_PROTOTYPE_GETTER=__webpack_require__(\"S5sp\");var ObjectPrototype=Object.prototype;module.exports=CORRECT_PROTOTYPE_GETTER?Object.getPrototypeOf:function(O){O=toObject(O);if(has(O,IE_PROTO))return O[IE_PROTO];if(typeof O.constructor==\"function\"&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectPrototype:null}},\"0tVQ\":function(module,exports,__webpack_require__){__webpack_require__(\"FlQf\");__webpack_require__(\"VJsP\");module.exports=__webpack_require__(\"WEpk\").Array.from},\"16Al\":function(module,exports,__webpack_require__){\"use strict\";var ReactPropTypesSecret=__webpack_require__(\"WbBG\");function emptyFunction(){}module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret===ReactPropTypesSecret){return}var err=new Error(\"Calling PropTypes validators directly is not supported by the `prop-types` package. \"+\"Use PropTypes.checkPropTypes() to call them. \"+\"Read more at http://fb.me/use-check-prop-types\");err.name=\"Invariant Violation\";throw err}shim.isRequired=shim;function getShim(){return shim}var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim};ReactPropTypes.checkPropTypes=emptyFunction;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}},\"17x9\":function(module,exports,__webpack_require__){if(false){var throwOnDirectAccess,isValidElement,REACT_ELEMENT_TYPE}else{module.exports=__webpack_require__(\"16Al\")()}},\"1VRj\":function(module,exports){module.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},\"1f/i\":function(module,exports,__webpack_require__){var global=__webpack_require__(\"ysHE\");var hide=__webpack_require__(\"wBs/\");var has=__webpack_require__(\"57wU\");var setGlobal=__webpack_require__(\"nX7E\");var nativeFunctionToString=__webpack_require__(\"5eG6\");var InternalStateModule=__webpack_require__(\"LX9C\");var getInternalState=InternalStateModule.get;var enforceInternalState=InternalStateModule.enforce;var TEMPLATE=String(nativeFunctionToString).split(\"toString\");__webpack_require__(\"MfhB\")(\"inspectSource\",function(it){return nativeFunctionToString.call(it)});(module.exports=function(O,key,value,options){var unsafe=options?!!options.unsafe:false;var simple=options?!!options.enumerable:false;var noTargetGet=options?!!options.noTargetGet:false;if(typeof value==\"function\"){if(typeof key==\"string\"&&!has(value,\"name\"))hide(value,\"name\",key);enforceInternalState(value).source=TEMPLATE.join(typeof key==\"string\"?key:\"\")}if(O===global){if(simple)O[key]=value;else setGlobal(key,value);return}else if(!unsafe){delete O[key]}else if(!noTargetGet&&O[key]){simple=true}if(simple)O[key]=value;else hide(O,key,value)})(Function.prototype,\"toString\",function toString(){return typeof this==\"function\"&&getInternalState(this).source||nativeFunctionToString.call(this)})},\"29s/\":function(module,exports,__webpack_require__){var core=__webpack_require__(\"WEpk\");var global=__webpack_require__(\"5T2Y\");var SHARED=\"__core-js_shared__\";var store=global[SHARED]||(global[SHARED]={});(module.exports=function(key,value){return store[key]||(store[key]=value!==undefined?value:{})})(\"versions\",[]).push({version:core.version,mode:__webpack_require__(\"uOPS\")?\"pure\":\"global\",copyright:\"Â© 2019 Denis Pushkarev (zloirock.ru)\"})},\"2F3y\":function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"asyncIterator\")},\"2GTP\":function(module,exports,__webpack_require__){var aFunction=__webpack_require__(\"eaoh\");module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},\"2Hee\":function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}},\"2Nb0\":function(module,exports,__webpack_require__){__webpack_require__(\"FlQf\");__webpack_require__(\"bBy9\");module.exports=__webpack_require__(\"zLkG\").f(\"iterator\")},\"2RBK\":function(module,exports,__webpack_require__){var Stream=__webpack_require__(\"msIP\").Stream,util=__webpack_require__(\"jK02\"),driver=__webpack_require__(\"qf7z\"),EventTarget=__webpack_require__(\"sWNQ\"),Event=__webpack_require__(\"AhIK\");var API=function(options){options=options||{};driver.validateOptions(options,[\"headers\",\"extensions\",\"maxLength\",\"ping\",\"proxy\",\"tls\",\"ca\"]);this.readable=this.writable=true;var headers=options.headers;if(headers){for(var name in headers)this._driver.setHeader(name,headers[name])}var extensions=options.extensions;if(extensions){[].concat(extensions).forEach(this._driver.addExtension,this._driver)}this._ping=options.ping;this._pingId=0;this.readyState=API.CONNECTING;this.bufferedAmount=0;this.protocol=\"\";this.url=this._driver.url;this.version=this._driver.version;var self=this;this._driver.on(\"open\",function(e){self._open()});this._driver.on(\"message\",function(e){self._receiveMessage(e.data)});this._driver.on(\"close\",function(e){self._beginClose(e.reason,e.code)});this._driver.on(\"error\",function(error){self._emitError(error.message)});this.on(\"error\",function(){});this._driver.messages.on(\"drain\",function(){self.emit(\"drain\")});if(this._ping)this._pingTimer=setInterval(function(){self._pingId+=1;self.ping(self._pingId.toString())},this._ping*1e3);this._configureStream();if(!this._proxy){this._stream.pipe(this._driver.io);this._driver.io.pipe(this._stream)}};util.inherits(API,Stream);API.CONNECTING=0;API.OPEN=1;API.CLOSING=2;API.CLOSED=3;API.CLOSE_TIMEOUT=3e4;var instance={write:function(data){return this.send(data)},end:function(data){if(data!==undefined)this.send(data);this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(data){if(this.readyState>API.OPEN)return false;if(!(data instanceof Buffer))data=String(data);return this._driver.messages.write(data)},ping:function(message,callback){if(this.readyState>API.OPEN)return false;return this._driver.ping(message,callback)},close:function(code,reason){if(code===undefined)code=1e3;if(reason===undefined)reason=\"\";if(code!==1e3&&(code<3e3||code>4999))throw new Error(\"Failed to execute 'close' on WebSocket: \"+\"The code must be either 1000, or between 3000 and 4999. \"+code+\" is neither.\");if(this.readyState!==API.CLOSED)this.readyState=API.CLOSING;this._driver.close(reason,code);var self=this;this._closeTimer=setTimeout(function(){self._beginClose(\"\",1006)},API.CLOSE_TIMEOUT)},_configureStream:function(){var self=this;this._stream.setTimeout(0);this._stream.setNoDelay(true);[\"close\",\"end\"].forEach(function(event){this._stream.on(event,function(){self._finalizeClose()})},this);this._stream.on(\"error\",function(error){self._emitError(\"Network error: \"+self.url+\": \"+error.message);self._finalizeClose()})},_open:function(){if(this.readyState!==API.CONNECTING)return;this.readyState=API.OPEN;this.protocol=this._driver.protocol||\"\";var event=new Event(\"open\");event.initEvent(\"open\",false,false);this.dispatchEvent(event)},_receiveMessage:function(data){if(this.readyState>API.OPEN)return false;if(this.readable)this.emit(\"data\",data);var event=new Event(\"message\",{data:data});event.initEvent(\"message\",false,false);this.dispatchEvent(event)},_emitError:function(message){if(this.readyState>=API.CLOSING)return;var event=new Event(\"error\",{message:message});event.initEvent(\"error\",false,false);this.dispatchEvent(event)},_beginClose:function(reason,code){if(this.readyState===API.CLOSED)return;this.readyState=API.CLOSING;this._closeParams=[reason,code];if(this._stream){this._stream.destroy();if(!this._stream.readable)this._finalizeClose()}},_finalizeClose:function(){if(this.readyState===API.CLOSED)return;this.readyState=API.CLOSED;if(this._closeTimer)clearTimeout(this._closeTimer);if(this._pingTimer)clearInterval(this._pingTimer);if(this._stream)this._stream.end();if(this.readable)this.emit(\"end\");this.readable=this.writable=false;var reason=this._closeParams?this._closeParams[0]:\"\",code=this._closeParams?this._closeParams[1]:1006;var event=new Event(\"close\",{code:code,reason:reason});event.initEvent(\"close\",false,false);this.dispatchEvent(event)}};for(var method in instance)API.prototype[method]=instance[method];for(var key in EventTarget)API.prototype[key]=EventTarget[key];module.exports=API},\"2SO9\":function(module,exports,__webpack_require__){\"use strict\";var Parser=__webpack_require__(\"IAmK\"),Pipeline=__webpack_require__(\"8HKJ\");var Extensions=function(){this._rsv1=this._rsv2=this._rsv3=null;this._byName={};this._inOrder=[];this._sessions=[];this._index={}};Extensions.MESSAGE_OPCODES=[1,2];var instance={add:function(ext){if(typeof ext.name!==\"string\")throw new TypeError(\"extension.name must be a string\");if(ext.type!==\"permessage\")throw new TypeError('extension.type must be \"permessage\"');if(typeof ext.rsv1!==\"boolean\")throw new TypeError(\"extension.rsv1 must be true or false\");if(typeof ext.rsv2!==\"boolean\")throw new TypeError(\"extension.rsv2 must be true or false\");if(typeof ext.rsv3!==\"boolean\")throw new TypeError(\"extension.rsv3 must be true or false\");if(this._byName.hasOwnProperty(ext.name))throw new TypeError('An extension with name \"'+ext.name+'\" is already registered');this._byName[ext.name]=ext;this._inOrder.push(ext)},generateOffer:function(){var sessions=[],offer=[],index={};this._inOrder.forEach(function(ext){var session=ext.createClientSession();if(!session)return;var record=[ext,session];sessions.push(record);index[ext.name]=record;var offers=session.generateOffer();offers=offers?[].concat(offers):[];offers.forEach(function(off){offer.push(Parser.serializeParams(ext.name,off))},this)},this);this._sessions=sessions;this._index=index;return offer.length>0?offer.join(\", \"):null},activate:function(header){var responses=Parser.parseHeader(header),sessions=[];responses.eachOffer(function(name,params){var record=this._index[name];if(!record)throw new Error('Server sent an extension response for unknown extension \"'+name+'\"');var ext=record[0],session=record[1],reserved=this._reserved(ext);if(reserved)throw new Error(\"Server sent two extension responses that use the RSV\"+reserved[0]+' bit: \"'+reserved[1]+'\" and \"'+ext.name+'\"');if(session.activate(params)!==true)throw new Error(\"Server sent unacceptable extension parameters: \"+Parser.serializeParams(name,params));this._reserve(ext);sessions.push(record)},this);this._sessions=sessions;this._pipeline=new Pipeline(sessions)},generateResponse:function(header){var sessions=[],response=[],offers=Parser.parseHeader(header);this._inOrder.forEach(function(ext){var offer=offers.byName(ext.name);if(offer.length===0||this._reserved(ext))return;var session=ext.createServerSession(offer);if(!session)return;this._reserve(ext);sessions.push([ext,session]);response.push(Parser.serializeParams(ext.name,session.generateResponse()))},this);this._sessions=sessions;this._pipeline=new Pipeline(sessions);return response.length>0?response.join(\", \"):null},validFrameRsv:function(frame){var allowed={rsv1:false,rsv2:false,rsv3:false},ext;if(Extensions.MESSAGE_OPCODES.indexOf(frame.opcode)>=0){for(var i=0,n=this._sessions.length;i<n;i++){ext=this._sessions[i][0];allowed.rsv1=allowed.rsv1||ext.rsv1;allowed.rsv2=allowed.rsv2||ext.rsv2;allowed.rsv3=allowed.rsv3||ext.rsv3}}return(allowed.rsv1||!frame.rsv1)&&(allowed.rsv2||!frame.rsv2)&&(allowed.rsv3||!frame.rsv3)},processIncomingMessage:function(message,callback,context){this._pipeline.processIncomingMessage(message,callback,context)},processOutgoingMessage:function(message,callback,context){this._pipeline.processOutgoingMessage(message,callback,context)},close:function(callback,context){if(!this._pipeline)return callback.call(context);this._pipeline.close(callback,context)},_reserve:function(ext){this._rsv1=this._rsv1||ext.rsv1&&ext.name;this._rsv2=this._rsv2||ext.rsv2&&ext.name;this._rsv3=this._rsv3||ext.rsv3&&ext.name},_reserved:function(ext){if(this._rsv1&&ext.rsv1)return[1,this._rsv1];if(this._rsv2&&ext.rsv2)return[2,this._rsv2];if(this._rsv3&&ext.rsv3)return[3,this._rsv3];return false}};for(var key in instance)Extensions.prototype[key]=instance[key];module.exports=Extensions},\"2faE\":function(module,exports,__webpack_require__){var anObject=__webpack_require__(\"5K7Z\");var IE8_DOM_DEFINE=__webpack_require__(\"eUtF\");var toPrimitive=__webpack_require__(\"G8Mo\");var dP=Object.defineProperty;exports.f=__webpack_require__(\"jmDH\")?Object.defineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if(\"get\"in Attributes||\"set\"in Attributes)throw TypeError(\"Accessors not supported!\");if(\"value\"in Attributes)O[P]=Attributes.value;return O}},\"2nJ2\":function(module,exports,__webpack_require__){\"use strict\";var StreamReader=function(){this._queue=[];this._queueSize=0;this._offset=0};StreamReader.prototype.put=function(buffer){if(!buffer||buffer.length===0)return;if(!buffer.copy)buffer=new Buffer(buffer);this._queue.push(buffer);this._queueSize+=buffer.length};StreamReader.prototype.read=function(length){if(length>this._queueSize)return null;if(length===0)return new Buffer(0);this._queueSize-=length;var queue=this._queue,remain=length,first=queue[0],buffers,buffer;if(first.length>=length){if(first.length===length){return queue.shift()}else{buffer=first.slice(0,length);queue[0]=first.slice(length);return buffer}}for(var i=0,n=queue.length;i<n;i++){if(remain<queue[i].length)break;remain-=queue[i].length}buffers=queue.splice(0,i);if(remain>0&&queue.length>0){buffers.push(queue[0].slice(0,remain));queue[0]=queue[0].slice(remain)}return this._concat(buffers,length)};StreamReader.prototype.eachByte=function(callback,context){var buffer,n,index;while(this._queue.length>0){buffer=this._queue[0];n=buffer.length;while(this._offset<n){index=this._offset;this._offset+=1;callback.call(context,buffer[index])}this._offset=0;this._queue.shift()}};StreamReader.prototype._concat=function(buffers,length){if(Buffer.concat)return Buffer.concat(buffers,length);var buffer=new Buffer(length),offset=0;for(var i=0,n=buffers.length;i<n;i++){buffers[i].copy(buffer,offset);offset+=buffers[i].length}return buffer};module.exports=StreamReader},\"2w5C\":function(module,exports,__webpack_require__){var has=__webpack_require__(\"57wU\");var toIndexedObject=__webpack_require__(\"IutQ\");var arrayIndexOf=__webpack_require__(\"55jA\")(false);var hiddenKeys=__webpack_require__(\"vcTx\");module.exports=function(object,names){var O=toIndexedObject(object);var i=0;var result=[];var key;for(key in O)!has(hiddenKeys,key)&&has(O,key)&&result.push(key);while(names.length>i)if(has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key)}return result}},\"3GJH\":function(module,exports,__webpack_require__){__webpack_require__(\"lCc8\");var $Object=__webpack_require__(\"WEpk\").Object;module.exports=function create(P,D){return $Object.create(P,D)}},\"3Gxb\":function(module,exports,__webpack_require__){var internalObjectKeys=__webpack_require__(\"2w5C\");var hiddenKeys=__webpack_require__(\"o9j8\").concat(\"length\",\"prototype\");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return internalObjectKeys(O,hiddenKeys)}},\"3niX\":function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.flush=flush;exports.default=void 0;var _react=__webpack_require__(\"q1tI\");var _stylesheetRegistry=_interopRequireDefault(__webpack_require__(\"SevZ\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)===\"object\"||typeof call===\"function\")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var styleSheetRegistry=new _stylesheetRegistry.default;var JSXStyle=function(_Component){_inherits(JSXStyle,_Component);function JSXStyle(props){var _this;_classCallCheck(this,JSXStyle);_this=_possibleConstructorReturn(this,_getPrototypeOf(JSXStyle).call(this,props));_this.prevProps={};return _this}_createClass(JSXStyle,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(otherProps){return this.props.id!==otherProps.id||String(this.props.dynamic)!==String(otherProps.dynamic)}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){styleSheetRegistry.remove(this.props)}},{key:\"render\",value:function render(){if(this.shouldComponentUpdate(this.prevProps)){if(this.prevProps.id){styleSheetRegistry.remove(this.prevProps)}styleSheetRegistry.add(this.props);this.prevProps=this.props}return null}}],[{key:\"dynamic\",value:function dynamic(info){return info.map(function(tagInfo){var baseId=tagInfo[0];var props=tagInfo[1];return styleSheetRegistry.computeId(baseId,props)}).join(\" \")}}]);return JSXStyle}(_react.Component);exports.default=JSXStyle;function flush(){var cssRules=styleSheetRegistry.cssRules();styleSheetRegistry.flush();return cssRules}},\"44fV\":function(module,exports,__webpack_require__){\"use strict\";var global=__webpack_require__(\"ysHE\");var has=__webpack_require__(\"57wU\");var DESCRIPTORS=__webpack_require__(\"lb/b\");var IS_PURE=__webpack_require__(\"U5J1\");var $export=__webpack_require__(\"pSMy\");var redefine=__webpack_require__(\"1f/i\");var hiddenKeys=__webpack_require__(\"vcTx\");var fails=__webpack_require__(\"0HDe\");var shared=__webpack_require__(\"MfhB\");var setToStringTag=__webpack_require__(\"S4gH\");var uid=__webpack_require__(\"ptKZ\");var wellKnownSymbol=__webpack_require__(\"aXXJ\");var wrappedWellKnownSymbolModule=__webpack_require__(\"ahhG\");var defineWellKnownSymbol=__webpack_require__(\"q94Q\");var enumKeys=__webpack_require__(\"SIcJ\");var isArray=__webpack_require__(\"k2qa\");var anObject=__webpack_require__(\"bcPd\");var isObject=__webpack_require__(\"kpns\");var toIndexedObject=__webpack_require__(\"IutQ\");var toPrimitive=__webpack_require__(\"ehg7\");var createPropertyDescriptor=__webpack_require__(\"2Hee\");var nativeObjectCreate=__webpack_require__(\"tzov\");var getOwnPropertyNamesExternal=__webpack_require__(\"zkF/\");var getOwnPropertyDescriptorModule=__webpack_require__(\"pYsU\");var definePropertyModule=__webpack_require__(\"TIpl\");var propertyIsEnumerableModule=__webpack_require__(\"iCuu\");var hide=__webpack_require__(\"wBs/\");var objectKeys=__webpack_require__(\"Q2Kg\");var HIDDEN=__webpack_require__(\"qBi7\")(\"hidden\");var InternalStateModule=__webpack_require__(\"LX9C\");var SYMBOL=\"Symbol\";var setInternalState=InternalStateModule.set;var getInternalState=InternalStateModule.getterFor(SYMBOL);var nativeGetOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f;var nativeDefineProperty=definePropertyModule.f;var nativeGetOwnPropertyNames=getOwnPropertyNamesExternal.f;var $Symbol=global.Symbol;var JSON=global.JSON;var nativeJSONStringify=JSON&&JSON.stringify;var PROTOTYPE=\"prototype\";var TO_PRIMITIVE=wellKnownSymbol(\"toPrimitive\");var nativePropertyIsEnumerable=propertyIsEnumerableModule.f;var SymbolRegistry=shared(\"symbol-registry\");var AllSymbols=shared(\"symbols\");var ObjectPrototypeSymbols=shared(\"op-symbols\");var WellKnownSymbolsStore=shared(\"wks\");var ObjectPrototype=Object[PROTOTYPE];var QObject=global.QObject;var NATIVE_SYMBOL=__webpack_require__(\"mk1t\");var USE_SETTER=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild;var setSymbolDescriptor=DESCRIPTORS&&fails(function(){return nativeObjectCreate(nativeDefineProperty({},\"a\",{get:function(){return nativeDefineProperty(this,\"a\",{value:7}).a}})).a!=7})?function(it,key,D){var ObjectPrototypeDescriptor=nativeGetOwnPropertyDescriptor(ObjectPrototype,key);if(ObjectPrototypeDescriptor)delete ObjectPrototype[key];nativeDefineProperty(it,key,D);if(ObjectPrototypeDescriptor&&it!==ObjectPrototype){nativeDefineProperty(ObjectPrototype,key,ObjectPrototypeDescriptor)}}:nativeDefineProperty;var wrap=function(tag,description){var symbol=AllSymbols[tag]=nativeObjectCreate($Symbol[PROTOTYPE]);setInternalState(symbol,{type:SYMBOL,tag:tag,description:description});if(!DESCRIPTORS)symbol.description=description;return symbol};var isSymbol=NATIVE_SYMBOL&&typeof $Symbol.iterator==\"symbol\"?function(it){return typeof it==\"symbol\"}:function(it){return Object(it)instanceof $Symbol};var $defineProperty=function defineProperty(it,key,D){if(it===ObjectPrototype)$defineProperty(ObjectPrototypeSymbols,key,D);anObject(it);key=toPrimitive(key,true);anObject(D);if(has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))nativeDefineProperty(it,HIDDEN,createPropertyDescriptor(1,{}));it[HIDDEN][key]=true}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=nativeObjectCreate(D,{enumerable:createPropertyDescriptor(0,false)})}return setSymbolDescriptor(it,key,D)}return nativeDefineProperty(it,key,D)};var $defineProperties=function defineProperties(it,P){anObject(it);var keys=enumKeys(P=toIndexedObject(P));var i=0;var l=keys.length;var key;while(l>i)$defineProperty(it,key=keys[i++],P[key]);return it};var $create=function create(it,P){return P===undefined?nativeObjectCreate(it):$defineProperties(nativeObjectCreate(it),P)};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=nativePropertyIsEnumerable.call(this,key=toPrimitive(key,true));if(this===ObjectPrototype&&has(AllSymbols,key)&&!has(ObjectPrototypeSymbols,key))return false;return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:true};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){it=toIndexedObject(it);key=toPrimitive(key,true);if(it===ObjectPrototype&&has(AllSymbols,key)&&!has(ObjectPrototypeSymbols,key))return;var D=nativeGetOwnPropertyDescriptor(it,key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=nativeGetOwnPropertyNames(toIndexedObject(it));var result=[];var i=0;var key;while(names.length>i){if(!has(AllSymbols,key=names[i++])&&!has(hiddenKeys,key))result.push(key)}return result};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var IS_OP=it===ObjectPrototype;var names=nativeGetOwnPropertyNames(IS_OP?ObjectPrototypeSymbols:toIndexedObject(it));var result=[];var i=0;var key;while(names.length>i){if(has(AllSymbols,key=names[i++])&&(IS_OP?has(ObjectPrototype,key):true))result.push(AllSymbols[key])}return result};if(!NATIVE_SYMBOL){$Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError(\"Symbol is not a constructor\");var description=arguments[0]===undefined?undefined:String(arguments[0]);var tag=uid(description);var setter=function(value){if(this===ObjectPrototype)setter.call(ObjectPrototypeSymbols,value);if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDescriptor(this,tag,createPropertyDescriptor(1,value))};if(DESCRIPTORS&&USE_SETTER)setSymbolDescriptor(ObjectPrototype,tag,{configurable:true,set:setter});return wrap(tag,description)};redefine($Symbol[PROTOTYPE],\"toString\",function toString(){return getInternalState(this).tag});propertyIsEnumerableModule.f=$propertyIsEnumerable;definePropertyModule.f=$defineProperty;getOwnPropertyDescriptorModule.f=$getOwnPropertyDescriptor;__webpack_require__(\"3Gxb\").f=getOwnPropertyNamesExternal.f=$getOwnPropertyNames;__webpack_require__(\"fw2a\").f=$getOwnPropertySymbols;if(DESCRIPTORS){nativeDefineProperty($Symbol[PROTOTYPE],\"description\",{configurable:true,get:function description(){return getInternalState(this).description}});if(!IS_PURE){redefine(ObjectPrototype,\"propertyIsEnumerable\",$propertyIsEnumerable,{unsafe:true})}}wrappedWellKnownSymbolModule.f=function(name){return wrap(wellKnownSymbol(name),name)}}$export({global:true,wrap:true,forced:!NATIVE_SYMBOL,sham:!NATIVE_SYMBOL},{Symbol:$Symbol});for(var wellKnownSymbols=objectKeys(WellKnownSymbolsStore),k=0;wellKnownSymbols.length>k;){defineWellKnownSymbol(wellKnownSymbols[k++])}$export({target:SYMBOL,stat:true,forced:!NATIVE_SYMBOL},{for:function(key){return has(SymbolRegistry,key+=\"\")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(sym+\" is not a symbol\");for(var key in SymbolRegistry)if(SymbolRegistry[key]===sym)return key},useSetter:function(){USE_SETTER=true},useSimple:function(){USE_SETTER=false}});$export({target:\"Object\",stat:true,forced:!NATIVE_SYMBOL,sham:!DESCRIPTORS},{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor});$export({target:\"Object\",stat:true,forced:!NATIVE_SYMBOL},{getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});JSON&&$export({target:\"JSON\",stat:true,forced:!NATIVE_SYMBOL||fails(function(){var symbol=$Symbol();return nativeJSONStringify([symbol])!=\"[null]\"||nativeJSONStringify({a:symbol})!=\"{}\"||nativeJSONStringify(Object(symbol))!=\"{}\"})},{stringify:function stringify(it){var args=[it];var i=1;var replacer,$replacer;while(arguments.length>i)args.push(arguments[i++]);$replacer=replacer=args[1];if(!isObject(replacer)&&it===undefined||isSymbol(it))return;if(!isArray(replacer))replacer=function(key,value){if(typeof $replacer==\"function\")value=$replacer.call(this,key,value);if(!isSymbol(value))return value};args[1]=replacer;return nativeJSONStringify.apply(JSON,args)}});if(!$Symbol[PROTOTYPE][TO_PRIMITIVE])hide($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);setToStringTag($Symbol,SYMBOL);hiddenKeys[HIDDEN]=true},\"4Ea8\":function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"ysHE\")},\"4IPr\":function(module,exports){module.exports=require(\"_stream_duplex\")},\"4hZ1\":function(module,exports,__webpack_require__){\"use strict\";var _interopRequireDefault=__webpack_require__(\"KI45\");var _classCallCheck2=_interopRequireDefault(__webpack_require__(\"0iUn\"));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(\"MI3g\"));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(\"a7VT\"));var _assertThisInitialized2=_interopRequireDefault(__webpack_require__(\"AT/M\"));var _createClass2=_interopRequireDefault(__webpack_require__(\"sLSF\"));var _inherits2=_interopRequireDefault(__webpack_require__(\"Tit0\"));var _toConsumableArray2=_interopRequireDefault(__webpack_require__(\"dfwq\"));var _set=_interopRequireDefault(__webpack_require__(\"ttDY\"));Object.defineProperty(exports,\"__esModule\",{value:true});var react_1=__webpack_require__(\"q1tI\");var isServer=typeof window===\"undefined\";function withSideEffect(){var mountedInstances=new _set.default;var state;function emitChange(component){state=component.props.reduceComponentsToState((0,_toConsumableArray2.default)(mountedInstances),component.props);if(component.props.handleStateChange){component.props.handleStateChange(state)}}var SideEffect=function(_react_1$Component){(0,_inherits2.default)(SideEffect,_react_1$Component);(0,_createClass2.default)(SideEffect,null,[{key:\"rewind\",value:function rewind(){var recordedState=state;state=undefined;mountedInstances.clear();return recordedState}}]);function SideEffect(props){var _this;(0,_classCallCheck2.default)(this,SideEffect);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(SideEffect).call(this,props));if(isServer){mountedInstances.add((0,_assertThisInitialized2.default)(_this));emitChange((0,_assertThisInitialized2.default)(_this))}return _this}(0,_createClass2.default)(SideEffect,[{key:\"componentDidMount\",value:function componentDidMount(){mountedInstances.add(this);emitChange(this)}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){emitChange(this)}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){mountedInstances.delete(this);emitChange(this)}},{key:\"render\",value:function render(){return null}}]);return SideEffect}(react_1.Component);return SideEffect}exports.default=withSideEffect},\"4mOR\":function(module,exports,__webpack_require__){\"use strict\";var internalFindIndex=__webpack_require__(\"vQkR\")(6);var FIND_INDEX=\"findIndex\";var SKIPS_HOLES=true;if(FIND_INDEX in[])Array(1)[FIND_INDEX](function(){SKIPS_HOLES=false});__webpack_require__(\"pSMy\")({target:\"Array\",proto:true,forced:SKIPS_HOLES},{findIndex:function findIndex(callbackfn){return internalFindIndex(this,callbackfn,arguments.length>1?arguments[1]:undefined)}});__webpack_require__(\"gJLK\")(FIND_INDEX)},\"4mXO\":function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"7TPF\")},\"55jA\":function(module,exports,__webpack_require__){var toIndexedObject=__webpack_require__(\"IutQ\");var toLength=__webpack_require__(\"H6ty\");var toAbsoluteIndex=__webpack_require__(\"GJzV\");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIndexedObject($this);var length=toLength(O.length);var index=toAbsoluteIndex(fromIndex,length);var value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++)if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0}return!IS_INCLUDES&&-1}}},\"57wU\":function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},\"5K7Z\":function(module,exports,__webpack_require__){var isObject=__webpack_require__(\"93I4\");module.exports=function(it){if(!isObject(it))throw TypeError(it+\" is not an object!\");return it}},\"5T2Y\":function(module,exports){var global=module.exports=typeof window!=\"undefined\"&&window.Math==Math?window:typeof self!=\"undefined\"&&self.Math==Math?self:Function(\"return this\")();if(typeof __g==\"number\")__g=global},\"5eG6\":function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"MfhB\")(\"native-function-to-string\",Function.toString)},\"5vMV\":function(module,exports,__webpack_require__){var has=__webpack_require__(\"B+OT\");var toIObject=__webpack_require__(\"NsO/\");var arrayIndexOf=__webpack_require__(\"W070\")(false);var IE_PROTO=__webpack_require__(\"VVlx\")(\"IE_PROTO\");module.exports=function(object,names){var O=toIObject(object);var i=0;var result=[];var key;for(key in O)if(key!=IE_PROTO)has(O,key)&&result.push(key);while(names.length>i)if(has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key)}return result}},\"6/1s\":function(module,exports,__webpack_require__){var META=__webpack_require__(\"YqAc\")(\"meta\");var isObject=__webpack_require__(\"93I4\");var has=__webpack_require__(\"B+OT\");var setDesc=__webpack_require__(\"2faE\").f;var id=0;var isExtensible=Object.isExtensible||function(){return true};var FREEZE=!__webpack_require__(\"KUxP\")(function(){return isExtensible(Object.preventExtensions({}))});var setMeta=function(it){setDesc(it,META,{value:{i:\"O\"+ ++id,w:{}}})};var fastKey=function(it,create){if(!isObject(it))return typeof it==\"symbol\"?it:(typeof it==\"string\"?\"S\":\"P\")+it;if(!has(it,META)){if(!isExtensible(it))return\"F\";if(!create)return\"E\";setMeta(it)}return it[META].i};var getWeak=function(it,create){if(!has(it,META)){if(!isExtensible(it))return true;if(!create)return false;setMeta(it)}return it[META].w};var onFreeze=function(it){if(FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META))setMeta(it);return it};var meta=module.exports={KEY:META,NEED:false,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze}},\"67Bq\":function(module){module.exports={}},\"6CmU\":function(module,exports,__webpack_require__){__webpack_require__(\"LzdP\");module.exports=__webpack_require__(\"WEpk\").Date.now},\"6Z2F\":function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});const path_1=__webpack_require__(\"oyvS\");const utils_1=__webpack_require__(\"Keko\");const constants_1=__webpack_require__(\"dDGi\");const normalize_page_path_1=__webpack_require__(\"f7u1\");function pageNotFoundError(page){const err=new Error(`Cannot find module for page: ${page}`);err.code=\"ENOENT\";return err}exports.pageNotFoundError=pageNotFoundError;exports.tryAmp=((manifest,page)=>{page=page===\"/\"?\"/index\":page;const hasAmp=manifest[page+\".amp\"];if(hasAmp){page+=\".amp\"}else if(manifest[page+\"/index.amp\"]){page+=\"/index.amp\"}return page});function getPagePath(page,distDir,opts={}){const serverBuildPath=path_1.join(distDir,constants_1.SERVER_DIRECTORY);const pagesManifest=__webpack_require__(\"Jljl\")(path_1.join(serverBuildPath,constants_1.PAGES_MANIFEST));try{page=normalize_page_path_1.normalizePagePath(page);if(opts.amphtml||!pagesManifest[page]){page=exports.tryAmp(pagesManifest,page);const isAmp=page.endsWith(\".amp\");if(opts.amphtml&&!isAmp){page+=\".amp\"}opts.amphtml=opts.amphtml||isAmp}}catch(err){console.error(err);throw pageNotFoundError(page)}if(!pagesManifest[page]){throw pageNotFoundError(page)}return path_1.join(serverBuildPath,pagesManifest[page])}exports.getPagePath=getPagePath;function requirePage(page,distDir,opts={}){const pagePath=getPagePath(page,distDir,opts);const isAmp=utils_1.isAmpFile(pagePath);let hasAmp=false;if(!isAmp){try{hasAmp=utils_1.isAmpFile(getPagePath(page,distDir,{amphtml:true}))}catch(_){}}opts.amphtml=opts.amphtml||isAmp;return{hasAmp:hasAmp,mod:__webpack_require__(\"Jljl\")(pagePath)}}exports.requirePage=requirePage},\"6tYh\":function(module,exports,__webpack_require__){var isObject=__webpack_require__(\"93I4\");var anObject=__webpack_require__(\"5K7Z\");var check=function(O,proto){anObject(O);if(!isObject(proto)&&proto!==null)throw TypeError(proto+\": can't set as prototype!\")};module.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(test,buggy,set){try{set=__webpack_require__(\"2GTP\")(Function.call,__webpack_require__(\"vwuL\").f(Object.prototype,\"__proto__\").set,2);set(test,[]);buggy=!(test instanceof Array)}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}({},false):undefined),check:check}},\"73IE\":function(module,exports,__webpack_require__){\"use strict\";var toLength=__webpack_require__(\"H6ty\");var validateArguments=__webpack_require__(\"hEy5\");var STARTS_WITH=\"startsWith\";var CORRECT_IS_REGEXP_LOGIC=__webpack_require__(\"z5ME\")(STARTS_WITH);var nativeStartsWith=\"\"[STARTS_WITH];__webpack_require__(\"pSMy\")({target:\"String\",proto:true,forced:!CORRECT_IS_REGEXP_LOGIC},{startsWith:function startsWith(searchString){var that=validateArguments(this,searchString,STARTS_WITH);var index=toLength(Math.min(arguments.length>1?arguments[1]:undefined,that.length));var search=String(searchString);return nativeStartsWith?nativeStartsWith.call(that,search,index):that.slice(index,index+search.length)===search}})},\"7TPF\":function(module,exports,__webpack_require__){__webpack_require__(\"AUvm\");module.exports=__webpack_require__(\"WEpk\").Object.getOwnPropertySymbols},\"7WL4\":function(module,exports){module.exports=require(\"https\")},\"7X3U\":function(module,exports,__webpack_require__){var Stream=__webpack_require__(\"msIP\").Stream,util=__webpack_require__(\"jK02\"),driver=__webpack_require__(\"qf7z\"),Headers=__webpack_require__(\"q+85\"),API=__webpack_require__(\"2RBK\"),EventTarget=__webpack_require__(\"sWNQ\"),Event=__webpack_require__(\"AhIK\");var EventSource=function(request,response,options){this.writable=true;options=options||{};this._stream=response.socket;this._ping=options.ping||this.DEFAULT_PING;this._retry=options.retry||this.DEFAULT_RETRY;var scheme=driver.isSecureRequest(request)?\"https:\":\"http:\";this.url=scheme+\"//\"+request.headers.host+request.url;this.lastEventId=request.headers[\"last-event-id\"]||\"\";this.readyState=API.CONNECTING;var headers=new Headers,self=this;if(options.headers){for(var key in options.headers)headers.set(key,options.headers[key])}if(!this._stream||!this._stream.writable)return;process.nextTick(function(){self._open()});this._stream.setTimeout(0);this._stream.setNoDelay(true);var handshake=\"HTTP/1.1 200 OK\\r\\n\"+\"Content-Type: text/event-stream\\r\\n\"+\"Cache-Control: no-cache, no-store\\r\\n\"+\"Connection: close\\r\\n\"+headers.toString()+\"\\r\\n\"+\"retry: \"+Math.floor(this._retry*1e3)+\"\\r\\n\\r\\n\";this._write(handshake);this._stream.on(\"drain\",function(){self.emit(\"drain\")});if(this._ping)this._pingTimer=setInterval(function(){self.ping()},this._ping*1e3);[\"error\",\"end\"].forEach(function(event){self._stream.on(event,function(){self.close()})})};util.inherits(EventSource,Stream);EventSource.isEventSource=function(request){if(request.method!==\"GET\")return false;var accept=(request.headers.accept||\"\").split(/\\s*,\\s*/);return accept.indexOf(\"text/event-stream\")>=0};var instance={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(chunk){if(!this.writable)return false;try{return this._stream.write(chunk,\"utf8\")}catch(e){return false}},_open:function(){if(this.readyState!==API.CONNECTING)return;this.readyState=API.OPEN;var event=new Event(\"open\");event.initEvent(\"open\",false,false);this.dispatchEvent(event)},write:function(message){return this.send(message)},end:function(message){if(message!==undefined)this.write(message);this.close()},send:function(message,options){if(this.readyState>API.OPEN)return false;message=String(message).replace(/(\\r\\n|\\r|\\n)/g,\"$1data: \");options=options||{};var frame=\"\";if(options.event)frame+=\"event: \"+options.event+\"\\r\\n\";if(options.id)frame+=\"id: \"+options.id+\"\\r\\n\";frame+=\"data: \"+message+\"\\r\\n\\r\\n\";return this._write(frame)},ping:function(){return this._write(\":\\r\\n\\r\\n\")},close:function(){if(this.readyState>API.OPEN)return false;this.readyState=API.CLOSED;this.writable=false;if(this._pingTimer)clearInterval(this._pingTimer);if(this._stream)this._stream.end();var event=new Event(\"close\");event.initEvent(\"close\",false,false);this.dispatchEvent(event);return true}};for(var method in instance)EventSource.prototype[method]=instance[method];for(var key in EventTarget)EventSource.prototype[key]=EventTarget[key];module.exports=EventSource},\"7xuS\":function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"T3Qk\")},\"8HKJ\":function(module,exports,__webpack_require__){\"use strict\";var Cell=__webpack_require__(\"N1ro\"),Pledge=__webpack_require__(\"+7ve\");var Pipeline=function(sessions){this._cells=sessions.map(function(session){return new Cell(session)});this._stopped={incoming:false,outgoing:false}};Pipeline.prototype.processIncomingMessage=function(message,callback,context){if(this._stopped.incoming)return;this._loop(\"incoming\",this._cells.length-1,-1,-1,message,callback,context)};Pipeline.prototype.processOutgoingMessage=function(message,callback,context){if(this._stopped.outgoing)return;this._loop(\"outgoing\",0,this._cells.length,1,message,callback,context)};Pipeline.prototype.close=function(callback,context){this._stopped={incoming:true,outgoing:true};var closed=this._cells.map(function(a){return a.close()});if(callback)Pledge.all(closed).then(function(){callback.call(context)})};Pipeline.prototype._loop=function(direction,start,end,step,message,callback,context){var cells=this._cells,n=cells.length,self=this;while(n--)cells[n].pending(direction);var pipe=function(index,error,msg){if(index===end)return callback.call(context,error,msg);cells[index][direction](error,msg,function(err,m){if(err)self._stopped[direction]=true;pipe(index+step,err,m)})};pipe(start,null,message)};module.exports=Pipeline},\"8gHz\":function(module,exports,__webpack_require__){var anObject=__webpack_require__(\"5K7Z\");var aFunction=__webpack_require__(\"eaoh\");var SPECIES=__webpack_require__(\"UWiX\")(\"species\");module.exports=function(O,D){var C=anObject(O).constructor;var S;return C===undefined||(S=anObject(C)[SPECIES])==undefined?D:aFunction(S)}},\"8iia\":function(module,exports,__webpack_require__){var classof=__webpack_require__(\"QMMT\");var from=__webpack_require__(\"RRc/\");module.exports=function(NAME){return function toJSON(){if(classof(this)!=NAME)throw TypeError(NAME+\"#toJSON isn't generic\");return from(this)}}},\"93I4\":function(module,exports){module.exports=function(it){return typeof it===\"object\"?it!==null:typeof it===\"function\"}},\"9BDd\":function(module,exports,__webpack_require__){__webpack_require__(\"GvbO\");module.exports=__webpack_require__(\"WEpk\").Array.isArray},\"9Jkg\":function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"oh+g\")},\"9Nts\":function(module,exports){module.exports=function(it){if(it==undefined)throw TypeError(\"Can't call method on \"+it);return it}},\"9UdO\":function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"dispose\")},\"9kyW\":function(module,exports,__webpack_require__){\"use strict\";function hash(str){var hash=5381,i=str.length;while(i){hash=hash*33^str.charCodeAt(--i)}return hash>>>0}module.exports=hash},\"9r11\":function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"ArVK\")},A5Xg:function(module,exports,__webpack_require__){var toIObject=__webpack_require__(\"NsO/\");var gOPN=__webpack_require__(\"ar/p\").f;var toString={}.toString;var windowNames=typeof window==\"object\"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}};module.exports.f=function getOwnPropertyNames(it){return windowNames&&toString.call(it)==\"[object Window]\"?getWindowNames(it):gOPN(toIObject(it))}},A9d8:function(module,exports,__webpack_require__){\"use strict\";var IteratorPrototype=__webpack_require__(\"YxH6\").IteratorPrototype;var create=__webpack_require__(\"tzov\");var createPropertyDescriptor=__webpack_require__(\"2Hee\");var setToStringTag=__webpack_require__(\"S4gH\");var Iterators=__webpack_require__(\"0i0S\");var returnThis=function(){return this};module.exports=function(IteratorConstructor,NAME,next){var TO_STRING_TAG=NAME+\" Iterator\";IteratorConstructor.prototype=create(IteratorPrototype,{next:createPropertyDescriptor(1,next)});setToStringTag(IteratorConstructor,TO_STRING_TAG,false,true);Iterators[TO_STRING_TAG]=returnThis;return IteratorConstructor}},\"AT/M\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,\"default\",function(){return _assertThisInitialized});function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}},AUvm:function(module,exports,__webpack_require__){\"use strict\";var global=__webpack_require__(\"5T2Y\");var has=__webpack_require__(\"B+OT\");var DESCRIPTORS=__webpack_require__(\"jmDH\");var $export=__webpack_require__(\"Y7ZC\");var redefine=__webpack_require__(\"kTiW\");var META=__webpack_require__(\"6/1s\").KEY;var $fails=__webpack_require__(\"KUxP\");var shared=__webpack_require__(\"29s/\");var setToStringTag=__webpack_require__(\"RfKB\");var uid=__webpack_require__(\"YqAc\");var wks=__webpack_require__(\"UWiX\");var wksExt=__webpack_require__(\"zLkG\");var wksDefine=__webpack_require__(\"Zxgi\");var enumKeys=__webpack_require__(\"R+7+\");var isArray=__webpack_require__(\"kAMH\");var anObject=__webpack_require__(\"5K7Z\");var isObject=__webpack_require__(\"93I4\");var toIObject=__webpack_require__(\"NsO/\");var toPrimitive=__webpack_require__(\"G8Mo\");var createDesc=__webpack_require__(\"rr1i\");var _create=__webpack_require__(\"oVml\");var gOPNExt=__webpack_require__(\"A5Xg\");var $GOPD=__webpack_require__(\"vwuL\");var $DP=__webpack_require__(\"2faE\");var $keys=__webpack_require__(\"w6GO\");var gOPD=$GOPD.f;var dP=$DP.f;var gOPN=gOPNExt.f;var $Symbol=global.Symbol;var $JSON=global.JSON;var _stringify=$JSON&&$JSON.stringify;var PROTOTYPE=\"prototype\";var HIDDEN=wks(\"_hidden\");var TO_PRIMITIVE=wks(\"toPrimitive\");var isEnum={}.propertyIsEnumerable;var SymbolRegistry=shared(\"symbol-registry\");var AllSymbols=shared(\"symbols\");var OPSymbols=shared(\"op-symbols\");var ObjectProto=Object[PROTOTYPE];var USE_NATIVE=typeof $Symbol==\"function\";var QObject=global.QObject;var setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild;var setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create(dP({},\"a\",{get:function(){return dP(this,\"a\",{value:7}).a}})).a!=7})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);if(protoDesc)delete ObjectProto[key];dP(it,key,D);if(protoDesc&&it!==ObjectProto)dP(ObjectProto,key,protoDesc)}:dP;var wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol[PROTOTYPE]);sym._k=tag;return sym};var isSymbol=USE_NATIVE&&typeof $Symbol.iterator==\"symbol\"?function(it){return typeof it==\"symbol\"}:function(it){return it instanceof $Symbol};var $defineProperty=function defineProperty(it,key,D){if(it===ObjectProto)$defineProperty(OPSymbols,key,D);anObject(it);key=toPrimitive(key,true);anObject(D);if(has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))dP(it,HIDDEN,createDesc(1,{}));it[HIDDEN][key]=true}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=_create(D,{enumerable:createDesc(0,false)})}return setSymbolDesc(it,key,D)}return dP(it,key,D)};var $defineProperties=function defineProperties(it,P){anObject(it);var keys=enumKeys(P=toIObject(P));var i=0;var l=keys.length;var key;while(l>i)$defineProperty(it,key=keys[i++],P[key]);return it};var $create=function create(it,P){return P===undefined?_create(it):$defineProperties(_create(it),P)};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key=toPrimitive(key,true));if(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return false;return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:true};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){it=toIObject(it);key=toPrimitive(key,true);if(it===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return;var D=gOPD(it,key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=gOPN(toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(!has(AllSymbols,key=names[i++])&&key!=HIDDEN&&key!=META)result.push(key)}return result};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var IS_OP=it===ObjectProto;var names=gOPN(IS_OP?OPSymbols:toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(has(AllSymbols,key=names[i++])&&(IS_OP?has(ObjectProto,key):true))result.push(AllSymbols[key])}return result};if(!USE_NATIVE){$Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError(\"Symbol is not a constructor!\");var tag=uid(arguments.length>0?arguments[0]:undefined);var $set=function(value){if(this===ObjectProto)$set.call(OPSymbols,value);if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDesc(this,tag,createDesc(1,value))};if(DESCRIPTORS&&setter)setSymbolDesc(ObjectProto,tag,{configurable:true,set:$set});return wrap(tag)};redefine($Symbol[PROTOTYPE],\"toString\",function toString(){return this._k});$GOPD.f=$getOwnPropertyDescriptor;$DP.f=$defineProperty;__webpack_require__(\"ar/p\").f=gOPNExt.f=$getOwnPropertyNames;__webpack_require__(\"NV0k\").f=$propertyIsEnumerable;__webpack_require__(\"mqlF\").f=$getOwnPropertySymbols;if(DESCRIPTORS&&!__webpack_require__(\"uOPS\")){redefine(ObjectProto,\"propertyIsEnumerable\",$propertyIsEnumerable,true)}wksExt.f=function(name){return wrap(wks(name))}}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),j=0;es6Symbols.length>j;)wks(es6Symbols[j++]);for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;)wksDefine(wellKnownSymbols[k++]);$export($export.S+$export.F*!USE_NATIVE,\"Symbol\",{for:function(key){return has(SymbolRegistry,key+=\"\")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(sym+\" is not a symbol!\");for(var key in SymbolRegistry)if(SymbolRegistry[key]===sym)return key},useSetter:function(){setter=true},useSimple:function(){setter=false}});$export($export.S+$export.F*!USE_NATIVE,\"Object\",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();return _stringify([S])!=\"[null]\"||_stringify({a:S})!=\"{}\"||_stringify(Object(S))!=\"{}\"})),\"JSON\",{stringify:function stringify(it){var args=[it];var i=1;var replacer,$replacer;while(arguments.length>i)args.push(arguments[i++]);$replacer=replacer=args[1];if(!isObject(replacer)&&it===undefined||isSymbol(it))return;if(!isArray(replacer))replacer=function(key,value){if(typeof $replacer==\"function\")value=$replacer.call(this,key,value);if(!isSymbol(value))return value};args[1]=replacer;return _stringify.apply($JSON,args)}});$Symbol[PROTOTYPE][TO_PRIMITIVE]||__webpack_require__(\"NegM\")($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);setToStringTag($Symbol,\"Symbol\");setToStringTag(Math,\"Math\",true);setToStringTag(global.JSON,\"JSON\",true)},AXZJ:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});const ESCAPE_LOOKUP={\"&\":\"\\\\u0026\",\">\":\"\\\\u003e\",\"<\":\"\\\\u003c\",\"\\u2028\":\"\\\\u2028\",\"\\u2029\":\"\\\\u2029\"};const ESCAPE_REGEX=/[&><\\u2028\\u2029]/g;function htmlEscapeJsonString(str){return str.replace(ESCAPE_REGEX,match=>ESCAPE_LOOKUP[match])}exports.htmlEscapeJsonString=htmlEscapeJsonString},AhIK:function(module,exports){var Event=function(eventType,options){this.type=eventType;for(var key in options)this[key]=options[key]};Event.prototype.initEvent=function(eventType,canBubble,cancelable){this.type=eventType;this.bubbles=canBubble;this.cancelable=cancelable};Event.prototype.stopPropagation=function(){};Event.prototype.preventDefault=function(){};Event.CAPTURING_PHASE=1;Event.AT_TARGET=2;Event.BUBBLING_PHASE=3;module.exports=Event},ApPD:function(module,exports,__webpack_require__){var toObject=__webpack_require__(\"JB68\");var $getPrototypeOf=__webpack_require__(\"U+KD\");__webpack_require__(\"zn7N\")(\"getPrototypeOf\",function(){return function getPrototypeOf(it){return $getPrototypeOf(toObject(it))}})},ArVK:function(module,exports,__webpack_require__){__webpack_require__(\"d8cw\");module.exports=__webpack_require__(\"vLVD\")(\"Array\",\"find\")},AzCm:function(module,exports,__webpack_require__){\"use strict\";var crypto=__webpack_require__(\"PJMN\"),url=__webpack_require__(\"bzos\"),util=__webpack_require__(\"jK02\"),HttpParser=__webpack_require__(\"ziip\"),Base=__webpack_require__(\"Wdmt\"),Hybi=__webpack_require__(\"dt2+\"),Proxy=__webpack_require__(\"zzpY\");var Client=function(_url,options){this.version=\"hybi-13\";Hybi.call(this,null,_url,options);this.readyState=-1;this._key=Client.generateKey();this._accept=Hybi.generateAccept(this._key);this._http=new HttpParser(\"response\");var uri=url.parse(this.url),auth=uri.auth&&new Buffer(uri.auth,\"utf8\").toString(\"base64\");if(this.VALID_PROTOCOLS.indexOf(uri.protocol)<0)throw new Error(this.url+\" is not a valid WebSocket URL\");this._pathname=(uri.pathname||\"/\")+(uri.search||\"\");this._headers.set(\"Host\",uri.host);this._headers.set(\"Upgrade\",\"websocket\");this._headers.set(\"Connection\",\"Upgrade\");this._headers.set(\"Sec-WebSocket-Key\",this._key);this._headers.set(\"Sec-WebSocket-Version\",\"13\");if(this._protocols.length>0)this._headers.set(\"Sec-WebSocket-Protocol\",this._protocols.join(\", \"));if(auth)this._headers.set(\"Authorization\",\"Basic \"+auth)};util.inherits(Client,Hybi);Client.generateKey=function(){return crypto.randomBytes(16).toString(\"base64\")};var instance={VALID_PROTOCOLS:[\"ws:\",\"wss:\"],proxy:function(origin,options){return new Proxy(this,origin,options)},start:function(){if(this.readyState!==-1)return false;this._write(this._handshakeRequest());this.readyState=0;return true},parse:function(chunk){if(this.readyState===3)return;if(this.readyState>0)return Hybi.prototype.parse.call(this,chunk);this._http.parse(chunk);if(!this._http.isComplete())return;this._validateHandshake();if(this.readyState===3)return;this._open();this.parse(this._http.body)},_handshakeRequest:function(){var extensions=this._extensions.generateOffer();if(extensions)this._headers.set(\"Sec-WebSocket-Extensions\",extensions);var start=\"GET \"+this._pathname+\" HTTP/1.1\",headers=[start,this._headers.toString(),\"\"];return new Buffer(headers.join(\"\\r\\n\"),\"utf8\")},_failHandshake:function(message){message=\"Error during WebSocket handshake: \"+message;this.readyState=3;this.emit(\"error\",new Error(message));this.emit(\"close\",new Base.CloseEvent(this.ERRORS.protocol_error,message))},_validateHandshake:function(){this.statusCode=this._http.statusCode;this.headers=this._http.headers;if(this._http.error)return this._failHandshake(this._http.error.message);if(this._http.statusCode!==101)return this._failHandshake(\"Unexpected response code: \"+this._http.statusCode);var headers=this._http.headers,upgrade=headers[\"upgrade\"]||\"\",connection=headers[\"connection\"]||\"\",accept=headers[\"sec-websocket-accept\"]||\"\",protocol=headers[\"sec-websocket-protocol\"]||\"\";if(upgrade===\"\")return this._failHandshake(\"'Upgrade' header is missing\");if(upgrade.toLowerCase()!==\"websocket\")return this._failHandshake(\"'Upgrade' header value is not 'WebSocket'\");if(connection===\"\")return this._failHandshake(\"'Connection' header is missing\");if(connection.toLowerCase()!==\"upgrade\")return this._failHandshake(\"'Connection' header value is not 'Upgrade'\");if(accept!==this._accept)return this._failHandshake(\"Sec-WebSocket-Accept mismatch\");this.protocol=null;if(protocol!==\"\"){if(this._protocols.indexOf(protocol)<0)return this._failHandshake(\"Sec-WebSocket-Protocol mismatch\");else this.protocol=protocol}try{this._extensions.activate(this.headers[\"sec-websocket-extensions\"])}catch(e){return this._failHandshake(e.message)}}};for(var key in instance)Client.prototype[key]=instance[key];module.exports=Client},AzFY:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"tuBy\")},\"B+OT\":function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},B5Ud:function(module,exports,__webpack_require__){\"use strict\";var _interopRequireDefault=__webpack_require__(\"KI45\");var _regenerator=_interopRequireDefault(__webpack_require__(\"ln6h\"));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(\"+oT+\"));var _assign=_interopRequireDefault(__webpack_require__(\"UXZV\"));var _classCallCheck2=_interopRequireDefault(__webpack_require__(\"/HRN\"));var _createClass2=_interopRequireDefault(__webpack_require__(\"WaGi\"));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(\"ZDA2\"));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(\"/+P4\"));var _inherits2=_interopRequireDefault(__webpack_require__(\"N9n2\"));var __importStar=void 0&&(void 0).__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod){if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k]}result[\"default\"]=mod;return result};var __importDefault=void 0&&(void 0).__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,\"__esModule\",{value:true});var react_1=__importStar(__webpack_require__(\"q1tI\"));var prop_types_1=__importDefault(__webpack_require__(\"17x9\"));var utils_1=__webpack_require__(\"Bu4q\");var router_1=__webpack_require__(\"nOHt\");var App=function(_react_1$Component){(0,_inherits2.default)(App,_react_1$Component);function App(){(0,_classCallCheck2.default)(this,App);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(App).apply(this,arguments))}(0,_createClass2.default)(App,[{key:\"getChildContext\",value:function getChildContext(){return{router:router_1.makePublicRouterInstance(this.props.router)}}},{key:\"componentDidCatch\",value:function componentDidCatch(err){throw err}},{key:\"render\",value:function render(){var _this$props=this.props,router=_this$props.router,Component=_this$props.Component,pageProps=_this$props.pageProps;var url=createUrl(router);return react_1.default.createElement(Container,null,react_1.default.createElement(Component,(0,_assign.default)({},pageProps,{url:url})))}}],[{key:\"getInitialProps\",value:function(){var _getInitialProps=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(_ref){var Component,router,ctx,pageProps;return _regenerator.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Component=_ref.Component,router=_ref.router,ctx=_ref.ctx;_context.next=3;return utils_1.loadGetInitialProps(Component,ctx);case 3:pageProps=_context.sent;return _context.abrupt(\"return\",{pageProps:pageProps});case 5:case\"end\":return _context.stop()}}},_callee)}));function getInitialProps(_x){return _getInitialProps.apply(this,arguments)}return getInitialProps}()}]);return App}(react_1.Component);App.childContextTypes={router:prop_types_1.default.object};exports.default=App;var Container=function(_react_1$Component2){(0,_inherits2.default)(Container,_react_1$Component2);function Container(){(0,_classCallCheck2.default)(this,Container);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Container).apply(this,arguments))}(0,_createClass2.default)(Container,[{key:\"componentDidMount\",value:function componentDidMount(){this.scrollToHash()}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.scrollToHash()}},{key:\"scrollToHash\",value:function scrollToHash(){var hash=window.location.hash;hash=hash?hash.substring(1):false;if(!hash)return;var el=document.getElementById(hash);if(!el)return;setTimeout(function(){return el.scrollIntoView()},0)}},{key:\"render\",value:function render(){return this.props.children}}]);return Container}(react_1.Component);exports.Container=Container;var warnUrl=utils_1.execOnce(function(){if(false){}});function createUrl(router){var pathname=router.pathname,asPath=router.asPath,query=router.query;return{get query(){warnUrl();return query},get pathname(){warnUrl();return pathname},get asPath(){warnUrl();return asPath},back:function back(){warnUrl();router.back()},push:function push(url,as){warnUrl();return router.push(url,as)},pushTo:function pushTo(href,as){warnUrl();var pushRoute=as?href:null;var pushUrl=as||href;return router.push(pushRoute,pushUrl)},replace:function replace(url,as){warnUrl();return router.replace(url,as)},replaceTo:function replaceTo(href,as){warnUrl();var replaceRoute=as?href:null;var replaceUrl=as||href;return router.replace(replaceRoute,replaceUrl)}}}exports.createUrl=createUrl},B9jh:function(module,exports,__webpack_require__){\"use strict\";var strong=__webpack_require__(\"Wu5q\");var validate=__webpack_require__(\"n3ko\");var SET=\"Set\";module.exports=__webpack_require__(\"raTm\")(SET,function(get){return function Set(){return get(this,arguments.length>0?arguments[0]:undefined)}},{add:function add(value){return strong.def(validate(this,SET),value=value===0?0:value,value)}},strong)},BMJj:function(module,exports,__webpack_require__){\"use strict\";\n/*!\n * fresh\n * Copyright(c) 2012 TJ Holowaychuk\n * Copyright(c) 2016-2017 Douglas Christopher Wilson\n * MIT Licensed\n */var CACHE_CONTROL_NO_CACHE_REGEXP=/(?:^|,)\\s*?no-cache\\s*?(?:,|$)/;module.exports=fresh;function fresh(reqHeaders,resHeaders){var modifiedSince=reqHeaders[\"if-modified-since\"];var noneMatch=reqHeaders[\"if-none-match\"];if(!modifiedSince&&!noneMatch){return false}var cacheControl=reqHeaders[\"cache-control\"];if(cacheControl&&CACHE_CONTROL_NO_CACHE_REGEXP.test(cacheControl)){return false}if(noneMatch&&noneMatch!==\"*\"){var etag=resHeaders[\"etag\"];if(!etag){return false}var etagStale=true;var matches=parseTokenList(noneMatch);for(var i=0;i<matches.length;i++){var match=matches[i];if(match===etag||match===\"W/\"+etag||\"W/\"+match===etag){etagStale=false;break}}if(etagStale){return false}}if(modifiedSince){var lastModified=resHeaders[\"last-modified\"];var modifiedStale=!lastModified||!(parseHttpDate(lastModified)<=parseHttpDate(modifiedSince));if(modifiedStale){return false}}return true}function parseHttpDate(date){var timestamp=date&&Date.parse(date);return typeof timestamp===\"number\"?timestamp:NaN}function parseTokenList(str){var end=0;var list=[];var start=0;for(var i=0,len=str.length;i<len;i++){switch(str.charCodeAt(i)){case 32:if(start===end){start=end=i+1}break;case 44:list.push(str.substring(start,end));start=end=i+1;break;default:end=i+1;break}}list.push(str.substring(start,end));return list}},Bhuq:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"+plK\")},BloW:function(module,exports,__webpack_require__){var nativeFunctionToString=__webpack_require__(\"5eG6\");var WeakMap=__webpack_require__(\"ysHE\").WeakMap;module.exports=typeof WeakMap===\"function\"&&/native code/.test(nativeFunctionToString.call(WeakMap))},Bu4q:function(module,exports,__webpack_require__){\"use strict\";var _interopRequireDefault=__webpack_require__(\"KI45\");var _regenerator=_interopRequireDefault(__webpack_require__(\"ln6h\"));var _keys=_interopRequireDefault(__webpack_require__(\"pLtp\"));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(\"O40h\"));Object.defineProperty(exports,\"__esModule\",{value:true});var url_1=__webpack_require__(\"bzos\");function execOnce(fn){var _this=this;var used=false;return function(){if(!used){used=true;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}fn.apply(_this,args)}}}exports.execOnce=execOnce;function getLocationOrigin(){var _window$location=window.location,protocol=_window$location.protocol,hostname=_window$location.hostname,port=_window$location.port;return\"\".concat(protocol,\"//\").concat(hostname).concat(port?\":\"+port:\"\")}exports.getLocationOrigin=getLocationOrigin;function getURL(){var href=window.location.href;var origin=getLocationOrigin();return href.substring(origin.length)}exports.getURL=getURL;function getDisplayName(Component){return typeof Component===\"string\"?Component:Component.displayName||Component.name||\"Unknown\"}exports.getDisplayName=getDisplayName;function isResSent(res){return res.finished||res.headersSent}exports.isResSent=isResSent;function loadGetInitialProps(_x,_x2){return _loadGetInitialProps.apply(this,arguments)}function _loadGetInitialProps(){_loadGetInitialProps=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(Component,ctx){var message,props,_message;return _regenerator.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(true){_context.next=4;break}if(!(Component.prototype&&Component.prototype.getInitialProps)){_context.next=4;break}message='\"'.concat(getDisplayName(Component),'.getInitialProps()\" is defined as an instance method - visit https://err.sh/zeit/next.js/get-initial-props-as-an-instance-method for more information.');throw new Error(message);case 4:if(Component.getInitialProps){_context.next=6;break}return _context.abrupt(\"return\",{});case 6:_context.next=8;return Component.getInitialProps(ctx);case 8:props=_context.sent;if(!(ctx.res&&isResSent(ctx.res))){_context.next=11;break}return _context.abrupt(\"return\",props);case 11:if(props){_context.next=14;break}_message='\"'.concat(getDisplayName(Component),'.getInitialProps()\" should resolve to an object. But found \"').concat(props,'\" instead.');throw new Error(_message);case 14:return _context.abrupt(\"return\",props);case 15:case\"end\":return _context.stop()}}},_callee)}));return _loadGetInitialProps.apply(this,arguments)}exports.loadGetInitialProps=loadGetInitialProps;exports.urlObjectKeys=[\"auth\",\"hash\",\"host\",\"hostname\",\"href\",\"path\",\"pathname\",\"port\",\"protocol\",\"query\",\"search\",\"slashes\"];function formatWithValidation(url,options){if(false){}return url_1.format(url,options)}exports.formatWithValidation=formatWithValidation},C2SN:function(module,exports,__webpack_require__){var isObject=__webpack_require__(\"93I4\");var isArray=__webpack_require__(\"kAMH\");var SPECIES=__webpack_require__(\"UWiX\")(\"species\");module.exports=function(original){var C;if(isArray(original)){C=original.constructor;if(typeof C==\"function\"&&(C===Array||isArray(C.prototype)))C=undefined;if(isObject(C)){C=C[SPECIES];if(C===null)C=undefined}}return C===undefined?Array:C}},CMMD:function(module,exports,__webpack_require__){\"use strict\";__webpack_require__(\"LOEa\");\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */},Cg2A:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"6CmU\")},D8kY:function(module,exports,__webpack_require__){var toInteger=__webpack_require__(\"Ojgd\");var max=Math.max;var min=Math.min;module.exports=function(index,length){index=toInteger(index);return index<0?max(index+length,0):min(index,length)}},DTay:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"nWF0\")},\"Dd/+\":function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"unscopables\")},EXMj:function(module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||forbiddenField!==undefined&&forbiddenField in it){throw TypeError(name+\": incorrect invocation!\")}return it}},Ejeu:function(module,exports,__webpack_require__){\"use strict\";var Frame=function(){};var instance={final:false,rsv1:false,rsv2:false,rsv3:false,opcode:null,masked:false,maskingKey:null,lengthBytes:1,length:0,payload:null};for(var key in instance)Frame.prototype[key]=instance[key];module.exports=Frame},FDah:function(module,exports,__webpack_require__){\"use strict\";\n/** @license React v16.8.6\n * react-dom-server.node.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var p=__webpack_require__(\"MgzW\"),q=__webpack_require__(\"q1tI\"),aa=__webpack_require__(\"msIP\");function ba(a,b,d,c,f,e,h,g){if(!a){a=void 0;if(void 0===b)a=Error(\"Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.\");else{var D=[d,c,f,e,h,g],B=0;a=Error(b.replace(/%s/g,function(){return D[B++]}));a.name=\"Invariant Violation\"}a.framesToPop=1;throw a}}function r(a){for(var b=arguments.length-1,d=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=0;c<b;c++)d+=\"&args[]=\"+encodeURIComponent(arguments[c+1]);ba(!1,\"Minified React error #\"+a+\"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \",d)}var v=\"function\"===typeof Symbol&&Symbol.for,ca=v?Symbol.for(\"react.portal\"):60106,x=v?Symbol.for(\"react.fragment\"):60107,da=v?Symbol.for(\"react.strict_mode\"):60108,ea=v?Symbol.for(\"react.profiler\"):60114,z=v?Symbol.for(\"react.provider\"):60109,fa=v?Symbol.for(\"react.context\"):60110,ha=v?Symbol.for(\"react.concurrent_mode\"):60111,ia=v?Symbol.for(\"react.forward_ref\"):60112,A=v?Symbol.for(\"react.suspense\"):60113,ja=v?Symbol.for(\"react.memo\"):60115,ka=v?Symbol.for(\"react.lazy\"):60116;function C(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ha:return\"ConcurrentMode\";case x:return\"Fragment\";case ca:return\"Portal\";case ea:return\"Profiler\";case da:return\"StrictMode\";case A:return\"Suspense\"}if(\"object\"===typeof a)switch(a.$$typeof){case fa:return\"Context.Consumer\";case z:return\"Context.Provider\";case ia:var b=a.render;b=b.displayName||b.name||\"\";return a.displayName||(\"\"!==b?\"ForwardRef(\"+b+\")\":\"ForwardRef\");case ja:return C(a.type);case ka:if(a=1===a._status?a._result:null)return C(a)}return null}var E=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;E.hasOwnProperty(\"ReactCurrentDispatcher\")||(E.ReactCurrentDispatcher={current:null});var la={};function F(a,b){for(var d=a._threadCount|0;d<=b;d++)a[d]=a._currentValue2,a._threadCount=d+1}function ma(a,b,d){var c=a.contextType;if(\"object\"===typeof c&&null!==c)return F(c,d),c[d];if(a=a.contextTypes){d={};for(var f in a)d[f]=b[f];b=d}else b=la;return b}for(var G=new Uint16Array(16),H=0;15>H;H++)G[H]=H+1;G[15]=0;var na=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,oa=Object.prototype.hasOwnProperty,pa={},qa={};function ra(a){if(oa.call(qa,a))return!0;if(oa.call(pa,a))return!1;if(na.test(a))return qa[a]=!0;pa[a]=!0;return!1}function sa(a,b,d,c){if(null!==d&&0===d.type)return!1;switch(typeof b){case\"function\":case\"symbol\":return!0;case\"boolean\":if(c)return!1;if(null!==d)return!d.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}function ta(a,b,d,c){if(null===b||\"undefined\"===typeof b||sa(a,b,d,c))return!0;if(c)return!1;if(null!==d)switch(d.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function I(a,b,d,c,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=c;this.attributeNamespace=f;this.mustUseProperty=d;this.propertyName=a;this.type=b}var J={};\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){J[a]=new I(a,0,!1,a,null)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];J[b]=new I(b,1,!1,a[1],null)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){J[a]=new I(a,2,!1,a.toLowerCase(),null)});[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){J[a]=new I(a,2,!1,a,null)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){J[a]=new I(a,3,!1,a.toLowerCase(),null)});[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){J[a]=new I(a,3,!0,a,null)});[\"capture\",\"download\"].forEach(function(a){J[a]=new I(a,4,!1,a,null)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){J[a]=new I(a,6,!1,a,null)});[\"rowSpan\",\"start\"].forEach(function(a){J[a]=new I(a,5,!1,a.toLowerCase(),null)});var K=/[\\-:]([a-z])/g;function L(a){return a[1].toUpperCase()}\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(K,L);J[b]=new I(b,1,!1,a,null)});\"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(K,L);J[b]=new I(b,1,!1,a,\"http://www.w3.org/1999/xlink\")});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(K,L);J[b]=new I(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\")});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){J[a]=new I(a,1,!1,a.toLowerCase(),null)});var ua=/[\"'&<>]/;function M(a){if(\"boolean\"===typeof a||\"number\"===typeof a)return\"\"+a;a=\"\"+a;var b=ua.exec(a);if(b){var d=\"\",c,f=0;for(c=b.index;c<a.length;c++){switch(a.charCodeAt(c)){case 34:b=\"&quot;\";break;case 38:b=\"&amp;\";break;case 39:b=\"&#x27;\";break;case 60:b=\"&lt;\";break;case 62:b=\"&gt;\";break;default:continue}f!==c&&(d+=a.substring(f,c));f=c+1;d+=b}a=f!==c?d+a.substring(f,c):d}return a}var N=null,O=null,P=null,Q=!1,S=!1,T=null,U=0;function V(){null===N?r(\"321\"):void 0;return N}function va(){0<U&&r(\"312\");return{memoizedState:null,queue:null,next:null}}function W(){null===P?null===O?(Q=!1,O=P=va()):(Q=!0,P=O):null===P.next?(Q=!1,P=P.next=va()):(Q=!0,P=P.next);return P}function wa(a,b,d,c){for(;S;)S=!1,U+=1,P=null,d=a(b,c);O=N=null;U=0;P=T=null;return d}function xa(a,b){return\"function\"===typeof b?b(a):b}function ya(a,b,d){N=V();P=W();if(Q){var c=P.queue;b=c.dispatch;if(null!==T&&(d=T.get(c),void 0!==d)){T.delete(c);c=P.memoizedState;do{c=a(c,d.action),d=d.next}while(null!==d);P.memoizedState=c;return[c,b]}return[P.memoizedState,b]}a=a===xa?\"function\"===typeof b?b():b:void 0!==d?d(b):b;P.memoizedState=a;a=P.queue={last:null,dispatch:null};a=a.dispatch=za.bind(null,N,a);return[P.memoizedState,a]}function za(a,b,d){25>U?void 0:r(\"301\");if(a===N)if(S=!0,a={action:d,next:null},null===T&&(T=new Map),d=T.get(b),void 0===d)T.set(b,a);else{for(b=d;null!==b.next;)b=b.next;b.next=a}}function Aa(){}var X=0,Ba={readContext:function(a){var b=X;F(a,b);return a[b]},useContext:function(a){V();var b=X;F(a,b);return a[b]},useMemo:function(a,b){N=V();P=W();b=void 0===b?null:b;if(null!==P){var d=P.memoizedState;if(null!==d&&null!==b){a:{var c=d[1];if(null===c)c=!1;else{for(var f=0;f<c.length&&f<b.length;f++){var e=b[f],h=c[f];if((e!==h||0===e&&1/e!==1/h)&&(e===e||h===h)){c=!1;break a}}c=!0}}if(c)return d[0]}}a=a();P.memoizedState=[a,b];return a},useReducer:ya,useRef:function(a){N=V();P=W();var b=P.memoizedState;return null===b?(a={current:a},P.memoizedState=a):b},useState:function(a){return ya(xa,a)},useLayoutEffect:function(){},useCallback:function(a){return a},useImperativeHandle:Aa,useEffect:Aa,useDebugValue:Aa},Ca={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};function Da(a){switch(a){case\"svg\":return\"http://www.w3.org/2000/svg\";case\"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}var Ea={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Fa=p({menuitem:!0},Ea),Y={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ga=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(Y).forEach(function(a){Ga.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);Y[b]=Y[a]})});var Ha=/([A-Z])/g,Ia=/^ms-/,Z=q.Children.toArray,Ja=E.ReactCurrentDispatcher,Ka={listing:!0,pre:!0,textarea:!0},La=/^[a-zA-Z][a-zA-Z:_\\.\\-\\d]*$/,Ma={},Na={};function Oa(a){if(void 0===a||null===a)return a;var b=\"\";q.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}var Pa=Object.prototype.hasOwnProperty,Qa={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Ra(a,b){void 0===a&&r(\"152\",C(b)||\"Component\")}function Sa(a,b,d){function c(c,f){var e=ma(f,b,d),g=[],h=!1,l={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===g)return null},enqueueReplaceState:function(a,b){h=!0;g=[b]},enqueueSetState:function(a,b){if(null===g)return null;g.push(b)}},k=void 0;if(f.prototype&&f.prototype.isReactComponent){if(k=new f(c.props,e,l),\"function\"===typeof f.getDerivedStateFromProps){var t=f.getDerivedStateFromProps.call(null,c.props,k.state);null!=t&&(k.state=p({},k.state,t))}}else if(N={},k=f(c.props,e,l),k=wa(f,c.props,k,e),null==k||null==k.render){a=k;Ra(a,f);return}k.props=c.props;k.context=e;k.updater=l;l=k.state;void 0===l&&(k.state=l=null);if(\"function\"===typeof k.UNSAFE_componentWillMount||\"function\"===typeof k.componentWillMount)if(\"function\"===typeof k.componentWillMount&&\"function\"!==typeof f.getDerivedStateFromProps&&k.componentWillMount(),\"function\"===typeof k.UNSAFE_componentWillMount&&\"function\"!==typeof f.getDerivedStateFromProps&&k.UNSAFE_componentWillMount(),g.length){l=g;var m=h;g=null;h=!1;if(m&&1===l.length)k.state=l[0];else{t=m?l[0]:k.state;var u=!0;for(m=m?1:0;m<l.length;m++){var w=l[m];w=\"function\"===typeof w?w.call(k,t,c.props,e):w;null!=w&&(u?(u=!1,t=p({},t,w)):p(t,w))}k.state=t}}else g=null;a=k.render();Ra(a,f);c=void 0;if(\"function\"===typeof k.getChildContext&&(e=f.childContextTypes,\"object\"===typeof e)){c=k.getChildContext();for(var R in c)R in e?void 0:r(\"108\",C(f)||\"Unknown\",R)}c&&(b=p({},b,c))}for(;q.isValidElement(a);){var f=a,e=f.type;if(\"function\"!==typeof e)break;c(f,e)}return{child:a,context:b}}var Ta=function(){function a(b,d){if(!(this instanceof a))throw new TypeError(\"Cannot call a class as a function\");q.isValidElement(b)?b.type!==x?b=[b]:(b=b.props.children,b=q.isValidElement(b)?[b]:Z(b)):b=Z(b);b={type:null,domNamespace:Ca.html,children:b,childIndex:0,context:la,footer:\"\"};var c=G[0];if(0===c){var f=G;c=f.length;var e=2*c;65536>=e?void 0:r(\"304\");var h=new Uint16Array(e);h.set(f);G=h;G[0]=c+1;for(f=c;f<e-1;f++)G[f]=f+1;G[e-1]=0}else G[0]=G[c];this.threadID=c;this.stack=[b];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=d;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[]}a.prototype.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var a=this.threadID;G[a]=G[0];G[0]=a}};a.prototype.pushProvider=function(a){var b=++this.contextIndex,c=a.type._context,f=this.threadID;F(c,f);var e=c[f];this.contextStack[b]=c;this.contextValueStack[b]=e;c[f]=a.props.value};a.prototype.popProvider=function(){var a=this.contextIndex,d=this.contextStack[a],c=this.contextValueStack[a];this.contextStack[a]=null;this.contextValueStack[a]=null;this.contextIndex--;d[this.threadID]=c};a.prototype.clearProviders=function(){for(var a=this.contextIndex;0<=a;a--)this.contextStack[a][this.threadID]=this.contextValueStack[a]};a.prototype.read=function(a){if(this.exhausted)return null;var b=X;X=this.threadID;var c=Ja.current;Ja.current=Ba;try{for(var f=[\"\"],e=!1;f[0].length<a;){if(0===this.stack.length){this.exhausted=!0;var h=this.threadID;G[h]=G[0];G[0]=h;break}var g=this.stack[this.stack.length-1];if(e||g.childIndex>=g.children.length){var D=g.footer;\"\"!==D&&(this.previousWasTextNode=!1);this.stack.pop();if(\"select\"===g.type)this.currentSelectValue=null;else if(null!=g.type&&null!=g.type.type&&g.type.type.$$typeof===z)this.popProvider(g.type);else if(g.type===A){this.suspenseDepth--;var B=f.pop();if(e){e=!1;var n=g.fallbackFrame;n?void 0:r(\"303\");this.stack.push(n);continue}else f[this.suspenseDepth]+=B}f[this.suspenseDepth]+=D}else{var l=g.children[g.childIndex++],k=\"\";try{k+=this.render(l,g.context,g.domNamespace)}catch(t){throw t}finally{}f.length<=this.suspenseDepth&&f.push(\"\");f[this.suspenseDepth]+=k}}return f[0]}finally{Ja.current=c,X=b}};a.prototype.render=function(a,d,c){if(\"string\"===typeof a||\"number\"===typeof a){c=\"\"+a;if(\"\"===c)return\"\";if(this.makeStaticMarkup)return M(c);if(this.previousWasTextNode)return\"\\x3c!-- --\\x3e\"+M(c);this.previousWasTextNode=!0;return M(c)}d=Sa(a,d,this.threadID);a=d.child;d=d.context;if(null===a||!1===a)return\"\";if(!q.isValidElement(a)){if(null!=a&&null!=a.$$typeof){var b=a.$$typeof;b===ca?r(\"257\"):void 0;r(\"258\",b.toString())}a=Z(a);this.stack.push({type:null,domNamespace:c,children:a,childIndex:0,context:d,footer:\"\"});return\"\"}b=a.type;if(\"string\"===typeof b)return this.renderDOM(a,d,c);switch(b){case da:case ha:case ea:case x:return a=Z(a.props.children),this.stack.push({type:null,domNamespace:c,children:a,childIndex:0,context:d,footer:\"\"}),\"\";case A:r(\"294\")}if(\"object\"===typeof b&&null!==b)switch(b.$$typeof){case ia:N={};var e=b.render(a.props,a.ref);e=wa(b.render,a.props,e,a.ref);e=Z(e);this.stack.push({type:null,domNamespace:c,children:e,childIndex:0,context:d,footer:\"\"});return\"\";case ja:return a=[q.createElement(b.type,p({ref:a.ref},a.props))],this.stack.push({type:null,domNamespace:c,children:a,childIndex:0,context:d,footer:\"\"}),\"\";case z:return b=Z(a.props.children),c={type:a,domNamespace:c,children:b,childIndex:0,context:d,footer:\"\"},this.pushProvider(a),this.stack.push(c),\"\";case fa:b=a.type;e=a.props;var h=this.threadID;F(b,h);b=Z(e.children(b[h]));this.stack.push({type:a,domNamespace:c,children:b,childIndex:0,context:d,footer:\"\"});return\"\";case ka:r(\"295\")}r(\"130\",null==b?b:typeof b,\"\")};a.prototype.renderDOM=function(a,d,c){var b=a.type.toLowerCase();c===Ca.html&&Da(b);Ma.hasOwnProperty(b)||(La.test(b)?void 0:r(\"65\",b),Ma[b]=!0);var e=a.props;if(\"input\"===b)e=p({type:void 0},e,{defaultChecked:void 0,defaultValue:void 0,value:null!=e.value?e.value:e.defaultValue,checked:null!=e.checked?e.checked:e.defaultChecked});else if(\"textarea\"===b){var h=e.value;if(null==h){h=e.defaultValue;var g=e.children;null!=g&&(null!=h?r(\"92\"):void 0,Array.isArray(g)&&(1>=g.length?void 0:r(\"93\"),g=g[0]),h=\"\"+g);null==h&&(h=\"\")}e=p({},e,{value:void 0,children:\"\"+h})}else if(\"select\"===b)this.currentSelectValue=null!=e.value?e.value:e.defaultValue,e=p({},e,{value:void 0});else if(\"option\"===b){g=this.currentSelectValue;var D=Oa(e.children);if(null!=g){var B=null!=e.value?e.value+\"\":D;h=!1;if(Array.isArray(g))for(var n=0;n<g.length;n++){if(\"\"+g[n]===B){h=!0;break}}else h=\"\"+g===B;e=p({selected:void 0,children:void 0},e,{selected:h,children:D})}}if(h=e)Fa[b]&&(null!=h.children||null!=h.dangerouslySetInnerHTML?r(\"137\",b,\"\"):void 0),null!=h.dangerouslySetInnerHTML&&(null!=h.children?r(\"60\"):void 0,\"object\"===typeof h.dangerouslySetInnerHTML&&\"__html\"in h.dangerouslySetInnerHTML?void 0:r(\"61\")),null!=h.style&&\"object\"!==typeof h.style?r(\"62\",\"\"):void 0;h=e;g=this.makeStaticMarkup;D=1===this.stack.length;B=\"<\"+a.type;for(y in h)if(Pa.call(h,y)){var l=h[y];if(null!=l){if(\"style\"===y){n=void 0;var k=\"\",t=\"\";for(n in l)if(l.hasOwnProperty(n)){var m=0===n.indexOf(\"--\"),u=l[n];if(null!=u){var w=n;if(Na.hasOwnProperty(w))w=Na[w];else{var R=w.replace(Ha,\"-$1\").toLowerCase().replace(Ia,\"-ms-\");w=Na[w]=R}k+=t+w+\":\";t=n;m=null==u||\"boolean\"===typeof u||\"\"===u?\"\":m||\"number\"!==typeof u||0===u||Y.hasOwnProperty(t)&&Y[t]?(\"\"+u).trim():u+\"px\";k+=m;t=\";\"}}l=k||null}n=null;b:if(m=b,u=h,-1===m.indexOf(\"-\"))m=\"string\"===typeof u.is;else switch(m){case\"annotation-xml\":case\"color-profile\":case\"font-face\":case\"font-face-src\":case\"font-face-uri\":case\"font-face-format\":case\"font-face-name\":case\"missing-glyph\":m=!1;break b;default:m=!0}if(m)Qa.hasOwnProperty(y)||(n=y,n=ra(n)&&null!=l?n+\"=\"+('\"'+M(l)+'\"'):\"\");else{m=y;n=l;l=J.hasOwnProperty(m)?J[m]:null;if(u=\"style\"!==m)u=null!==l?0===l.type:!(2<m.length)||\"o\"!==m[0]&&\"O\"!==m[0]||\"n\"!==m[1]&&\"N\"!==m[1]?!1:!0;u||ta(m,n,l,!1)?n=\"\":null!==l?(m=l.attributeName,l=l.type,n=3===l||4===l&&!0===n?m+'=\"\"':m+\"=\"+('\"'+M(n)+'\"')):n=ra(m)?m+\"=\"+('\"'+M(n)+'\"'):\"\"}n&&(B+=\" \"+n)}}g||D&&(B+=' data-reactroot=\"\"');var y=B;h=\"\";Ea.hasOwnProperty(b)?y+=\"/>\":(y+=\">\",h=\"</\"+a.type+\">\");a:{g=e.dangerouslySetInnerHTML;if(null!=g){if(null!=g.__html){g=g.__html;break a}}else if(g=e.children,\"string\"===typeof g||\"number\"===typeof g){g=M(g);break a}g=null}null!=g?(e=[],Ka[b]&&\"\\n\"===g.charAt(0)&&(y+=\"\\n\"),y+=g):e=Z(e.children);a=a.type;c=null==c||\"http://www.w3.org/1999/xhtml\"===c?Da(a):\"http://www.w3.org/2000/svg\"===c&&\"foreignObject\"===a?\"http://www.w3.org/1999/xhtml\":c;this.stack.push({domNamespace:c,type:b,children:e,childIndex:0,context:d,footer:h});this.previousWasTextNode=!1;return y};return a}();function Ua(a,b){if(\"function\"!==typeof b&&null!==b)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var Va=function(a){function b(d,c){if(!(this instanceof b))throw new TypeError(\"Cannot call a class as a function\");var f=a.call(this,{});if(!this)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");f=!f||\"object\"!==typeof f&&\"function\"!==typeof f?this:f;f.partialRenderer=new Ta(d,c);return f}Ua(b,a);b.prototype._destroy=function(a,b){this.partialRenderer.destroy();b(a)};b.prototype._read=function(a){try{this.push(this.partialRenderer.read(a))}catch(c){this.destroy(c)}};return b}(aa.Readable),Wa={renderToString:function(a){a=new Ta(a,!1);try{return a.read(Infinity)}finally{a.destroy()}},renderToStaticMarkup:function(a){a=new Ta(a,!0);try{return a.read(Infinity)}finally{a.destroy()}},renderToNodeStream:function(a){return new Va(a,!1)},renderToStaticNodeStream:function(a){return new Va(a,!0)},version:\"16.8.6\"},Xa={default:Wa},Ya=Xa&&Wa||Xa;module.exports=Ya.default||Ya},FlQf:function(module,exports,__webpack_require__){\"use strict\";var $at=__webpack_require__(\"ccE7\")(true);__webpack_require__(\"MPFp\")(String,\"String\",function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t;var index=this._i;var point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}})},FnXw:function(module,exports,__webpack_require__){var isObject=__webpack_require__(\"kpns\");var classof=__webpack_require__(\"hdqJ\");var MATCH=__webpack_require__(\"aXXJ\")(\"match\");module.exports=function(it){var isRegExp;return isObject(it)&&((isRegExp=it[MATCH])!==undefined?!!isRegExp:classof(it)==\"RegExp\")}},FoKB:function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"observable\")},FpHa:function(module,exports){module.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},Fw1r:function(module,exports,__webpack_require__){\"use strict\";module.exports=__webpack_require__(\"pV7Z\")},G8Mo:function(module,exports,__webpack_require__){var isObject=__webpack_require__(\"93I4\");module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)==\"function\"&&!isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)==\"function\"&&!isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)==\"function\"&&!isObject(val=fn.call(it)))return val;throw TypeError(\"Can't convert object to primitive value\")}},GJzV:function(module,exports,__webpack_require__){var toInteger=__webpack_require__(\"JKJi\");var max=Math.max;var min=Math.min;module.exports=function(index,length){var integer=toInteger(index);return integer<0?max(integer+length,0):min(integer,length)}},Gfnk:function(module,exports,__webpack_require__){\"use strict\";var RingBuffer=__webpack_require__(\"u5A6\");var Functor=function(session,method){this._session=session;this._method=method;this._queue=new RingBuffer(Functor.QUEUE_SIZE);this._stopped=false;this.pending=0};Functor.QUEUE_SIZE=8;Functor.prototype.call=function(error,message,callback,context){if(this._stopped)return;var record={error:error,message:message,callback:callback,context:context,done:false},called=false,self=this;this._queue.push(record);if(record.error){record.done=true;this._stop();return this._flushQueue()}var handler=function(err,msg){if(!(called^(called=true)))return;if(err){self._stop();record.error=err;record.message=null}else{record.message=msg}record.done=true;self._flushQueue()};try{this._session[this._method](message,handler)}catch(err){handler(err)}};Functor.prototype._stop=function(){this.pending=this._queue.length;this._stopped=true};Functor.prototype._flushQueue=function(){var queue=this._queue,record;while(queue.length>0&&queue.peek().done){record=queue.shift();if(record.error){this.pending=0;queue.clear()}else{this.pending-=1}record.callback.call(record.context,record.error,record.message)}};module.exports=Functor},GnG2:function(module,exports,__webpack_require__){\n/**\n * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.\n *\n * This can be used with JS designed for browsers to improve reuse of code and\n * allow the use of existing libraries.\n *\n * Usage: include(\"XMLHttpRequest.js\") and use XMLHttpRequest per W3C specs.\n *\n * @author Dan DeFelippi <dan@driverdan.com>\n * @contributor David Ellis <d.f.ellis@ieee.org>\n * @license MIT\n */\nvar Url=__webpack_require__(\"bzos\");var spawn=__webpack_require__(\"QduZ\").spawn;var fs=__webpack_require__(\"mw/K\");exports.XMLHttpRequest=function(){\"use strict\";var self=this;var http=__webpack_require__(\"KEll\");var https=__webpack_require__(\"7WL4\");var request;var response;var settings={};var disableHeaderCheck=false;var defaultHeaders={\"User-Agent\":\"node-XMLHttpRequest\",Accept:\"*/*\"};var headers={};var headersCase={};var forbiddenRequestHeaders=[\"accept-charset\",\"accept-encoding\",\"access-control-request-headers\",\"access-control-request-method\",\"connection\",\"content-length\",\"content-transfer-encoding\",\"cookie\",\"cookie2\",\"date\",\"expect\",\"host\",\"keep-alive\",\"origin\",\"referer\",\"te\",\"trailer\",\"transfer-encoding\",\"upgrade\",\"via\"];var forbiddenRequestMethods=[\"TRACE\",\"TRACK\",\"CONNECT\"];var sendFlag=false;var errorFlag=false;var listeners={};this.UNSENT=0;this.OPENED=1;this.HEADERS_RECEIVED=2;this.LOADING=3;this.DONE=4;this.readyState=this.UNSENT;this.onreadystatechange=null;this.responseText=\"\";this.responseXML=\"\";this.status=null;this.statusText=null;this.withCredentials=false;var isAllowedHttpHeader=function(header){return disableHeaderCheck||header&&forbiddenRequestHeaders.indexOf(header.toLowerCase())===-1};var isAllowedHttpMethod=function(method){return method&&forbiddenRequestMethods.indexOf(method)===-1};this.open=function(method,url,async,user,password){this.abort();errorFlag=false;if(!isAllowedHttpMethod(method)){throw new Error(\"SecurityError: Request method not allowed\")}settings={method:method,url:url.toString(),async:typeof async!==\"boolean\"?true:async,user:user||null,password:password||null};setState(this.OPENED)};this.setDisableHeaderCheck=function(state){disableHeaderCheck=state};this.setRequestHeader=function(header,value){if(this.readyState!==this.OPENED){throw new Error(\"INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN\")}if(!isAllowedHttpHeader(header)){console.warn('Refused to set unsafe header \"'+header+'\"');return}if(sendFlag){throw new Error(\"INVALID_STATE_ERR: send flag is true\")}header=headersCase[header.toLowerCase()]||header;headersCase[header.toLowerCase()]=header;headers[header]=headers[header]?headers[header]+\", \"+value:value};this.getResponseHeader=function(header){if(typeof header===\"string\"&&this.readyState>this.OPENED&&response&&response.headers&&response.headers[header.toLowerCase()]&&!errorFlag){return response.headers[header.toLowerCase()]}return null};this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||errorFlag){return\"\"}var result=\"\";for(var i in response.headers){if(i!==\"set-cookie\"&&i!==\"set-cookie2\"){result+=i+\": \"+response.headers[i]+\"\\r\\n\"}}return result.substr(0,result.length-2)};this.getRequestHeader=function(name){if(typeof name===\"string\"&&headersCase[name.toLowerCase()]){return headers[headersCase[name.toLowerCase()]]}return\"\"};this.send=function(data){if(this.readyState!==this.OPENED){throw new Error(\"INVALID_STATE_ERR: connection must be opened before send() is called\")}if(sendFlag){throw new Error(\"INVALID_STATE_ERR: send has already been called\")}var ssl=false,local=false;var url=Url.parse(settings.url);var host;switch(url.protocol){case\"https:\":ssl=true;case\"http:\":host=url.hostname;break;case\"file:\":local=true;break;case undefined:case null:case\"\":host=\"localhost\";break;default:throw new Error(\"Protocol not supported.\")}if(local){if(settings.method!==\"GET\"){throw new Error(\"XMLHttpRequest: Only GET method is supported\")}if(settings.async){fs.readFile(url.pathname,\"utf8\",function(error,data){if(error){self.handleError(error)}else{self.status=200;self.responseText=data;setState(self.DONE)}})}else{try{this.responseText=fs.readFileSync(url.pathname,\"utf8\");this.status=200;setState(self.DONE)}catch(e){this.handleError(e)}}return}var port=url.port||(ssl?443:80);var uri=url.pathname+(url.search?url.search:\"\");for(var name in defaultHeaders){if(!headersCase[name.toLowerCase()]){headers[name]=defaultHeaders[name]}}headers.Host=host;if(!(ssl&&port===443||port===80)){headers.Host+=\":\"+url.port}if(settings.user){if(typeof settings.password===\"undefined\"){settings.password=\"\"}var authBuf=new Buffer(settings.user+\":\"+settings.password);headers.Authorization=\"Basic \"+authBuf.toString(\"base64\")}if(settings.method===\"GET\"||settings.method===\"HEAD\"){data=null}else if(data){headers[\"Content-Length\"]=Buffer.isBuffer(data)?data.length:Buffer.byteLength(data);if(!headers[\"Content-Type\"]){headers[\"Content-Type\"]=\"text/plain;charset=UTF-8\"}}else if(settings.method===\"POST\"){headers[\"Content-Length\"]=0}var options={host:host,port:port,path:uri,method:settings.method,headers:headers,agent:false,withCredentials:self.withCredentials};errorFlag=false;if(settings.async){var doRequest=ssl?https.request:http.request;sendFlag=true;self.dispatchEvent(\"readystatechange\");var responseHandler=function responseHandler(resp){response=resp;if(response.statusCode===301||response.statusCode===302||response.statusCode===303||response.statusCode===307){settings.url=response.headers.location;var url=Url.parse(settings.url);host=url.hostname;var newOptions={hostname:url.hostname,port:url.port,path:url.path,method:response.statusCode===303?\"GET\":settings.method,headers:headers,withCredentials:self.withCredentials};request=doRequest(newOptions,responseHandler).on(\"error\",errorHandler);request.end();return}response.setEncoding(\"utf8\");setState(self.HEADERS_RECEIVED);self.status=response.statusCode;response.on(\"data\",function(chunk){if(chunk){self.responseText+=chunk}if(sendFlag){setState(self.LOADING)}});response.on(\"end\",function(){if(sendFlag){setState(self.DONE);sendFlag=false}});response.on(\"error\",function(error){self.handleError(error)})};var errorHandler=function errorHandler(error){self.handleError(error)};request=doRequest(options,responseHandler).on(\"error\",errorHandler);if(data){request.write(data)}request.end();self.dispatchEvent(\"loadstart\")}else{var contentFile=\".node-xmlhttprequest-content-\"+process.pid;var syncFile=\".node-xmlhttprequest-sync-\"+process.pid;fs.writeFileSync(syncFile,\"\",\"utf8\");var execString=\"var http = require('http'), https = require('https'), fs = require('fs');\"+\"var doRequest = http\"+(ssl?\"s\":\"\")+\".request;\"+\"var options = \"+JSON.stringify(options)+\";\"+\"var responseText = '';\"+\"var req = doRequest(options, function(response) {\"+\"response.setEncoding('utf8');\"+\"response.on('data', function(chunk) {\"+\"  responseText += chunk;\"+\"});\"+\"response.on('end', function() {\"+\"fs.writeFileSync('\"+contentFile+\"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');\"+\"fs.unlinkSync('\"+syncFile+\"');\"+\"});\"+\"response.on('error', function(error) {\"+\"fs.writeFileSync('\"+contentFile+\"', JSON.stringify({err: error}), 'utf8');\"+\"fs.unlinkSync('\"+syncFile+\"');\"+\"});\"+\"}).on('error', function(error) {\"+\"fs.writeFileSync('\"+contentFile+\"', JSON.stringify({err: error}), 'utf8');\"+\"fs.unlinkSync('\"+syncFile+\"');\"+\"});\"+(data?\"req.write('\"+JSON.stringify(data).slice(1,-1).replace(/'/g,\"\\\\'\")+\"');\":\"\")+\"req.end();\";var syncProc=spawn(process.argv[0],[\"-e\",execString]);while(fs.existsSync(syncFile)){}var resp=JSON.parse(fs.readFileSync(contentFile,\"utf8\"));syncProc.stdin.end();fs.unlinkSync(contentFile);if(resp.err){self.handleError(resp.err)}else{response=resp.data;self.status=resp.data.statusCode;self.responseText=resp.data.text;setState(self.DONE)}}};this.handleError=function(error){this.status=0;this.statusText=error;this.responseText=error.stack;errorFlag=true;setState(this.DONE);this.dispatchEvent(\"error\")};this.abort=function(){if(request){request.abort();request=null}headers=defaultHeaders;this.status=0;this.responseText=\"\";this.responseXML=\"\";errorFlag=true;if(this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||sendFlag)&&this.readyState!==this.DONE){sendFlag=false;setState(this.DONE)}this.readyState=this.UNSENT;this.dispatchEvent(\"abort\")};this.addEventListener=function(event,callback){if(!(event in listeners)){listeners[event]=[]}listeners[event].push(callback)};this.removeEventListener=function(event,callback){if(event in listeners){listeners[event]=listeners[event].filter(function(ev){return ev!==callback})}};this.dispatchEvent=function(event){if(typeof self[\"on\"+event]===\"function\"){self[\"on\"+event]()}if(event in listeners){for(var i=0,len=listeners[event].length;i<len;i++){listeners[event][i].call(self)}}};var setState=function(state){if(state==self.LOADING||self.readyState!==state){self.readyState=state;if(settings.async||self.readyState<self.OPENED||self.readyState===self.DONE){self.dispatchEvent(\"readystatechange\")}if(self.readyState===self.DONE&&!errorFlag){self.dispatchEvent(\"load\");self.dispatchEvent(\"loadend\")}}}}},Gp07:function(module,exports,__webpack_require__){var toInteger=__webpack_require__(\"JKJi\");var requireObjectCoercible=__webpack_require__(\"9Nts\");module.exports=function(that,pos,CONVERT_TO_STRING){var S=String(requireObjectCoercible(that));var position=toInteger(pos);var size=S.length;var first,second;if(position<0||position>=size)return CONVERT_TO_STRING?\"\":undefined;first=S.charCodeAt(position);return first<55296||first>56319||position+1===size||(second=S.charCodeAt(position+1))<56320||second>57343?CONVERT_TO_STRING?S.charAt(position):first:CONVERT_TO_STRING?S.slice(position,position+2):(first-55296<<10)+(second-56320)+65536}},GrVo:function(module,exports,__webpack_require__){\"use strict\";var objectKeys=__webpack_require__(\"Q2Kg\");var getOwnPropertySymbolsModule=__webpack_require__(\"fw2a\");var propertyIsEnumerableModule=__webpack_require__(\"iCuu\");var toObject=__webpack_require__(\"SAp2\");var IndexedObject=__webpack_require__(\"t5mC\");var nativeAssign=Object.assign;module.exports=!nativeAssign||__webpack_require__(\"0HDe\")(function(){var A={};var B={};var symbol=Symbol();var alphabet=\"abcdefghijklmnopqrst\";A[symbol]=7;alphabet.split(\"\").forEach(function(chr){B[chr]=chr});return nativeAssign({},A)[symbol]!=7||objectKeys(nativeAssign({},B)).join(\"\")!=alphabet})?function assign(target,source){var T=toObject(target);var argumentsLength=arguments.length;var index=1;var getOwnPropertySymbols=getOwnPropertySymbolsModule.f;var propertyIsEnumerable=propertyIsEnumerableModule.f;while(argumentsLength>index){var S=IndexedObject(arguments[index++]);var keys=getOwnPropertySymbols?objectKeys(S).concat(getOwnPropertySymbols(S)):objectKeys(S);var length=keys.length;var j=0;var key;while(length>j)if(propertyIsEnumerable.call(S,key=keys[j++]))T[key]=S[key]}return T}:nativeAssign},GvbO:function(module,exports,__webpack_require__){var $export=__webpack_require__(\"Y7ZC\");$export($export.S,\"Array\",{isArray:__webpack_require__(\"kAMH\")})},H6ty:function(module,exports,__webpack_require__){var toInteger=__webpack_require__(\"JKJi\");var min=Math.min;module.exports=function(argument){return argument>0?min(toInteger(argument),9007199254740991):0}},HJXK:function(module,exports,__webpack_require__){\"use strict\";var Base=__webpack_require__(\"Wdmt\"),Draft75=__webpack_require__(\"O1VW\"),crypto=__webpack_require__(\"PJMN\"),util=__webpack_require__(\"jK02\");var numberFromKey=function(key){return parseInt(key.match(/[0-9]/g).join(\"\"),10)};var spacesInKey=function(key){return key.match(/ /g).length};var Draft76=function(request,url,options){Draft75.apply(this,arguments);this._stage=-1;this._body=[];this.version=\"hixie-76\";this._headers.clear();this._headers.set(\"Upgrade\",\"WebSocket\");this._headers.set(\"Connection\",\"Upgrade\");this._headers.set(\"Sec-WebSocket-Origin\",this._request.headers.origin);this._headers.set(\"Sec-WebSocket-Location\",this.url)};util.inherits(Draft76,Draft75);var instance={BODY_SIZE:8,start:function(){if(!Draft75.prototype.start.call(this))return false;this._started=true;this._sendHandshakeBody();return true},close:function(){if(this.readyState===3)return false;this._write(new Buffer([255,0]));this.readyState=3;this.emit(\"close\",new Base.CloseEvent(null,null));return true},_handshakeResponse:function(){var headers=this._request.headers,key1=headers[\"sec-websocket-key1\"],number1=numberFromKey(key1),spaces1=spacesInKey(key1),key2=headers[\"sec-websocket-key2\"],number2=numberFromKey(key2),spaces2=spacesInKey(key2);if(number1%spaces1!==0||number2%spaces2!==0){this.emit(\"error\",new Error(\"Client sent invalid Sec-WebSocket-Key headers\"));this.close();return null}this._keyValues=[number1/spaces1,number2/spaces2];var start=\"HTTP/1.1 101 WebSocket Protocol Handshake\",headers=[start,this._headers.toString(),\"\"];return new Buffer(headers.join(\"\\r\\n\"),\"binary\")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var md5=crypto.createHash(\"md5\"),buffer=new Buffer(8+this.BODY_SIZE);buffer.writeUInt32BE(this._keyValues[0],0);buffer.writeUInt32BE(this._keyValues[1],4);new Buffer(this._body).copy(buffer,8,0,this.BODY_SIZE);md5.update(buffer);return new Buffer(md5.digest(\"binary\"),\"binary\")},_sendHandshakeBody:function(){if(!this._started)return;var signature=this._handshakeSignature();if(!signature)return;this._write(signature);this._stage=0;this._open();if(this._body.length>this.BODY_SIZE)this.parse(this._body.slice(this.BODY_SIZE))},_parseLeadingByte:function(octet){if(octet!==255)return Draft75.prototype._parseLeadingByte.call(this,octet);this._closing=true;this._length=0;this._stage=1}};for(var key in instance)Draft76.prototype[key]=instance[key];module.exports=Draft76},HefZ:function(module,exports,__webpack_require__){__webpack_require__(\"rZEa\");__webpack_require__(\"QvOV\");__webpack_require__(\"44fV\");__webpack_require__(\"2F3y\");__webpack_require__(\"qjh4\");__webpack_require__(\"b2LF\");__webpack_require__(\"uiB+\");__webpack_require__(\"q0E7\");__webpack_require__(\"+v3u\");__webpack_require__(\"dstF\");__webpack_require__(\"dYkh\");__webpack_require__(\"gIEr\");__webpack_require__(\"luCB\");__webpack_require__(\"MuAL\");__webpack_require__(\"uLJa\");__webpack_require__(\"Dd/+\");__webpack_require__(\"vb+c\");__webpack_require__(\"ZPxF\");module.exports=__webpack_require__(\"4Ea8\").Symbol},Hfiw:function(module,exports,__webpack_require__){var $export=__webpack_require__(\"Y7ZC\");$export($export.S,\"Object\",{setPrototypeOf:__webpack_require__(\"6tYh\").set})},Hsns:function(module,exports,__webpack_require__){var isObject=__webpack_require__(\"93I4\");var document=__webpack_require__(\"5T2Y\").document;var is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},I8F5:function(module,exports,__webpack_require__){\"use strict\";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,\"__esModule\",{value:true});const etag_1=__importDefault(__webpack_require__(\"Y4gF\"));const fresh_1=__importDefault(__webpack_require__(\"BMJj\"));const utils_1=__webpack_require__(\"Bu4q\");function sendHTML(req,res,html,{generateEtags:generateEtags}){if(utils_1.isResSent(res))return;const etag=generateEtags?etag_1.default(html):undefined;if(fresh_1.default(req.headers,{etag:etag})){res.statusCode=304;res.end();return}if(etag){res.setHeader(\"ETag\",etag)}if(!res.getHeader(\"Content-Type\")){res.setHeader(\"Content-Type\",\"text/html; charset=utf-8\")}res.setHeader(\"Content-Length\",Buffer.byteLength(html));res.end(req.method===\"HEAD\"?null:html)}exports.sendHTML=sendHTML},IAmK:function(module,exports,__webpack_require__){\"use strict\";var TOKEN=/([!#\\$%&'\\*\\+\\-\\.\\^_`\\|~0-9A-Za-z]+)/,NOTOKEN=/([^!#\\$%&'\\*\\+\\-\\.\\^_`\\|~0-9A-Za-z])/g,QUOTED=/\"((?:\\\\[\\x00-\\x7f]|[^\\x00-\\x08\\x0a-\\x1f\\x7f\"])*)\"/,PARAM=new RegExp(TOKEN.source+\"(?:=(?:\"+TOKEN.source+\"|\"+QUOTED.source+\"))?\"),EXT=new RegExp(TOKEN.source+\"(?: *; *\"+PARAM.source+\")*\",\"g\"),EXT_LIST=new RegExp(\"^\"+EXT.source+\"(?: *, *\"+EXT.source+\")*$\"),NUMBER=/^-?(0|[1-9][0-9]*)(\\.[0-9]+)?$/;var hasOwnProperty=Object.prototype.hasOwnProperty;var Parser={parseHeader:function(header){var offers=new Offers;if(header===\"\"||header===undefined)return offers;if(!EXT_LIST.test(header))throw new SyntaxError(\"Invalid Sec-WebSocket-Extensions header: \"+header);var values=header.match(EXT);values.forEach(function(value){var params=value.match(new RegExp(PARAM.source,\"g\")),name=params.shift(),offer={};params.forEach(function(param){var args=param.match(PARAM),key=args[1],data;if(args[2]!==undefined){data=args[2]}else if(args[3]!==undefined){data=args[3].replace(/\\\\/g,\"\")}else{data=true}if(NUMBER.test(data))data=parseFloat(data);if(hasOwnProperty.call(offer,key)){offer[key]=[].concat(offer[key]);offer[key].push(data)}else{offer[key]=data}},this);offers.push(name,offer)},this);return offers},serializeParams:function(name,params){var values=[];var print=function(key,value){if(value instanceof Array){value.forEach(function(v){print(key,v)})}else if(value===true){values.push(key)}else if(typeof value===\"number\"){values.push(key+\"=\"+value)}else if(NOTOKEN.test(value)){values.push(key+'=\"'+value.replace(/\"/g,'\\\\\"')+'\"')}else{values.push(key+\"=\"+value)}};for(var key in params)print(key,params[key]);return[name].concat(values).join(\"; \")}};var Offers=function(){this._byName={};this._inOrder=[]};Offers.prototype.push=function(name,params){if(!hasOwnProperty.call(this._byName,name))this._byName[name]=[];this._byName[name].push(params);this._inOrder.push({name:name,params:params})};Offers.prototype.eachOffer=function(callback,context){var list=this._inOrder;for(var i=0,n=list.length;i<n;i++)callback.call(context,list[i].name,list[i].params)};Offers.prototype.byName=function(name){return this._byName[name]||[]};Offers.prototype.toArray=function(){return this._inOrder.slice()};module.exports=Parser},IClC:function(module,exports,__webpack_require__){\"use strict\";var __importStar=void 0&&(void 0).__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod){if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k]}result[\"default\"]=mod;return result};Object.defineProperty(exports,\"__esModule\",{value:true});var React=__importStar(__webpack_require__(\"q1tI\"));exports.HeadManagerContext=React.createContext(null)},IP1Z:function(module,exports,__webpack_require__){\"use strict\";var $defineProperty=__webpack_require__(\"2faE\");var createDesc=__webpack_require__(\"rr1i\");module.exports=function(object,index,value){if(index in object)$defineProperty.f(object,index,createDesc(0,value));else object[index]=value}},IutQ:function(module,exports,__webpack_require__){var IndexedObject=__webpack_require__(\"t5mC\");var requireObjectCoercible=__webpack_require__(\"9Nts\");module.exports=function(it){return IndexedObject(requireObjectCoercible(it))}},JB68:function(module,exports,__webpack_require__){var defined=__webpack_require__(\"Jes0\");module.exports=function(it){return Object(defined(it))}},JIMt:function(module,exports,__webpack_require__){var isObject=__webpack_require__(\"kpns\");var document=__webpack_require__(\"ysHE\").document;var exist=isObject(document)&&isObject(document.createElement);module.exports=function(it){return exist?document.createElement(it):{}}},JKJi:function(module,exports){var ceil=Math.ceil;var floor=Math.floor;module.exports=function(argument){return isNaN(argument=+argument)?0:(argument>0?floor:ceil)(argument)}},\"JMW+\":function(module,exports,__webpack_require__){\"use strict\";var LIBRARY=__webpack_require__(\"uOPS\");var global=__webpack_require__(\"5T2Y\");var ctx=__webpack_require__(\"2GTP\");var classof=__webpack_require__(\"QMMT\");var $export=__webpack_require__(\"Y7ZC\");var isObject=__webpack_require__(\"93I4\");var aFunction=__webpack_require__(\"eaoh\");var anInstance=__webpack_require__(\"EXMj\");var forOf=__webpack_require__(\"oioR\");var speciesConstructor=__webpack_require__(\"8gHz\");var task=__webpack_require__(\"QXhf\").set;var microtask=__webpack_require__(\"q6LJ\")();var newPromiseCapabilityModule=__webpack_require__(\"ZW5q\");var perform=__webpack_require__(\"RDmV\");var userAgent=__webpack_require__(\"vBP9\");var promiseResolve=__webpack_require__(\"zXhZ\");var PROMISE=\"Promise\";var TypeError=global.TypeError;var process=global.process;var versions=process&&process.versions;var v8=versions&&versions.v8||\"\";var $Promise=global[PROMISE];var isNode=classof(process)==\"process\";var empty=function(){};var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper;var newPromiseCapability=newGenericPromiseCapability=newPromiseCapabilityModule.f;var USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1);var FakePromise=(promise.constructor={})[__webpack_require__(\"UWiX\")(\"species\")]=function(exec){exec(empty,empty)};return(isNode||typeof PromiseRejectionEvent==\"function\")&&promise.then(empty)instanceof FakePromise&&v8.indexOf(\"6.6\")!==0&&userAgent.indexOf(\"Chrome/66\")===-1}catch(e){}}();var isThenable=function(it){var then;return isObject(it)&&typeof(then=it.then)==\"function\"?then:false};var notify=function(promise,isReject){if(promise._n)return;promise._n=true;var chain=promise._c;microtask(function(){var value=promise._v;var ok=promise._s==1;var i=0;var run=function(reaction){var handler=ok?reaction.ok:reaction.fail;var resolve=reaction.resolve;var reject=reaction.reject;var domain=reaction.domain;var result,then,exited;try{if(handler){if(!ok){if(promise._h==2)onHandleUnhandled(promise);promise._h=1}if(handler===true)result=value;else{if(domain)domain.enter();result=handler(value);if(domain){domain.exit();exited=true}}if(result===reaction.promise){reject(TypeError(\"Promise-chain cycle\"))}else if(then=isThenable(result)){then.call(result,resolve,reject)}else resolve(result)}else reject(value)}catch(e){if(domain&&!exited)domain.exit();reject(e)}};while(chain.length>i)run(chain[i++]);promise._c=[];promise._n=false;if(isReject&&!promise._h)onUnhandled(promise)})};var onUnhandled=function(promise){task.call(global,function(){var value=promise._v;var unhandled=isUnhandled(promise);var result,handler,console;if(unhandled){result=perform(function(){if(isNode){process.emit(\"unhandledRejection\",value,promise)}else if(handler=global.onunhandledrejection){handler({promise:promise,reason:value})}else if((console=global.console)&&console.error){console.error(\"Unhandled promise rejection\",value)}});promise._h=isNode||isUnhandled(promise)?2:1}promise._a=undefined;if(unhandled&&result.e)throw result.v})};var isUnhandled=function(promise){return promise._h!==1&&(promise._a||promise._c).length===0};var onHandleUnhandled=function(promise){task.call(global,function(){var handler;if(isNode){process.emit(\"rejectionHandled\",promise)}else if(handler=global.onrejectionhandled){handler({promise:promise,reason:promise._v})}})};var $reject=function(value){var promise=this;if(promise._d)return;promise._d=true;promise=promise._w||promise;promise._v=value;promise._s=2;if(!promise._a)promise._a=promise._c.slice();notify(promise,true)};var $resolve=function(value){var promise=this;var then;if(promise._d)return;promise._d=true;promise=promise._w||promise;try{if(promise===value)throw TypeError(\"Promise can't be resolved itself\");if(then=isThenable(value)){microtask(function(){var wrapper={_w:promise,_d:false};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}})}else{promise._v=value;promise._s=1;notify(promise,false)}}catch(e){$reject.call({_w:promise,_d:false},e)}};if(!USE_NATIVE){$Promise=function Promise(executor){anInstance(this,$Promise,PROMISE,\"_h\");aFunction(executor);Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}};Internal=function Promise(executor){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};Internal.prototype=__webpack_require__(\"XJU/\")($Promise.prototype,{then:function then(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));reaction.ok=typeof onFulfilled==\"function\"?onFulfilled:true;reaction.fail=typeof onRejected==\"function\"&&onRejected;reaction.domain=isNode?process.domain:undefined;this._c.push(reaction);if(this._a)this._a.push(reaction);if(this._s)notify(this,false);return reaction.promise},catch:function(onRejected){return this.then(undefined,onRejected)}});OwnPromiseCapability=function(){var promise=new Internal;this.promise=promise;this.resolve=ctx($resolve,promise,1);this.reject=ctx($reject,promise,1)};newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===$Promise||C===Wrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)}}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise});__webpack_require__(\"RfKB\")($Promise,PROMISE);__webpack_require__(\"TJWN\")(PROMISE);Wrapper=__webpack_require__(\"WEpk\")[PROMISE];$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function reject(r){var capability=newPromiseCapability(this);var $$reject=capability.reject;$$reject(r);return capability.promise}});$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),PROMISE,{resolve:function resolve(x){return promiseResolve(LIBRARY&&this===Wrapper?$Promise:this,x)}});$export($export.S+$export.F*!(USE_NATIVE&&__webpack_require__(\"TuGD\")(function(iter){$Promise.all(iter)[\"catch\"](empty)})),PROMISE,{all:function all(iterable){var C=this;var capability=newPromiseCapability(C);var resolve=capability.resolve;var reject=capability.reject;var result=perform(function(){var values=[];var index=0;var remaining=1;forOf(iterable,false,function(promise){var $index=index++;var alreadyCalled=false;values.push(undefined);remaining++;C.resolve(promise).then(function(value){if(alreadyCalled)return;alreadyCalled=true;values[$index]=value;--remaining||resolve(values)},reject)});--remaining||resolve(values)});if(result.e)reject(result.v);return capability.promise},race:function race(iterable){var C=this;var capability=newPromiseCapability(C);var reject=capability.reject;var result=perform(function(){forOf(iterable,false,function(promise){C.resolve(promise).then(capability.resolve,reject)})});if(result.e)reject(result.v);return capability.promise}})},JQMT:function(module,exports,__webpack_require__){\"use strict\";var _interopRequireDefault=__webpack_require__(\"KI45\");var _regenerator=_interopRequireDefault(__webpack_require__(\"ln6h\"));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(\"O40h\"));var _slicedToArray2=_interopRequireDefault(__webpack_require__(\"doui\"));var _promise=_interopRequireDefault(__webpack_require__(\"eVuF\"));var _assign=_interopRequireDefault(__webpack_require__(\"UXZV\"));var _set=_interopRequireDefault(__webpack_require__(\"ttDY\"));var _classCallCheck2=_interopRequireDefault(__webpack_require__(\"0iUn\"));var _createClass2=_interopRequireDefault(__webpack_require__(\"sLSF\"));var __importDefault=void 0&&(void 0).__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,\"__esModule\",{value:true});var url_1=__webpack_require__(\"bzos\");var mitt_1=__importDefault(__webpack_require__(\"kiME\"));var utils_1=__webpack_require__(\"Bu4q\");function toRoute(path){return path.replace(/\\/$/,\"\")||\"/\"}var Router=function(){function Router(pathname,query,as,_ref){var _this=this;var initialProps=_ref.initialProps,pageLoader=_ref.pageLoader,App=_ref.App,Component=_ref.Component,err=_ref.err;(0,_classCallCheck2.default)(this,Router);this.onPopState=function(e){if(!e.state){var _pathname=_this.pathname,_query=_this.query;_this.changeState(\"replaceState\",utils_1.formatWithValidation({pathname:_pathname,query:_query}),utils_1.getURL());return}if(_this._bps&&!_this._bps(e.state)){return}var _e$state=e.state,url=_e$state.url,as=_e$state.as,options=_e$state.options;if(false){}_this.replace(url,as,options)};this.route=toRoute(pathname);this.components={};if(pathname!==\"/_error\"){this.components[this.route]={Component:Component,props:initialProps,err:err}}this.components[\"/_app\"]={Component:App};this.events=Router.events;this.pageLoader=pageLoader;this.pathname=pathname;this.query=query;this.asPath=as;this.subscriptions=new _set.default;this.componentLoadCancel=null;if(typeof window!==\"undefined\"){this.changeState(\"replaceState\",utils_1.formatWithValidation({pathname:pathname,query:query}),as);window.addEventListener(\"popstate\",this.onPopState);if(navigator.userAgent&&navigator.userAgent.match(/firefox/i)){window.addEventListener(\"unload\",function(){try{if(window.location.search)window.location.replace(window.location.toString())}catch(_){}})}}}(0,_createClass2.default)(Router,[{key:\"update\",value:function update(route,Component){var data=this.components[route];if(!data){throw new Error(\"Cannot update unavailable route: \".concat(route))}var newData=(0,_assign.default)({},data,{Component:Component});this.components[route]=newData;if(route===\"/_app\"){this.notify(this.components[this.route]);return}if(route===this.route){this.notify(newData)}}},{key:\"reload\",value:function reload(route){var _this2=this;return new _promise.default(function(resolve,reject){delete _this2.components[route];_this2.pageLoader.clearCache(route);if(route!==_this2.route){return resolve()}var pathname=_this2.pathname,query=_this2.query;var url=window.location.href;var as=window.location.pathname+window.location.search+window.location.hash;Router.events.emit(\"routeChangeStart\",url);_this2.getRouteInfo(route,pathname,query,as).then(function(routeInfo){var error=routeInfo.error;if(error&&error.cancelled){return resolve()}_this2.notify(routeInfo);if(error){Router.events.emit(\"routeChangeError\",error,url);return reject(error)}Router.events.emit(\"routeChangeComplete\",url)})})}},{key:\"back\",value:function back(){window.history.back()}},{key:\"push\",value:function push(url){var as=arguments.length>1&&arguments[1]!==undefined?arguments[1]:url;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return this.change(\"pushState\",url,as,options)}},{key:\"replace\",value:function replace(url){var as=arguments.length>1&&arguments[1]!==undefined?arguments[1]:url;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return this.change(\"replaceState\",url,as,options)}},{key:\"change\",value:function change(method,_url,_as,options){var _this3=this;return new _promise.default(function(resolve,reject){var url=typeof _url===\"object\"?utils_1.formatWithValidation(_url):_url;var as=typeof _as===\"object\"?utils_1.formatWithValidation(_as):_as;if(true){if(__NEXT_DATA__.nextExport){as=Router._rewriteUrlForNextExport(as)}}_this3.abortComponentLoad(as);if(_this3.onlyAHashChange(as)){Router.events.emit(\"hashChangeStart\",as);_this3.changeState(method,url,as);_this3.scrollToHash(as);Router.events.emit(\"hashChangeComplete\",as);return true}var _url_1$parse=url_1.parse(url,true),pathname=_url_1$parse.pathname,query=_url_1$parse.query;if(!_this3.urlIsNew(as)){method=\"replaceState\"}var route=toRoute(pathname);var _options$shallow=options.shallow,shallow=_options$shallow===void 0?false:_options$shallow;Router.events.emit(\"routeChangeStart\",as);_this3.getRouteInfo(route,pathname,query,as,shallow).then(function(routeInfo){var error=routeInfo.error;if(error&&error.cancelled){return resolve(false)}Router.events.emit(\"beforeHistoryChange\",as);_this3.changeState(method,url,as,options);var hash=window.location.hash.substring(1);_this3.set(route,pathname,query,as,(0,_assign.default)({},routeInfo,{hash:hash}));if(error){Router.events.emit(\"routeChangeError\",error,as);throw error}Router.events.emit(\"routeChangeComplete\",as);return resolve(true)},reject)})}},{key:\"changeState\",value:function changeState(method,url,as){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};if(false){}if(method!==\"pushState\"||utils_1.getURL()!==as){window.history[method]({url:url,as:as,options:options},null,as)}}},{key:\"getRouteInfo\",value:function getRouteInfo(route,pathname,query,as){var _this4=this;var shallow=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var cachedRouteInfo=this.components[route];if(shallow&&cachedRouteInfo&&this.route===route){return _promise.default.resolve(cachedRouteInfo)}return new _promise.default(function(resolve,reject){if(cachedRouteInfo){return resolve(cachedRouteInfo)}_this4.fetchComponent(route).then(function(Component){return resolve({Component:Component})},reject)}).then(function(routeInfo){var Component=routeInfo.Component;if(false){var _require,isValidElementType}return new _promise.default(function(resolve,reject){var ctx={pathname:pathname,query:query,asPath:as};_this4.getInitialProps(Component,ctx).then(function(props){routeInfo.props=props;_this4.components[route]=routeInfo;resolve(routeInfo)},reject)})}).catch(function(err){return new _promise.default(function(resolve){if(err.code===\"PAGE_LOAD_ERROR\"){window.location.href=as;err.cancelled=true;return resolve({error:err})}if(err.cancelled){return resolve({error:err})}resolve(_this4.fetchComponent(\"/_error\").then(function(Component){var routeInfo={Component:Component,err:err};var ctx={err:err,pathname:pathname,query:query};return new _promise.default(function(resolve){_this4.getInitialProps(Component,ctx).then(function(props){routeInfo.props=props;routeInfo.error=err;resolve(routeInfo)},function(gipErr){console.error(\"Error in error page `getInitialProps`: \",gipErr);routeInfo.error=err;routeInfo.props={};resolve(routeInfo)})})}))})})}},{key:\"set\",value:function set(route,pathname,query,as,data){this.route=route;this.pathname=pathname;this.query=query;this.asPath=as;this.notify(data)}},{key:\"beforePopState\",value:function beforePopState(cb){this._bps=cb}},{key:\"onlyAHashChange\",value:function onlyAHashChange(as){if(!this.asPath)return false;var _this$asPath$split=this.asPath.split(\"#\"),_this$asPath$split2=(0,_slicedToArray2.default)(_this$asPath$split,2),oldUrlNoHash=_this$asPath$split2[0],oldHash=_this$asPath$split2[1];var _as$split=as.split(\"#\"),_as$split2=(0,_slicedToArray2.default)(_as$split,2),newUrlNoHash=_as$split2[0],newHash=_as$split2[1];if(newHash&&oldUrlNoHash===newUrlNoHash&&oldHash===newHash){return true}if(oldUrlNoHash!==newUrlNoHash){return false}return oldHash!==newHash}},{key:\"scrollToHash\",value:function scrollToHash(as){var _as$split3=as.split(\"#\"),_as$split4=(0,_slicedToArray2.default)(_as$split3,2),hash=_as$split4[1];if(hash===\"\"){window.scrollTo(0,0);return}var idEl=document.getElementById(hash);if(idEl){idEl.scrollIntoView();return}var nameEl=document.getElementsByName(hash)[0];if(nameEl){nameEl.scrollIntoView()}}},{key:\"urlIsNew\",value:function urlIsNew(asPath){return this.asPath!==asPath}},{key:\"prefetch\",value:function prefetch(url){var _this5=this;return new _promise.default(function(resolve,reject){if(false){}var _url_1$parse2=url_1.parse(url),pathname=_url_1$parse2.pathname;var route=toRoute(pathname);_this5.pageLoader.prefetch(route).then(resolve,reject)})}},{key:\"fetchComponent\",value:function(){var _fetchComponent=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(route){var cancelled,cancel,Component,error;return _regenerator.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:cancelled=false;cancel=this.componentLoadCancel=function(){cancelled=true};_context.next=4;return this.pageLoader.loadPage(route);case 4:Component=_context.sent;if(!cancelled){_context.next=9;break}error=new Error('Abort fetching component for route: \"'.concat(route,'\"'));error.cancelled=true;throw error;case 9:if(cancel===this.componentLoadCancel){this.componentLoadCancel=null}return _context.abrupt(\"return\",Component);case 11:case\"end\":return _context.stop()}}},_callee,this)}));function fetchComponent(_x){return _fetchComponent.apply(this,arguments)}return fetchComponent}()},{key:\"getInitialProps\",value:function(){var _getInitialProps=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee2(Component,ctx){var cancelled,cancel,App,props,err;return _regenerator.default.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cancelled=false;cancel=function cancel(){cancelled=true};this.componentLoadCancel=cancel;App=this.components[\"/_app\"].Component;_context2.next=6;return utils_1.loadGetInitialProps(App,{Component:Component,router:this,ctx:ctx});case 6:props=_context2.sent;if(cancel===this.componentLoadCancel){this.componentLoadCancel=null}if(!cancelled){_context2.next=12;break}err=new Error(\"Loading initial props cancelled\");err.cancelled=true;throw err;case 12:return _context2.abrupt(\"return\",props);case 13:case\"end\":return _context2.stop()}}},_callee2,this)}));function getInitialProps(_x2,_x3){return _getInitialProps.apply(this,arguments)}return getInitialProps}()},{key:\"abortComponentLoad\",value:function abortComponentLoad(as){if(this.componentLoadCancel){Router.events.emit(\"routeChangeError\",new Error(\"Route Cancelled\"),as);this.componentLoadCancel();this.componentLoadCancel=null}}},{key:\"notify\",value:function notify(data){var App=this.components[\"/_app\"].Component;this.subscriptions.forEach(function(fn){return fn((0,_assign.default)({},data,{App:App}))})}},{key:\"subscribe\",value:function subscribe(fn){var _this6=this;this.subscriptions.add(fn);return function(){return _this6.subscriptions.delete(fn)}}}],[{key:\"_rewriteUrlForNextExport\",value:function _rewriteUrlForNextExport(url){var _url$split=url.split(\"#\"),_url$split2=(0,_slicedToArray2.default)(_url$split,2),pathname=_url$split2[0],hash=_url$split2[1];var _pathname$split=pathname.split(\"?\"),_pathname$split2=(0,_slicedToArray2.default)(_pathname$split,2),path=_pathname$split2[0],qs=_pathname$split2[1];path=path.replace(/\\/$/,\"\");if(!/\\.[^\\/]+\\/?$/.test(path))path+=\"/\";if(qs)path+=\"?\"+qs;if(hash)path+=\"#\"+hash;return path}}]);return Router}();Router.events=mitt_1.default();exports.default=Router},JbBM:function(module,exports,__webpack_require__){__webpack_require__(\"Hfiw\");module.exports=__webpack_require__(\"WEpk\").Object.setPrototypeOf},Jes0:function(module,exports){module.exports=function(it){if(it==undefined)throw TypeError(\"Can't call method on  \"+it);return it}},Jljl:function(module,exports){function webpackEmptyContext(req){var e=new Error(\"Cannot find module '\"+req+\"'\");e.code=\"MODULE_NOT_FOUND\";throw e}webpackEmptyContext.keys=function(){return[]};webpackEmptyContext.resolve=webpackEmptyContext;module.exports=webpackEmptyContext;webpackEmptyContext.id=\"Jljl\"},JpPu:function(module,exports,__webpack_require__){var aFunction=__webpack_require__(\"nJQW\");module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 0:return function(){return fn.call(that)};case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},Jv5v:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var CONSTANTS={NODE_CLIENT:false,NODE_ADMIN:false,SDK_VERSION:\"${JSCORE_VERSION}\"};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var assert=function(assertion,message){if(!assertion){throw assertionError(message)}};var assertionError=function(message){return new Error(\"Firebase Database (\"+CONSTANTS.SDK_VERSION+\") INTERNAL ASSERT FAILED: \"+message)};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var stringToByteArray=function(str){var out=[],p=0;for(var i=0;i<str.length;i++){var c=str.charCodeAt(i);if(c<128){out[p++]=c}else if(c<2048){out[p++]=c>>6|192;out[p++]=c&63|128}else if((c&64512)==55296&&i+1<str.length&&(str.charCodeAt(i+1)&64512)==56320){c=65536+((c&1023)<<10)+(str.charCodeAt(++i)&1023);out[p++]=c>>18|240;out[p++]=c>>12&63|128;out[p++]=c>>6&63|128;out[p++]=c&63|128}else{out[p++]=c>>12|224;out[p++]=c>>6&63|128;out[p++]=c&63|128}}return out};var byteArrayToString=function(bytes){var out=[],pos=0,c=0;while(pos<bytes.length){var c1=bytes[pos++];if(c1<128){out[c++]=String.fromCharCode(c1)}else if(c1>191&&c1<224){var c2=bytes[pos++];out[c++]=String.fromCharCode((c1&31)<<6|c2&63)}else if(c1>239&&c1<365){var c2=bytes[pos++];var c3=bytes[pos++];var c4=bytes[pos++];var u=((c1&7)<<18|(c2&63)<<12|(c3&63)<<6|c4&63)-65536;out[c++]=String.fromCharCode(55296+(u>>10));out[c++]=String.fromCharCode(56320+(u&1023))}else{var c2=bytes[pos++];var c3=bytes[pos++];out[c++]=String.fromCharCode((c1&15)<<12|(c2&63)<<6|c3&63)}}return out.join(\"\")};var base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"+\"abcdefghijklmnopqrstuvwxyz\"+\"0123456789\",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+\"+/=\"},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+\"-_.\"},HAS_NATIVE_SUPPORT:typeof atob===\"function\",encodeByteArray:function(input,opt_webSafe){if(!Array.isArray(input)){throw Error(\"encodeByteArray takes an array as a parameter\")}this.init_();var byteToCharMap=opt_webSafe?this.byteToCharMapWebSafe_:this.byteToCharMap_;var output=[];for(var i=0;i<input.length;i+=3){var byte1=input[i];var haveByte2=i+1<input.length;var byte2=haveByte2?input[i+1]:0;var haveByte3=i+2<input.length;var byte3=haveByte3?input[i+2]:0;var outByte1=byte1>>2;var outByte2=(byte1&3)<<4|byte2>>4;var outByte3=(byte2&15)<<2|byte3>>6;var outByte4=byte3&63;if(!haveByte3){outByte4=64;if(!haveByte2){outByte3=64}}output.push(byteToCharMap[outByte1],byteToCharMap[outByte2],byteToCharMap[outByte3],byteToCharMap[outByte4])}return output.join(\"\")},encodeString:function(input,opt_webSafe){if(this.HAS_NATIVE_SUPPORT&&!opt_webSafe){return btoa(input)}return this.encodeByteArray(stringToByteArray(input),opt_webSafe)},decodeString:function(input,opt_webSafe){if(this.HAS_NATIVE_SUPPORT&&!opt_webSafe){return atob(input)}return byteArrayToString(this.decodeStringToByteArray(input,opt_webSafe))},decodeStringToByteArray:function(input,opt_webSafe){this.init_();var charToByteMap=opt_webSafe?this.charToByteMapWebSafe_:this.charToByteMap_;var output=[];for(var i=0;i<input.length;){var byte1=charToByteMap[input.charAt(i++)];var haveByte2=i<input.length;var byte2=haveByte2?charToByteMap[input.charAt(i)]:0;++i;var haveByte3=i<input.length;var byte3=haveByte3?charToByteMap[input.charAt(i)]:64;++i;var haveByte4=i<input.length;var byte4=haveByte4?charToByteMap[input.charAt(i)]:64;++i;if(byte1==null||byte2==null||byte3==null||byte4==null){throw Error()}var outByte1=byte1<<2|byte2>>4;output.push(outByte1);if(byte3!=64){var outByte2=byte2<<4&240|byte3>>2;output.push(outByte2);if(byte4!=64){var outByte3=byte3<<6&192|byte4;output.push(outByte3)}}}return output},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={};this.charToByteMap_={};this.byteToCharMapWebSafe_={};this.charToByteMapWebSafe_={};for(var i=0;i<this.ENCODED_VALS.length;i++){this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i);this.charToByteMap_[this.byteToCharMap_[i]]=i;this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i);this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i;if(i>=this.ENCODED_VALS_BASE.length){this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i;this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i}}}}};var base64Encode=function(str){var utf8Bytes=stringToByteArray(str);return base64.encodeByteArray(utf8Bytes,true)};var base64Decode=function(str){try{return base64.decodeString(str,true)}catch(e){console.error(\"base64Decode failed: \",e)}return null};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function deepCopy(value){return deepExtend(undefined,value)}function deepExtend(target,source){if(!(source instanceof Object)){return source}switch(source.constructor){case Date:var dateValue=source;return new Date(dateValue.getTime());case Object:if(target===undefined){target={}}break;case Array:target=[];break;default:return source}for(var prop in source){if(!source.hasOwnProperty(prop)){continue}target[prop]=deepExtend(target[prop],source[prop])}return target}function patchProperty(obj,prop,value){obj[prop]=value}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Deferred=function(){function Deferred(){var _this=this;this.promise=new Promise(function(resolve,reject){_this.resolve=resolve;_this.reject=reject})}Deferred.prototype.wrapCallback=function(callback){var _this=this;return function(error,value){if(error){_this.reject(error)}else{_this.resolve(value)}if(typeof callback===\"function\"){_this.promise.catch(function(){});if(callback.length===1){callback(error)}else{callback(error,value)}}}};return Deferred}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var getUA=function(){if(typeof navigator!==\"undefined\"&&typeof navigator[\"userAgent\"]===\"string\"){return navigator[\"userAgent\"]}else{return\"\"}};var isMobileCordova=function(){return typeof window!==\"undefined\"&&!!(window[\"cordova\"]||window[\"phonegap\"]||window[\"PhoneGap\"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())};var isReactNative=function(){return typeof navigator===\"object\"&&navigator[\"product\"]===\"ReactNative\"};var isNodeSdk=function(){return CONSTANTS.NODE_CLIENT===true||CONSTANTS.NODE_ADMIN===true};var ERROR_NAME=\"FirebaseError\";var captureStackTrace=Error.captureStackTrace;function patchCapture(captureFake){var result=captureStackTrace;captureStackTrace=captureFake;return result}var FirebaseError=function(){function FirebaseError(code,message){this.code=code;this.message=message;if(captureStackTrace){captureStackTrace(this,ErrorFactory.prototype.create)}else{try{throw Error.apply(this,arguments)}catch(err){this.name=ERROR_NAME;Object.defineProperty(this,\"stack\",{get:function(){return err.stack}})}}}return FirebaseError}();FirebaseError.prototype=Object.create(Error.prototype);FirebaseError.prototype.constructor=FirebaseError;FirebaseError.prototype.name=ERROR_NAME;var ErrorFactory=function(){function ErrorFactory(service,serviceName,errors){this.service=service;this.serviceName=serviceName;this.errors=errors;this.pattern=/\\{\\$([^}]+)}/g}ErrorFactory.prototype.create=function(code,data){if(data===undefined){data={}}var template=this.errors[code];var fullCode=this.service+\"/\"+code;var message;if(template===undefined){message=\"Error\"}else{message=template.replace(this.pattern,function(match,key){var value=data[key];return value!==undefined?value.toString():\"<\"+key+\"?>\"})}message=this.serviceName+\": \"+message+\" (\"+fullCode+\").\";var err=new FirebaseError(fullCode,message);for(var prop in data){if(!data.hasOwnProperty(prop)||prop.slice(-1)===\"_\"){continue}err[prop]=data[prop]}return err};return ErrorFactory}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function jsonEval(str){return JSON.parse(str)}function stringify(data){return JSON.stringify(data)}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var decode=function(token){var header={},claims={},data={},signature=\"\";try{var parts=token.split(\".\");header=jsonEval(base64Decode(parts[0])||\"\");claims=jsonEval(base64Decode(parts[1])||\"\");signature=parts[2];data=claims[\"d\"]||{};delete claims[\"d\"]}catch(e){}return{header:header,claims:claims,data:data,signature:signature}};var isValidTimestamp=function(token){var claims=decode(token).claims,now=Math.floor((new Date).getTime()/1e3),validSince,validUntil;if(typeof claims===\"object\"){if(claims.hasOwnProperty(\"nbf\")){validSince=claims[\"nbf\"]}else if(claims.hasOwnProperty(\"iat\")){validSince=claims[\"iat\"]}if(claims.hasOwnProperty(\"exp\")){validUntil=claims[\"exp\"]}else{validUntil=validSince+86400}}return now&&validSince&&validUntil&&now>=validSince&&now<=validUntil};var issuedAtTime=function(token){var claims=decode(token).claims;if(typeof claims===\"object\"&&claims.hasOwnProperty(\"iat\")){return claims[\"iat\"]}return null};var isValidFormat=function(token){var decoded=decode(token),claims=decoded.claims;return!!claims&&typeof claims===\"object\"&&claims.hasOwnProperty(\"iat\")};var isAdmin=function(token){var claims=decode(token).claims;return typeof claims===\"object\"&&claims[\"admin\"]===true};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var contains=function(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)};var safeGet=function(obj,key){if(Object.prototype.hasOwnProperty.call(obj,key))return obj[key]};var forEach=function(obj,fn){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){fn(key,obj[key])}}};var extend=function(objTo,objFrom){forEach(objFrom,function(key,value){objTo[key]=value});return objTo};var clone=function(obj){return extend({},obj)};var isNonNullObject=function(obj){return typeof obj===\"object\"&&obj!==null};var isEmpty=function(obj){for(var key in obj){return false}return true};var getCount=function(obj){var rv=0;for(var key in obj){rv++}return rv};var map=function(obj,f,opt_obj){var res={};for(var key in obj){res[key]=f.call(opt_obj,obj[key],key,obj)}return res};var findKey=function(obj,fn,opt_this){for(var key in obj){if(fn.call(opt_this,obj[key],key,obj)){return key}}return undefined};var findValue=function(obj,fn,opt_this){var key=findKey(obj,fn,opt_this);return key&&obj[key]};var getAnyKey=function(obj){for(var key in obj){return key}};var getValues=function(obj){var res=[];var i=0;for(var key in obj){res[i++]=obj[key]}return res};var every=function(obj,fn){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){if(!fn(key,obj[key])){return false}}}return true};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var querystring=function(querystringParams){var params=[];forEach(querystringParams,function(key,value){if(Array.isArray(value)){value.forEach(function(arrayVal){params.push(encodeURIComponent(key)+\"=\"+encodeURIComponent(arrayVal))})}else{params.push(encodeURIComponent(key)+\"=\"+encodeURIComponent(value))}});return params.length?\"&\"+params.join(\"&\"):\"\"};var querystringDecode=function(querystring){var obj={};var tokens=querystring.replace(/^\\?/,\"\").split(\"&\");tokens.forEach(function(token){if(token){var key=token.split(\"=\");obj[key[0]]=key[1]}});return obj};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Sha1=function(){function Sha1(){this.chain_=[];this.buf_=[];this.W_=[];this.pad_=[];this.inbuf_=0;this.total_=0;this.blockSize=512/8;this.pad_[0]=128;for(var i=1;i<this.blockSize;++i){this.pad_[i]=0}this.reset()}Sha1.prototype.reset=function(){this.chain_[0]=1732584193;this.chain_[1]=4023233417;this.chain_[2]=2562383102;this.chain_[3]=271733878;this.chain_[4]=3285377520;this.inbuf_=0;this.total_=0};Sha1.prototype.compress_=function(buf,opt_offset){if(!opt_offset){opt_offset=0}var W=this.W_;if(typeof buf===\"string\"){for(var i=0;i<16;i++){W[i]=buf.charCodeAt(opt_offset)<<24|buf.charCodeAt(opt_offset+1)<<16|buf.charCodeAt(opt_offset+2)<<8|buf.charCodeAt(opt_offset+3);opt_offset+=4}}else{for(var i=0;i<16;i++){W[i]=buf[opt_offset]<<24|buf[opt_offset+1]<<16|buf[opt_offset+2]<<8|buf[opt_offset+3];opt_offset+=4}}for(var i=16;i<80;i++){var t=W[i-3]^W[i-8]^W[i-14]^W[i-16];W[i]=(t<<1|t>>>31)&4294967295}var a=this.chain_[0];var b=this.chain_[1];var c=this.chain_[2];var d=this.chain_[3];var e=this.chain_[4];var f,k;for(var i=0;i<80;i++){if(i<40){if(i<20){f=d^b&(c^d);k=1518500249}else{f=b^c^d;k=1859775393}}else{if(i<60){f=b&c|d&(b|c);k=2400959708}else{f=b^c^d;k=3395469782}}var t=(a<<5|a>>>27)+f+e+k+W[i]&4294967295;e=d;d=c;c=(b<<30|b>>>2)&4294967295;b=a;a=t}this.chain_[0]=this.chain_[0]+a&4294967295;this.chain_[1]=this.chain_[1]+b&4294967295;this.chain_[2]=this.chain_[2]+c&4294967295;this.chain_[3]=this.chain_[3]+d&4294967295;this.chain_[4]=this.chain_[4]+e&4294967295};Sha1.prototype.update=function(bytes,opt_length){if(bytes==null){return}if(opt_length===undefined){opt_length=bytes.length}var lengthMinusBlock=opt_length-this.blockSize;var n=0;var buf=this.buf_;var inbuf=this.inbuf_;while(n<opt_length){if(inbuf==0){while(n<=lengthMinusBlock){this.compress_(bytes,n);n+=this.blockSize}}if(typeof bytes===\"string\"){while(n<opt_length){buf[inbuf]=bytes.charCodeAt(n);++inbuf;++n;if(inbuf==this.blockSize){this.compress_(buf);inbuf=0;break}}}else{while(n<opt_length){buf[inbuf]=bytes[n];++inbuf;++n;if(inbuf==this.blockSize){this.compress_(buf);inbuf=0;break}}}}this.inbuf_=inbuf;this.total_+=opt_length};Sha1.prototype.digest=function(){var digest=[];var totalBits=this.total_*8;if(this.inbuf_<56){this.update(this.pad_,56-this.inbuf_)}else{this.update(this.pad_,this.blockSize-(this.inbuf_-56))}for(var i=this.blockSize-1;i>=56;i--){this.buf_[i]=totalBits&255;totalBits/=256}this.compress_(this.buf_);var n=0;for(var i=0;i<5;i++){for(var j=24;j>=0;j-=8){digest[n]=this.chain_[i]>>j&255;++n}}return digest};return Sha1}();function createSubscribe(executor,onNoObservers){var proxy=new ObserverProxy(executor,onNoObservers);return proxy.subscribe.bind(proxy)}var ObserverProxy=function(){function ObserverProxy(executor,onNoObservers){var _this=this;this.observers=[];this.unsubscribes=[];this.observerCount=0;this.task=Promise.resolve();this.finalized=false;this.onNoObservers=onNoObservers;this.task.then(function(){executor(_this)}).catch(function(e){_this.error(e)})}ObserverProxy.prototype.next=function(value){this.forEachObserver(function(observer){observer.next(value)})};ObserverProxy.prototype.error=function(error){this.forEachObserver(function(observer){observer.error(error)});this.close(error)};ObserverProxy.prototype.complete=function(){this.forEachObserver(function(observer){observer.complete()});this.close()};ObserverProxy.prototype.subscribe=function(nextOrObserver,error,complete){var _this=this;var observer;if(nextOrObserver===undefined&&error===undefined&&complete===undefined){throw new Error(\"Missing Observer.\")}if(implementsAnyMethods(nextOrObserver,[\"next\",\"error\",\"complete\"])){observer=nextOrObserver}else{observer={next:nextOrObserver,error:error,complete:complete}}if(observer.next===undefined){observer.next=noop}if(observer.error===undefined){observer.error=noop}if(observer.complete===undefined){observer.complete=noop}var unsub=this.unsubscribeOne.bind(this,this.observers.length);if(this.finalized){this.task.then(function(){try{if(_this.finalError){observer.error(_this.finalError)}else{observer.complete()}}catch(e){}return})}this.observers.push(observer);return unsub};ObserverProxy.prototype.unsubscribeOne=function(i){if(this.observers===undefined||this.observers[i]===undefined){return}delete this.observers[i];this.observerCount-=1;if(this.observerCount===0&&this.onNoObservers!==undefined){this.onNoObservers(this)}};ObserverProxy.prototype.forEachObserver=function(fn){if(this.finalized){return}for(var i=0;i<this.observers.length;i++){this.sendOne(i,fn)}};ObserverProxy.prototype.sendOne=function(i,fn){var _this=this;this.task.then(function(){if(_this.observers!==undefined&&_this.observers[i]!==undefined){try{fn(_this.observers[i])}catch(e){if(typeof console!==\"undefined\"&&console.error){console.error(e)}}}})};ObserverProxy.prototype.close=function(err){var _this=this;if(this.finalized){return}this.finalized=true;if(err!==undefined){this.finalError=err}this.task.then(function(){_this.observers=undefined;_this.onNoObservers=undefined})};return ObserverProxy}();function async(fn,onError){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}Promise.resolve(true).then(function(){fn.apply(void 0,args)}).catch(function(error){if(onError){onError(error)}})}}function implementsAnyMethods(obj,methods){if(typeof obj!==\"object\"||obj===null){return false}for(var _i=0,methods_1=methods;_i<methods_1.length;_i++){var method=methods_1[_i];if(method in obj&&typeof obj[method]===\"function\"){return true}}return false}function noop(){}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var validateArgCount=function(fnName,minCount,maxCount,argCount){var argError;if(argCount<minCount){argError=\"at least \"+minCount}else if(argCount>maxCount){argError=maxCount===0?\"none\":\"no more than \"+maxCount}if(argError){var error=fnName+\" failed: Was called with \"+argCount+(argCount===1?\" argument.\":\" arguments.\")+\" Expects \"+argError+\".\";throw new Error(error)}};function errorPrefix(fnName,argumentNumber,optional){var argName=\"\";switch(argumentNumber){case 1:argName=optional?\"first\":\"First\";break;case 2:argName=optional?\"second\":\"Second\";break;case 3:argName=optional?\"third\":\"Third\";break;case 4:argName=optional?\"fourth\":\"Fourth\";break;default:throw new Error(\"errorPrefix called with argumentNumber > 4.  Need to update it?\")}var error=fnName+\" failed: \";error+=argName+\" argument \";return error}function validateNamespace(fnName,argumentNumber,namespace,optional){if(optional&&!namespace)return;if(typeof namespace!==\"string\"){throw new Error(errorPrefix(fnName,argumentNumber,optional)+\"must be a valid firebase namespace.\")}}function validateCallback(fnName,argumentNumber,callback,optional){if(optional&&!callback)return;if(typeof callback!==\"function\")throw new Error(errorPrefix(fnName,argumentNumber,optional)+\"must be a valid function.\")}function validateContextObject(fnName,argumentNumber,context,optional){if(optional&&!context)return;if(typeof context!==\"object\"||context===null)throw new Error(errorPrefix(fnName,argumentNumber,optional)+\"must be a valid context object.\")}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var stringToByteArray$1=function(str){var out=[],p=0;for(var i=0;i<str.length;i++){var c=str.charCodeAt(i);if(c>=55296&&c<=56319){var high=c-55296;i++;assert(i<str.length,\"Surrogate pair missing trail surrogate.\");var low=str.charCodeAt(i)-56320;c=65536+(high<<10)+low}if(c<128){out[p++]=c}else if(c<2048){out[p++]=c>>6|192;out[p++]=c&63|128}else if(c<65536){out[p++]=c>>12|224;out[p++]=c>>6&63|128;out[p++]=c&63|128}else{out[p++]=c>>18|240;out[p++]=c>>12&63|128;out[p++]=c>>6&63|128;out[p++]=c&63|128}}return out};var stringLength=function(str){var p=0;for(var i=0;i<str.length;i++){var c=str.charCodeAt(i);if(c<128){p++}else if(c<2048){p+=2}else if(c>=55296&&c<=56319){p+=4;i++}else{p+=3}}return p};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */CONSTANTS.NODE_CLIENT=true;exports.CONSTANTS=CONSTANTS;exports.Deferred=Deferred;exports.ErrorFactory=ErrorFactory;exports.FirebaseError=FirebaseError;exports.Sha1=Sha1;exports.assert=assert;exports.assertionError=assertionError;exports.async=async;exports.base64=base64;exports.base64Decode=base64Decode;exports.base64Encode=base64Encode;exports.clone=clone;exports.contains=contains;exports.createSubscribe=createSubscribe;exports.decode=decode;exports.deepCopy=deepCopy;exports.deepExtend=deepExtend;exports.errorPrefix=errorPrefix;exports.every=every;exports.extend=extend;exports.findKey=findKey;exports.findValue=findValue;exports.forEach=forEach;exports.getAnyKey=getAnyKey;exports.getCount=getCount;exports.getUA=getUA;exports.getValues=getValues;exports.isAdmin=isAdmin;exports.isEmpty=isEmpty;exports.isMobileCordova=isMobileCordova;exports.isNodeSdk=isNodeSdk;exports.isNonNullObject=isNonNullObject;exports.isReactNative=isReactNative;exports.isValidFormat=isValidFormat;exports.isValidTimestamp=isValidTimestamp;exports.issuedAtTime=issuedAtTime;exports.jsonEval=jsonEval;exports.map=map;exports.patchCapture=patchCapture;exports.patchProperty=patchProperty;exports.querystring=querystring;exports.querystringDecode=querystringDecode;exports.safeGet=safeGet;exports.stringLength=stringLength;exports.stringToByteArray=stringToByteArray$1;exports.stringify=stringify;exports.validateArgCount=validateArgCount;exports.validateCallback=validateCallback;exports.validateContextObject=validateContextObject;exports.validateNamespace=validateNamespace},JzIs:function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(\"lb/b\");var definePropertyModule=__webpack_require__(\"TIpl\");var anObject=__webpack_require__(\"bcPd\");var objectKeys=__webpack_require__(\"Q2Kg\");module.exports=DESCRIPTORS?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var keys=objectKeys(Properties);var length=keys.length;var i=0;var key;while(length>i)definePropertyModule.f(O,key=keys[i++],Properties[key]);return O}},K47E:function(module,exports){function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}module.exports=_assertThisInitialized},K8G7:function(module,exports,__webpack_require__){\"use strict\";var toIndexedObject=__webpack_require__(\"IutQ\");var addToUnscopables=__webpack_require__(\"gJLK\");var Iterators=__webpack_require__(\"0i0S\");var InternalStateModule=__webpack_require__(\"LX9C\");var defineIterator=__webpack_require__(\"stQs\");var ARRAY_ITERATOR=\"Array Iterator\";var setInternalState=InternalStateModule.set;var getInternalState=InternalStateModule.getterFor(ARRAY_ITERATOR);module.exports=defineIterator(Array,\"Array\",function(iterated,kind){setInternalState(this,{type:ARRAY_ITERATOR,target:toIndexedObject(iterated),index:0,kind:kind})},function(){var state=getInternalState(this);var target=state.target;var kind=state.kind;var index=state.index++;if(!target||index>=target.length){state.target=undefined;return{value:undefined,done:true}}if(kind==\"keys\")return{value:index,done:false};if(kind==\"values\")return{value:target[index],done:false};return{value:[index,target[index]],done:false}},\"values\");Iterators.Arguments=Iterators.Array;addToUnscopables(\"keys\");addToUnscopables(\"values\");addToUnscopables(\"entries\")},KEll:function(module,exports){module.exports=require(\"http\")},KI45:function(module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_interopRequireDefault},KUxP:function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},KaSA:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"uzDk\")},Keko:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});const constants_1=__webpack_require__(\"dDGi\");const internalPrefixes=[/^\\/_next\\//,/^\\/static\\//];function isInternalUrl(url){for(const prefix of internalPrefixes){if(prefix.test(url)){return true}}return false}exports.isInternalUrl=isInternalUrl;function isBlockedPage(pathname){return constants_1.BLOCKED_PAGES.indexOf(pathname)!==-1}exports.isBlockedPage=isBlockedPage;function cleanAmpPath(pathname){return(pathname||\"\").replace(/\\.amp$/,\"\").replace(/\\index$/,\"\")}exports.cleanAmpPath=cleanAmpPath;function isAmpPath(pathname){return(pathname||\"\").endsWith(\".amp\")}exports.isAmpPath=isAmpPath;function isAmpFile(pathname){if(isAmpPath(pathname))return true;pathname=pathname||\"\";const parts=pathname.split(\".\");parts.pop();return isAmpPath(parts.join(\".\"))}exports.isAmpFile=isAmpFile},Ksdp:function(module,exports,__webpack_require__){var assign=__webpack_require__(\"GrVo\");__webpack_require__(\"pSMy\")({target:\"Object\",stat:true,forced:Object.assign!==assign},{assign:assign})},LOEa:function(module,exports,__webpack_require__){(function(){var firebase=__webpack_require__(\"eq5/\").default;var g,aa=aa||{},k=this;function l(a){return\"string\"==typeof a}function ba(a){return\"boolean\"==typeof a}var ca=/^[\\w+\\/_-]+[=]{0,2}$/,da=null;function ea(){}function fa(a){var b=typeof a;if(\"object\"==b)if(a){if(a instanceof Array)return\"array\";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(\"[object Window]\"==c)return\"object\";if(\"[object Array]\"==c||\"number\"==typeof a.length&&\"undefined\"!=typeof a.splice&&\"undefined\"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable(\"splice\"))return\"array\";if(\"[object Function]\"==c||\"undefined\"!=typeof a.call&&\"undefined\"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable(\"call\"))return\"function\"}else return\"null\";else if(\"function\"==b&&\"undefined\"==typeof a.call)return\"object\";return b}function ha(a){return null===a}function ia(a){return\"array\"==fa(a)}function ja(a){var b=fa(a);return\"array\"==b||\"object\"==b&&\"number\"==typeof a.length}function n(a){return\"function\"==fa(a)}function q(a){var b=typeof a;return\"object\"==b&&null!=a||\"function\"==b}var ka=\"closure_uid_\"+(1e9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function r(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?r=na:r=oa;return r.apply(null,arguments)}function pa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var qa=Date.now||function(){return+new Date};function t(a,b){function c(){}c.prototype=b.prototype;a.pb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.gd=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}}function ra(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}}function u(a){if(Error.captureStackTrace)Error.captureStackTrace(this,u);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(u,Error);u.prototype.name=\"CustomError\";function sa(a,b){a=a.split(\"%s\");for(var c=\"\",d=a.length-1,e=0;e<d;e++)c+=a[e]+(e<b.length?b[e]:\"%s\");u.call(this,c+a[d])}t(sa,u);sa.prototype.name=\"AssertionError\";function ta(a,b){throw new sa(\"Failure\"+(a?\": \"+a:\"\"),Array.prototype.slice.call(arguments,1))}function ua(a,b){this.c=a;this.f=b;this.b=0;this.a=null}ua.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};function va(a,b){a.f(b);100>a.b&&(a.b++,b.next=a.a,a.a=b)}function wa(){this.b=this.a=null}var ya=new ua(function(){return new xa},function(a){a.reset()});wa.prototype.add=function(a,b){var c=ya.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};function za(){var a=Aa,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function xa(){this.next=this.b=this.a=null}xa.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};xa.prototype.reset=function(){this.next=this.b=this.a=null};var Ba=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(l(a))return l(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},v=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=l(a)?a.split(\"\"):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function Ca(a,b){var c=a.length,d=l(a)?a.split(\"\"):a;for(--c;0<=c;--c)c in d&&b.call(void 0,d[c],c,a)}var Da=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=Array(c),e=l(a)?a.split(\"\"):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},Ea=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=l(a)?a.split(\"\"):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1};function Fa(a){a:{var b=Ga;for(var c=a.length,d=l(a)?a.split(\"\"):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:l(a)?a.charAt(b):a[b]}function Ha(a,b){return 0<=Ba(a,b)}function Ia(a,b){b=Ba(a,b);var c;(c=0<=b)&&Array.prototype.splice.call(a,b,1);return c}function w(a,b){var c=0;Ca(a,function(d,e){b.call(void 0,d,e,a)&&1==Array.prototype.splice.call(a,e,1).length&&c++})}function Ja(a){return Array.prototype.concat.apply([],arguments)}function Ka(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}var La=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]},Ma=/&/g,Na=/</g,Oa=/>/g,Pa=/\"/g,Qa=/'/g,Ra=/\\x00/g,Sa=/[\\x00&<>\"']/;function y(a,b){return-1!=a.indexOf(b)}function Ta(a,b){return a<b?-1:a>b?1:0}var Ua;a:{var Va=k.navigator;if(Va){var Wa=Va.userAgent;if(Wa){Ua=Wa;break a}}Ua=\"\"}function z(a){return y(Ua,a)}function Xa(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Ya(a){for(var b in a)return!1;return!0}function Za(a){var b={},c;for(c in a)b[c]=a[c];return b}var $a=\"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");function ab(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<$a.length;f++)c=$a[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function bb(a,b){for(var c=a.split(\"%s\"),d=\"\",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join(\"%s\")}function cb(a){Sa.test(a)&&(-1!=a.indexOf(\"&\")&&(a=a.replace(Ma,\"&amp;\")),-1!=a.indexOf(\"<\")&&(a=a.replace(Na,\"&lt;\")),-1!=a.indexOf(\">\")&&(a=a.replace(Oa,\"&gt;\")),-1!=a.indexOf('\"')&&(a=a.replace(Pa,\"&quot;\")),-1!=a.indexOf(\"'\")&&(a=a.replace(Qa,\"&#39;\")),-1!=a.indexOf(\"\\0\")&&(a=a.replace(Ra,\"&#0;\")));return a}function db(a){k.setTimeout(function(){throw a},0)}var eb;function fb(){var a=k.MessageChannel;\"undefined\"===typeof a&&\"undefined\"!==typeof window&&window.postMessage&&window.addEventListener&&!z(\"Presto\")&&(a=function(){var a=document.createElement(\"IFRAME\");a.style.display=\"none\";a.src=\"\";document.documentElement.appendChild(a);var b=a.contentWindow;a=b.document;a.open();a.write(\"\");a.close();var c=\"callImmediate\"+Math.random(),d=\"file:\"==b.location.protocol?\"*\":b.location.protocol+\"//\"+b.location.host;a=r(function(a){if((\"*\"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},this);b.addEventListener(\"message\",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if(\"undefined\"!==typeof a&&!z(\"Trident\")&&!z(\"MSIE\")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var a=c.xb;c.xb=null;a()}};return function(a){d.next={xb:a};d=d.next;b.port2.postMessage(0)}}return\"undefined\"!==typeof document&&\"onreadystatechange\"in document.createElement(\"SCRIPT\")?function(a){var b=document.createElement(\"SCRIPT\");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){k.setTimeout(a,0)}}function hb(a,b){ib||jb();kb||(ib(),kb=!0);Aa.add(a,b)}var ib;function jb(){if(k.Promise&&k.Promise.resolve){var a=k.Promise.resolve(void 0);ib=function(){a.then(lb)}}else ib=function(){var a=lb;!n(k.setImmediate)||k.Window&&k.Window.prototype&&!z(\"Edge\")&&k.Window.prototype.setImmediate==k.setImmediate?(eb||(eb=fb()),eb(a)):k.setImmediate(a)}}var kb=!1,Aa=new wa;function lb(){for(var a;a=za();){try{a.a.call(a.b)}catch(b){db(b)}va(ya,a)}kb=!1}function A(a,b){this.a=mb;this.i=void 0;this.f=this.b=this.c=null;this.g=this.h=!1;if(a!=ea)try{var c=this;a.call(b,function(a){nb(c,ob,a)},function(a){if(!(a instanceof pb))try{if(a instanceof Error)throw a;throw Error(\"Promise rejected.\")}catch(e){}nb(c,qb,a)})}catch(d){nb(this,qb,d)}}var mb=0,ob=2,qb=3;function rb(){this.next=this.f=this.b=this.g=this.a=null;this.c=!1}rb.prototype.reset=function(){this.f=this.b=this.g=this.a=null;this.c=!1};var sb=new ua(function(){return new rb},function(a){a.reset()});function tb(a,b,c){var d=sb.get();d.g=a;d.b=b;d.f=c;return d}function B(a){if(a instanceof A)return a;var b=new A(ea);nb(b,ob,a);return b}function C(a){return new A(function(b,c){c(a)})}function ub(a,b,c){vb(a,b,c,null)||hb(pa(b,a))}function wb(a){return new A(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},m=0,p;m<a.length;m++)p=a[m],ub(p,pa(f,m),h);else b(e)})}function xb(a){return new A(function(b){var c=a.length,d=[];if(c)for(var e=function(a,e,f){c--;d[a]=e?{Eb:!0,value:f}:{Eb:!1,reason:f};0==c&&b(d)},f=0,h;f<a.length;f++)h=a[f],ub(h,pa(e,f,!0),pa(e,f,!1));else b(d)})}A.prototype.then=function(a,b,c){return yb(this,n(a)?a:null,n(b)?b:null,c)};A.prototype.$goog_Thenable=!0;g=A.prototype;g.ia=function(a,b){a=tb(a,a,b);a.c=!0;zb(this,a);return this};g.s=function(a,b){return yb(this,null,a,b)};g.cancel=function(a){this.a==mb&&hb(function(){var b=new pb(a);Ab(this,b)},this)};function Ab(a,b){if(a.a==mb)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,h=c.b;h&&(h.c||(d++,h.a==a&&(e=h),!(e&&1<d)));h=h.next)e||(f=h);e&&(c.a==mb&&1==d?Ab(c,b):(f?(d=f,d.next==c.f&&(c.f=d),d.next=d.next.next):Bb(c),Cb(c,e,qb,b)))}a.c=null}else nb(a,qb,b)}function zb(a,b){a.b||a.a!=ob&&a.a!=qb||Db(a);a.f?a.f.next=b:a.b=b;a.f=b}function yb(a,b,c,d){var e=tb(null,null,null);e.a=new A(function(a,h){e.g=b?function(c){try{var e=b.call(d,c);a(e)}catch(x){h(x)}}:a;e.b=c?function(b){try{var e=c.call(d,b);void 0===e&&b instanceof pb?h(b):a(e)}catch(x){h(x)}}:h});e.a.c=a;zb(a,e);return e.a}g.Pc=function(a){this.a=mb;nb(this,ob,a)};g.Qc=function(a){this.a=mb;nb(this,qb,a)};function nb(a,b,c){a.a==mb&&(a===c&&(b=qb,c=new TypeError(\"Promise cannot resolve to itself\")),a.a=1,vb(c,a.Pc,a.Qc,a)||(a.i=c,a.a=b,a.c=null,Db(a),b!=qb||c instanceof pb||Eb(a,c)))}function vb(a,b,c,d){if(a instanceof A)return zb(a,tb(b||ea,c||null,d)),!0;if(ra(a))return a.then(b,c,d),!0;if(q(a))try{var e=a.then;if(n(e))return Fb(a,e,b,c,d),!0}catch(f){return c.call(d,f),!0}return!1}function Fb(a,b,c,d,e){function f(a){m||(m=!0,d.call(e,a))}function h(a){m||(m=!0,c.call(e,a))}var m=!1;try{b.call(a,h,f)}catch(p){f(p)}}function Db(a){a.h||(a.h=!0,hb(a.Yb,a))}function Bb(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.f=null);return b}g.Yb=function(){for(var a;a=Bb(this);)Cb(this,a,this.a,this.i);this.h=!1};function Cb(a,b,c,d){if(c==qb&&b.b&&!b.c)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Gb(b,c,d);else try{b.c?b.g.call(b.f):Gb(b,c,d)}catch(e){Hb.call(null,e)}va(sb,b)}function Gb(a,b,c){b==ob?a.g.call(a.f,c):a.b&&a.b.call(a.f,c)}function Eb(a,b){a.g=!0;hb(function(){a.g&&Hb.call(null,b)})}var Hb=db;function pb(a){u.call(this,a)}t(pb,u);pb.prototype.name=\"cancel\";function Ib(){0!=Jb&&(Kb[this[ka]||(this[ka]=++ma)]=this);this.qa=this.qa;this.ja=this.ja}var Jb=0,Kb={};Ib.prototype.qa=!1;function Lb(a){if(!a.qa&&(a.qa=!0,a.va(),0!=Jb)){var b=a[ka]||(a[ka]=++ma);if(0!=Jb&&a.ja&&0<a.ja.length)throw Error(a+\" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.\");delete Kb[b]}}Ib.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()};function Mb(a){Mb[\" \"](a);return a}Mb[\" \"]=ea;function Nb(a,b){var c=Ob;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)}var Pb=z(\"Opera\"),Qb=z(\"Trident\")||z(\"MSIE\"),Rb=z(\"Edge\"),Sb=Rb||Qb,Tb=z(\"Gecko\")&&!(y(Ua.toLowerCase(),\"webkit\")&&!z(\"Edge\"))&&!(z(\"Trident\")||z(\"MSIE\"))&&!z(\"Edge\"),Ub=y(Ua.toLowerCase(),\"webkit\")&&!z(\"Edge\");function Vb(){var a=k.document;return a?a.documentMode:void 0}var Wb;a:{var Xb=\"\",Yb=function(){var a=Ua;if(Tb)return/rv:([^\\);]+)(\\)|;)/.exec(a);if(Rb)return/Edge\\/([\\d\\.]+)/.exec(a);if(Qb)return/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a);if(Ub)return/WebKit\\/(\\S+)/.exec(a);if(Pb)return/(?:Version)[ \\/]?(\\S+)/.exec(a)}();Yb&&(Xb=Yb?Yb[1]:\"\");if(Qb){var Zb=Vb();if(null!=Zb&&Zb>parseFloat(Xb)){Wb=String(Zb);break a}}Wb=Xb}var Ob={};function $b(a){return Nb(a,function(){for(var b=0,c=La(String(Wb)).split(\".\"),d=La(String(a)).split(\".\"),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||\"\",m=d[f]||\"\";do{h=/(\\d*)(\\D*)(.*)/.exec(h)||[\"\",\"\",\"\",\"\"];m=/(\\d*)(\\D*)(.*)/.exec(m)||[\"\",\"\",\"\",\"\"];if(0==h[0].length&&0==m[0].length)break;b=Ta(0==h[1].length?0:parseInt(h[1],10),0==m[1].length?0:parseInt(m[1],10))||Ta(0==h[2].length,0==m[2].length)||Ta(h[2],m[2]);h=h[3];m=m[3]}while(0==b)}return 0<=b})}var ac;var bc=k.document;ac=bc&&Qb?Vb()||(\"CSS1Compat\"==bc.compatMode?parseInt(Wb,10):5):void 0;var cc=Object.freeze||function(a){return a};var dc=!Qb||9<=Number(ac),ec=Qb&&!$b(\"9\"),fc=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},\"passive\",{get:function(){a=!0}});try{k.addEventListener(\"test\",ea,b),k.removeEventListener(\"test\",ea,b)}catch(c){}return a}();function D(a,b){this.type=a;this.b=this.target=b;this.Kb=!0}D.prototype.preventDefault=function(){this.Kb=!1};function gc(a,b){D.call(this,a?a.type:\"\");this.relatedTarget=this.b=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key=\"\";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType=\"\";this.a=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.b=b;if(b=a.relatedTarget){if(Tb){a:{try{Mb(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else\"mouseover\"==c?b=a.fromElement:\"mouseout\"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||\"\";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType=l(a.pointerType)?a.pointerType:hc[a.pointerType]||\"\";this.a=a;a.defaultPrevented&&this.preventDefault()}}t(gc,D);var hc=cc({2:\"touch\",3:\"pen\",4:\"mouse\"});gc.prototype.preventDefault=function(){gc.pb.preventDefault.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,ec)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};gc.prototype.f=function(){return this.a};var ic=\"closure_listenable_\"+(1e6*Math.random()|0),jc=0;function kc(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.Ma=e;this.key=++jc;this.oa=this.Ia=!1}function lc(a){a.oa=!0;a.listener=null;a.proxy=null;a.src=null;a.Ma=null}function mc(a){this.src=a;this.a={};this.b=0}mc.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var h=nc(a,b,d,e);-1<h?(b=a[h],c||(b.Ia=!1)):(b=new kc(b,this.src,f,!!d,e),b.Ia=c,a.push(b));return b};function oc(a,b){var c=b.type;c in a.a&&Ia(a.a[c],b)&&(lc(b),0==a.a[c].length&&(delete a.a[c],a.b--))}function nc(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.oa&&f.listener==b&&f.capture==!!c&&f.Ma==d)return e}return-1}var pc=\"closure_lm_\"+(1e6*Math.random()|0),qc={},rc=0;function sc(a,b,c,d,e){if(d&&d.once)tc(a,b,c,d,e);else if(ia(b))for(var f=0;f<b.length;f++)sc(a,b[f],c,d,e);else c=uc(c),a&&a[ic]?vc(a,b,c,q(d)?!!d.capture:!!d,e):wc(a,b,c,!1,d,e)}function wc(a,b,c,d,e,f){if(!b)throw Error(\"Invalid event type\");var h=q(e)?!!e.capture:!!e,m=xc(a);m||(a[pc]=m=new mc(a));c=m.add(b,c,d,h,f);if(!c.proxy){d=yc();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)fc||(e=h),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(zc(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error(\"addEventListener and attachEvent are unavailable.\");rc++}}function yc(){var a=Ac,b=dc?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function tc(a,b,c,d,e){if(ia(b))for(var f=0;f<b.length;f++)tc(a,b[f],c,d,e);else c=uc(c),a&&a[ic]?Bc(a,b,c,q(d)?!!d.capture:!!d,e):wc(a,b,c,!0,d,e)}function E(a,b,c,d,e){if(ia(b))for(var f=0;f<b.length;f++)E(a,b[f],c,d,e);else(d=q(d)?!!d.capture:!!d,c=uc(c),a&&a[ic])?(a=a.o,b=String(b).toString(),b in a.a&&(f=a.a[b],c=nc(f,c,d,e),-1<c&&(lc(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=xc(a))&&(b=a.a[b.toString()],a=-1,b&&(a=nc(b,c,d,e)),(c=-1<a?b[a]:null)&&Cc(c))}function Cc(a){if(\"number\"!=typeof a&&a&&!a.oa){var b=a.src;if(b&&b[ic])oc(b.o,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(zc(c),d):b.addListener&&b.removeListener&&b.removeListener(d);rc--;(c=xc(b))?(oc(c,a),0==c.b&&(c.src=null,b[pc]=null)):lc(a)}}}function zc(a){return a in qc?qc[a]:qc[a]=\"on\"+a}function Dc(a,b,c,d){var e=!0;if(a=xc(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.oa&&(f=Ec(f,d),e=e&&!1!==f)}return e}function Ec(a,b){var c=a.listener,d=a.Ma||a.src;a.Ia&&Cc(a);return c.call(d,b)}function Ac(a,b){if(a.oa)return!0;if(!dc){if(!b)a:{b=[\"window\",\"event\"];for(var c=k,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new gc(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(h){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.b;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;0<=e;e--){b.b=d[e];var f=Dc(d[e],a,!0,b);c=c&&f}for(e=0;e<d.length;e++)b.b=d[e],f=Dc(d[e],a,!1,b),c=c&&f}return c}return Ec(a,new gc(b,this))}function xc(a){a=a[pc];return a instanceof mc?a:null}var Fc=\"__closure_events_fn_\"+(1e9*Math.random()>>>0);function uc(a){if(n(a))return a;a[Fc]||(a[Fc]=function(b){return a.handleEvent(b)});return a[Fc]}function F(){Ib.call(this);this.o=new mc(this);this.Rb=this;this.Wa=null}t(F,Ib);F.prototype[ic]=!0;F.prototype.addEventListener=function(a,b,c,d){sc(this,a,b,c,d)};F.prototype.removeEventListener=function(a,b,c,d){E(this,a,b,c,d)};F.prototype.dispatchEvent=function(a){var b,c=this.Wa;if(c)for(b=[];c;c=c.Wa)b.push(c);c=this.Rb;var d=a.type||a;if(l(a))a=new D(a,c);else if(a instanceof D)a.target=a.target||c;else{var e=a;a=new D(d,c);ab(a,e)}e=!0;if(b)for(var f=b.length-1;0<=f;f--){var h=a.b=b[f];e=Gc(h,d,!0,a)&&e}h=a.b=c;e=Gc(h,d,!0,a)&&e;e=Gc(h,d,!1,a)&&e;if(b)for(f=0;f<b.length;f++)h=a.b=b[f],e=Gc(h,d,!1,a)&&e;return e};F.prototype.va=function(){F.pb.va.call(this);if(this.o){var a=this.o,b=0,c;for(c in a.a){for(var d=a.a[c],e=0;e<d.length;e++)++b,lc(d[e]);delete a.a[c];a.b--}}this.Wa=null};function vc(a,b,c,d,e){a.o.add(String(b),c,!1,d,e)}function Bc(a,b,c,d,e){a.o.add(String(b),c,!0,d,e)}function Gc(a,b,c,d){b=a.o.a[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var h=b[f];if(h&&!h.oa&&h.capture==c){var m=h.listener,p=h.Ma||h.src;h.Ia&&oc(a.o,h);e=!1!==m.call(p,d)&&e}}return e&&0!=d.Kb}function Hc(a,b,c){if(n(a))c&&(a=r(a,c));else if(a&&\"function\"==typeof a.handleEvent)a=r(a.handleEvent,a);else throw Error(\"Invalid listener argument\");return 2147483647<Number(b)?-1:k.setTimeout(a,b||0)}function Ic(a){var b=null;return new A(function(c,d){b=Hc(function(){c(void 0)},a);-1==b&&d(Error(\"Failed to schedule timer.\"))}).s(function(a){k.clearTimeout(b);throw a})}function Jc(a){if(a.S&&\"function\"==typeof a.S)return a.S();if(l(a))return a.split(\"\");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}b=[];c=0;for(d in a)b[c++]=a[d];return b}function Kc(a){if(a.U&&\"function\"==typeof a.U)return a.U();if(!a.S||\"function\"!=typeof a.S){if(ja(a)||l(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}b=[];c=0;for(var d in a)b[c++]=d;return b}}function Lc(a,b){if(a.forEach&&\"function\"==typeof a.forEach)a.forEach(b,void 0);else if(ja(a)||l(a))v(a,b,void 0);else for(var c=Kc(a),d=Jc(a),e=d.length,f=0;f<e;f++)b.call(void 0,d[f],c&&c[f],a)}function Mc(a,b){this.b={};this.a=[];this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error(\"Uneven number of arguments\");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a)if(a instanceof Mc)for(c=a.U(),d=0;d<c.length;d++)this.set(c[d],a.get(c[d]));else for(d in a)this.set(d,a[d])}g=Mc.prototype;g.S=function(){Nc(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};g.U=function(){Nc(this);return this.a.concat()};g.clear=function(){this.b={};this.c=this.a.length=0};function Nc(a){if(a.c!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Oc(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.c!=a.a.length){var e={};for(c=b=0;b<a.a.length;)d=a.a[b],Oc(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}g.get=function(a,b){return Oc(this.b,a)?this.b[a]:b};g.set=function(a,b){Oc(this.b,a)||(this.c++,this.a.push(a));this.b[a]=b};g.forEach=function(a,b){for(var c=this.U(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};function Oc(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var Pc=/^(?:([^:\\/?#.]+):)?(?:\\/\\/(?:([^\\/?#]*)@)?([^\\/#?]*?)(?::([0-9]+))?(?=[\\/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;function Qc(a,b){if(a){a=a.split(\"&\");for(var c=0;c<a.length;c++){var d=a[c].indexOf(\"=\"),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?decodeURIComponent(e.replace(/\\+/g,\" \")):\"\")}}}function Rc(a,b){this.b=this.o=this.c=\"\";this.i=null;this.h=this.g=\"\";this.f=!1;if(a instanceof Rc){this.f=void 0!==b?b:a.f;Sc(this,a.c);this.o=a.o;this.b=a.b;Tc(this,a.i);this.g=a.g;b=a.a;var c=new Uc;c.c=b.c;b.a&&(c.a=new Mc(b.a),c.b=b.b);Vc(this,c);this.h=a.h}else a&&(c=String(a).match(Pc))?(this.f=!!b,Sc(this,c[1]||\"\",!0),this.o=Wc(c[2]||\"\"),this.b=Wc(c[3]||\"\",!0),Tc(this,c[4]),this.g=Wc(c[5]||\"\",!0),Vc(this,c[6]||\"\",!0),this.h=Wc(c[7]||\"\")):(this.f=!!b,this.a=new Uc(null,this.f))}Rc.prototype.toString=function(){var a=[],b=this.c;b&&a.push(Xc(b,Yc,!0),\":\");var c=this.b;if(c||\"file\"==b)a.push(\"//\"),(b=this.o)&&a.push(Xc(b,Yc,!0),\"@\"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),c=this.i,null!=c&&a.push(\":\",String(c));if(c=this.g)this.b&&\"/\"!=c.charAt(0)&&a.push(\"/\"),a.push(Xc(c,\"/\"==c.charAt(0)?Zc:$c,!0));(c=this.a.toString())&&a.push(\"?\",c);(c=this.h)&&a.push(\"#\",Xc(c,ad));return a.join(\"\")};function Sc(a,b,c){a.c=c?Wc(b,!0):b;a.c&&(a.c=a.c.replace(/:$/,\"\"))}function Tc(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error(\"Bad port number \"+b);a.i=b}else a.i=null}function Vc(a,b,c){b instanceof Uc?(a.a=b,bd(a.a,a.f)):(c||(b=Xc(b,cd)),a.a=new Uc(b,a.f))}function G(a,b,c){a.a.set(b,c)}function dd(a,b){return a.a.get(b)}function ed(a){return a instanceof Rc?new Rc(a):new Rc(a,void 0)}function fd(a,b){var c=new Rc(null,void 0);Sc(c,\"https\");a&&(c.b=a);b&&(c.g=b);return c}function Wc(a,b){return a?b?decodeURI(a.replace(/%25/g,\"%2525\")):decodeURIComponent(a):\"\"}function Xc(a,b,c){return l(a)?(a=encodeURI(a).replace(b,gd),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),a):null}function gd(a){a=a.charCodeAt(0);return\"%\"+(a>>4&15).toString(16)+(a&15).toString(16)}var Yc=/[#\\/\\?@]/g,$c=/[#\\?:]/g,Zc=/[#\\?]/g,cd=/[#\\?@]/g,ad=/#/g;function Uc(a,b){this.b=this.a=null;this.c=a||null;this.f=!!b}function hd(a){a.a||(a.a=new Mc,a.b=0,a.c&&Qc(a.c,function(b,c){a.add(decodeURIComponent(b.replace(/\\+/g,\" \")),c)}))}function id(a){var b=Kc(a);if(\"undefined\"==typeof b)throw Error(\"Keys are undefined\");var c=new Uc(null,void 0);a=Jc(a);for(var d=0;d<b.length;d++){var e=b[d],f=a[d];ia(f)?jd(c,e,f):c.add(e,f)}return c}g=Uc.prototype;g.add=function(a,b){hd(this);this.c=null;a=kd(this,a);var c=this.a.get(a);c||this.a.set(a,c=[]);c.push(b);this.b+=1;return this};function ld(a,b){hd(a);b=kd(a,b);Oc(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,a=a.a,Oc(a.b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Nc(a)))}g.clear=function(){this.a=this.c=null;this.b=0};function md(a,b){hd(a);b=kd(a,b);return Oc(a.a.b,b)}g.forEach=function(a,b){hd(this);this.a.forEach(function(c,d){v(c,function(c){a.call(b,c,d,this)},this)},this)};g.U=function(){hd(this);for(var a=this.a.S(),b=this.a.U(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};g.S=function(a){hd(this);var b=[];if(l(a))md(this,a)&&(b=Ja(b,this.a.get(kd(this,a))));else{a=this.a.S();for(var c=0;c<a.length;c++)b=Ja(b,a[c])}return b};g.set=function(a,b){hd(this);this.c=null;a=kd(this,a);md(this,a)&&(this.b-=this.a.get(a).length);this.a.set(a,[b]);this.b+=1;return this};g.get=function(a,b){if(!a)return b;a=this.S(a);return 0<a.length?String(a[0]):b};function jd(a,b,c){ld(a,b);0<c.length&&(a.c=null,a.a.set(kd(a,b),Ka(c)),a.b+=c.length)}g.toString=function(){if(this.c)return this.c;if(!this.a)return\"\";for(var a=[],b=this.a.U(),c=0;c<b.length;c++){var d=b[c],e=encodeURIComponent(String(d));d=this.S(d);for(var f=0;f<d.length;f++){var h=e;\"\"!==d[f]&&(h+=\"=\"+encodeURIComponent(String(d[f])));a.push(h)}}return this.c=a.join(\"&\")};function kd(a,b){b=String(b);a.f&&(b=b.toLowerCase());return b}function bd(a,b){b&&!a.f&&(hd(a),a.c=null,a.a.forEach(function(a,b){var c=b.toLowerCase();b!=c&&(ld(this,b),jd(this,c,a))},a));a.f=b}var nd=!Qb||9<=Number(ac);function od(a,b){this.a=a===pd&&b||\"\";this.b=qd}od.prototype.na=!0;od.prototype.ma=function(){return this.a};od.prototype.toString=function(){return\"Const{\"+this.a+\"}\"};function rd(a){if(a instanceof od&&a.constructor===od&&a.b===qd)return a.a;ta(\"expected object of type Const, got '\"+a+\"'\");return\"type_error:Const\"}var qd={},pd={};function sd(){this.a=\"\";this.b=td}sd.prototype.na=!0;sd.prototype.ma=function(){return this.a};sd.prototype.toString=function(){return\"TrustedResourceUrl{\"+this.a+\"}\"};function ud(a){if(a instanceof sd&&a.constructor===sd&&a.b===td)return a.a;ta(\"expected object of type TrustedResourceUrl, got '\"+a+\"' of type \"+fa(a));return\"type_error:TrustedResourceUrl\"}function vd(a,b){var c=rd(a);if(!wd.test(c))throw Error(\"Invalid TrustedResourceUrl format: \"+c);a=c.replace(xd,function(a,e){if(!Object.prototype.hasOwnProperty.call(b,e))throw Error('Found marker, \"'+e+'\", in format string, \"'+c+'\", but no valid label mapping found in args: '+JSON.stringify(b));a=b[e];return a instanceof od?rd(a):encodeURIComponent(String(a))});return yd(a)}var xd=/%{(\\w+)}/g,wd=/^((https:)?\\/\\/[0-9a-z.:[\\]-]+\\/|\\/[^\\/\\\\]|[^:\\/\\\\%]+\\/|[^:\\/\\\\%]*[?#]|about:blank#)/i,td={};function yd(a){var b=new sd;b.a=a;return b}function zd(){this.a=\"\";this.b=Ad}zd.prototype.na=!0;zd.prototype.ma=function(){return this.a};zd.prototype.toString=function(){return\"SafeUrl{\"+this.a+\"}\"};function Bd(a){if(a instanceof zd&&a.constructor===zd&&a.b===Ad)return a.a;ta(\"expected object of type SafeUrl, got '\"+a+\"' of type \"+fa(a));return\"type_error:SafeUrl\"}var Cd=/^(?:(?:https?|mailto|ftp):|[^:\\/?#]*(?:[\\/?#]|$))/i;function Dd(a){if(a instanceof zd)return a;a=\"object\"==typeof a&&a.na?a.ma():String(a);Cd.test(a)||(a=\"about:invalid#zClosurez\");return Ed(a)}var Ad={};function Ed(a){var b=new zd;b.a=a;return b}Ed(\"about:blank\");function Fd(){this.a=\"\";this.b=Gd}Fd.prototype.na=!0;Fd.prototype.ma=function(){return this.a};Fd.prototype.toString=function(){return\"SafeHtml{\"+this.a+\"}\"};function Hd(a){if(a instanceof Fd&&a.constructor===Fd&&a.b===Gd)return a.a;ta(\"expected object of type SafeHtml, got '\"+a+\"' of type \"+fa(a));return\"type_error:SafeHtml\"}var Gd={};function Id(a){var b=new Fd;b.a=a;return b}Id(\"<!DOCTYPE html>\");Id(\"\");Id(\"<br>\");function Jd(a,b){a.src=ud(b);if(null===da)b:{b=k.document;if((b=b.querySelector&&b.querySelector(\"script[nonce]\"))&&(b=b.nonce||b.getAttribute(\"nonce\"))&&ca.test(b)){da=b;break b}da=\"\"}b=da;b&&a.setAttribute(\"nonce\",b)}function Kd(a){var b=document;return l(a)?b.getElementById(a):a}function Ld(a,b){Xa(b,function(b,d){b&&\"object\"==typeof b&&b.na&&(b=b.ma());\"style\"==d?a.style.cssText=b:\"class\"==d?a.className=b:\"for\"==d?a.htmlFor=b:Md.hasOwnProperty(d)?a.setAttribute(Md[d],b):0==d.lastIndexOf(\"aria-\",0)||0==d.lastIndexOf(\"data-\",0)?a.setAttribute(d,b):a[d]=b})}var Md={cellpadding:\"cellPadding\",cellspacing:\"cellSpacing\",colspan:\"colSpan\",frameborder:\"frameBorder\",height:\"height\",maxlength:\"maxLength\",nonce:\"nonce\",role:\"role\",rowspan:\"rowSpan\",type:\"type\",usemap:\"useMap\",valign:\"vAlign\",width:\"width\"};function Nd(a,b,c){var d=arguments,e=document,f=String(d[0]),h=d[1];if(!nd&&h&&(h.name||h.type)){f=[\"<\",f];h.name&&f.push(' name=\"',cb(h.name),'\"');if(h.type){f.push(' type=\"',cb(h.type),'\"');var m={};ab(m,h);delete m.type;h=m}f.push(\">\");f=f.join(\"\")}f=e.createElement(f);h&&(l(h)?f.className=h:ia(h)?f.className=h.join(\" \"):Ld(f,h));2<d.length&&Od(e,f,d);return f}function Od(a,b,c){function d(c){c&&b.appendChild(l(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!ja(f)||q(f)&&0<f.nodeType?d(f):v(Pd(f)?Ka(f):f,d)}}function Pd(a){if(a&&\"number\"==typeof a.length){if(q(a))return\"function\"==typeof a.item||\"string\"==typeof a.item;if(n(a))return\"function\"==typeof a.item}return!1}function Qd(a){var b=[];Rd(new Sd,a,b);return b.join(\"\")}function Sd(){}function Rd(a,b,c){if(null==b)c.push(\"null\");else{if(\"object\"==typeof b){if(ia(b)){var d=b;b=d.length;c.push(\"[\");for(var e=\"\",f=0;f<b;f++)c.push(e),Rd(a,d[f],c),e=\",\";c.push(\"]\");return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push(\"{\");e=\"\";for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(f=b[d],\"function\"!=typeof f&&(c.push(e),Td(d,c),c.push(\":\"),Rd(a,f,c),e=\",\"));c.push(\"}\");return}}switch(typeof b){case\"string\":Td(b,c);break;case\"number\":c.push(isFinite(b)&&!isNaN(b)?String(b):\"null\");break;case\"boolean\":c.push(String(b));break;case\"function\":c.push(\"null\");break;default:throw Error(\"Unknown type: \"+typeof b)}}}var Ud={'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\",\"/\":\"\\\\/\",\"\\b\":\"\\\\b\",\"\\f\":\"\\\\f\",\"\\n\":\"\\\\n\",\"\\r\":\"\\\\r\",\"\\t\":\"\\\\t\",\"\\v\":\"\\\\u000b\"},Vd=/\\uffff/.test(\"ï¿¿\")?/[\\\\\"\\x00-\\x1f\\x7f-\\uffff]/g:/[\\\\\"\\x00-\\x1f\\x7f-\\xff]/g;function Td(a,b){b.push('\"',a.replace(Vd,function(a){var b=Ud[a];b||(b=\"\\\\u\"+(a.charCodeAt(0)|65536).toString(16).substr(1),Ud[a]=b);return b}),'\"')}function Wd(){var a=H();return Qb&&!!ac&&11==ac||/Edge\\/\\d+/.test(a)}function Xd(){return k.window&&k.window.location.href||self&&self.location&&self.location.href||\"\"}function Yd(a,b){b=b||k.window;var c=\"about:blank\";a&&(c=Bd(Dd(a)));b.location.href=c}function Zd(a,b){var c=[],d;for(d in a)d in b?typeof a[d]!=typeof b[d]?c.push(d):\"object\"==typeof a[d]&&null!=a[d]&&null!=b[d]?0<Zd(a[d],b[d]).length&&c.push(d):a[d]!==b[d]&&c.push(d):c.push(d);for(d in b)d in a||c.push(d);return c}function $d(){var a=H();a=ae(a)!=be?null:(a=a.match(/\\sChrome\\/(\\d+)/i))&&2==a.length?parseInt(a[1],10):null;return a&&30>a?!1:!Qb||!ac||9<ac}function ce(a){a=(a||H()).toLowerCase();return a.match(/android/)||a.match(/webos/)||a.match(/iphone|ipad|ipod/)||a.match(/blackberry/)||a.match(/windows phone/)||a.match(/iemobile/)?!0:!1}function de(a){a=a||k.window;try{a.close()}catch(b){}}function ee(a,b,c){var d=Math.floor(1e9*Math.random()).toString();b=b||500;c=c||600;var e=(window.screen.availHeight-c)/2,f=(window.screen.availWidth-b)/2;b={width:b,height:c,top:0<e?e:0,left:0<f?f:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1};c=H().toLowerCase();d&&(b.target=d,y(c,\"crios/\")&&(b.target=\"_blank\"));ae(H())==fe&&(a=a||\"http://localhost\",b.scrollbars=!0);c=a||\"\";(a=b)||(a={});d=window;b=c instanceof zd?c:Dd(\"undefined\"!=typeof c.href?c.href:String(c));c=a.target||c.target;e=[];for(h in a)switch(h){case\"width\":case\"height\":case\"top\":case\"left\":e.push(h+\"=\"+a[h]);break;case\"target\":case\"noopener\":case\"noreferrer\":break;default:e.push(h+\"=\"+(a[h]?1:0))}var h=e.join(\",\");(z(\"iPhone\")&&!z(\"iPod\")&&!z(\"iPad\")||z(\"iPad\")||z(\"iPod\"))&&d.navigator&&d.navigator.standalone&&c&&\"_self\"!=c?(h=d.document.createElement(\"A\"),b instanceof zd||b instanceof zd||(b=\"object\"==typeof b&&b.na?b.ma():String(b),Cd.test(b)||(b=\"about:invalid#zClosurez\"),b=Ed(b)),h.href=Bd(b),h.setAttribute(\"target\",c),a.noreferrer&&h.setAttribute(\"rel\",\"noreferrer\"),a=document.createEvent(\"MouseEvent\"),a.initMouseEvent(\"click\",!0,!0,d,1),h.dispatchEvent(a),h={}):a.noreferrer?(h=d.open(\"\",c,h),a=Bd(b),h&&(Sb&&y(a,\";\")&&(a=\"'\"+a.replace(/'/g,\"%27\")+\"'\"),h.opener=null,a=Id('<meta name=\"referrer\" content=\"no-referrer\"><meta http-equiv=\"refresh\" content=\"0; url='+cb(a)+'\">'),h.document.write(Hd(a)),h.document.close())):(h=d.open(Bd(b),c,h))&&a.noopener&&(h.opener=null);if(h)try{h.focus()}catch(m){}return h}function ge(a){return new A(function(b){function c(){Ic(2e3).then(function(){if(!a||a.closed)b();else return c()})}return c()})}var he=/^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/,ie=/^[^@]+@[^@]+$/;function je(){var a=null;return new A(function(b){\"complete\"==k.document.readyState?b():(a=function(){b()},tc(window,\"load\",a))}).s(function(b){E(window,\"load\",a);throw b})}function ke(){return le(void 0)?je().then(function(){return new A(function(a,b){var c=k.document,d=setTimeout(function(){b(Error(\"Cordova framework is not ready.\"))},1e3);c.addEventListener(\"deviceready\",function(){clearTimeout(d);a()},!1)})}):C(Error(\"Cordova must run in an Android or iOS file scheme.\"))}function le(a){a=a||H();return!(\"file:\"!==me()||!a.toLowerCase().match(/iphone|ipad|ipod|android/))}function ne(){var a=k.window;try{return!(!a||a==a.top)}catch(b){return!1}}function oe(){return\"object\"!==typeof k.window&&\"function\"===typeof k.importScripts}function pe(){return firebase.INTERNAL.hasOwnProperty(\"reactNative\")?\"ReactNative\":firebase.INTERNAL.hasOwnProperty(\"node\")?\"Node\":oe()?\"Worker\":\"Browser\"}function qe(){var a=pe();return\"ReactNative\"===a||\"Node\"===a}function re(){for(var a=50,b=[];0<a;)b.push(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".charAt(Math.floor(62*Math.random()))),a--;return b.join(\"\")}var fe=\"Firefox\",be=\"Chrome\";function ae(a){var b=a.toLowerCase();if(y(b,\"opera/\")||y(b,\"opr/\")||y(b,\"opios/\"))return\"Opera\";if(y(b,\"iemobile\"))return\"IEMobile\";if(y(b,\"msie\")||y(b,\"trident/\"))return\"IE\";if(y(b,\"edge/\"))return\"Edge\";if(y(b,\"firefox/\"))return fe;if(y(b,\"silk/\"))return\"Silk\";if(y(b,\"blackberry\"))return\"Blackberry\";if(y(b,\"webos\"))return\"Webos\";if(!y(b,\"safari/\")||y(b,\"chrome/\")||y(b,\"crios/\")||y(b,\"android\"))if(!y(b,\"chrome/\")&&!y(b,\"crios/\")||y(b,\"edge/\")){if(y(b,\"android\"))return\"Android\";if((a=a.match(/([a-zA-Z\\d\\.]+)\\/[a-zA-Z\\d\\.]*$/))&&2==a.length)return a[1]}else return be;else return\"Safari\";return\"Other\"}var se={Wc:\"FirebaseCore-web\",Yc:\"FirebaseUI-web\"};function te(a,b){b=b||[];var c=[],d={},e;for(e in se)d[se[e]]=!0;for(e=0;e<b.length;e++)\"undefined\"!==typeof d[b[e]]&&(delete d[b[e]],c.push(b[e]));c.sort();b=c;b.length||(b=[\"FirebaseCore-web\"]);c=pe();\"Browser\"===c?(d=H(),c=ae(d)):\"Worker\"===c&&(d=H(),c=ae(d)+\"-\"+c);return c+\"/JsCore/\"+a+\"/\"+b.join(\",\")}function H(){return k.navigator&&k.navigator.userAgent||\"\"}function I(a,b){a=a.split(\".\");b=b||k;for(var c=0;c<a.length&&\"object\"==typeof b&&null!=b;c++)b=b[a[c]];c!=a.length&&(b=void 0);return b}function ue(){try{var a=k.localStorage,b=ve();if(a)return a.setItem(b,\"1\"),a.removeItem(b),Wd()?!!k.indexedDB:!0}catch(c){return oe()&&!!k.indexedDB}return!1}function we(){return(xe()||\"chrome-extension:\"===me()||le())&&!qe()&&ue()&&!oe()}function xe(){return\"http:\"===me()||\"https:\"===me()}function me(){return k.location&&k.location.protocol||null}function ye(a){a=a||H();return ce(a)||ae(a)==fe?!1:!0}function ze(a){return\"undefined\"===typeof a?null:Qd(a)}function Ae(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&null!==a[c]&&void 0!==a[c]&&(b[c]=a[c]);return b}function Be(a){if(null!==a)return JSON.parse(a)}function ve(a){return a?a:Math.floor(1e9*Math.random()).toString()}function Ce(a){a=a||H();return\"Safari\"==ae(a)||a.toLowerCase().match(/iphone|ipad|ipod/)?!1:!0}function De(){var a=k.___jsl;if(a&&a.H)for(var b in a.H)if(a.H[b].r=a.H[b].r||[],a.H[b].L=a.H[b].L||[],a.H[b].r=a.H[b].L.concat(),a.CP)for(var c=0;c<a.CP.length;c++)a.CP[c]=null}function Ee(a,b){if(a>b)throw Error(\"Short delay should be less than long delay!\");this.a=a;this.c=b;a=H();b=pe();this.b=ce(a)||\"ReactNative\"===b}Ee.prototype.get=function(){var a=k.navigator;return(a&&\"boolean\"===typeof a.onLine&&(xe()||\"chrome-extension:\"===me()||\"undefined\"!==typeof a.connection)?a.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};function Fe(){var a=k.document;return a&&\"undefined\"!==typeof a.visibilityState?\"visible\"==a.visibilityState:!0}function Ge(){var a=k.document,b=null;return Fe()||!a?B():new A(function(c){b=function(){Fe()&&(a.removeEventListener(\"visibilitychange\",b,!1),c())};a.addEventListener(\"visibilitychange\",b,!1)}).s(function(c){a.removeEventListener(\"visibilitychange\",b,!1);throw c})}function He(a){try{var b=new Date(parseInt(a,10));if(!isNaN(b.getTime())&&!/[^0-9]/.test(a))return b.toUTCString()}catch(c){}return null}function Ie(){return!(!I(\"fireauth.oauthhelper\",k)&&!I(\"fireauth.iframe\",k))}function Je(){var a=k.navigator;return a&&a.serviceWorker&&a.serviceWorker.controller||null}function Ke(){var a=k.navigator;return a&&a.serviceWorker?B().then(function(){return a.serviceWorker.ready}).then(function(a){return a.active||null}).s(function(){return null}):B(null)}var Le={};function Me(a){Le[a]||(Le[a]=!0,\"undefined\"!==typeof console&&\"function\"===typeof console.warn&&console.warn(a))}var Ne;try{var Oe={};Object.defineProperty(Oe,\"abcd\",{configurable:!0,enumerable:!0,value:1});Object.defineProperty(Oe,\"abcd\",{configurable:!0,enumerable:!0,value:2});Ne=2==Oe.abcd}catch(a){Ne=!1}function J(a,b,c){Ne?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,value:c}):a[b]=c}function K(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&J(a,c,b[c])}function Pe(a){var b={};K(b,a);return b}function Qe(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function Re(a,b){if(!b||!b.length)return!0;if(!a)return!1;for(var c=0;c<b.length;c++){var d=a[b[c]];if(void 0===d||null===d||\"\"===d)return!1}return!0}function Se(a){var b=a;if(\"object\"==typeof a&&null!=a){b=\"length\"in a?[]:{};for(var c in a)J(b,c,Se(a[c]))}return b}function Te(a){var b={},c=a[Ue],d=a[Ve];a=a[We];if(!a||a!=Xe&&!c)throw Error(\"Invalid provider user info!\");b[Ye]=d||null;b[Ze]=c||null;J(this,$e,a);J(this,af,Se(b))}var Xe=\"EMAIL_SIGNIN\",Ue=\"email\",Ve=\"newEmail\",We=\"requestType\",Ze=\"email\",Ye=\"fromEmail\",af=\"data\",$e=\"operation\";function L(a,b){this.code=bf+a;this.message=b||cf[a]||\"\"}t(L,Error);L.prototype.C=function(){return{code:this.code,message:this.message}};L.prototype.toJSON=function(){return this.C()};function df(a){var b=a&&a.code;return b?new L(b.substring(bf.length),a.message):null}var bf=\"auth/\",cf={\"argument-error\":\"\",\"app-not-authorized\":\"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.\",\"app-not-installed\":\"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.\",\"captcha-check-failed\":\"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.\",\"code-expired\":\"The SMS code has expired. Please re-send the verification code to try again.\",\"cordova-not-ready\":\"Cordova framework is not ready.\",\"cors-unsupported\":\"This browser is not supported.\",\"credential-already-in-use\":\"This credential is already associated with a different user account.\",\"custom-token-mismatch\":\"The custom token corresponds to a different audience.\",\"requires-recent-login\":\"This operation is sensitive and requires recent authentication. Log in again before retrying this request.\",\"dynamic-link-not-activated\":\"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.\",\"email-already-in-use\":\"The email address is already in use by another account.\",\"expired-action-code\":\"The action code has expired. \",\"cancelled-popup-request\":\"This operation has been cancelled due to another conflicting popup being opened.\",\"internal-error\":\"An internal error has occurred.\",\"invalid-app-credential\":\"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.\",\"invalid-app-id\":\"The mobile app identifier is not registed for the current project.\",\"invalid-user-token\":\"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.\",\"invalid-auth-event\":\"An internal error has occurred.\",\"invalid-verification-code\":\"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.\",\"invalid-continue-uri\":\"The continue URL provided in the request is invalid.\",\"invalid-cordova-configuration\":\"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.\",\"invalid-custom-token\":\"The custom token format is incorrect. Please check the documentation.\",\"invalid-dynamic-link-domain\":\"The provided dynamic link domain is not configured or authorized for the current project.\",\"invalid-email\":\"The email address is badly formatted.\",\"invalid-api-key\":\"Your API key is invalid, please check you have copied it correctly.\",\"invalid-cert-hash\":\"The SHA-1 certificate hash provided is invalid.\",\"invalid-credential\":\"The supplied auth credential is malformed or has expired.\",\"invalid-persistence-type\":\"The specified persistence type is invalid. It can only be local, session or none.\",\"invalid-message-payload\":\"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.\",\"invalid-oauth-provider\":\"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.\",\"invalid-oauth-client-id\":\"The OAuth client ID provided is either invalid or does not match the specified API key.\",\"unauthorized-domain\":\"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.\",\"invalid-action-code\":\"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.\",\"wrong-password\":\"The password is invalid or the user does not have a password.\",\"invalid-phone-number\":\"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].\",\"invalid-provider-id\":\"The specified provider ID is invalid.\",\"invalid-recipient-email\":\"The email corresponding to this action failed to send as the provided recipient email address is invalid.\",\"invalid-sender\":\"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.\",\"invalid-verification-id\":\"The verification ID used to create the phone auth credential is invalid.\",\"missing-android-pkg-name\":\"An Android Package Name must be provided if the Android App is required to be installed.\",\"auth-domain-config-required\":\"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.\",\"missing-app-credential\":\"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.\",\"missing-verification-code\":\"The phone auth credential was created with an empty SMS verification code.\",\"missing-continue-uri\":\"A continue URL must be provided in the request.\",\"missing-iframe-start\":\"An internal error has occurred.\",\"missing-ios-bundle-id\":\"An iOS Bundle ID must be provided if an App Store ID is provided.\",\"missing-or-invalid-nonce\":\"The OIDC ID token requires a valid unhashed nonce.\",\"missing-phone-number\":\"To send verification codes, provide a phone number for the recipient.\",\"missing-verification-id\":\"The phone auth credential was created with an empty verification ID.\",\"app-deleted\":\"This instance of FirebaseApp has been deleted.\",\"account-exists-with-different-credential\":\"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.\",\"network-request-failed\":\"A network error (such as timeout, interrupted connection or unreachable host) has occurred.\",\"no-auth-event\":\"An internal error has occurred.\",\"no-such-provider\":\"User was not linked to an account with the given provider.\",\"null-user\":\"A null user object was provided as the argument for an operation which requires a non-null user object.\",\"operation-not-allowed\":\"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.\",\"operation-not-supported-in-this-environment\":'This operation is not supported in the environment this application is running on. \"location.protocol\" must be http, https or chrome-extension and web storage must be enabled.',\"popup-blocked\":\"Unable to establish a connection with the popup. It may have been blocked by the browser.\",\"popup-closed-by-user\":\"The popup has been closed by the user before finalizing the operation.\",\"provider-already-linked\":\"User can only be linked to one identity for the given provider.\",\"quota-exceeded\":\"The project's quota for this operation has been exceeded.\",\"redirect-cancelled-by-user\":\"The redirect operation has been cancelled by the user before finalizing.\",\"redirect-operation-pending\":\"A redirect sign-in operation is already pending.\",\"rejected-credential\":\"The request contains malformed or mismatching credentials.\",timeout:\"The operation has timed out.\",\"user-token-expired\":\"The user's credential is no longer valid. The user must sign in again.\",\"too-many-requests\":\"We have blocked all requests from this device due to unusual activity. Try again later.\",\"unauthorized-continue-uri\":\"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.\",\"unsupported-persistence-type\":\"The current environment does not support the specified persistence type.\",\"user-cancelled\":\"User did not grant your application the permissions it requested.\",\"user-not-found\":\"There is no user record corresponding to this identifier. The user may have been deleted.\",\"user-disabled\":\"The user account has been disabled by an administrator.\",\"user-mismatch\":\"The supplied credentials do not correspond to the previously signed in user.\",\"user-signed-out\":\"\",\"weak-password\":\"The password must be 6 characters long or more.\",\"web-storage-unsupported\":\"This browser is not supported or 3rd party cookies and data may be disabled.\"};function ef(a){var b=a[ff];if(\"undefined\"===typeof b)throw new L(\"missing-continue-uri\");if(\"string\"!==typeof b||\"string\"===typeof b&&!b.length)throw new L(\"invalid-continue-uri\");this.h=b;this.b=this.a=null;this.g=!1;var c=a[gf];if(c&&\"object\"===typeof c){b=c[hf];var d=c[jf];c=c[kf];if(\"string\"===typeof b&&b.length){this.a=b;if(\"undefined\"!==typeof d&&\"boolean\"!==typeof d)throw new L(\"argument-error\",jf+\" property must be a boolean when specified.\");this.g=!!d;if(\"undefined\"!==typeof c&&(\"string\"!==typeof c||\"string\"===typeof c&&!c.length))throw new L(\"argument-error\",kf+\" property must be a non empty string when specified.\");this.b=c||null}else{if(\"undefined\"!==typeof b)throw new L(\"argument-error\",hf+\" property must be a non empty string when specified.\");if(\"undefined\"!==typeof d||\"undefined\"!==typeof c)throw new L(\"missing-android-pkg-name\")}}else if(\"undefined\"!==typeof c)throw new L(\"argument-error\",gf+\" property must be a non null object when specified.\");this.f=null;if((b=a[lf])&&\"object\"===typeof b)if(b=b[mf],\"string\"===typeof b&&b.length)this.f=b;else{if(\"undefined\"!==typeof b)throw new L(\"argument-error\",mf+\" property must be a non empty string when specified.\")}else if(\"undefined\"!==typeof b)throw new L(\"argument-error\",lf+\" property must be a non null object when specified.\");b=a[nf];if(\"undefined\"!==typeof b&&\"boolean\"!==typeof b)throw new L(\"argument-error\",nf+\" property must be a boolean when specified.\");this.c=!!b;a=a[of];if(\"undefined\"!==typeof a&&(\"string\"!==typeof a||\"string\"===typeof a&&!a.length))throw new L(\"argument-error\",of+\" property must be a non empty string when specified.\");this.i=a||null}var gf=\"android\",of=\"dynamicLinkDomain\",nf=\"handleCodeInApp\",lf=\"iOS\",ff=\"url\",jf=\"installApp\",kf=\"minimumVersion\",hf=\"packageName\",mf=\"bundleId\";function pf(a){var b={};b.continueUrl=a.h;b.canHandleCodeInApp=a.c;if(b.androidPackageName=a.a)b.androidMinimumVersion=a.b,b.androidInstallApp=a.g;b.iOSBundleId=a.f;b.dynamicLinkDomain=a.i;for(var c in b)null===b[c]&&delete b[c];return b}function qf(a){return Da(a,function(a){a=a.toString(16);return 1<a.length?a:\"0\"+a}).join(\"\")}var rf=null,sf=null;function tf(a){var b=\"\";uf(a,function(a){b+=String.fromCharCode(a)});return b}function uf(a,b){function c(b){for(;d<a.length;){var c=a.charAt(d++),e=sf[c];if(null!=e)return e;if(!/^[\\s\\xa0]*$/.test(c))throw Error(\"Unknown base64 encoding at char: \"+c)}return b}vf();for(var d=0;;){var e=c(-1),f=c(0),h=c(64),m=c(64);if(64===m&&-1===e)break;b(e<<2|f>>4);64!=h&&(b(f<<4&240|h>>2),64!=m&&b(h<<6&192|m))}}function vf(){if(!rf){rf={};sf={};for(var a=0;65>a;a++)rf[a]=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".charAt(a),sf[rf[a]]=a,62<=a&&(sf[\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.\".charAt(a)]=a)}}function wf(a){this.c=a.sub;qa();this.a=a.provider_id||a.firebase&&a.firebase.sign_in_provider||null;this.b=!!a.is_anonymous||\"anonymous\"==this.a}wf.prototype.f=function(){return this.b};function xf(a){return(a=yf(a))&&a.sub&&a.iss&&a.aud&&a.exp?new wf(a):null}function yf(a){if(!a)return null;a=a.split(\".\");if(3!=a.length)return null;a=a[1];for(var b=(4-a.length%4)%4,c=0;c<b;c++)a+=\".\";try{return JSON.parse(tf(a))}catch(d){}return null}var zf={bd:{bb:\"https://www.googleapis.com/identitytoolkit/v3/relyingparty/\",jb:\"https://securetoken.googleapis.com/v1/token\",id:\"p\"},dd:{bb:\"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/\",jb:\"https://staging-securetoken.sandbox.googleapis.com/v1/token\",id:\"s\"},ed:{bb:\"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/\",jb:\"https://test-securetoken.sandbox.googleapis.com/v1/token\",id:\"t\"}};function Af(a){for(var b in zf)if(zf[b].id===a)return a=zf[b],{firebaseEndpoint:a.bb,secureTokenEndpoint:a.jb};return null}var Bf;Bf=Af(\"__EID__\")?\"__EID__\":void 0;var Cf=\"oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version\".split(\" \"),Df=[\"client_id\",\"response_type\",\"scope\",\"redirect_uri\",\"state\"],Ef={Xc:{Na:\"locale\",Ba:500,Aa:600,Oa:\"facebook.com\",ib:Df},Zc:{Na:null,Ba:500,Aa:620,Oa:\"github.com\",ib:Df},$c:{Na:\"hl\",Ba:515,Aa:680,Oa:\"google.com\",ib:Df},fd:{Na:\"lang\",Ba:485,Aa:705,Oa:\"twitter.com\",ib:Cf}};function Ff(a){for(var b in Ef)if(Ef[b].Oa==a)return Ef[b];return null}function Gf(a){var b={};b[\"facebook.com\"]=Hf;b[\"google.com\"]=If;b[\"github.com\"]=Jf;b[\"twitter.com\"]=Kf;var c=a&&a[Lf];try{if(c)return b[c]?new b[c](a):new Mf(a);if(\"undefined\"!==typeof a[Nf])return new Of(a)}catch(d){}return null}var Nf=\"idToken\",Lf=\"providerId\";function Of(a){var b=a[Lf];if(!b&&a[Nf]){var c=xf(a[Nf]);c&&c.a&&(b=c.a)}if(!b)throw Error(\"Invalid additional user info!\");if(\"anonymous\"==b||\"custom\"==b)b=null;c=!1;\"undefined\"!==typeof a.isNewUser?c=!!a.isNewUser:\"identitytoolkit#SignupNewUserResponse\"===a.kind&&(c=!0);J(this,\"providerId\",b);J(this,\"isNewUser\",c)}function Mf(a){Of.call(this,a);a=Be(a.rawUserInfo||\"{}\");J(this,\"profile\",Se(a||{}))}t(Mf,Of);function Hf(a){Mf.call(this,a);if(\"facebook.com\"!=this.providerId)throw Error(\"Invalid provider ID!\")}t(Hf,Mf);function Jf(a){Mf.call(this,a);if(\"github.com\"!=this.providerId)throw Error(\"Invalid provider ID!\");J(this,\"username\",this.profile&&this.profile.login||null)}t(Jf,Mf);function If(a){Mf.call(this,a);if(\"google.com\"!=this.providerId)throw Error(\"Invalid provider ID!\")}t(If,Mf);function Kf(a){Mf.call(this,a);if(\"twitter.com\"!=this.providerId)throw Error(\"Invalid provider ID!\");J(this,\"username\",a.screenName||null)}t(Kf,Mf);function Pf(a){this.a=ed(a)}function Qf(a){var b=ed(a),c=dd(b,\"link\"),d=dd(ed(c),\"link\");b=dd(b,\"deep_link_id\");return dd(ed(b),\"link\")||b||d||c||a}function Rf(a,b){return a.then(function(a){if(a[M]){var c=xf(a[M]);if(!c||b!=c.c)throw new L(\"user-mismatch\");return a}throw new L(\"user-mismatch\")}).s(function(a){throw a&&a.code&&a.code==bf+\"user-not-found\"?new L(\"user-mismatch\"):a})}function Sf(a,b){if(b)this.a=b;else throw new L(\"internal-error\",\"failed to construct a credential\");J(this,\"providerId\",a);J(this,\"signInMethod\",a)}Sf.prototype.la=function(a){return Tf(a,Uf(this))};Sf.prototype.b=function(a,b){var c=Uf(this);c.idToken=b;return Vf(a,c)};Sf.prototype.f=function(a,b){return Rf(Wf(a,Uf(this)),b)};function Uf(a){return{pendingToken:a.a,requestUri:\"http://localhost\"}}Sf.prototype.C=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function Xf(a,b,c){this.a=null;if(b.idToken||b.accessToken)b.idToken&&J(this,\"idToken\",b.idToken),b.accessToken&&J(this,\"accessToken\",b.accessToken),b.nonce&&!b.pendingToken&&J(this,\"nonce\",b.nonce),b.pendingToken&&(this.a=b.pendingToken);else if(b.oauthToken&&b.oauthTokenSecret)J(this,\"accessToken\",b.oauthToken),J(this,\"secret\",b.oauthTokenSecret);else throw new L(\"internal-error\",\"failed to construct a credential\");J(this,\"providerId\",a);J(this,\"signInMethod\",c)}Xf.prototype.la=function(a){return Tf(a,Yf(this))};Xf.prototype.b=function(a,b){var c=Yf(this);c.idToken=b;return Vf(a,c)};Xf.prototype.f=function(a,b){var c=Yf(this);return Rf(Wf(a,c),b)};function Yf(a){var b={};a.idToken&&(b.id_token=a.idToken);a.accessToken&&(b.access_token=a.accessToken);a.secret&&(b.oauth_token_secret=a.secret);b.providerId=a.providerId;a.nonce&&!a.a&&(b.nonce=a.nonce);b={postBody:id(b).toString(),requestUri:\"http://localhost\"};a.a&&(delete b.postBody,b.pendingToken=a.a);return b}Xf.prototype.C=function(){var a={providerId:this.providerId,signInMethod:this.signInMethod};this.idToken&&(a.oauthIdToken=this.idToken);this.accessToken&&(a.oauthAccessToken=this.accessToken);this.secret&&(a.oauthTokenSecret=this.secret);this.nonce&&(a.nonce=this.nonce);this.a&&(a.pendingToken=this.a);return a};function Zf(a,b){this.Fc=b||[];K(this,{providerId:a,isOAuthProvider:!0});this.zb={};this.eb=(Ff(a)||{}).Na||null;this.ab=null}Zf.prototype.Da=function(a){this.zb=Za(a);return this};function $f(a){if(\"string\"!==typeof a||0!=a.indexOf(\"saml.\"))throw new L(\"argument-error\",'SAML provider IDs must be prefixed with \"saml.\"');Zf.call(this,a,[])}t($f,Zf);function N(a){Zf.call(this,a,Df);this.a=[]}t(N,Zf);N.prototype.ua=function(a){Ha(this.a,a)||this.a.push(a);return this};N.prototype.Fb=function(){return Ka(this.a)};N.prototype.credential=function(a,b,c){if(!a&&!b)throw new L(\"argument-error\",\"credential failed: must provide the ID token and/or the access token.\");return new Xf(this.providerId,{idToken:a||null,accessToken:b||null,nonce:c||null},this.providerId)};function ag(){N.call(this,\"facebook.com\")}t(ag,N);J(ag,\"PROVIDER_ID\",\"facebook.com\");J(ag,\"FACEBOOK_SIGN_IN_METHOD\",\"facebook.com\");function bg(a){if(!a)throw new L(\"argument-error\",\"credential failed: expected 1 argument (the OAuth access token).\");var b=a;q(a)&&(b=a.accessToken);return(new ag).credential(null,b)}function cg(){N.call(this,\"github.com\")}t(cg,N);J(cg,\"PROVIDER_ID\",\"github.com\");J(cg,\"GITHUB_SIGN_IN_METHOD\",\"github.com\");function dg(a){if(!a)throw new L(\"argument-error\",\"credential failed: expected 1 argument (the OAuth access token).\");var b=a;q(a)&&(b=a.accessToken);return(new cg).credential(null,b)}function eg(){N.call(this,\"google.com\");this.ua(\"profile\")}t(eg,N);J(eg,\"PROVIDER_ID\",\"google.com\");J(eg,\"GOOGLE_SIGN_IN_METHOD\",\"google.com\");function fg(a,b){var c=a;q(a)&&(c=a.idToken,b=a.accessToken);return(new eg).credential(c,b)}function gg(){Zf.call(this,\"twitter.com\",Cf)}t(gg,Zf);J(gg,\"PROVIDER_ID\",\"twitter.com\");J(gg,\"TWITTER_SIGN_IN_METHOD\",\"twitter.com\");function hg(a,b){var c=a;q(c)||(c={oauthToken:a,oauthTokenSecret:b});if(!c.oauthToken||!c.oauthTokenSecret)throw new L(\"argument-error\",\"credential failed: expected 2 arguments (the OAuth access token and secret).\");return new Xf(\"twitter.com\",c,\"twitter.com\")}function ig(a,b,c){this.a=a;this.c=b;J(this,\"providerId\",\"password\");J(this,\"signInMethod\",c===O.EMAIL_LINK_SIGN_IN_METHOD?O.EMAIL_LINK_SIGN_IN_METHOD:O.EMAIL_PASSWORD_SIGN_IN_METHOD)}ig.prototype.la=function(a){return this.signInMethod==O.EMAIL_LINK_SIGN_IN_METHOD?P(a,jg,{email:this.a,oobCode:this.c}):P(a,kg,{email:this.a,password:this.c})};ig.prototype.b=function(a,b){return this.signInMethod==O.EMAIL_LINK_SIGN_IN_METHOD?P(a,lg,{idToken:b,email:this.a,oobCode:this.c}):P(a,mg,{idToken:b,email:this.a,password:this.c})};ig.prototype.f=function(a,b){return Rf(this.la(a),b)};ig.prototype.C=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}};function O(){K(this,{providerId:\"password\",isOAuthProvider:!1})}function ng(a,b){b=og(b);if(!b)throw new L(\"argument-error\",\"Invalid email link!\");return new ig(a,b,O.EMAIL_LINK_SIGN_IN_METHOD)}function og(a){a=Qf(a);a=new Pf(a);var b=dd(a.a,\"oobCode\")||null;return\"signIn\"===(dd(a.a,\"mode\")||null)&&b?b:null}K(O,{PROVIDER_ID:\"password\"});K(O,{EMAIL_LINK_SIGN_IN_METHOD:\"emailLink\"});K(O,{EMAIL_PASSWORD_SIGN_IN_METHOD:\"password\"});function pg(a){if(!(a.Ua&&a.Ta||a.Fa&&a.$))throw new L(\"internal-error\");this.a=a;J(this,\"providerId\",\"phone\");J(this,\"signInMethod\",\"phone\")}pg.prototype.la=function(a){return a.Va(qg(this))};pg.prototype.b=function(a,b){var c=qg(this);c.idToken=b;return P(a,rg,c)};pg.prototype.f=function(a,b){var c=qg(this);c.operation=\"REAUTH\";a=P(a,sg,c);return Rf(a,b)};pg.prototype.C=function(){var a={providerId:\"phone\"};this.a.Ua&&(a.verificationId=this.a.Ua);this.a.Ta&&(a.verificationCode=this.a.Ta);this.a.Fa&&(a.temporaryProof=this.a.Fa);this.a.$&&(a.phoneNumber=this.a.$);return a};function qg(a){return a.a.Fa&&a.a.$?{temporaryProof:a.a.Fa,phoneNumber:a.a.$}:{sessionInfo:a.a.Ua,code:a.a.Ta}}function tg(a){try{this.a=a||firebase.auth()}catch(b){throw new L(\"argument-error\",\"Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().\")}K(this,{providerId:\"phone\",isOAuthProvider:!1})}tg.prototype.Va=function(a,b){var c=this.a.b;return B(b.verify()).then(function(d){if(!l(d))throw new L(\"argument-error\",\"An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.\");switch(b.type){case\"recaptcha\":return ug(c,{phoneNumber:a,recaptchaToken:d}).then(function(a){\"function\"===typeof b.reset&&b.reset();return a},function(a){\"function\"===typeof b.reset&&b.reset();throw a});default:throw new L(\"argument-error\",'Only firebase.auth.ApplicationVerifiers with type=\"recaptcha\" are currently supported.')}})};function vg(a,b){if(!a)throw new L(\"missing-verification-id\");if(!b)throw new L(\"missing-verification-code\");return new pg({Ua:a,Ta:b})}K(tg,{PROVIDER_ID:\"phone\"});K(tg,{PHONE_SIGN_IN_METHOD:\"phone\"});function wg(a){if(a.temporaryProof&&a.phoneNumber)return new pg({Fa:a.temporaryProof,$:a.phoneNumber});var b=a&&a.providerId;if(!b||\"password\"===b)return null;var c=a&&a.oauthAccessToken,d=a&&a.oauthTokenSecret,e=a&&a.nonce,f=a&&a.oauthIdToken,h=a&&a.pendingToken;try{switch(b){case\"google.com\":return fg(f,c);case\"facebook.com\":return bg(c);case\"github.com\":return dg(c);case\"twitter.com\":return hg(c,d);default:return c||d||f||h?h?0==b.indexOf(\"saml.\")?new Sf(b,h):new Xf(b,{pendingToken:h,idToken:a.oauthIdToken,accessToken:a.oauthAccessToken},b):new N(b).credential(f,c,e):null}}catch(m){return null}}function xg(a){if(!a.isOAuthProvider)throw new L(\"invalid-oauth-provider\")}function yg(a,b,c,d,e,f){this.b=a;this.c=b||null;this.f=c||null;this.g=d||null;this.h=f||null;this.a=e||null;if(this.f||this.a){if(this.f&&this.a)throw new L(\"invalid-auth-event\");if(this.f&&!this.g)throw new L(\"invalid-auth-event\")}else throw new L(\"invalid-auth-event\")}yg.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,postBody:this.h,error:this.a&&this.a.C()}};function zg(a){a=a||{};return a.type?new yg(a.type,a.eventId,a.urlResponse,a.sessionId,a.error&&df(a.error),a.postBody):null}function Ag(){this.b=null;this.a=[]}var Bg=null;Ag.prototype.subscribe=function(a){var b=this;this.a.push(a);this.b||(this.b=function(a){for(var c=0;c<b.a.length;c++)b.a[c](a)},a=I(\"universalLinks.subscribe\",k),\"function\"===typeof a&&a(null,this.b))};Ag.prototype.unsubscribe=function(a){w(this.a,function(b){return b==a})};function Cg(a){var b=\"unauthorized-domain\",c=void 0,d=ed(a);a=d.b;d=d.c;\"chrome-extension\"==d?c=bb(\"This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.\",a):\"http\"==d||\"https\"==d?c=bb(\"This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.\",a):b=\"operation-not-supported-in-this-environment\";L.call(this,b,c)}t(Cg,L);function Dg(a,b,c){L.call(this,a,c);a=b||{};a.Ab&&J(this,\"email\",a.Ab);a.$&&J(this,\"phoneNumber\",a.$);a.credential&&J(this,\"credential\",a.credential)}t(Dg,L);Dg.prototype.C=function(){var a={code:this.code,message:this.message};this.email&&(a.email=this.email);this.phoneNumber&&(a.phoneNumber=this.phoneNumber);var b=this.credential&&this.credential.C();b&&ab(a,b);return a};Dg.prototype.toJSON=function(){return this.C()};function Eg(a){if(a.code){var b=a.code||\"\";0==b.indexOf(bf)&&(b=b.substring(bf.length));var c={credential:wg(a)};if(a.email)c.Ab=a.email;else if(a.phoneNumber)c.$=a.phoneNumber;else if(!c.credential)return new L(b,a.message||void 0);return new Dg(b,c,a.message)}return null}function Fg(){}Fg.prototype.c=null;function Gg(a){return a.c||(a.c=a.b())}var Hg;function Ig(){}t(Ig,Fg);Ig.prototype.a=function(){var a=Jg(this);return a?new ActiveXObject(a):new XMLHttpRequest};Ig.prototype.b=function(){var a={};Jg(this)&&(a[0]=!0,a[1]=!0);return a};function Jg(a){if(!a.f&&\"undefined\"==typeof XMLHttpRequest&&\"undefined\"!=typeof ActiveXObject){for(var b=[\"MSXML2.XMLHTTP.6.0\",\"MSXML2.XMLHTTP.3.0\",\"MSXML2.XMLHTTP\",\"Microsoft.XMLHTTP\"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.f=d}catch(e){}}throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\")}return a.f}Hg=new Ig;function Kg(){}t(Kg,Fg);Kg.prototype.a=function(){var a=new XMLHttpRequest;if(\"withCredentials\"in a)return a;if(\"undefined\"!=typeof XDomainRequest)return new Lg;throw Error(\"Unsupported browser\")};Kg.prototype.b=function(){return{}};function Lg(){this.a=new XDomainRequest;this.readyState=0;this.onreadystatechange=null;this.responseType=this.responseText=this.response=\"\";this.status=-1;this.statusText=\"\";this.a.onload=r(this.fc,this);this.a.onerror=r(this.Gb,this);this.a.onprogress=r(this.gc,this);this.a.ontimeout=r(this.kc,this)}g=Lg.prototype;g.open=function(a,b,c){if(null!=c&&!c)throw Error(\"Only async requests are supported.\");this.a.open(a,b)};g.send=function(a){if(a)if(\"string\"==typeof a)this.a.send(a);else throw Error(\"Only string data is supported\");else this.a.send()};g.abort=function(){this.a.abort()};g.setRequestHeader=function(){};g.getResponseHeader=function(a){return\"content-type\"==a.toLowerCase()?this.a.contentType:\"\"};g.fc=function(){this.status=200;this.response=this.responseText=this.a.responseText;Mg(this,4)};g.Gb=function(){this.status=500;this.response=this.responseText=\"\";Mg(this,4)};g.kc=function(){this.Gb()};g.gc=function(){this.status=200;Mg(this,1)};function Mg(a,b){a.readyState=b;if(a.onreadystatechange)a.onreadystatechange()}g.getAllResponseHeaders=function(){return\"content-type: \"+this.a.contentType};function Ng(a,b,c){this.reset(a,b,c,void 0,void 0)}Ng.prototype.a=null;var Og=0;Ng.prototype.reset=function(a,b,c,d,e){\"number\"==typeof e||Og++;d||qa();delete this.a};function Pg(a){this.f=a;this.b=this.c=this.a=null}function Qg(a,b){this.name=a;this.value=b}Qg.prototype.toString=function(){return this.name};var Rg=new Qg(\"SEVERE\",1e3),Sg=new Qg(\"WARNING\",900),Tg=new Qg(\"CONFIG\",700),Ug=new Qg(\"FINE\",500);function Vg(a){if(a.c)return a.c;if(a.a)return Vg(a.a);ta(\"Root logger has no level set.\");return null}Pg.prototype.log=function(a,b,c){if(a.value>=Vg(this).value)for(n(b)&&(b=b()),a=new Ng(a,String(b),this.f),c&&(a.a=c),c=this;c;)c=c.a};var Wg={},Xg=null;function Yg(a){Xg||(Xg=new Pg(\"\"),Wg[\"\"]=Xg,Xg.c=Tg);var b;if(!(b=Wg[a])){b=new Pg(a);var c=a.lastIndexOf(\".\"),d=a.substr(c+1);c=Yg(a.substr(0,c));c.b||(c.b={});c.b[d]=b;b.a=c;Wg[a]=b}return b}function Zg(a,b){a&&a.log(Ug,b,void 0)}function $g(a){this.f=a}t($g,Fg);$g.prototype.a=function(){return new ah(this.f)};$g.prototype.b=function(a){return function(){return a}}({});function ah(a){F.call(this);this.u=a;this.readyState=bh;this.status=0;this.responseType=this.responseText=this.response=this.statusText=\"\";this.onreadystatechange=null;this.i=new Headers;this.b=null;this.m=\"GET\";this.g=\"\";this.a=!1;this.h=Yg(\"goog.net.FetchXmlHttp\");this.l=this.c=this.f=null}t(ah,F);var bh=0;g=ah.prototype;g.open=function(a,b){if(this.readyState!=bh)throw this.abort(),Error(\"Error reopening a connection\");this.m=a;this.g=b;this.readyState=1;ch(this)};g.send=function(a){if(1!=this.readyState)throw this.abort(),Error(\"need to call open() first. \");this.a=!0;var b={headers:this.i,method:this.m,credentials:void 0,cache:void 0};a&&(b.body=a);this.u.fetch(new Request(this.g,b)).then(this.jc.bind(this),this.La.bind(this))};g.abort=function(){this.response=this.responseText=\"\";this.i=new Headers;this.status=0;this.c&&this.c.cancel(\"Request was aborted.\");1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,dh(this,!1));this.readyState=bh};g.jc=function(a){this.a&&(this.f=a,this.b||(this.b=a.headers,this.readyState=2,ch(this)),this.a&&(this.readyState=3,ch(this),this.a&&(\"arraybuffer\"===this.responseType?a.arrayBuffer().then(this.hc.bind(this),this.La.bind(this)):\"undefined\"!==typeof k.ReadableStream&&\"body\"in a?(this.response=this.responseText=\"\",this.c=a.body.getReader(),this.l=new TextDecoder,eh(this)):a.text().then(this.ic.bind(this),this.La.bind(this)))))};function eh(a){a.c.read().then(a.ec.bind(a)).catch(a.La.bind(a))}g.ec=function(a){if(this.a){var b=this.l.decode(a.value?a.value:new Uint8Array(0),{stream:!a.done});b&&(this.response=this.responseText+=b);a.done?dh(this,!0):ch(this);3==this.readyState&&eh(this)}};g.ic=function(a){this.a&&(this.response=this.responseText=a,dh(this,!0))};g.hc=function(a){this.a&&(this.response=a,dh(this,!0))};g.La=function(a){var b=this.h;b&&b.log(Sg,\"Failed to fetch url \"+this.g,a instanceof Error?a:Error(a));this.a&&dh(this,!0)};function dh(a,b){b&&a.f&&(a.status=a.f.status,a.statusText=a.f.statusText);a.readyState=4;a.f=null;a.c=null;a.l=null;ch(a)}g.setRequestHeader=function(a,b){this.i.append(a,b)};g.getResponseHeader=function(a){return this.b?this.b.get(a.toLowerCase())||\"\":((a=this.h)&&a.log(Sg,\"Attempting to get response header but no headers have been received for url: \"+this.g,void 0),\"\")};g.getAllResponseHeaders=function(){if(!this.b){var a=this.h;a&&a.log(Sg,\"Attempting to get all response headers but no headers have been received for url: \"+this.g,void 0);return\"\"}a=[];for(var b=this.b.entries(),c=b.next();!c.done;)c=c.value,a.push(c[0]+\": \"+c[1]),c=b.next();return a.join(\"\\r\\n\")};function ch(a){a.onreadystatechange&&a.onreadystatechange.call(a)}function fh(a){F.call(this);this.headers=new Mc;this.D=a||null;this.c=!1;this.w=this.a=null;this.h=this.N=this.l=\"\";this.f=this.I=this.i=this.G=!1;this.g=0;this.u=null;this.m=gh;this.v=this.O=!1}t(fh,F);var gh=\"\";fh.prototype.b=Yg(\"goog.net.XhrIo\");var hh=/^https?$/i,ih=[\"POST\",\"PUT\"];function jh(a,b,c,d,e){if(a.a)throw Error(\"[goog.net.XhrIo] Object is active with another request=\"+a.l+\"; newUri=\"+b);c=c?c.toUpperCase():\"GET\";a.l=b;a.h=\"\";a.N=c;a.G=!1;a.c=!0;a.a=a.D?a.D.a():Hg.a();a.w=a.D?Gg(a.D):Gg(Hg);a.a.onreadystatechange=r(a.Jb,a);try{Zg(a.b,kh(a,\"Opening Xhr\")),a.I=!0,a.a.open(c,String(b),!0),a.I=!1}catch(h){Zg(a.b,kh(a,\"Error opening Xhr: \"+h.message));lh(a,h);return}b=d||\"\";var f=new Mc(a.headers);e&&Lc(e,function(a,b){f.set(b,a)});e=Fa(f.U());d=k.FormData&&b instanceof k.FormData;!Ha(ih,c)||e||d||f.set(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\");f.forEach(function(a,b){this.a.setRequestHeader(b,a)},a);a.m&&(a.a.responseType=a.m);\"withCredentials\"in a.a&&a.a.withCredentials!==a.O&&(a.a.withCredentials=a.O);try{mh(a),0<a.g&&(a.v=nh(a.a),Zg(a.b,kh(a,\"Will abort after \"+a.g+\"ms if incomplete, xhr2 \"+a.v)),a.v?(a.a.timeout=a.g,a.a.ontimeout=r(a.Ga,a)):a.u=Hc(a.Ga,a.g,a)),Zg(a.b,kh(a,\"Sending request\")),a.i=!0,a.a.send(b),a.i=!1}catch(h){Zg(a.b,kh(a,\"Send error: \"+h.message)),lh(a,h)}}function nh(a){return Qb&&$b(9)&&\"number\"==typeof a.timeout&&void 0!==a.ontimeout}function Ga(a){return\"content-type\"==a.toLowerCase()}g=fh.prototype;g.Ga=function(){\"undefined\"!=typeof aa&&this.a&&(this.h=\"Timed out after \"+this.g+\"ms, aborting\",Zg(this.b,kh(this,this.h)),this.dispatchEvent(\"timeout\"),this.abort(8))};function lh(a,b){a.c=!1;a.a&&(a.f=!0,a.a.abort(),a.f=!1);a.h=b;oh(a);ph(a)}function oh(a){a.G||(a.G=!0,a.dispatchEvent(\"complete\"),a.dispatchEvent(\"error\"))}g.abort=function(){this.a&&this.c&&(Zg(this.b,kh(this,\"Aborting\")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent(\"complete\"),this.dispatchEvent(\"abort\"),ph(this))};g.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ph(this,!0));fh.pb.va.call(this)};g.Jb=function(){this.qa||(this.I||this.i||this.f?qh(this):this.yc())};g.yc=function(){qh(this)};function qh(a){if(a.c&&\"undefined\"!=typeof aa)if(a.w[1]&&4==rh(a)&&2==sh(a))Zg(a.b,kh(a,\"Local request error detected and ignored\"));else if(a.i&&4==rh(a))Hc(a.Jb,0,a);else if(a.dispatchEvent(\"readystatechange\"),4==rh(a)){Zg(a.b,kh(a,\"Request complete\"));a.c=!1;try{var b=sh(a);a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break a;default:c=!1}var d;if(!(d=c)){var e;if(e=0===b){var f=String(a.l).match(Pc)[1]||null;if(!f&&k.self&&k.self.location){var h=k.self.location.protocol;f=h.substr(0,h.length-1)}e=!hh.test(f?f.toLowerCase():\"\")}d=e}if(d)a.dispatchEvent(\"complete\"),a.dispatchEvent(\"success\");else{try{var m=2<rh(a)?a.a.statusText:\"\"}catch(p){Zg(a.b,\"Can not get status: \"+p.message),m=\"\"}a.h=m+\" [\"+sh(a)+\"]\";oh(a)}}finally{ph(a)}}}function ph(a,b){if(a.a){mh(a);var c=a.a,d=a.w[0]?ea:null;a.a=null;a.w=null;b||a.dispatchEvent(\"ready\");try{c.onreadystatechange=d}catch(e){(a=a.b)&&a.log(Rg,\"Problem encountered resetting onreadystatechange: \"+e.message,void 0)}}}function mh(a){a.a&&a.v&&(a.a.ontimeout=null);a.u&&(k.clearTimeout(a.u),a.u=null)}function rh(a){return a.a?a.a.readyState:0}function sh(a){try{return 2<rh(a)?a.a.status:-1}catch(b){return-1}}function th(a){try{return a.a?a.a.responseText:\"\"}catch(b){return Zg(a.b,\"Can not get responseText: \"+b.message),\"\"}}g.getResponse=function(){try{if(!this.a)return null;if(\"response\"in this.a)return this.a.response;switch(this.m){case gh:case\"text\":return this.a.responseText;case\"arraybuffer\":if(\"mozResponseArrayBuffer\"in this.a)return this.a.mozResponseArrayBuffer}var a=this.b;a&&a.log(Rg,\"Response type \"+this.m+\" is not supported on this browser\",void 0);return null}catch(b){return Zg(this.b,\"Can not get response: \"+b.message),null}};function kh(a,b){return b+\" [\"+a.N+\" \"+a.l+\" \"+sh(a)+\"]\"}function uh(a){var b=vh;this.g=[];this.v=b;this.u=a||null;this.f=this.a=!1;this.c=void 0;this.l=this.w=this.i=!1;this.h=0;this.b=null;this.o=0}uh.prototype.cancel=function(a){if(this.a)this.c instanceof uh&&this.c.cancel();else{if(this.b){var b=this.b;delete this.b;a?b.cancel(a):(b.o--,0>=b.o&&b.cancel())}this.v?this.v.call(this.u,this):this.l=!0;this.a||(a=new wh(this),xh(this),yh(this,!1,a))}};uh.prototype.m=function(a,b){this.i=!1;yh(this,a,b)};function yh(a,b,c){a.a=!0;a.c=c;a.f=!b;zh(a)}function xh(a){if(a.a){if(!a.l)throw new Ah(a);a.l=!1}}function Bh(a,b){Ch(a,null,b,void 0)}function Ch(a,b,c,d){a.g.push([b,c,d]);a.a&&zh(a)}uh.prototype.then=function(a,b,c){var d,e,f=new A(function(a,b){d=a;e=b});Ch(this,d,function(a){a instanceof wh?f.cancel():e(a)});return f.then(a,b,c)};uh.prototype.$goog_Thenable=!0;function Dh(a){return Ea(a.g,function(a){return n(a[1])})}function zh(a){if(a.h&&a.a&&Dh(a)){var b=a.h,c=Eh[b];c&&(k.clearTimeout(c.a),delete Eh[b]);a.h=0}a.b&&(a.b.o--,delete a.b);b=a.c;for(var d=c=!1;a.g.length&&!a.i;){var e=a.g.shift(),f=e[0],h=e[1];e=e[2];if(f=a.f?h:f)try{var m=f.call(e||a.u,b);void 0!==m&&(a.f=a.f&&(m==b||m instanceof Error),a.c=b=m);if(ra(b)||\"function\"===typeof k.Promise&&b instanceof k.Promise)d=!0,a.i=!0}catch(p){b=p,a.f=!0,Dh(a)||(c=!0)}}a.c=b;d&&(m=r(a.m,a,!0),d=r(a.m,a,!1),b instanceof uh?(Ch(b,m,d),b.w=!0):b.then(m,d));c&&(b=new Fh(b),Eh[b.a]=b,a.h=b.a)}function Ah(){u.call(this)}t(Ah,u);Ah.prototype.message=\"Deferred has already fired\";Ah.prototype.name=\"AlreadyCalledError\";function wh(){u.call(this)}t(wh,u);wh.prototype.message=\"Deferred was canceled\";wh.prototype.name=\"CanceledError\";function Fh(a){this.a=k.setTimeout(r(this.c,this),0);this.b=a}Fh.prototype.c=function(){delete Eh[this.a];throw this.b};var Eh={};function Gh(a){var b={},c=b.document||document,d=ud(a),e=document.createElement(\"SCRIPT\"),f={Lb:e,Ga:void 0},h=new uh(f),m=null,p=null!=b.timeout?b.timeout:5e3;0<p&&(m=window.setTimeout(function(){Hh(e,!0);var a=new Ih(Jh,\"Timeout reached for loading script \"+d);xh(h);yh(h,!1,a)},p),f.Ga=m);e.onload=e.onreadystatechange=function(){e.readyState&&\"loaded\"!=e.readyState&&\"complete\"!=e.readyState||(Hh(e,b.hd||!1,m),xh(h),yh(h,!0,null))};e.onerror=function(){Hh(e,!0,m);var a=new Ih(Kh,\"Error while loading script \"+d);xh(h);yh(h,!1,a)};f=b.attributes||{};ab(f,{type:\"text/javascript\",charset:\"UTF-8\"});Ld(e,f);Jd(e,a);Lh(c).appendChild(e);return h}function Lh(a){var b;return(b=(a||document).getElementsByTagName(\"HEAD\"))&&0!=b.length?b[0]:a.documentElement}function vh(){if(this&&this.Lb){var a=this.Lb;a&&\"SCRIPT\"==a.tagName&&Hh(a,!0,this.Ga)}}function Hh(a,b,c){null!=c&&k.clearTimeout(c);a.onload=ea;a.onerror=ea;a.onreadystatechange=ea;b&&window.setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a)},0)}var Kh=0,Jh=1;function Ih(a,b){var c=\"Jsloader error (code #\"+a+\")\";b&&(c+=\": \"+b);u.call(this,c);this.code=a}t(Ih,u);function Mh(a){this.f=a}t(Mh,Fg);Mh.prototype.a=function(){return new this.f};Mh.prototype.b=function(){return{}};function Nh(a,b,c){this.b=a;a=b||{};this.i=a.secureTokenEndpoint||\"https://securetoken.googleapis.com/v1/token\";this.o=a.secureTokenTimeout||Oh;this.f=Za(a.secureTokenHeaders||Ph);this.g=a.firebaseEndpoint||\"https://www.googleapis.com/identitytoolkit/v3/relyingparty/\";this.h=a.firebaseTimeout||Qh;this.a=Za(a.firebaseHeaders||Rh);c&&(this.a[\"X-Client-Version\"]=c,this.f[\"X-Client-Version\"]=c);c=\"Node\"==pe();c=k.XMLHttpRequest||c&&firebase.INTERNAL.node&&firebase.INTERNAL.node.XMLHttpRequest;if(!c&&!oe())throw new L(\"internal-error\",\"The XMLHttpRequest compatibility library was not found.\");this.c=void 0;oe()?this.c=new $g(self):qe()?this.c=new Mh(c):this.c=new Kg}var Sh,M=\"idToken\",Oh=new Ee(3e4,6e4),Ph={\"Content-Type\":\"application/x-www-form-urlencoded\"},Qh=new Ee(3e4,6e4),Rh={\"Content-Type\":\"application/json\"};function Th(a,b){b?a.a[\"X-Firebase-Locale\"]=b:delete a.a[\"X-Firebase-Locale\"]}function Uh(a,b){b?(a.a[\"X-Client-Version\"]=b,a.f[\"X-Client-Version\"]=b):(delete a.a[\"X-Client-Version\"],delete a.f[\"X-Client-Version\"])}function Vh(a,b,c,d,e,f,h){$d()||oe()?a=r(a.m,a):(Sh||(Sh=new A(function(a,b){Wh(a,b)})),a=r(a.l,a));a(b,c,d,e,f,h)}Nh.prototype.m=function(a,b,c,d,e,f){if(oe()&&(\"undefined\"===typeof k.fetch||\"undefined\"===typeof k.Headers||\"undefined\"===typeof k.Request))throw new L(\"operation-not-supported-in-this-environment\",\"fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.\");var h=new fh(this.c);if(f){h.g=Math.max(0,f);var m=setTimeout(function(){h.dispatchEvent(\"timeout\")},f)}vc(h,\"complete\",function(){m&&clearTimeout(m);var a=null;try{a=JSON.parse(th(this))||null}catch(x){a=null}b&&b(a)});Bc(h,\"ready\",function(){m&&clearTimeout(m);Lb(this)});Bc(h,\"timeout\",function(){m&&clearTimeout(m);Lb(this);b&&b(null)});jh(h,a,c,d,e)};var Xh=new od(pd,\"https://apis.google.com/js/client.js?onload=%{onload}\"),Yh=\"__fcb\"+Math.floor(1e6*Math.random()).toString();function Wh(a,b){if(((window.gapi||{}).client||{}).request)a();else{k[Yh]=function(){((window.gapi||{}).client||{}).request?a():b(Error(\"CORS_UNSUPPORTED\"))};var c=vd(Xh,{onload:Yh});Bh(Gh(c),function(){b(Error(\"CORS_UNSUPPORTED\"))})}}Nh.prototype.l=function(a,b,c,d,e){var f=this;Sh.then(function(){window.gapi.client.setApiKey(f.b);var h=window.gapi.auth.getToken();window.gapi.auth.setToken(null);window.gapi.client.request({path:a,method:c,body:d,headers:e,authType:\"none\",callback:function(a){window.gapi.auth.setToken(h);b&&b(a)}})}).s(function(a){b&&b({error:{message:a&&a.message||\"CORS_UNSUPPORTED\"}})})};function Zh(a,b){return new A(function(c,d){\"refresh_token\"==b.grant_type&&b.refresh_token||\"authorization_code\"==b.grant_type&&b.code?Vh(a,a.i+\"?key=\"+encodeURIComponent(a.b),function(a){a?a.error?d($h(a)):a.access_token&&a.refresh_token?c(a):d(new L(\"internal-error\")):d(new L(\"network-request-failed\"))},\"POST\",id(b).toString(),a.f,a.o.get()):d(new L(\"internal-error\"))})}function ai(a,b,c,d,e,f){var h=ed(a.g+b);G(h,\"key\",a.b);f&&G(h,\"cb\",qa().toString());var m=\"GET\"==c;if(m)for(var p in d)d.hasOwnProperty(p)&&G(h,p,d[p]);return new A(function(b,f){Vh(a,h.toString(),function(a){a?a.error?f($h(a,e||{})):b(a):f(new L(\"network-request-failed\"))},c,m?void 0:Qd(Ae(d)),a.a,a.h.get())})}function bi(a){a=a.email;if(!l(a)||!ie.test(a))throw new L(\"invalid-email\")}function ci(a){\"email\"in a&&bi(a)}function di(a,b){return P(a,ei,{identifier:b,continueUri:xe()?Xd():\"http://localhost\"}).then(function(a){return a.allProviders||[]})}function fi(a,b){return P(a,ei,{identifier:b,continueUri:xe()?Xd():\"http://localhost\"}).then(function(a){return a.signinMethods||[]})}function gi(a){return P(a,hi,{}).then(function(a){return a.authorizedDomains||[]})}function ii(a){if(!a[M])throw new L(\"internal-error\")}function ji(a){if(a.phoneNumber||a.temporaryProof){if(!a.phoneNumber||!a.temporaryProof)throw new L(\"internal-error\")}else{if(!a.sessionInfo)throw new L(\"missing-verification-id\");if(!a.code)throw new L(\"missing-verification-code\")}}Nh.prototype.Ra=function(){return P(this,ki,{})};Nh.prototype.qb=function(a,b){return P(this,li,{idToken:a,email:b})};Nh.prototype.rb=function(a,b){return P(this,mg,{idToken:a,password:b})};var mi={displayName:\"DISPLAY_NAME\",photoUrl:\"PHOTO_URL\"};g=Nh.prototype;g.sb=function(a,b){var c={idToken:a},d=[];Xa(mi,function(a,f){var e=b[f];null===e?d.push(a):f in b&&(c[f]=e)});d.length&&(c.deleteAttribute=d);return P(this,li,c)};g.lb=function(a,b){a={requestType:\"PASSWORD_RESET\",email:a};ab(a,b);return P(this,ni,a)};g.mb=function(a,b){a={requestType:\"EMAIL_SIGNIN\",email:a};ab(a,b);return P(this,oi,a)};g.kb=function(a,b){a={requestType:\"VERIFY_EMAIL\",idToken:a};ab(a,b);return P(this,pi,a)};function ug(a,b){return P(a,qi,b)}g.Va=function(a){return P(this,ri,a)};function si(a,b,c){return P(a,ti,{idToken:b,deleteProvider:c})}function ui(a){if(!a.requestUri||!a.sessionId&&!a.postBody&&!a.pendingToken)throw new L(\"internal-error\")}function vi(a,b){b.oauthIdToken&&b.providerId&&0==b.providerId.indexOf(\"oidc.\")&&!b.pendingToken&&(a.sessionId?b.nonce=a.sessionId:a.postBody&&(a=new Uc(a.postBody),md(a,\"nonce\")&&(b.nonce=a.get(\"nonce\"))));return b}function wi(a){var b=null;a.needConfirmation?(a.code=\"account-exists-with-different-credential\",b=Eg(a)):\"FEDERATED_USER_ID_ALREADY_LINKED\"==a.errorMessage?(a.code=\"credential-already-in-use\",b=Eg(a)):\"EMAIL_EXISTS\"==a.errorMessage?(a.code=\"email-already-in-use\",b=Eg(a)):a.errorMessage&&(b=xi(a.errorMessage));if(b)throw b;if(!a[M])throw new L(\"internal-error\")}function Tf(a,b){b.returnIdpCredential=!0;return P(a,yi,b)}function Vf(a,b){b.returnIdpCredential=!0;return P(a,zi,b)}function Wf(a,b){b.returnIdpCredential=!0;b.autoCreate=!1;return P(a,Ai,b)}function Bi(a){if(!a.oobCode)throw new L(\"invalid-action-code\")}g.$a=function(a,b){return P(this,Ci,{oobCode:a,newPassword:b})};g.Ja=function(a){return P(this,Di,{oobCode:a})};g.Xa=function(a){return P(this,Ei,{oobCode:a})};var Ei={endpoint:\"setAccountInfo\",B:Bi,da:\"email\"},Di={endpoint:\"resetPassword\",B:Bi,J:function(a){var b=a.requestType;if(!b||!a.email&&\"EMAIL_SIGNIN\"!=b)throw new L(\"internal-error\")}},Fi={endpoint:\"signupNewUser\",B:function(a){bi(a);if(!a.password)throw new L(\"weak-password\")},J:ii,R:!0},ei={endpoint:\"createAuthUri\"},Gi={endpoint:\"deleteAccount\",T:[\"idToken\"]},ti={endpoint:\"setAccountInfo\",T:[\"idToken\",\"deleteProvider\"],B:function(a){if(!ia(a.deleteProvider))throw new L(\"internal-error\")}},jg={endpoint:\"emailLinkSignin\",T:[\"email\",\"oobCode\"],B:bi,J:ii,R:!0},lg={endpoint:\"emailLinkSignin\",T:[\"idToken\",\"email\",\"oobCode\"],B:bi,J:ii,R:!0},Hi={endpoint:\"getAccountInfo\"},oi={endpoint:\"getOobConfirmationCode\",T:[\"requestType\"],B:function(a){if(\"EMAIL_SIGNIN\"!=a.requestType)throw new L(\"internal-error\");bi(a)},da:\"email\"},pi={endpoint:\"getOobConfirmationCode\",T:[\"idToken\",\"requestType\"],B:function(a){if(\"VERIFY_EMAIL\"!=a.requestType)throw new L(\"internal-error\")},da:\"email\"},ni={endpoint:\"getOobConfirmationCode\",T:[\"requestType\"],B:function(a){if(\"PASSWORD_RESET\"!=a.requestType)throw new L(\"internal-error\");bi(a)},da:\"email\"},hi={vb:!0,endpoint:\"getProjectConfig\",Ib:\"GET\"},Ii={vb:!0,endpoint:\"getRecaptchaParam\",Ib:\"GET\",J:function(a){if(!a.recaptchaSiteKey)throw new L(\"internal-error\")}},Ci={endpoint:\"resetPassword\",B:Bi,da:\"email\"},qi={endpoint:\"sendVerificationCode\",T:[\"phoneNumber\",\"recaptchaToken\"],da:\"sessionInfo\"},li={endpoint:\"setAccountInfo\",T:[\"idToken\"],B:ci,R:!0},mg={endpoint:\"setAccountInfo\",T:[\"idToken\"],B:function(a){ci(a);if(!a.password)throw new L(\"weak-password\")},J:ii,R:!0},ki={endpoint:\"signupNewUser\",J:ii,R:!0},yi={endpoint:\"verifyAssertion\",B:ui,Pa:vi,J:wi,R:!0},Ai={endpoint:\"verifyAssertion\",B:ui,Pa:vi,J:function(a){if(a.errorMessage&&\"USER_NOT_FOUND\"==a.errorMessage)throw new L(\"user-not-found\");if(a.errorMessage)throw xi(a.errorMessage);if(!a[M])throw new L(\"internal-error\")},R:!0},zi={endpoint:\"verifyAssertion\",B:function(a){ui(a);if(!a.idToken)throw new L(\"internal-error\")},Pa:vi,J:wi,R:!0},Ji={endpoint:\"verifyCustomToken\",B:function(a){if(!a.token)throw new L(\"invalid-custom-token\")},J:ii,R:!0},kg={endpoint:\"verifyPassword\",B:function(a){bi(a);if(!a.password)throw new L(\"wrong-password\")},J:ii,R:!0},ri={endpoint:\"verifyPhoneNumber\",B:ji,J:ii},rg={endpoint:\"verifyPhoneNumber\",B:function(a){if(!a.idToken)throw new L(\"internal-error\");ji(a)},J:function(a){if(a.temporaryProof)throw a.code=\"credential-already-in-use\",Eg(a);ii(a)}},sg={Xb:{USER_NOT_FOUND:\"user-not-found\"},endpoint:\"verifyPhoneNumber\",B:ji,J:ii};function P(a,b,c){if(!Re(c,b.T))return C(new L(\"internal-error\"));var d=b.Ib||\"POST\",e;return B(c).then(b.B).then(function(){b.R&&(c.returnSecureToken=!0);return ai(a,b.endpoint,d,c,b.Xb,b.vb||!1)}).then(function(a){e=a;return b.Pa?b.Pa(c,e):e}).then(b.J).then(function(){if(!b.da)return e;if(!(b.da in e))throw new L(\"internal-error\");return e[b.da]})}function xi(a){return $h({error:{errors:[{message:a}],code:400,message:a}})}function $h(a,b){var c=(a.error&&a.error.errors&&a.error.errors[0]||{}).reason||\"\";var d={keyInvalid:\"invalid-api-key\",ipRefererBlocked:\"app-not-authorized\"};if(c=d[c]?new L(d[c]):null)return c;c=a.error&&a.error.message||\"\";d={INVALID_CUSTOM_TOKEN:\"invalid-custom-token\",CREDENTIAL_MISMATCH:\"custom-token-mismatch\",MISSING_CUSTOM_TOKEN:\"internal-error\",INVALID_IDENTIFIER:\"invalid-email\",MISSING_CONTINUE_URI:\"internal-error\",INVALID_EMAIL:\"invalid-email\",INVALID_PASSWORD:\"wrong-password\",USER_DISABLED:\"user-disabled\",MISSING_PASSWORD:\"internal-error\",EMAIL_EXISTS:\"email-already-in-use\",PASSWORD_LOGIN_DISABLED:\"operation-not-allowed\",INVALID_IDP_RESPONSE:\"invalid-credential\",INVALID_PENDING_TOKEN:\"invalid-credential\",FEDERATED_USER_ID_ALREADY_LINKED:\"credential-already-in-use\",MISSING_OR_INVALID_NONCE:\"missing-or-invalid-nonce\",INVALID_MESSAGE_PAYLOAD:\"invalid-message-payload\",INVALID_RECIPIENT_EMAIL:\"invalid-recipient-email\",INVALID_SENDER:\"invalid-sender\",EMAIL_NOT_FOUND:\"user-not-found\",RESET_PASSWORD_EXCEED_LIMIT:\"too-many-requests\",EXPIRED_OOB_CODE:\"expired-action-code\",INVALID_OOB_CODE:\"invalid-action-code\",MISSING_OOB_CODE:\"internal-error\",INVALID_PROVIDER_ID:\"invalid-provider-id\",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:\"requires-recent-login\",INVALID_ID_TOKEN:\"invalid-user-token\",TOKEN_EXPIRED:\"user-token-expired\",USER_NOT_FOUND:\"user-token-expired\",CORS_UNSUPPORTED:\"cors-unsupported\",DYNAMIC_LINK_NOT_ACTIVATED:\"dynamic-link-not-activated\",INVALID_APP_ID:\"invalid-app-id\",TOO_MANY_ATTEMPTS_TRY_LATER:\"too-many-requests\",WEAK_PASSWORD:\"weak-password\",OPERATION_NOT_ALLOWED:\"operation-not-allowed\",USER_CANCELLED:\"user-cancelled\",CAPTCHA_CHECK_FAILED:\"captcha-check-failed\",INVALID_APP_CREDENTIAL:\"invalid-app-credential\",INVALID_CODE:\"invalid-verification-code\",INVALID_PHONE_NUMBER:\"invalid-phone-number\",INVALID_SESSION_INFO:\"invalid-verification-id\",INVALID_TEMPORARY_PROOF:\"invalid-credential\",MISSING_APP_CREDENTIAL:\"missing-app-credential\",MISSING_CODE:\"missing-verification-code\",MISSING_PHONE_NUMBER:\"missing-phone-number\",MISSING_SESSION_INFO:\"missing-verification-id\",QUOTA_EXCEEDED:\"quota-exceeded\",SESSION_EXPIRED:\"code-expired\",REJECTED_CREDENTIAL:\"rejected-credential\",INVALID_CONTINUE_URI:\"invalid-continue-uri\",MISSING_ANDROID_PACKAGE_NAME:\"missing-android-pkg-name\",MISSING_IOS_BUNDLE_ID:\"missing-ios-bundle-id\",UNAUTHORIZED_DOMAIN:\"unauthorized-continue-uri\",INVALID_DYNAMIC_LINK_DOMAIN:\"invalid-dynamic-link-domain\",INVALID_OAUTH_CLIENT_ID:\"invalid-oauth-client-id\",INVALID_CERT_HASH:\"invalid-cert-hash\"};ab(d,b||{});b=(b=c.match(/^[^\\s]+\\s*:\\s*(.*)$/))&&1<b.length?b[1]:void 0;for(var e in d)if(0===c.indexOf(e))return new L(d[e],b);!b&&a&&(b=ze(a));return new L(\"internal-error\",b)}function Ki(a){this.b=a;this.a=null;this.gb=Li(this)}function Li(a){return Mi().then(function(){return new A(function(b,c){I(\"gapi.iframes.getContext\")().open({where:document.body,url:a.b,messageHandlersFilter:I(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"),attributes:{style:{position:\"absolute\",top:\"-100px\",width:\"1px\",height:\"1px\"}},dontclear:!0},function(d){function e(){clearTimeout(f);b()}a.a=d;a.a.restyle({setHideOnLeave:!1});var f=setTimeout(function(){c(Error(\"Network Error\"))},Ni.get());d.ping(e).then(e,function(){c(Error(\"Network Error\"))})})})})}function Oi(a,b){return a.gb.then(function(){return new A(function(c){a.a.send(b.type,b,c,I(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"))})})}function Pi(a,b){a.gb.then(function(){a.a.register(\"authEvent\",b,I(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"))})}var Qi=new od(pd,\"https://apis.google.com/js/api.js?onload=%{onload}\"),Ri=new Ee(3e4,6e4),Ni=new Ee(5e3,15e3),Si=null;function Mi(){return Si?Si:Si=new A(function(a,b){function c(){De();I(\"gapi.load\")(\"gapi.iframes\",{callback:a,ontimeout:function(){De();b(Error(\"Network Error\"))},timeout:Ri.get()})}if(I(\"gapi.iframes.Iframe\"))a();else if(I(\"gapi.load\"))c();else{var d=\"__iframefcb\"+Math.floor(1e6*Math.random()).toString();k[d]=function(){I(\"gapi.load\")?c():b(Error(\"Network Error\"))};d=vd(Qi,{onload:d});B(Gh(d)).s(function(){b(Error(\"Network Error\"))})}}).s(function(a){Si=null;throw a})}function Ti(a,b,c){this.i=a;this.g=b;this.h=c;this.f=null;this.a=fd(this.i,\"/__/auth/iframe\");G(this.a,\"apiKey\",this.g);G(this.a,\"appName\",this.h);this.b=null;this.c=[]}Ti.prototype.toString=function(){this.f?G(this.a,\"v\",this.f):ld(this.a.a,\"v\");this.b?G(this.a,\"eid\",this.b):ld(this.a.a,\"eid\");this.c.length?G(this.a,\"fw\",this.c.join(\",\")):ld(this.a.a,\"fw\");return this.a.toString()};function Ui(a,b,c,d,e){this.m=a;this.l=b;this.c=c;this.o=d;this.h=this.g=this.i=null;this.a=e;this.f=null}Ui.prototype.toString=function(){var a=fd(this.m,\"/__/auth/handler\");G(a,\"apiKey\",this.l);G(a,\"appName\",this.c);G(a,\"authType\",this.o);if(this.a.isOAuthProvider){var b=this.a;try{var c=firebase.app(this.c).auth().ea()}catch(m){c=null}b.ab=c;G(a,\"providerId\",this.a.providerId);b=this.a;c=Ae(b.zb);for(var d in c)c[d]=c[d].toString();d=b.Fc;c=Za(c);for(var e=0;e<d.length;e++){var f=d[e];f in c&&delete c[f]}b.eb&&b.ab&&!c[b.eb]&&(c[b.eb]=b.ab);Ya(c)||G(a,\"customParameters\",ze(c))}\"function\"===typeof this.a.Fb&&(b=this.a.Fb(),b.length&&G(a,\"scopes\",b.join(\",\")));this.i?G(a,\"redirectUrl\",this.i):ld(a.a,\"redirectUrl\");this.g?G(a,\"eventId\",this.g):ld(a.a,\"eventId\");this.h?G(a,\"v\",this.h):ld(a.a,\"v\");if(this.b)for(var h in this.b)this.b.hasOwnProperty(h)&&!dd(a,h)&&G(a,h,this.b[h]);this.f?G(a,\"eid\",this.f):ld(a.a,\"eid\");h=Vi(this.c);h.length&&G(a,\"fw\",h.join(\",\"));return a.toString()};function Vi(a){try{return firebase.app(a).auth().ya()}catch(b){return[]}}function Wi(a,b,c,d,e){this.l=a;this.f=b;this.b=c;this.c=d||null;this.h=e||null;this.m=this.u=this.v=null;this.g=[];this.o=this.a=null}function Xi(a){var b=Xd();return gi(a).then(function(a){a:{var c=ed(b),e=c.c;c=c.b;for(var f=0;f<a.length;f++){var h=a[f];var m=c;var p=e;0==h.indexOf(\"chrome-extension://\")?m=ed(h).b==m&&\"chrome-extension\"==p:\"http\"!=p&&\"https\"!=p?m=!1:he.test(h)?m=m==h:(h=h.split(\".\").join(\"\\\\.\"),m=new RegExp(\"^(.+\\\\.\"+h+\"|\"+h+\")$\",\"i\").test(m));if(m){a=!0;break a}}a=!1}if(!a)throw new Cg(Xd())})}function Yi(a){if(a.o)return a.o;a.o=je().then(function(){if(!a.u){var b=a.c,c=a.h,d=Vi(a.b),e=new Ti(a.l,a.f,a.b);e.f=b;e.b=c;e.c=Ka(d||[]);a.u=e.toString()}a.i=new Ki(a.u);Zi(a)});return a.o}g=Wi.prototype;g.Ea=function(a,b,c){var d=new L(\"popup-closed-by-user\"),e=new L(\"web-storage-unsupported\"),f=this,h=!1;return this.ga().then(function(){$i(f).then(function(c){c||(a&&de(a),b(e),h=!0)})}).s(function(){}).then(function(){if(!h)return ge(a)}).then(function(){if(!h)return Ic(c).then(function(){b(d)})})};g.Mb=function(){var a=H();return!ye(a)&&!Ce(a)};g.Hb=function(){return!1};g.Db=function(a,b,c,d,e,f,h){if(!a)return C(new L(\"popup-blocked\"));if(h&&!ye())return this.ga().s(function(b){de(a);e(b)}),d(),B();this.a||(this.a=Xi(aj(this)));var m=this;return this.a.then(function(){var b=m.ga().s(function(b){de(a);e(b);throw b});d();return b}).then(function(){xg(c);if(!h){var d=bj(m.l,m.f,m.b,b,c,null,f,m.c,void 0,m.h);Yd(d,a)}}).s(function(a){\"auth/network-request-failed\"==a.code&&(m.a=null);throw a})};function aj(a){a.m||(a.v=a.c?te(a.c,Vi(a.b)):null,a.m=new Nh(a.f,Af(a.h),a.v));return a.m}g.Ca=function(a,b,c){this.a||(this.a=Xi(aj(this)));var d=this;return this.a.then(function(){xg(b);var e=bj(d.l,d.f,d.b,a,b,Xd(),c,d.c,void 0,d.h);Yd(e)}).s(function(a){\"auth/network-request-failed\"==a.code&&(d.a=null);throw a})};g.ga=function(){var a=this;return Yi(this).then(function(){return a.i.gb}).s(function(){a.a=null;throw new L(\"network-request-failed\")})};g.Qb=function(){return!0};function bj(a,b,c,d,e,f,h,m,p,x){a=new Ui(a,b,c,d,e);a.i=f;a.g=h;a.h=m;a.b=Za(p||null);a.f=x;return a.toString()}function Zi(a){if(!a.i)throw Error(\"IfcHandler must be initialized!\");Pi(a.i,function(b){var c={};if(b&&b.authEvent){var d=!1;b=zg(b.authEvent);for(c=0;c<a.g.length;c++)d=a.g[c](b)||d;c={};c.status=d?\"ACK\":\"ERROR\";return B(c)}c.status=\"ERROR\";return B(c)})}function $i(a){var b={type:\"webStorageSupport\"};return Yi(a).then(function(){return Oi(a.i,b)}).then(function(a){if(a&&a.length&&\"undefined\"!==typeof a[0].webStorageSupport)return a[0].webStorageSupport;throw Error()})}g.wa=function(a){this.g.push(a)};g.Ka=function(a){w(this.g,function(b){return b==a})};function cj(a){this.a=a||firebase.INTERNAL.reactNative&&firebase.INTERNAL.reactNative.AsyncStorage;if(!this.a)throw new L(\"internal-error\",\"The React Native compatibility library was not found.\");this.type=\"asyncStorage\"}g=cj.prototype;g.get=function(a){return B(this.a.getItem(a)).then(function(a){return a&&Be(a)})};g.set=function(a,b){return B(this.a.setItem(a,ze(b)))};g.P=function(a){return B(this.a.removeItem(a))};g.Y=function(){};g.ca=function(){};function dj(a){this.b=a;this.a={};this.c=r(this.f,this)}var ej=[];function fj(){var a=oe()?self:null;v(ej,function(c){c.b==a&&(b=c)});if(!b){var b=new dj(a);ej.push(b)}return b}dj.prototype.f=function(a){var b=a.data.eventType,c=a.data.eventId,d=this.a[b];if(d&&0<d.length){a.ports[0].postMessage({status:\"ack\",eventId:c,eventType:b,response:null});var e=[];v(d,function(b){e.push(B().then(function(){return b(a.origin,a.data.data)}))});xb(e).then(function(d){var e=[];v(d,function(a){e.push({fulfilled:a.Eb,value:a.value,reason:a.reason?a.reason.message:void 0})});v(e,function(a){for(var b in a)\"undefined\"===typeof a[b]&&delete a[b]});a.ports[0].postMessage({status:\"done\",eventId:c,eventType:b,response:e})})}};dj.prototype.subscribe=function(a,b){Ya(this.a)&&this.b.addEventListener(\"message\",this.c);\"undefined\"===typeof this.a[a]&&(this.a[a]=[]);this.a[a].push(b)};dj.prototype.unsubscribe=function(a,b){\"undefined\"!==typeof this.a[a]&&b?(w(this.a[a],function(a){return a==b}),0==this.a[a].length&&delete this.a[a]):b||delete this.a[a];Ya(this.a)&&this.b.removeEventListener(\"message\",this.c)};function gj(a){this.a=a}gj.prototype.postMessage=function(a,b){this.a.postMessage(a,b)};function hj(a){this.c=a;this.b=!1;this.a=[]}function ij(a,b,c,d){var e,f=c||{},h,m,p,x=null;if(a.b)return C(Error(\"connection_unavailable\"));var gb=d?800:50,la=\"undefined\"!==typeof MessageChannel?new MessageChannel:null;return new A(function(c,d){la?(e=Math.floor(Math.random()*Math.pow(10,20)).toString(),la.port1.start(),m=setTimeout(function(){d(Error(\"unsupported_event\"))},gb),h=function(a){a.data.eventId===e&&(\"ack\"===a.data.status?(clearTimeout(m),p=setTimeout(function(){d(Error(\"timeout\"))},3e3)):\"done\"===a.data.status?(clearTimeout(p),\"undefined\"!==typeof a.data.response?c(a.data.response):d(Error(\"unknown_error\"))):(clearTimeout(m),clearTimeout(p),d(Error(\"invalid_response\"))))},x={messageChannel:la,onMessage:h},a.a.push(x),la.port1.addEventListener(\"message\",h),a.c.postMessage({eventType:b,eventId:e,data:f},[la.port2])):d(Error(\"connection_unavailable\"))}).then(function(b){jj(a,x);return b}).s(function(b){jj(a,x);throw b})}function jj(a,b){if(b){var c=b.messageChannel,d=b.onMessage;c&&(c.port1.removeEventListener(\"message\",d),c.port1.close());w(a.a,function(a){return a==b})}}hj.prototype.close=function(){for(;0<this.a.length;)jj(this,this.a[0]);this.b=!0};function kj(){if(!lj())throw new L(\"web-storage-unsupported\");this.c={};this.a=[];this.b=0;this.l=k.indexedDB;this.type=\"indexedDB\";this.g=this.o=this.f=this.i=null;this.u=!1;this.h=null;var a=this;oe()&&self?(this.o=fj(),this.o.subscribe(\"keyChanged\",function(b,c){return mj(a).then(function(b){0<b.length&&v(a.a,function(a){a(b)});return{keyProcessed:Ha(b,c.key)}})}),this.o.subscribe(\"ping\",function(){return B([\"keyChanged\"])})):Ke().then(function(b){if(a.h=b)a.g=new hj(new gj(b)),ij(a.g,\"ping\",null,!0).then(function(b){b[0].fulfilled&&Ha(b[0].value,\"keyChanged\")&&(a.u=!0)}).s(function(){})})}var nj;function oj(a){return new A(function(b,c){var d=a.l.deleteDatabase(\"firebaseLocalStorageDb\");d.onsuccess=function(){b()};d.onerror=function(a){c(Error(a.target.error))}})}function pj(a){return new A(function(b,c){var d=a.l.open(\"firebaseLocalStorageDb\",1);d.onerror=function(a){try{a.preventDefault()}catch(f){}c(Error(a.target.error))};d.onupgradeneeded=function(a){a=a.target.result;try{a.createObjectStore(\"firebaseLocalStorage\",{keyPath:\"fbase_key\"})}catch(f){c(f)}};d.onsuccess=function(d){d=d.target.result;d.objectStoreNames.contains(\"firebaseLocalStorage\")?b(d):oj(a).then(function(){return pj(a)}).then(function(a){b(a)}).s(function(a){c(a)})}})}function qj(a){a.m||(a.m=pj(a));return a.m}function lj(){try{return!!k.indexedDB}catch(a){return!1}}function rj(a){return a.objectStore(\"firebaseLocalStorage\")}function sj(a,b){return a.transaction([\"firebaseLocalStorage\"],b?\"readwrite\":\"readonly\")}function tj(a){return new A(function(b,c){a.onsuccess=function(a){a&&a.target?b(a.target.result):b()};a.onerror=function(a){c(a.target.error)}})}g=kj.prototype;g.set=function(a,b){var c=!1,d,e=this;return qj(this).then(function(b){d=b;b=rj(sj(d,!0));return tj(b.get(a))}).then(function(f){var h=rj(sj(d,!0));if(f)return f.value=b,tj(h.put(f));e.b++;c=!0;f={};f.fbase_key=a;f.value=b;return tj(h.add(f))}).then(function(){e.c[a]=b;return uj(e,a)}).ia(function(){c&&e.b--})};function uj(a,b){return a.g&&a.h&&Je()===a.h?ij(a.g,\"keyChanged\",{key:b},a.u).then(function(){}).s(function(){}):B()}g.get=function(a){return qj(this).then(function(b){return tj(rj(sj(b,!1)).get(a))}).then(function(a){return a&&a.value})};g.P=function(a){var b=!1,c=this;return qj(this).then(function(d){b=!0;c.b++;return tj(rj(sj(d,!0))[\"delete\"](a))}).then(function(){delete c.c[a];return uj(c,a)}).ia(function(){b&&c.b--})};function mj(a){return qj(a).then(function(a){var b=rj(sj(a,!1));return b.getAll?tj(b.getAll()):new A(function(a,c){var d=[],e=b.openCursor();e.onsuccess=function(b){(b=b.target.result)?(d.push(b.value),b[\"continue\"]()):a(d)};e.onerror=function(a){c(a.target.error)}})}).then(function(b){var c={},d=[];if(0==a.b){for(d=0;d<b.length;d++)c[b[d].fbase_key]=b[d].value;d=Zd(a.c,c);a.c=c}return d})}g.Y=function(a){0==this.a.length&&vj(this);this.a.push(a)};g.ca=function(a){w(this.a,function(b){return b==a});0==this.a.length&&wj(this)};function vj(a){function b(){a.f=setTimeout(function(){a.i=mj(a).then(function(b){0<b.length&&v(a.a,function(a){a(b)})}).then(function(){b()}).s(function(a){\"STOP_EVENT\"!=a.message&&b()})},800)}wj(a);b()}function wj(a){a.i&&a.i.cancel(\"STOP_EVENT\");a.f&&(clearTimeout(a.f),a.f=null)}function xj(a){var b=this,c=null;this.a=[];this.type=\"indexedDB\";this.c=a;this.b=B().then(function(){if(lj()){var a=ve(),e=\"__sak\"+a;nj||(nj=new kj);c=nj;return c.set(e,a).then(function(){return c.get(e)}).then(function(b){if(b!==a)throw Error(\"indexedDB not supported!\");return c.P(e)}).then(function(){return c}).s(function(){return b.c})}return b.c}).then(function(a){b.type=a.type;a.Y(function(a){v(b.a,function(b){b(a)})});return a})}g=xj.prototype;g.get=function(a){return this.b.then(function(b){return b.get(a)})};g.set=function(a,b){return this.b.then(function(c){return c.set(a,b)})};g.P=function(a){return this.b.then(function(b){return b.P(a)})};g.Y=function(a){this.a.push(a)};g.ca=function(a){w(this.a,function(b){return b==a})};function yj(){this.a={};this.type=\"inMemory\"}g=yj.prototype;g.get=function(a){return B(this.a[a])};g.set=function(a,b){this.a[a]=b;return B()};g.P=function(a){delete this.a[a];return B()};g.Y=function(){};g.ca=function(){};function zj(){if(!Aj()){if(\"Node\"==pe())throw new L(\"internal-error\",\"The LocalStorage compatibility library was not found.\");throw new L(\"web-storage-unsupported\")}this.a=Bj()||firebase.INTERNAL.node.localStorage;this.type=\"localStorage\"}function Bj(){try{var a=k.localStorage,b=ve();a&&(a.setItem(b,\"1\"),a.removeItem(b));return a}catch(c){return null}}function Aj(){var a=\"Node\"==pe();a=Bj()||a&&firebase.INTERNAL.node&&firebase.INTERNAL.node.localStorage;if(!a)return!1;try{return a.setItem(\"__sak\",\"1\"),a.removeItem(\"__sak\"),!0}catch(b){return!1}}g=zj.prototype;g.get=function(a){var b=this;return B().then(function(){var c=b.a.getItem(a);return Be(c)})};g.set=function(a,b){var c=this;return B().then(function(){var d=ze(b);null===d?c.P(a):c.a.setItem(a,d)})};g.P=function(a){var b=this;return B().then(function(){b.a.removeItem(a)})};g.Y=function(a){k.window&&sc(k.window,\"storage\",a)};g.ca=function(a){k.window&&E(k.window,\"storage\",a)};function Cj(){this.type=\"nullStorage\"}g=Cj.prototype;g.get=function(){return B(null)};g.set=function(){return B()};g.P=function(){return B()};g.Y=function(){};g.ca=function(){};function Dj(){if(!Ej()){if(\"Node\"==pe())throw new L(\"internal-error\",\"The SessionStorage compatibility library was not found.\");throw new L(\"web-storage-unsupported\")}this.a=Fj()||firebase.INTERNAL.node.sessionStorage;this.type=\"sessionStorage\"}function Fj(){try{var a=k.sessionStorage,b=ve();a&&(a.setItem(b,\"1\"),a.removeItem(b));return a}catch(c){return null}}function Ej(){var a=\"Node\"==pe();a=Fj()||a&&firebase.INTERNAL.node&&firebase.INTERNAL.node.sessionStorage;if(!a)return!1;try{return a.setItem(\"__sak\",\"1\"),a.removeItem(\"__sak\"),!0}catch(b){return!1}}g=Dj.prototype;g.get=function(a){var b=this;return B().then(function(){var c=b.a.getItem(a);return Be(c)})};g.set=function(a,b){var c=this;return B().then(function(){var d=ze(b);null===d?c.P(a):c.a.setItem(a,d)})};g.P=function(a){var b=this;return B().then(function(){b.a.removeItem(a)})};g.Y=function(){};g.ca=function(){};function Gj(){var a={};a.Browser=Hj;a.Node=Ij;a.ReactNative=Jj;a.Worker=Kj;this.a=a[pe()]}var Lj,Hj={A:zj,Sa:Dj},Ij={A:zj,Sa:Dj},Jj={A:cj,Sa:Cj},Kj={A:zj,Sa:Cj};var Mj={ad:\"local\",NONE:\"none\",cd:\"session\"};function Nj(a){var b=new L(\"invalid-persistence-type\"),c=new L(\"unsupported-persistence-type\");a:{for(d in Mj)if(Mj[d]==a){var d=!0;break a}d=!1}if(!d||\"string\"!==typeof a)throw b;switch(pe()){case\"ReactNative\":if(\"session\"===a)throw c;break;case\"Node\":if(\"none\"!==a)throw c;break;default:if(!ue()&&\"none\"!==a)throw c}}function Oj(){var a=!Ce(H())&&ne()?!0:!1,b=ye(),c=ue();this.m=a;this.h=b;this.o=c;this.a={};Lj||(Lj=new Gj);a=Lj;try{this.g=!Wd()&&Ie()||!k.indexedDB?new a.a.A:new xj(oe()?new yj:new a.a.A)}catch(d){this.g=new yj,this.h=!0}try{this.i=new a.a.Sa}catch(d){this.i=new yj}this.l=new yj;this.f=r(this.Pb,this);this.b={}}var Pj;function Qj(){Pj||(Pj=new Oj);return Pj}function Rj(a,b){switch(b){case\"session\":return a.i;case\"none\":return a.l;default:return a.g}}function Sj(a,b){return\"firebase:\"+a.name+(b?\":\"+b:\"\")}function Tj(a,b,c){var d=Sj(b,c),e=Rj(a,b.A);return a.get(b,c).then(function(f){var h=null;try{h=Be(k.localStorage.getItem(d))}catch(m){}if(h&&!f)return k.localStorage.removeItem(d),a.set(b,h,c);h&&f&&\"localStorage\"!=e.type&&k.localStorage.removeItem(d)})}g=Oj.prototype;g.get=function(a,b){return Rj(this,a.A).get(Sj(a,b))};function Uj(a,b,c){c=Sj(b,c);\"local\"==b.A&&(a.b[c]=null);return Rj(a,b.A).P(c)}g.set=function(a,b,c){var d=Sj(a,c),e=this,f=Rj(this,a.A);return f.set(d,b).then(function(){return f.get(d)}).then(function(b){\"local\"==a.A&&(e.b[d]=b)})};g.addListener=function(a,b,c){a=Sj(a,b);this.o&&(this.b[a]=k.localStorage.getItem(a));Ya(this.a)&&(Rj(this,\"local\").Y(this.f),this.h||(Wd()||!Ie())&&k.indexedDB||!this.o||Vj(this));this.a[a]||(this.a[a]=[]);this.a[a].push(c)};g.removeListener=function(a,b,c){a=Sj(a,b);this.a[a]&&(w(this.a[a],function(a){return a==c}),0==this.a[a].length&&delete this.a[a]);Ya(this.a)&&(Rj(this,\"local\").ca(this.f),Wj(this))};function Vj(a){Wj(a);a.c=setInterval(function(){for(var b in a.a){var c=k.localStorage.getItem(b),d=a.b[b];c!=d&&(a.b[b]=c,c=new gc({type:\"storage\",key:b,target:window,oldValue:d,newValue:c,a:!0}),a.Pb(c))}},1e3)}function Wj(a){a.c&&(clearInterval(a.c),a.c=null)}g.Pb=function(a){if(a&&a.f){var b=a.a.key;if(null==b)for(var c in this.a){var d=this.b[c];\"undefined\"===typeof d&&(d=null);var e=k.localStorage.getItem(c);e!==d&&(this.b[c]=e,this.Ya(c))}else if(0==b.indexOf(\"firebase:\")&&this.a[b]){\"undefined\"!==typeof a.a.a?Rj(this,\"local\").ca(this.f):Wj(this);if(this.m)if(c=k.localStorage.getItem(b),d=a.a.newValue,d!==c)null!==d?k.localStorage.setItem(b,d):k.localStorage.removeItem(b);else if(this.b[b]===d&&\"undefined\"===typeof a.a.a)return;var f=this;c=function(){if(\"undefined\"!==typeof a.a.a||f.b[b]!==k.localStorage.getItem(b))f.b[b]=k.localStorage.getItem(b),f.Ya(b)};Qb&&ac&&10==ac&&k.localStorage.getItem(b)!==a.a.newValue&&a.a.newValue!==a.a.oldValue?setTimeout(c,10):c()}}else v(a,r(this.Ya,this))};g.Ya=function(a){this.a[a]&&v(this.a[a],function(a){a()})};function Xj(a){this.a=a;this.b=Qj()}var Yj={name:\"authEvent\",A:\"local\"};function Zj(a){return a.b.get(Yj,a.a).then(function(a){return zg(a)})}function ak(){this.a=Qj()}function bk(){this.b=-1}function ck(a,b){this.b=dk;this.f=k.Uint8Array?new Uint8Array(this.b):Array(this.b);this.g=this.c=0;this.a=[];this.i=a;this.h=b;this.o=k.Int32Array?new Int32Array(64):Array(64);void 0!==ek||(k.Int32Array?ek=new Int32Array(fk):ek=fk);this.reset()}var ek;t(ck,bk);for(var dk=64,gk=dk-1,hk=[],ik=0;ik<gk;ik++)hk[ik]=0;var jk=Ja(128,hk);ck.prototype.reset=function(){this.g=this.c=0;this.a=k.Int32Array?new Int32Array(this.h):Ka(this.h)};function kk(a){for(var b=a.f,c=a.o,d=0,e=0;e<b.length;)c[d++]=b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3],e=4*d;for(b=16;64>b;b++){e=c[b-15]|0;d=c[b-2]|0;var f=(c[b-16]|0)+((e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3)|0,h=(c[b-7]|0)+((d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10)|0;c[b]=f+h|0}d=a.a[0]|0;e=a.a[1]|0;var m=a.a[2]|0,p=a.a[3]|0,x=a.a[4]|0,gb=a.a[5]|0,la=a.a[6]|0;f=a.a[7]|0;for(b=0;64>b;b++){var Vl=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&e^d&m^e&m)|0;h=x&gb^~x&la;f=f+((x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7))|0;h=h+(ek[b]|0)|0;h=f+(h+(c[b]|0)|0)|0;f=la;la=gb;gb=x;x=p+h|0;p=m;m=e;e=d;d=h+Vl|0}a.a[0]=a.a[0]+d|0;a.a[1]=a.a[1]+e|0;a.a[2]=a.a[2]+m|0;a.a[3]=a.a[3]+p|0;a.a[4]=a.a[4]+x|0;a.a[5]=a.a[5]+gb|0;a.a[6]=a.a[6]+la|0;a.a[7]=a.a[7]+f|0}function lk(a,b,c){void 0===c&&(c=b.length);var d=0,e=a.c;if(l(b))for(;d<c;)a.f[e++]=b.charCodeAt(d++),e==a.b&&(kk(a),e=0);else if(ja(b))for(;d<c;){var f=b[d++];if(!(\"number\"==typeof f&&0<=f&&255>=f&&f==(f|0)))throw Error(\"message must be a byte array\");a.f[e++]=f;e==a.b&&(kk(a),e=0)}else throw Error(\"message must be string or array\");a.c=e;a.g+=c}var fk=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function mk(){ck.call(this,8,nk)}t(mk,ck);var nk=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ok(a,b,c,d,e){this.l=a;this.i=b;this.o=c;this.m=d||null;this.u=e||null;this.h=b+\":\"+c;this.v=new ak;this.g=new Xj(this.h);this.f=null;this.b=[];this.a=this.c=null}function pk(a){return new L(\"invalid-cordova-configuration\",a)}g=ok.prototype;g.ga=function(){return this.za?this.za:this.za=ke().then(function(){if(\"function\"!==typeof I(\"universalLinks.subscribe\",k))throw pk(\"cordova-universal-links-plugin-fix is not installed\");if(\"undefined\"===typeof I(\"BuildInfo.packageName\",k))throw pk(\"cordova-plugin-buildinfo is not installed\");if(\"function\"!==typeof I(\"cordova.plugins.browsertab.openUrl\",k))throw pk(\"cordova-plugin-browsertab is not installed\");if(\"function\"!==typeof I(\"cordova.InAppBrowser.open\",k))throw pk(\"cordova-plugin-inappbrowser is not installed\")},function(){throw new L(\"cordova-not-ready\")})};function qk(){for(var a=20,b=[];0<a;)b.push(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".charAt(Math.floor(62*Math.random()))),a--;return b.join(\"\")}function rk(a){var b=new mk;lk(b,a);a=[];var c=8*b.g;56>b.c?lk(b,jk,56-b.c):lk(b,jk,b.b-(b.c-56));for(var d=63;56<=d;d--)b.f[d]=c&255,c/=256;kk(b);for(d=c=0;d<b.i;d++)for(var e=24;0<=e;e-=8)a[c++]=b.a[d]>>e&255;return qf(a)}g.Ea=function(a,b){b(new L(\"operation-not-supported-in-this-environment\"));return B()};g.Db=function(){return C(new L(\"operation-not-supported-in-this-environment\"))};g.Qb=function(){return!1};g.Mb=function(){return!0};g.Hb=function(){return!0};g.Ca=function(a,b,c){if(this.c)return C(new L(\"redirect-operation-pending\"));var d=this,e=k.document,f=null,h=null,m=null,p=null;return this.c=B().then(function(){xg(b);return sk(d)}).then(function(){return tk(d,a,b,c)}).then(function(){return new A(function(a,b){h=function(){var b=I(\"cordova.plugins.browsertab.close\",k);a();\"function\"===typeof b&&b();d.a&&\"function\"===typeof d.a.close&&(d.a.close(),d.a=null);return!1};d.wa(h);m=function(){f||(f=Ic(2e3).then(function(){b(new L(\"redirect-cancelled-by-user\"))}))};p=function(){Fe()&&m()};e.addEventListener(\"resume\",m,!1);H().toLowerCase().match(/android/)||e.addEventListener(\"visibilitychange\",p,!1)}).s(function(a){return uk(d).then(function(){throw a})})}).ia(function(){m&&e.removeEventListener(\"resume\",m,!1);p&&e.removeEventListener(\"visibilitychange\",p,!1);f&&f.cancel();h&&d.Ka(h);d.c=null})};function tk(a,b,c,d){var e=qk(),f=new yg(b,d,null,e,new L(\"no-auth-event\")),h=I(\"BuildInfo.packageName\",k);if(\"string\"!==typeof h)throw new L(\"invalid-cordova-configuration\");var m=I(\"BuildInfo.displayName\",k),p={};if(H().toLowerCase().match(/iphone|ipad|ipod/))p.ibi=h;else if(H().toLowerCase().match(/android/))p.apn=h;else return C(new L(\"operation-not-supported-in-this-environment\"));m&&(p.appDisplayName=m);e=rk(e);p.sessionId=e;var x=bj(a.l,a.i,a.o,b,c,null,d,a.m,p,a.u);return a.ga().then(function(){var b=a.h;return a.v.a.set(Yj,f.C(),b)}).then(function(){var b=I(\"cordova.plugins.browsertab.isAvailable\",k);if(\"function\"!==typeof b)throw new L(\"invalid-cordova-configuration\");var c=null;b(function(b){if(b){c=I(\"cordova.plugins.browsertab.openUrl\",k);if(\"function\"!==typeof c)throw new L(\"invalid-cordova-configuration\");c(x)}else{c=I(\"cordova.InAppBrowser.open\",k);if(\"function\"!==typeof c)throw new L(\"invalid-cordova-configuration\");b=H();b=!(!b.match(/(iPad|iPhone|iPod).*OS 7_\\d/i)&&!b.match(/(iPad|iPhone|iPod).*OS 8_\\d/i));a.a=c(x,b?\"_blank\":\"_system\",\"location=yes\")}})})}function vk(a,b){for(var c=0;c<a.b.length;c++)try{a.b[c](b)}catch(d){}}function sk(a){a.f||(a.f=a.ga().then(function(){return new A(function(b){function c(d){b(d);a.Ka(c);return!1}a.wa(c);wk(a)})}));return a.f}function uk(a){var b=null;return Zj(a.g).then(function(c){b=c;c=a.g;return Uj(c.b,Yj,c.a)}).then(function(){return b})}function wk(a){function b(b){d=!0;e&&e.cancel();uk(a).then(function(d){var e=c;if(d&&b&&b.url){var f=null;e=Qf(b.url);-1!=e.indexOf(\"/__/auth/callback\")&&(f=ed(e),f=Be(dd(f,\"firebaseError\")||null),f=(f=\"object\"===typeof f?df(f):null)?new yg(d.b,d.c,null,null,f):new yg(d.b,d.c,e,d.g));e=f||c}vk(a,e)})}var c=new yg(\"unknown\",null,null,null,new L(\"no-auth-event\")),d=!1,e=Ic(500).then(function(){return uk(a).then(function(){d||vk(a,c)})}),f=k.handleOpenURL;k.handleOpenURL=function(a){0==a.toLowerCase().indexOf(I(\"BuildInfo.packageName\",k).toLowerCase()+\"://\")&&b({url:a});if(\"function\"===typeof f)try{f(a)}catch(m){console.error(m)}};Bg||(Bg=new Ag);Bg.subscribe(b)}g.wa=function(a){this.b.push(a);sk(this).s(function(b){\"auth/invalid-cordova-configuration\"===b.code&&(b=new yg(\"unknown\",null,null,null,new L(\"no-auth-event\")),a(b))})};g.Ka=function(a){w(this.b,function(b){return b==a})};function xk(a){this.a=a;this.b=Qj()}var yk={name:\"pendingRedirect\",A:\"session\"};function zk(a){return a.b.set(yk,\"pending\",a.a)}function Ak(a){return Uj(a.b,yk,a.a)}function Bk(a){return a.b.get(yk,a.a).then(function(a){return\"pending\"==a})}function Ck(a,b,c){this.u=a;this.o=b;this.l=c;this.h=[];this.f=!1;this.i=r(this.cb,this);this.b=new Dk;this.m=new Ek;this.g=new xk(this.o+\":\"+this.l);this.c={};this.c.unknown=this.b;this.c.signInViaRedirect=this.b;this.c.linkViaRedirect=this.b;this.c.reauthViaRedirect=this.b;this.c.signInViaPopup=this.m;this.c.linkViaPopup=this.m;this.c.reauthViaPopup=this.m;this.a=Fk(this.u,this.o,this.l,Bf)}function Fk(a,b,c,d){var e=firebase.SDK_VERSION||null;return le()?new ok(a,b,c,e,d):new Wi(a,b,c,e,d)}g=Ck.prototype;g.reset=function(){this.f=!1;this.a.Ka(this.i);this.a=Fk(this.u,this.o,this.l)};g.Za=function(){this.b.Za()};function Gk(a){a.f||(a.f=!0,a.a.wa(a.i));var b=a.a;return a.a.ga().s(function(c){a.a==b&&a.reset();throw c})}function Hk(a){a.a.Mb()&&Gk(a).s(function(b){var c=new yg(\"unknown\",null,null,null,new L(\"operation-not-supported-in-this-environment\"));Ik(b)&&a.cb(c)});a.a.Hb()||Jk(a.b)}g.subscribe=function(a){Ha(this.h,a)||this.h.push(a);if(!this.f){var b=this;Bk(this.g).then(function(a){a?Ak(b.g).then(function(){Gk(b).s(function(a){var c=new yg(\"unknown\",null,null,null,new L(\"operation-not-supported-in-this-environment\"));Ik(a)&&b.cb(c)})}):Hk(b)}).s(function(){Hk(b)})}};g.unsubscribe=function(a){w(this.h,function(b){return b==a})};g.cb=function(a){if(!a)throw new L(\"invalid-auth-event\");for(var b=!1,c=0;c<this.h.length;c++){var d=this.h[c];if(d.wb(a.b,a.c)){(b=this.c[a.b])&&b.h(a,d);b=!0;break}}Jk(this.b);return b};var Kk=new Ee(2e3,1e4),Lk=new Ee(3e4,6e4);Ck.prototype.fa=function(){return this.b.fa()};function Mk(a,b,c,d,e,f){return a.a.Db(b,c,d,function(){a.f||(a.f=!0,a.a.wa(a.i))},function(){a.reset()},e,f)}function Ik(a){return a&&\"auth/cordova-not-ready\"==a.code?!0:!1}Ck.prototype.Ca=function(a,b,c){var d=this,e;return zk(this.g).then(function(){return d.a.Ca(a,b,c).s(function(a){if(Ik(a))throw new L(\"operation-not-supported-in-this-environment\");e=a;return Ak(d.g).then(function(){throw e})}).then(function(){return d.a.Qb()?new A(function(){}):Ak(d.g).then(function(){return d.fa()}).then(function(){}).s(function(){})})})};Ck.prototype.Ea=function(a,b,c,d){return this.a.Ea(c,function(c){a.ha(b,null,c,d)},Kk.get())};var Nk={};function Ok(a,b,c){var d=b+\":\"+c;Nk[d]||(Nk[d]=new Ck(a,b,c));return Nk[d]}function Dk(){this.b=null;this.f=[];this.c=[];this.a=null;this.i=this.g=!1}Dk.prototype.reset=function(){this.b=null;this.a&&(this.a.cancel(),this.a=null)};Dk.prototype.h=function(a,b){if(a){this.reset();this.g=!0;var c=a.b,d=a.c,e=a.a&&\"auth/web-storage-unsupported\"==a.a.code,f=a.a&&\"auth/operation-not-supported-in-this-environment\"==a.a.code;this.i=!(!e&&!f);\"unknown\"!=c||e||f?a.a?(Pk(this,!0,null,a.a),B()):b.xa(c,d)?Qk(this,a,b):C(new L(\"invalid-auth-event\")):(Pk(this,!1,null,null),B())}else C(new L(\"invalid-auth-event\"))};function Jk(a){a.g||(a.g=!0,Pk(a,!1,null,null))}Dk.prototype.Za=function(){this.g&&!this.i&&Pk(this,!1,null,null)};function Qk(a,b,c){c=c.xa(b.b,b.c);var d=b.f,e=b.g,f=b.h,h=!!b.b.match(/Redirect$/);c(d,e,f).then(function(b){Pk(a,h,b,null)}).s(function(b){Pk(a,h,null,b)})}function Rk(a,b){a.b=function(){return C(b)};if(a.c.length)for(var c=0;c<a.c.length;c++)a.c[c](b)}function Sk(a,b){a.b=function(){return B(b)};if(a.f.length)for(var c=0;c<a.f.length;c++)a.f[c](b)}function Pk(a,b,c,d){b?d?Rk(a,d):Sk(a,c):Sk(a,{user:null});a.f=[];a.c=[]}Dk.prototype.fa=function(){var a=this;return new A(function(b,c){a.b?a.b().then(b,c):(a.f.push(b),a.c.push(c),Tk(a))})};function Tk(a){var b=new L(\"timeout\");a.a&&a.a.cancel();a.a=Ic(Lk.get()).then(function(){a.b||(a.g=!0,Pk(a,!0,null,b))})}function Ek(){}Ek.prototype.h=function(a,b){if(a){var c=a.b,d=a.c;a.a?(b.ha(a.b,null,a.a,a.c),B()):b.xa(c,d)?Uk(a,b):C(new L(\"invalid-auth-event\"))}else C(new L(\"invalid-auth-event\"))};function Uk(a,b){var c=a.c,d=a.b;b.xa(d,c)(a.f,a.g,a.h).then(function(a){b.ha(d,a,null,c)}).s(function(a){b.ha(d,null,a,c)})}function Vk(){this.tb=!1;Object.defineProperty(this,\"appVerificationDisabled\",{get:function(){return this.tb},set:function(a){this.tb=a},enumerable:!1})}function Wk(a,b){this.a=b;J(this,\"verificationId\",a)}Wk.prototype.confirm=function(a){a=vg(this.verificationId,a);return this.a(a)};function Xk(a,b,c,d){return new tg(a).Va(b,c).then(function(a){return new Wk(a,d)})}function Yk(a){var b=yf(a);if(!(b&&b.exp&&b.auth_time&&b.iat))throw new L(\"internal-error\",\"An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.\");K(this,{token:a,expirationTime:He(1e3*b.exp),authTime:He(1e3*b.auth_time),issuedAtTime:He(1e3*b.iat),signInProvider:b.firebase&&b.firebase.sign_in_provider?b.firebase.sign_in_provider:null,claims:b})}function Zk(a,b,c){this.h=a;this.i=b;this.g=c;this.c=3e4;this.f=96e4;this.b=null;this.a=this.c;if(this.f<this.c)throw Error(\"Proactive refresh lower bound greater than upper bound!\")}Zk.prototype.start=function(){this.a=this.c;$k(this,!0)};function al(a,b){if(b)return a.a=a.c,a.g();b=a.a;a.a*=2;a.a>a.f&&(a.a=a.f);return b}function $k(a,b){a.stop();a.b=Ic(al(a,b)).then(function(){return Ge()}).then(function(){return a.h()}).then(function(){$k(a,!0)}).s(function(b){a.i(b)&&$k(a,!1)})}Zk.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function bl(a){this.f=a;this.b=this.a=null;this.c=0}bl.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}};function cl(a,b){var c=b[M],d=b.refreshToken;b=dl(b.expiresIn);a.b=c;a.c=b;a.a=d}function el(a,b){a.b=b.b;a.a=b.a;a.c=b.c}function dl(a){return qa()+1e3*parseInt(a,10)}function fl(a,b){return Zh(a.f,b).then(function(b){a.b=b.access_token;a.c=dl(b.expires_in);a.a=b.refresh_token;return{accessToken:a.b,expirationTime:a.c,refreshToken:a.a}}).s(function(b){\"auth/user-token-expired\"==b.code&&(a.a=null);throw b})}bl.prototype.getToken=function(a){a=!!a;return this.b&&!this.a?C(new L(\"user-token-expired\")):a||!this.b||qa()>this.c-3e4?this.a?fl(this,{grant_type:\"refresh_token\",refresh_token:this.a}):B(null):B({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})};function gl(a,b){this.a=a||null;this.b=b||null;K(this,{lastSignInTime:He(b||null),creationTime:He(a||null)})}function hl(a){return new gl(a.a,a.b)}gl.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}};function il(a,b,c,d,e,f){K(this,{uid:a,displayName:d||null,photoURL:e||null,email:c||null,phoneNumber:f||null,providerId:b})}function jl(a,b){D.call(this,a);for(var c in b)this[c]=b[c]}t(jl,D);function Q(a,b,c){this.G=[];this.l=a.apiKey;this.m=a.appName;this.u=a.authDomain||null;a=firebase.SDK_VERSION?te(firebase.SDK_VERSION):null;this.b=new Nh(this.l,Af(Bf),a);this.h=new bl(this.b);kl(this,b[M]);cl(this.h,b);J(this,\"refreshToken\",this.h.a);ll(this,c||{});F.call(this);this.I=!1;this.u&&we()&&(this.a=Ok(this.u,this.l,this.m));this.N=[];this.i=null;this.w=ml(this);this.V=r(this.Ha,this);var d=this;this.ka=null;this.ta=function(a){d.pa(a.g)};this.X=null;this.O=[];this.sa=function(a){nl(d,a.c)};this.W=null}t(Q,F);Q.prototype.pa=function(a){this.ka=a;Th(this.b,a)};Q.prototype.ea=function(){return this.ka};function ol(a,b){a.X&&E(a.X,\"languageCodeChanged\",a.ta);(a.X=b)&&sc(b,\"languageCodeChanged\",a.ta)}function nl(a,b){a.O=b;Uh(a.b,firebase.SDK_VERSION?te(firebase.SDK_VERSION,a.O):null)}Q.prototype.ya=function(){return Ka(this.O)};function pl(a,b){a.W&&E(a.W,\"frameworkChanged\",a.sa);(a.W=b)&&sc(b,\"frameworkChanged\",a.sa)}Q.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())};function ql(a){try{return firebase.app(a.m).auth()}catch(b){throw new L(\"internal-error\",\"No firebase.auth.Auth instance is available for the Firebase App '\"+a.m+\"'!\")}}function ml(a){return new Zk(function(){return a.F(!0)},function(a){return a&&\"auth/network-request-failed\"==a.code?!0:!1},function(){var b=a.h.c-qa()-3e5;return 0<b?b:0})}function rl(a){a.D||a.w.b||(a.w.start(),E(a,\"tokenChanged\",a.V),sc(a,\"tokenChanged\",a.V))}function sl(a){E(a,\"tokenChanged\",a.V);a.w.stop()}function kl(a,b){a.ra=b;J(a,\"_lat\",b)}function tl(a,b){w(a.N,function(a){return a==b})}function ul(a){for(var b=[],c=0;c<a.N.length;c++)b.push(a.N[c](a));return xb(b).then(function(){return a})}function vl(a){a.a&&!a.I&&(a.I=!0,a.a.subscribe(a))}function ll(a,b){K(a,{uid:b.uid,displayName:b.displayName||null,photoURL:b.photoURL||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,isAnonymous:b.isAnonymous||!1,metadata:new gl(b.createdAt,b.lastLoginAt),providerData:[]})}J(Q.prototype,\"providerId\",\"firebase\");function wl(){}function xl(a){return B().then(function(){if(a.D)throw new L(\"app-deleted\")})}function yl(a){return Da(a.providerData,function(a){return a.providerId})}function zl(a,b){b&&(Al(a,b.providerId),a.providerData.push(b))}function Al(a,b){w(a.providerData,function(a){return a.providerId==b})}function Bl(a,b,c){(\"uid\"!=b||c)&&a.hasOwnProperty(b)&&J(a,b,c)}function Cl(a,b){a!=b&&(K(a,{uid:b.uid,displayName:b.displayName,photoURL:b.photoURL,email:b.email,emailVerified:b.emailVerified,phoneNumber:b.phoneNumber,isAnonymous:b.isAnonymous,providerData:[]}),b.metadata?J(a,\"metadata\",hl(b.metadata)):J(a,\"metadata\",new gl),v(b.providerData,function(b){zl(a,b)}),el(a.h,b.h),J(a,\"refreshToken\",a.h.a))}g=Q.prototype;g.reload=function(){var a=this;return R(this,xl(this).then(function(){return Dl(a).then(function(){return ul(a)}).then(wl)}))};function Dl(a){return a.F().then(function(b){var c=a.isAnonymous;return El(a,b).then(function(){c||Bl(a,\"isAnonymous\",!1);return b})})}g.dc=function(a){return this.F(a).then(function(a){return new Yk(a)})};g.F=function(a){var b=this;return R(this,xl(this).then(function(){return b.h.getToken(a)}).then(function(a){if(!a)throw new L(\"internal-error\");a.accessToken!=b.ra&&(kl(b,a.accessToken),b.dispatchEvent(new jl(\"tokenChanged\")));Bl(b,\"refreshToken\",a.refreshToken);return a.accessToken}))};function Fl(a,b){b[M]&&a.ra!=b[M]&&(cl(a.h,b),a.dispatchEvent(new jl(\"tokenChanged\")),kl(a,b[M]),Bl(a,\"refreshToken\",a.h.a))}function El(a,b){return P(a.b,Hi,{idToken:b}).then(r(a.zc,a))}g.zc=function(a){a=a.users;if(!a||!a.length)throw new L(\"internal-error\");a=a[0];ll(this,{uid:a.localId,displayName:a.displayName,photoURL:a.photoUrl,email:a.email,emailVerified:!!a.emailVerified,phoneNumber:a.phoneNumber,lastLoginAt:a.lastLoginAt,createdAt:a.createdAt});for(var b=Gl(a),c=0;c<b.length;c++)zl(this,b[c]);Bl(this,\"isAnonymous\",!(this.email&&a.passwordHash)&&!(this.providerData&&this.providerData.length))};function Gl(a){return(a=a.providerUserInfo)&&a.length?Da(a,function(a){return new il(a.rawId,a.providerId,a.email,a.displayName,a.photoUrl,a.phoneNumber)}):[]}g.hb=function(a){var b=this,c=null;return R(this,a.f(this.b,this.uid).then(function(a){Fl(b,a);c=Hl(b,a,\"reauthenticate\");b.i=null;return b.reload()}).then(function(){return c}),!0)};g.Ac=function(a){Me(\"firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead.\");return this.hb(a).then(function(){})};function Il(a,b){return Dl(a).then(function(){if(Ha(yl(a),b))return ul(a).then(function(){throw new L(\"provider-already-linked\")})})}g.fb=function(a){var b=this,c=null;return R(this,Il(this,a.providerId).then(function(){return b.F()}).then(function(c){return a.b(b.b,c)}).then(function(a){c=Hl(b,a,\"link\");return Jl(b,a)}).then(function(){return c}))};g.rc=function(a){Me(\"firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead.\");return this.fb(a).then(function(a){return a.user})};g.sc=function(a,b){var c=this;return R(this,Il(this,\"phone\").then(function(){return Xk(ql(c),a,b,r(c.fb,c))}))};g.Bc=function(a,b){var c=this;return R(this,B().then(function(){return Xk(ql(c),a,b,r(c.hb,c))}),!0)};function Hl(a,b,c){var d=wg(b);b=Gf(b);return Pe({user:a,credential:d,additionalUserInfo:b,operationType:c})}function Jl(a,b){Fl(a,b);return a.reload().then(function(){return a})}g.qb=function(a){var b=this;return R(this,this.F().then(function(c){return b.b.qb(c,a)}).then(function(a){Fl(b,a);return b.reload()}))};g.Tc=function(a){var b=this;return R(this,this.F().then(function(c){return a.b(b.b,c)}).then(function(a){Fl(b,a);return b.reload()}))};g.rb=function(a){var b=this;return R(this,this.F().then(function(c){return b.b.rb(c,a)}).then(function(a){Fl(b,a);return b.reload()}))};g.sb=function(a){if(void 0===a.displayName&&void 0===a.photoURL)return xl(this);var b=this;return R(this,this.F().then(function(c){return b.b.sb(c,{displayName:a.displayName,photoUrl:a.photoURL})}).then(function(a){Fl(b,a);Bl(b,\"displayName\",a.displayName||null);Bl(b,\"photoURL\",a.photoUrl||null);v(b.providerData,function(a){\"password\"===a.providerId&&(J(a,\"displayName\",b.displayName),J(a,\"photoURL\",b.photoURL))});return ul(b)}).then(wl))};g.Rc=function(a){var b=this;return R(this,Dl(this).then(function(c){return Ha(yl(b),a)?si(b.b,c,[a]).then(function(a){var c={};v(a.providerUserInfo||[],function(a){c[a.providerId]=!0});v(yl(b),function(a){c[a]||Al(b,a)});c[tg.PROVIDER_ID]||J(b,\"phoneNumber\",null);return ul(b)}):ul(b).then(function(){throw new L(\"no-such-provider\")})}))};g.delete=function(){var a=this;return R(this,this.F().then(function(b){return P(a.b,Gi,{idToken:b})}).then(function(){a.dispatchEvent(new jl(\"userDeleted\"))})).then(function(){for(var b=0;b<a.G.length;b++)a.G[b].cancel(\"app-deleted\");ol(a,null);pl(a,null);a.G=[];a.D=!0;sl(a);J(a,\"refreshToken\",null);a.a&&a.a.unsubscribe(a)})};g.wb=function(a,b){return\"linkViaPopup\"==a&&(this.g||null)==b&&this.f||\"reauthViaPopup\"==a&&(this.g||null)==b&&this.f||\"linkViaRedirect\"==a&&(this.aa||null)==b||\"reauthViaRedirect\"==a&&(this.aa||null)==b?!0:!1};g.ha=function(a,b,c,d){\"linkViaPopup\"!=a&&\"reauthViaPopup\"!=a||d!=(this.g||null)||(c&&this.v?this.v(c):b&&!c&&this.f&&this.f(b),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)};g.xa=function(a,b){return\"linkViaPopup\"==a&&b==(this.g||null)?r(this.Bb,this):\"reauthViaPopup\"==a&&b==(this.g||null)?r(this.Cb,this):\"linkViaRedirect\"==a&&(this.aa||null)==b?r(this.Bb,this):\"reauthViaRedirect\"==a&&(this.aa||null)==b?r(this.Cb,this):null};g.tc=function(a){var b=this;return Kl(this,\"linkViaPopup\",a,function(){return Il(b,a.providerId).then(function(){return ul(b)})},!1)};g.Cc=function(a){return Kl(this,\"reauthViaPopup\",a,function(){return B()},!0)};function Kl(a,b,c,d,e){if(!we())return C(new L(\"operation-not-supported-in-this-environment\"));if(a.i&&!e)return C(a.i);var f=Ff(c.providerId),h=ve(a.uid+\":::\"),m=null;(!ye()||ne())&&a.u&&c.isOAuthProvider&&(m=bj(a.u,a.l,a.m,b,c,null,h,firebase.SDK_VERSION||null));var p=ee(m,f&&f.Ba,f&&f.Aa);d=d().then(function(){Ll(a);if(!e)return a.F().then(function(){})}).then(function(){return Mk(a.a,p,b,c,h,!!m)}).then(function(){return new A(function(c,d){a.ha(b,null,new L(\"cancelled-popup-request\"),a.g||null);a.f=c;a.v=d;a.g=h;a.c=a.a.Ea(a,b,p,h)})}).then(function(a){p&&de(p);return a?Pe(a):null}).s(function(a){p&&de(p);throw a});return R(a,d,e)}g.uc=function(a){var b=this;return Ml(this,\"linkViaRedirect\",a,function(){return Il(b,a.providerId)},!1)};g.Dc=function(a){return Ml(this,\"reauthViaRedirect\",a,function(){return B()},!0)};function Ml(a,b,c,d,e){if(!we())return C(new L(\"operation-not-supported-in-this-environment\"));if(a.i&&!e)return C(a.i);var f=null,h=ve(a.uid+\":::\");d=d().then(function(){Ll(a);if(!e)return a.F().then(function(){})}).then(function(){a.aa=h;return ul(a)}).then(function(b){a.ba&&(b=a.ba,b=b.b.set(Nl,a.C(),b.a));return b}).then(function(){return a.a.Ca(b,c,h)}).s(function(b){f=b;if(a.ba)return Ol(a.ba);throw f}).then(function(){if(f)throw f});return R(a,d,e)}function Ll(a){if(!a.a||!a.I){if(a.a&&!a.I)throw new L(\"internal-error\");throw new L(\"auth-domain-config-required\")}}g.Bb=function(a,b,c){var d=this;this.c&&(this.c.cancel(),this.c=null);var e=null,f=this.F().then(function(e){return Vf(d.b,{requestUri:a,postBody:c,sessionId:b,idToken:e})}).then(function(a){e=Hl(d,a,\"link\");return Jl(d,a)}).then(function(){return e});return R(this,f)};g.Cb=function(a,b,c){var d=this;this.c&&(this.c.cancel(),this.c=null);var e=null,f=B().then(function(){return Rf(Wf(d.b,{requestUri:a,sessionId:b,postBody:c}),d.uid)}).then(function(a){e=Hl(d,a,\"reauthenticate\");Fl(d,a);d.i=null;return d.reload()}).then(function(){return e});return R(this,f,!0)};g.kb=function(a){var b=this,c=null;return R(this,this.F().then(function(b){c=b;return\"undefined\"===typeof a||Ya(a)?{}:pf(new ef(a))}).then(function(a){return b.b.kb(c,a)}).then(function(a){if(b.email!=a)return b.reload()}).then(function(){}))};function R(a,b,c){var d=Pl(a,b,c);a.G.push(d);d.ia(function(){Ia(a.G,d)});return d}function Pl(a,b,c){return a.i&&!c?(b.cancel(),C(a.i)):b.s(function(b){!b||\"auth/user-disabled\"!=b.code&&\"auth/user-token-expired\"!=b.code||(a.i||a.dispatchEvent(new jl(\"userInvalidated\")),a.i=b);throw b})}g.toJSON=function(){return this.C()};g.C=function(){var a={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.u,stsTokenManager:this.h.C(),redirectEventId:this.aa||null};this.metadata&&ab(a,this.metadata.C());v(this.providerData,function(b){a.providerData.push(Qe(b))});return a};function Ql(a){if(!a.apiKey)return null;var b={apiKey:a.apiKey,authDomain:a.authDomain,appName:a.appName},c={};if(a.stsTokenManager&&a.stsTokenManager.accessToken&&a.stsTokenManager.expirationTime)c[M]=a.stsTokenManager.accessToken,c.refreshToken=a.stsTokenManager.refreshToken||null,c.expiresIn=(a.stsTokenManager.expirationTime-qa())/1e3;else return null;var d=new Q(b,c,a);a.providerData&&v(a.providerData,function(a){a&&zl(d,Pe(a))});a.redirectEventId&&(d.aa=a.redirectEventId);return d}function Rl(a,b,c,d){var e=new Q(a,b);c&&(e.ba=c);d&&nl(e,d);return e.reload().then(function(){return e})}function Sl(a,b,c,d){b=b||{apiKey:a.l,authDomain:a.u,appName:a.m};var e=a.h,f={};f[M]=e.b;f.refreshToken=e.a;f.expiresIn=(e.c-qa())/1e3;b=new Q(b,f);c&&(b.ba=c);d&&nl(b,d);Cl(b,a);return b}function Tl(a){this.a=a;this.b=Qj()}var Nl={name:\"redirectUser\",A:\"session\"};function Ol(a){return Uj(a.b,Nl,a.a)}function Ul(a,b){return a.b.get(Nl,a.a).then(function(a){a&&b&&(a.authDomain=b);return Ql(a||{})})}function Wl(a){this.a=a;this.b=Qj();this.c=null;this.f=Xl(this);this.b.addListener(Yl(\"local\"),this.a,r(this.g,this))}Wl.prototype.g=function(){var a=this,b=Yl(\"local\");Zl(this,function(){return B().then(function(){return a.c&&\"local\"!=a.c.A?a.b.get(b,a.a):null}).then(function(c){if(c)return $l(a,\"local\").then(function(){a.c=b})})})};function $l(a,b){var c=[],d;for(d in Mj)Mj[d]!==b&&c.push(Uj(a.b,Yl(Mj[d]),a.a));c.push(Uj(a.b,am,a.a));return wb(c)}function Xl(a){var b=Yl(\"local\"),c=Yl(\"session\"),d=Yl(\"none\");return Tj(a.b,b,a.a).then(function(){return a.b.get(c,a.a)}).then(function(e){return e?c:a.b.get(d,a.a).then(function(c){return c?d:a.b.get(b,a.a).then(function(c){return c?b:a.b.get(am,a.a).then(function(a){return a?Yl(a):b})})})}).then(function(b){a.c=b;return $l(a,b.A)}).s(function(){a.c||(a.c=b)})}var am={name:\"persistence\",A:\"session\"};function Yl(a){return{name:\"authUser\",A:a}}Wl.prototype.nb=function(a){var b=null,c=this;Nj(a);return Zl(this,function(){return a!=c.c.A?c.b.get(c.c,c.a).then(function(d){b=d;return $l(c,a)}).then(function(){c.c=Yl(a);if(b)return c.b.set(c.c,b,c.a)}):B()})};function bm(a){return Zl(a,function(){return a.b.set(am,a.c.A,a.a)})}function cm(a,b){return Zl(a,function(){return a.b.set(a.c,b.C(),a.a)})}function dm(a){return Zl(a,function(){return Uj(a.b,a.c,a.a)})}function em(a,b){return Zl(a,function(){return a.b.get(a.c,a.a).then(function(a){a&&b&&(a.authDomain=b);return Ql(a||{})})})}function Zl(a,b){a.f=a.f.then(b,b);return a.f}function fm(a){this.l=!1;J(this,\"settings\",new Vk);J(this,\"app\",a);if(S(this).options&&S(this).options.apiKey)a=firebase.SDK_VERSION?te(firebase.SDK_VERSION):null,this.b=new Nh(S(this).options&&S(this).options.apiKey,Af(Bf),a);else throw new L(\"invalid-api-key\");this.N=[];this.m=[];this.I=[];this.Tb=firebase.INTERNAL.createSubscribe(r(this.oc,this));this.O=void 0;this.Ub=firebase.INTERNAL.createSubscribe(r(this.pc,this));gm(this,null);this.h=new Wl(S(this).options.apiKey+\":\"+S(this).name);this.w=new Tl(S(this).options.apiKey+\":\"+S(this).name);this.V=T(this,hm(this));this.i=T(this,im(this));this.X=!1;this.ka=r(this.Oc,this);this.Ha=r(this.Z,this);this.ra=r(this.bc,this);this.sa=r(this.mc,this);this.ta=r(this.nc,this);jm(this);this.INTERNAL={};this.INTERNAL[\"delete\"]=r(this.delete,this);this.INTERNAL.logFramework=r(this.vc,this);this.u=0;F.call(this);km(this);this.G=[]}t(fm,F);function lm(a){D.call(this,\"languageCodeChanged\");this.g=a}t(lm,D);function mm(a){D.call(this,\"frameworkChanged\");this.c=a}t(mm,D);g=fm.prototype;g.nb=function(a){a=this.h.nb(a);return T(this,a)};g.pa=function(a){this.W===a||this.l||(this.W=a,Th(this.b,this.W),this.dispatchEvent(new lm(this.ea())))};g.ea=function(){return this.W};g.Uc=function(){var a=k.navigator;this.pa(a?a.languages&&a.languages[0]||a.language||a.userLanguage||null:null)};g.vc=function(a){this.G.push(a);Uh(this.b,firebase.SDK_VERSION?te(firebase.SDK_VERSION,this.G):null);this.dispatchEvent(new mm(this.G))};g.ya=function(){return Ka(this.G)};function km(a){Object.defineProperty(a,\"lc\",{get:function(){return this.ea()},set:function(a){this.pa(a)},enumerable:!1});a.W=null}g.toJSON=function(){return{apiKey:S(this).options.apiKey,authDomain:S(this).options.authDomain,appName:S(this).name,currentUser:U(this)&&U(this).C()}};function nm(a){return a.Sb||C(new L(\"auth-domain-config-required\"))}function jm(a){var b=S(a).options.authDomain,c=S(a).options.apiKey;b&&we()&&(a.Sb=a.V.then(function(){if(!a.l){a.a=Ok(b,c,S(a).name);a.a.subscribe(a);U(a)&&vl(U(a));if(a.D){vl(a.D);var d=a.D;d.pa(a.ea());ol(d,a);d=a.D;nl(d,a.G);pl(d,a);a.D=null}return a.a}}))}g.wb=function(a,b){switch(a){case\"unknown\":case\"signInViaRedirect\":return!0;case\"signInViaPopup\":return this.g==b&&!!this.f;default:return!1}};g.ha=function(a,b,c,d){\"signInViaPopup\"==a&&this.g==d&&(c&&this.v?this.v(c):b&&!c&&this.f&&this.f(b),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)};g.xa=function(a,b){return\"signInViaRedirect\"==a||\"signInViaPopup\"==a&&this.g==b&&this.f?r(this.ac,this):null};g.ac=function(a,b,c){var d=this;a={requestUri:a,postBody:c,sessionId:b};this.c&&(this.c.cancel(),this.c=null);var e=null,f=null,h=Tf(d.b,a).then(function(a){e=wg(a);f=Gf(a);return a});a=d.V.then(function(){return h}).then(function(a){return om(d,a)}).then(function(){return Pe({user:U(d),credential:e,additionalUserInfo:f,operationType:\"signIn\"})});return T(this,a)};g.Mc=function(a){if(!we())return C(new L(\"operation-not-supported-in-this-environment\"));var b=this,c=Ff(a.providerId),d=ve(),e=null;(!ye()||ne())&&S(this).options.authDomain&&a.isOAuthProvider&&(e=bj(S(this).options.authDomain,S(this).options.apiKey,S(this).name,\"signInViaPopup\",a,null,d,firebase.SDK_VERSION||null));var f=ee(e,c&&c.Ba,c&&c.Aa);c=nm(this).then(function(b){return Mk(b,f,\"signInViaPopup\",a,d,!!e)}).then(function(){return new A(function(a,c){b.ha(\"signInViaPopup\",null,new L(\"cancelled-popup-request\"),b.g);b.f=a;b.v=c;b.g=d;b.c=b.a.Ea(b,\"signInViaPopup\",f,d)})}).then(function(a){f&&de(f);return a?Pe(a):null}).s(function(a){f&&de(f);throw a});return T(this,c)};g.Nc=function(a){if(!we())return C(new L(\"operation-not-supported-in-this-environment\"));var b=this,c=nm(this).then(function(){return bm(b.h)}).then(function(){return b.a.Ca(\"signInViaRedirect\",a)});return T(this,c)};g.fa=function(){if(!we())return C(new L(\"operation-not-supported-in-this-environment\"));var a=this,b=nm(this).then(function(){return a.a.fa()}).then(function(a){return a?Pe(a):null});return T(this,b)};g.Sc=function(a){if(!a)return C(new L(\"null-user\"));var b=this,c={};c.apiKey=S(this).options.apiKey;c.authDomain=S(this).options.authDomain;c.appName=S(this).name;var d=Sl(a,c,b.w,b.ya());return T(this,this.i.then(function(){if(S(b).options.apiKey!=a.l)return d.reload()}).then(function(){if(U(b)&&a.uid==U(b).uid)return Cl(U(b),a),b.Z(a);gm(b,d);vl(d);return b.Z(d)}).then(function(){pm(b)}))};function om(a,b){var c={};c.apiKey=S(a).options.apiKey;c.authDomain=S(a).options.authDomain;c.appName=S(a).name;return a.V.then(function(){return Rl(c,b,a.w,a.ya())}).then(function(b){if(U(a)&&b.uid==U(a).uid)return Cl(U(a),b),a.Z(b);gm(a,b);vl(b);return a.Z(b)}).then(function(){pm(a)})}function gm(a,b){U(a)&&(tl(U(a),a.Ha),E(U(a),\"tokenChanged\",a.ra),E(U(a),\"userDeleted\",a.sa),E(U(a),\"userInvalidated\",a.ta),sl(U(a)));b&&(b.N.push(a.Ha),sc(b,\"tokenChanged\",a.ra),sc(b,\"userDeleted\",a.sa),sc(b,\"userInvalidated\",a.ta),0<a.u&&rl(b));J(a,\"currentUser\",b);b&&(b.pa(a.ea()),ol(b,a),nl(b,a.G),pl(b,a))}g.ob=function(){var a=this,b=this.i.then(function(){if(!U(a))return B();gm(a,null);return dm(a.h).then(function(){pm(a)})});return T(this,b)};function qm(a){var b=Ul(a.w,S(a).options.authDomain).then(function(b){if(a.D=b)b.ba=a.w;return Ol(a.w)});return T(a,b)}function hm(a){var b=S(a).options.authDomain,c=qm(a).then(function(){return em(a.h,b)}).then(function(b){return b?(b.ba=a.w,a.D&&(a.D.aa||null)==(b.aa||null)?b:b.reload().then(function(){return cm(a.h,b).then(function(){return b})}).s(function(c){return\"auth/network-request-failed\"==c.code?b:dm(a.h)})):null}).then(function(b){gm(a,b||null)});return T(a,c)}function im(a){return a.V.then(function(){return a.fa()}).s(function(){}).then(function(){if(!a.l)return a.ka()}).s(function(){}).then(function(){if(!a.l){a.X=!0;var b=a.h;b.b.addListener(Yl(\"local\"),b.a,a.ka)}})}g.Oc=function(){var a=this;return em(this.h,S(this).options.authDomain).then(function(b){if(!a.l){var c;if(c=U(a)&&b){c=U(a).uid;var d=b.uid;c=void 0===c||null===c||\"\"===c||void 0===d||null===d||\"\"===d?!1:c==d}if(c)return Cl(U(a),b),U(a).F();if(U(a)||b)gm(a,b),b&&(vl(b),b.ba=a.w),a.a&&a.a.subscribe(a),pm(a)}})};g.Z=function(a){return cm(this.h,a)};g.bc=function(){pm(this);this.Z(U(this))};g.mc=function(){this.ob()};g.nc=function(){this.ob()};function rm(a,b){var c=null,d=null;return T(a,b.then(function(b){c=wg(b);d=Gf(b);return om(a,b)}).then(function(){return Pe({user:U(a),credential:c,additionalUserInfo:d,operationType:\"signIn\"})}))}g.oc=function(a){var b=this;this.addAuthTokenListener(function(){a.next(U(b))})};g.pc=function(a){var b=this;sm(this,function(){a.next(U(b))})};g.xc=function(a,b,c){var d=this;this.X&&firebase.Promise.resolve().then(function(){n(a)?a(U(d)):n(a.next)&&a.next(U(d))});return this.Tb(a,b,c)};g.wc=function(a,b,c){var d=this;this.X&&firebase.Promise.resolve().then(function(){d.O=d.getUid();n(a)?a(U(d)):n(a.next)&&a.next(U(d))});return this.Ub(a,b,c)};g.cc=function(a){var b=this,c=this.i.then(function(){return U(b)?U(b).F(a).then(function(a){return{accessToken:a}}):null});return T(this,c)};g.Nb=function(a){var b=this;return this.i.then(function(){return rm(b,P(b.b,Ji,{token:a}))}).then(function(a){var c=a.user;Bl(c,\"isAnonymous\",!1);b.Z(c);return a})};g.Gc=function(a){Me(\"firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead.\");return this.Nb(a)};g.Hc=function(a,b){Me(\"firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead.\");return this.Ob(a,b)};g.Ob=function(a,b){var c=this;return this.i.then(function(){return rm(c,P(c.b,kg,{email:a,password:b}))})};g.yb=function(a,b){var c=this;return this.i.then(function(){return rm(c,P(c.b,Fi,{email:a,password:b}))})};g.Wb=function(a,b){Me(\"firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead.\");return this.yb(a,b)};g.Jc=function(a){Me(\"firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead.\");return this.Qa(a).then(function(a){return a.user})};g.Qa=function(a){var b=this;return this.i.then(function(){return rm(b,a.la(b.b))})};g.Ra=function(){var a=this;return this.i.then(function(){var b=U(a);if(b&&b.isAnonymous){var c=Pe({providerId:null,isNewUser:!1});return Pe({user:b,credential:null,additionalUserInfo:c,operationType:\"signIn\"})}return rm(a,a.b.Ra()).then(function(b){var c=b.user;Bl(c,\"isAnonymous\",!0);a.Z(c);return b})})};g.Ic=function(){Me(\"firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead.\");return this.Ra()};function S(a){return a.app}function U(a){return a.currentUser}g.getUid=function(){return U(this)&&U(this).uid||null};function tm(a){return U(a)&&U(a)._lat||null}function pm(a){if(a.X){for(var b=0;b<a.m.length;b++)if(a.m[b])a.m[b](tm(a));if(a.O!==a.getUid()&&a.I.length)for(a.O=a.getUid(),b=0;b<a.I.length;b++)if(a.I[b])a.I[b](tm(a))}}g.Vb=function(a){this.addAuthTokenListener(a);this.u++;0<this.u&&U(this)&&rl(U(this))};g.Ec=function(a){var b=this;v(this.m,function(c){c==a&&b.u--});0>this.u&&(this.u=0);0==this.u&&U(this)&&sl(U(this));this.removeAuthTokenListener(a)};g.addAuthTokenListener=function(a){var b=this;this.m.push(a);T(this,this.i.then(function(){b.l||Ha(b.m,a)&&a(tm(b))}))};g.removeAuthTokenListener=function(a){w(this.m,function(b){return b==a})};function sm(a,b){a.I.push(b);T(a,a.i.then(function(){!a.l&&Ha(a.I,b)&&a.O!==a.getUid()&&(a.O=a.getUid(),b(tm(a)))}))}g.delete=function(){this.l=!0;for(var a=0;a<this.N.length;a++)this.N[a].cancel(\"app-deleted\");this.N=[];this.h&&(a=this.h,a.b.removeListener(Yl(\"local\"),a.a,this.ka));this.a&&(this.a.unsubscribe(this),this.a.Za());return firebase.Promise.resolve()};function T(a,b){a.N.push(b);b.ia(function(){Ia(a.N,b)});return b}g.Zb=function(a){Me(\"firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead.\");return T(this,di(this.b,a))};g.$b=function(a){return T(this,fi(this.b,a))};g.qc=function(a){return!!og(a)};g.mb=function(a,b){var c=this;return T(this,B().then(function(){var a=new ef(b);if(!a.c)throw new L(\"argument-error\",nf+\" must be true when sending sign in link to email\");return pf(a)}).then(function(b){return c.b.mb(a,b)}).then(function(){}))};g.Vc=function(a){return this.Ja(a).then(function(a){return a.data.email})};g.$a=function(a,b){return T(this,this.b.$a(a,b).then(function(){}))};g.Ja=function(a){return T(this,this.b.Ja(a).then(function(a){return new Te(a)}))};g.Xa=function(a){return T(this,this.b.Xa(a).then(function(){}))};g.lb=function(a,b){var c=this;return T(this,B().then(function(){return\"undefined\"===typeof b||Ya(b)?{}:pf(new ef(b))}).then(function(b){return c.b.lb(a,b)}).then(function(){}))};g.Lc=function(a,b){return T(this,Xk(this,a,b,r(this.Qa,this)))};g.Kc=function(a,b){var c=this;return T(this,B().then(function(){var d=ng(a,b||Xd());return c.Qa(d)}))};function um(){}um.prototype.render=function(){};um.prototype.reset=function(){};um.prototype.getResponse=function(){};um.prototype.execute=function(){};function vm(){this.a={};this.b=1e12}var wm=null;vm.prototype.render=function(a,b){this.a[this.b.toString()]=new xm(a,b);return this.b++};vm.prototype.reset=function(a){var b=ym(this,a);a=zm(a);b&&a&&(b.delete(),delete this.a[a])};vm.prototype.getResponse=function(a){return(a=ym(this,a))?a.getResponse():null};vm.prototype.execute=function(a){(a=ym(this,a))&&a.execute()};function ym(a,b){return(b=zm(b))?a.a[b]||null:null}function zm(a){return(a=\"undefined\"===typeof a?1e12:a)?a.toString():null}function xm(a,b){this.g=!1;this.c=b;this.a=this.b=null;this.h=\"invisible\"!==this.c.size;this.f=Kd(a);var c=this;this.i=function(){c.execute()};this.h?this.execute():sc(this.f,\"click\",this.i)}xm.prototype.getResponse=function(){Am(this);return this.b};xm.prototype.execute=function(){Am(this);var a=this;this.a||(this.a=setTimeout(function(){a.b=re();var b=a.c.callback,c=a.c[\"expired-callback\"];if(b)try{b(a.b)}catch(d){}a.a=setTimeout(function(){a.a=null;a.b=null;if(c)try{c()}catch(d){}a.h&&a.execute()},6e4)},500))};xm.prototype.delete=function(){Am(this);this.g=!0;clearTimeout(this.a);this.a=null;E(this.f,\"click\",this.i)};function Am(a){if(a.g)throw Error(\"reCAPTCHA mock was already deleted!\")}function Bm(){}Bm.prototype.g=function(){wm||(wm=new vm);return B(wm)};Bm.prototype.c=function(){};var Cm=null;function Dm(){this.b=k.grecaptcha?Infinity:0;this.f=null;this.a=\"__rcb\"+Math.floor(1e6*Math.random()).toString()}var Em=new od(pd,\"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}\"),Fm=new Ee(3e4,6e4);Dm.prototype.g=function(a){var b=this;return new A(function(c,d){var e=setTimeout(function(){d(new L(\"network-request-failed\"))},Fm.get());if(!k.grecaptcha||a!==b.f&&!b.b){k[b.a]=function(){if(k.grecaptcha){b.f=a;var f=k.grecaptcha.render;k.grecaptcha.render=function(a,c){a=f(a,c);b.b++;return a};clearTimeout(e);c(k.grecaptcha)}else clearTimeout(e),d(new L(\"internal-error\"));delete k[b.a]};var f=vd(Em,{onload:b.a,hl:a||\"\"});B(Gh(f)).s(function(){clearTimeout(e);d(new L(\"internal-error\",\"Unable to load external reCAPTCHA dependencies!\"))})}else clearTimeout(e),c(k.grecaptcha)})};Dm.prototype.c=function(){this.b--};var Gm=null;function Hm(a,b,c,d,e,f,h){J(this,\"type\",\"recaptcha\");this.c=this.f=null;this.D=!1;this.l=b;this.g=null;h?(Cm||(Cm=new Bm),h=Cm):(Gm||(Gm=new Dm),h=Gm);this.m=h;this.a=c||{theme:\"light\",type:\"image\"};this.h=[];if(this.a[Im])throw new L(\"argument-error\",\"sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.\");this.i=\"invisible\"===this.a[Jm];if(!k.document)throw new L(\"operation-not-supported-in-this-environment\",\"RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.\");if(!Kd(b)||!this.i&&Kd(b).hasChildNodes())throw new L(\"argument-error\",\"reCAPTCHA container is either not found or already contains inner elements!\");this.u=new Nh(a,f||null,e||null);this.v=d||function(){return null};var m=this;this.o=[];var p=this.a[Km];this.a[Km]=function(a){Lm(m,a);if(\"function\"===typeof p)p(a);else if(\"string\"===typeof p){var b=I(p,k);\"function\"===typeof b&&b(a)}};var x=this.a[Mm];this.a[Mm]=function(){Lm(m,null);if(\"function\"===typeof x)x();else if(\"string\"===typeof x){var a=I(x,k);\"function\"===typeof a&&a()}}}var Km=\"callback\",Mm=\"expired-callback\",Im=\"sitekey\",Jm=\"size\";function Lm(a,b){for(var c=0;c<a.o.length;c++)try{a.o[c](b)}catch(d){}}function Nm(a,b){w(a.o,function(a){return a==b})}function Om(a,b){a.h.push(b);b.ia(function(){Ia(a.h,b)});return b}g=Hm.prototype;g.za=function(){var a=this;return this.f?this.f:this.f=Om(this,B().then(function(){if(xe()&&!oe())return je();throw new L(\"operation-not-supported-in-this-environment\",\"RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.\")}).then(function(){return a.m.g(a.v())}).then(function(b){a.g=b;return P(a.u,Ii,{})}).then(function(b){a.a[Im]=b.recaptchaSiteKey}).s(function(b){a.f=null;throw b}))};g.render=function(){Pm(this);var a=this;return Om(this,this.za().then(function(){if(null===a.c){var b=a.l;if(!a.i){var c=Kd(b);b=Nd(\"DIV\");c.appendChild(b)}a.c=a.g.render(b,a.a)}return a.c}))};g.verify=function(){Pm(this);var a=this;return Om(this,this.render().then(function(b){return new A(function(c){var d=a.g.getResponse(b);if(d)c(d);else{var e=function(b){b&&(Nm(a,e),c(b))};a.o.push(e);a.i&&a.g.execute(a.c)}})}))};g.reset=function(){Pm(this);null!==this.c&&this.g.reset(this.c)};function Pm(a){if(a.D)throw new L(\"internal-error\",\"RecaptchaVerifier instance has been destroyed.\")}g.clear=function(){Pm(this);this.D=!0;this.m.c();for(var a=0;a<this.h.length;a++)this.h[a].cancel(\"RecaptchaVerifier instance has been destroyed.\");if(!this.i){a=Kd(this.l);for(var b;b=a.firstChild;)a.removeChild(b)}};function Qm(a,b,c){var d=!1;try{this.b=c||firebase.app()}catch(h){throw new L(\"argument-error\",\"No firebase.app.App instance is currently initialized.\")}if(this.b.options&&this.b.options.apiKey)c=this.b.options.apiKey;else throw new L(\"invalid-api-key\");var e=this,f=null;try{f=this.b.auth().ya()}catch(h){}try{d=this.b.auth().settings.appVerificationDisabledForTesting}catch(h){}f=firebase.SDK_VERSION?te(firebase.SDK_VERSION,f):null;Hm.call(this,c,a,b,function(){try{var a=e.b.auth().ea()}catch(m){a=null}return a},f,Af(Bf),d)}t(Qm,Hm);function Rm(a,b,c,d){a:{c=Array.prototype.slice.call(c);var e=0;for(var f=!1,h=0;h<b.length;h++)if(b[h].optional)f=!0;else{if(f)throw new L(\"internal-error\",\"Argument validator encountered a required argument after an optional argument.\");e++}f=b.length;if(c.length<e||f<c.length)d=\"Expected \"+(e==f?1==e?\"1 argument\":e+\" arguments\":e+\"-\"+f+\" arguments\")+\" but got \"+c.length+\".\";else{for(e=0;e<c.length;e++)if(f=b[e].optional&&void 0===c[e],!b[e].M(c[e])&&!f){b=b[e];if(0>e||e>=Sm.length)throw new L(\"internal-error\",\"Argument validator received an unsupported number of arguments.\");c=Sm[e];d=(d?\"\":c+\" argument \")+(b.name?'\"'+b.name+'\" ':\"\")+\"must be \"+b.K+\".\";break a}d=null}}if(d)throw new L(\"argument-error\",a+\" failed: \"+d)}var Sm=\"First Second Third Fourth Fifth Sixth Seventh Eighth Ninth\".split(\" \");function V(a,b){return{name:a||\"\",K:\"a valid string\",optional:!!b,M:l}}function Tm(a,b){return{name:a||\"\",K:\"a boolean\",optional:!!b,M:ba}}function W(a,b){return{name:a||\"\",K:\"a valid object\",optional:!!b,M:q}}function Um(a,b){return{name:a||\"\",K:\"a function\",optional:!!b,M:n}}function Vm(a,b){return{name:a||\"\",K:\"null\",optional:!!b,M:ha}}function Wm(){return{name:\"\",K:\"an HTML element\",optional:!1,M:function(a){return!!(a&&a instanceof Element)}}}function Xm(){return{name:\"auth\",K:\"an instance of Firebase Auth\",optional:!0,M:function(a){return!!(a&&a instanceof fm)}}}function Ym(){return{name:\"app\",K:\"an instance of Firebase App\",optional:!0,M:function(a){return!!(a&&a instanceof firebase.app.App)}}}function Zm(a){return{name:a?a+\"Credential\":\"credential\",K:a?\"a valid \"+a+\" credential\":\"a valid credential\",optional:!1,M:function(b){if(!b)return!1;var c=!a||b.providerId===a;return!(!b.la||!c)}}}function $m(){return{name:\"authProvider\",K:\"a valid Auth provider\",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty(\"isOAuthProvider\"))}}}function an(){return{name:\"applicationVerifier\",K:\"an implementation of firebase.auth.ApplicationVerifier\",optional:!1,M:function(a){return!!(a&&l(a.type)&&n(a.verify))}}}function X(a,b,c,d){return{name:c||\"\",K:a.K+\" or \"+b.K,optional:!!d,M:function(c){return a.M(c)||b.M(c)}}}function Y(a,b){for(var c in b){var d=b[c].name;a[d]=bn(d,a[c],b[c].j)}}function cn(a,b){for(var c in b){var d=b[c].name;d!==c&&Object.defineProperty(a,d,{get:pa(function(a){return this[a]},c),set:pa(function(a,b,c,d){Rm(a,[c],[d],!0);this[b]=d},d,c,b[c].ub),enumerable:!0})}}function Z(a,b,c,d){a[b]=bn(b,c,d)}function bn(a,b,c){function d(){var a=Array.prototype.slice.call(arguments);Rm(e,c,a);return b.apply(this,a)}if(!c)return b;var e=dn(a),f;for(f in b)d[f]=b[f];for(f in b.prototype)d.prototype[f]=b.prototype[f];return d}function dn(a){a=a.split(\".\");return a[a.length-1]}Y(fm.prototype,{Xa:{name:\"applyActionCode\",j:[V(\"code\")]},Ja:{name:\"checkActionCode\",j:[V(\"code\")]},$a:{name:\"confirmPasswordReset\",j:[V(\"code\"),V(\"newPassword\")]},yb:{name:\"createUserWithEmailAndPassword\",j:[V(\"email\"),V(\"password\")]},Wb:{name:\"createUserAndRetrieveDataWithEmailAndPassword\",j:[V(\"email\"),V(\"password\")]},Zb:{name:\"fetchProvidersForEmail\",j:[V(\"email\")]},$b:{name:\"fetchSignInMethodsForEmail\",j:[V(\"email\")]},fa:{name:\"getRedirectResult\",j:[]},qc:{name:\"isSignInWithEmailLink\",j:[V(\"emailLink\")]},wc:{name:\"onAuthStateChanged\",j:[X(W(),Um(),\"nextOrObserver\"),Um(\"opt_error\",!0),Um(\"opt_completed\",!0)]},xc:{name:\"onIdTokenChanged\",j:[X(W(),Um(),\"nextOrObserver\"),Um(\"opt_error\",!0),Um(\"opt_completed\",!0)]},lb:{name:\"sendPasswordResetEmail\",j:[V(\"email\"),X(W(\"opt_actionCodeSettings\",!0),Vm(null,!0),\"opt_actionCodeSettings\",!0)]},mb:{name:\"sendSignInLinkToEmail\",j:[V(\"email\"),W(\"actionCodeSettings\")]},nb:{name:\"setPersistence\",j:[V(\"persistence\")]},Qa:{name:\"signInAndRetrieveDataWithCredential\",j:[Zm()]},Ra:{name:\"signInAnonymously\",j:[]},Ic:{name:\"signInAnonymouslyAndRetrieveData\",j:[]},Jc:{name:\"signInWithCredential\",j:[Zm()]},Nb:{name:\"signInWithCustomToken\",j:[V(\"token\")]},Gc:{name:\"signInAndRetrieveDataWithCustomToken\",j:[V(\"token\")]},Ob:{name:\"signInWithEmailAndPassword\",j:[V(\"email\"),V(\"password\")]},Kc:{name:\"signInWithEmailLink\",j:[V(\"email\"),V(\"emailLink\",!0)]},Hc:{name:\"signInAndRetrieveDataWithEmailAndPassword\",j:[V(\"email\"),V(\"password\")]},Lc:{name:\"signInWithPhoneNumber\",j:[V(\"phoneNumber\"),an()]},Mc:{name:\"signInWithPopup\",j:[$m()]},Nc:{name:\"signInWithRedirect\",j:[$m()]},Sc:{name:\"updateCurrentUser\",j:[X(function(a){return{name:\"user\",K:\"an instance of Firebase User\",optional:!!a,M:function(a){return!!(a&&a instanceof Q)}}}(),Vm(),\"user\")]},ob:{name:\"signOut\",j:[]},toJSON:{name:\"toJSON\",j:[V(null,!0)]},Uc:{name:\"useDeviceLanguage\",j:[]},Vc:{name:\"verifyPasswordResetCode\",j:[V(\"code\")]}});cn(fm.prototype,{lc:{name:\"languageCode\",ub:X(V(),Vm(),\"languageCode\")}});fm.Persistence=Mj;fm.Persistence.LOCAL=\"local\";fm.Persistence.SESSION=\"session\";fm.Persistence.NONE=\"none\";Y(Q.prototype,{delete:{name:\"delete\",j:[]},dc:{name:\"getIdTokenResult\",j:[Tm(\"opt_forceRefresh\",!0)]},F:{name:\"getIdToken\",j:[Tm(\"opt_forceRefresh\",!0)]},fb:{name:\"linkAndRetrieveDataWithCredential\",j:[Zm()]},rc:{name:\"linkWithCredential\",j:[Zm()]},sc:{name:\"linkWithPhoneNumber\",j:[V(\"phoneNumber\"),an()]},tc:{name:\"linkWithPopup\",j:[$m()]},uc:{name:\"linkWithRedirect\",j:[$m()]},hb:{name:\"reauthenticateAndRetrieveDataWithCredential\",j:[Zm()]},Ac:{name:\"reauthenticateWithCredential\",j:[Zm()]},Bc:{name:\"reauthenticateWithPhoneNumber\",j:[V(\"phoneNumber\"),an()]},Cc:{name:\"reauthenticateWithPopup\",j:[$m()]},Dc:{name:\"reauthenticateWithRedirect\",j:[$m()]},reload:{name:\"reload\",j:[]},kb:{name:\"sendEmailVerification\",j:[X(W(\"opt_actionCodeSettings\",!0),Vm(null,!0),\"opt_actionCodeSettings\",!0)]},toJSON:{name:\"toJSON\",j:[V(null,!0)]},Rc:{name:\"unlink\",j:[V(\"provider\")]},qb:{name:\"updateEmail\",j:[V(\"email\")]},rb:{name:\"updatePassword\",j:[V(\"password\")]},Tc:{name:\"updatePhoneNumber\",j:[Zm(\"phone\")]},sb:{name:\"updateProfile\",j:[W(\"profile\")]}});Y(vm.prototype,{execute:{name:\"execute\"},render:{name:\"render\"},reset:{name:\"reset\"},getResponse:{name:\"getResponse\"}});Y(um.prototype,{execute:{name:\"execute\"},render:{name:\"render\"},reset:{name:\"reset\"},getResponse:{name:\"getResponse\"}});Y(A.prototype,{ia:{name:\"finally\"},s:{name:\"catch\"},then:{name:\"then\"}});cn(Vk.prototype,{appVerificationDisabled:{name:\"appVerificationDisabledForTesting\",ub:Tm(\"appVerificationDisabledForTesting\")}});Y(Wk.prototype,{confirm:{name:\"confirm\",j:[V(\"verificationCode\")]}});Z(O,\"credential\",function(a,b){return new ig(a,b)},[V(\"email\"),V(\"password\")]);Y(ag.prototype,{ua:{name:\"addScope\",j:[V(\"scope\")]},Da:{name:\"setCustomParameters\",j:[W(\"customOAuthParameters\")]}});Z(ag,\"credential\",bg,[X(V(),W(),\"token\")]);Z(O,\"credentialWithLink\",ng,[V(\"email\"),V(\"emailLink\")]);Y(cg.prototype,{ua:{name:\"addScope\",j:[V(\"scope\")]},Da:{name:\"setCustomParameters\",j:[W(\"customOAuthParameters\")]}});Z(cg,\"credential\",dg,[X(V(),W(),\"token\")]);Y(eg.prototype,{ua:{name:\"addScope\",j:[V(\"scope\")]},Da:{name:\"setCustomParameters\",j:[W(\"customOAuthParameters\")]}});Z(eg,\"credential\",fg,[X(V(),X(W(),Vm()),\"idToken\"),X(V(),Vm(),\"accessToken\",!0)]);Y(gg.prototype,{Da:{name:\"setCustomParameters\",j:[W(\"customOAuthParameters\")]}});Z(gg,\"credential\",hg,[X(V(),W(),\"token\"),V(\"secret\",!0)]);Y(N.prototype,{ua:{name:\"addScope\",j:[V(\"scope\")]},credential:{name:\"credential\",j:[X(V(),Vm(),\"idToken\",!0),X(V(),Vm(),\"accessToken\",!0),X(V(),Vm(),\"nonce\",!0)]},Da:{name:\"setCustomParameters\",j:[W(\"customOAuthParameters\")]}});Z(tg,\"credential\",vg,[V(\"verificationId\"),V(\"verificationCode\")]);Y(tg.prototype,{Va:{name:\"verifyPhoneNumber\",j:[V(\"phoneNumber\"),an()]}});Y(L.prototype,{toJSON:{name:\"toJSON\",j:[V(null,!0)]}});Y(Dg.prototype,{toJSON:{name:\"toJSON\",j:[V(null,!0)]}});Y(Cg.prototype,{toJSON:{name:\"toJSON\",j:[V(null,!0)]}});Y(Qm.prototype,{clear:{name:\"clear\",j:[]},render:{name:\"render\",j:[]},verify:{name:\"verify\",j:[]}});(function(){if(\"undefined\"!==typeof firebase&&firebase.INTERNAL&&firebase.INTERNAL.registerService){var a={Auth:fm,Error:L};Z(a,\"EmailAuthProvider\",O,[]);Z(a,\"FacebookAuthProvider\",ag,[]);Z(a,\"GithubAuthProvider\",cg,[]);Z(a,\"GoogleAuthProvider\",eg,[]);Z(a,\"TwitterAuthProvider\",gg,[]);Z(a,\"OAuthProvider\",N,[V(\"providerId\")]);Z(a,\"SAMLAuthProvider\",$f,[V(\"providerId\")]);Z(a,\"PhoneAuthProvider\",tg,[Xm()]);Z(a,\"RecaptchaVerifier\",Qm,[X(V(),Wm(),\"recaptchaContainer\"),W(\"recaptchaParameters\",!0),Ym()]);firebase.INTERNAL.registerService(\"auth\",function(a,c){a=new fm(a);c({INTERNAL:{getUid:r(a.getUid,a),getToken:r(a.cc,a),addAuthTokenListener:r(a.Vb,a),removeAuthTokenListener:r(a.Ec,a)}});return a},a,function(a,c){if(\"create\"===a)try{c.auth()}catch(d){}});firebase.INTERNAL.extendNamespace({User:Q})}else throw Error(\"Cannot find the firebase namespace; be sure to include firebase-app.js before this library.\")})()}).apply(typeof global!==\"undefined\"?global:typeof self!==\"undefined\"?self:typeof window!==\"undefined\"?window:{})},LX9C:function(module,exports,__webpack_require__){var NATIVE_WEAK_MAP=__webpack_require__(\"BloW\");var isObject=__webpack_require__(\"kpns\");var hide=__webpack_require__(\"wBs/\");var objectHas=__webpack_require__(\"57wU\");var sharedKey=__webpack_require__(\"qBi7\");var hiddenKeys=__webpack_require__(\"vcTx\");var WeakMap=__webpack_require__(\"ysHE\").WeakMap;var set,get,has;var enforce=function(it){return has(it)?get(it):set(it,{})};var getterFor=function(TYPE){return function(it){var state;if(!isObject(it)||(state=get(it)).type!==TYPE){throw TypeError(\"Incompatible receiver, \"+TYPE+\" required\")}return state}};if(NATIVE_WEAK_MAP){var store=new WeakMap;var wmget=store.get;var wmhas=store.has;var wmset=store.set;set=function(it,metadata){wmset.call(store,it,metadata);return metadata};get=function(it){return wmget.call(store,it)||{}};has=function(it){return wmhas.call(store,it)}}else{var STATE=sharedKey(\"state\");hiddenKeys[STATE]=true;set=function(it,metadata){hide(it,STATE,metadata);return metadata};get=function(it){return objectHas(it,STATE)?it[STATE]:{}};has=function(it){return objectHas(it,STATE)}}module.exports={set:set,get:get,has:has,enforce:enforce,getterFor:getterFor}},LZ9C:function(module){module.exports={devFiles:[],pages:{\"/\":[\"static/runtime/webpack-fdce77a122c11e06ae50.js\",\"static/chunks/commons.e9ff51153d9f12019dec.js\",\"static/runtime/main-546f42912644574021ed.js\"],\"/_app\":[\"static/runtime/webpack-fdce77a122c11e06ae50.js\",\"static/chunks/commons.e9ff51153d9f12019dec.js\",\"static/runtime/main-546f42912644574021ed.js\"],\"/_error\":[\"static/runtime/webpack-fdce77a122c11e06ae50.js\",\"static/chunks/commons.e9ff51153d9f12019dec.js\",\"static/runtime/main-546f42912644574021ed.js\"],\"/about\":[\"static/runtime/webpack-fdce77a122c11e06ae50.js\",\"static/chunks/commons.e9ff51153d9f12019dec.js\",\"static/runtime/main-546f42912644574021ed.js\"],\"/admin\":[\"static/runtime/webpack-fdce77a122c11e06ae50.js\",\"static/chunks/commons.e9ff51153d9f12019dec.js\",\"static/runtime/main-546f42912644574021ed.js\"],\"/folder\":[\"static/runtime/webpack-fdce77a122c11e06ae50.js\",\"static/chunks/commons.e9ff51153d9f12019dec.js\",\"static/runtime/main-546f42912644574021ed.js\"],\"/index\":[\"static/runtime/webpack-fdce77a122c11e06ae50.js\",\"static/chunks/commons.e9ff51153d9f12019dec.js\",\"static/runtime/main-546f42912644574021ed.js\"],\"/profile\":[\"static/runtime/webpack-fdce77a122c11e06ae50.js\",\"static/chunks/commons.e9ff51153d9f12019dec.js\",\"static/runtime/main-546f42912644574021ed.js\"]}}},LwWk:function(module,exports,__webpack_require__){(function(){\"use strict\";var fs=__webpack_require__(\"mw/K\");function Storage(path,opts){opts=opts||{};var db;Object.defineProperty(this,\"___priv_bk___\",{value:{path:path},writable:false,enumerable:false});Object.defineProperty(this,\"___priv_strict___\",{value:!!opts.strict,writable:false,enumerable:false});Object.defineProperty(this,\"___priv_ws___\",{value:opts.ws||\"  \",writable:false,enumerable:false});try{db=JSON.parse(fs.readFileSync(path))}catch(e){db={}}Object.keys(db).forEach(function(key){this[key]=db[key]},this)}Storage.prototype.getItem=function(key){if(this.hasOwnProperty(key)){if(this.___priv_strict___){return String(this[key])}else{return this[key]}}return null};Storage.prototype.setItem=function(key,val){if(val===undefined){this[key]=null}else if(this.___priv_strict___){this[key]=String(val)}else{this[key]=val}this.___save___()};Storage.prototype.removeItem=function(key){delete this[key];this.___save___()};Storage.prototype.clear=function(){var self=this;Object.keys(self).forEach(function(key){self[key]=undefined;delete self[key]})};Storage.prototype.key=function(i){i=i||0;return Object.keys(this)[i]};Object.defineProperty(Storage.prototype,\"length\",{get:function(){return Object.keys(this).length}});Storage.prototype.___save___=function(){var self=this;if(!this.___priv_bk___.path){return}if(this.___priv_bk___.lock){this.___priv_bk___.wait=true;return}this.___priv_bk___.lock=true;fs.writeFile(this.___priv_bk___.path,JSON.stringify(this,null,this.___priv_ws___),\"utf8\",function(e){self.___priv_bk___.lock=false;if(e){console.error(\"Could not write to database\",self.___priv_bk___.path);console.error(e);return}if(self.___priv_bk___.wait){self.___priv_bk___.wait=false;self.___save___()}})};Object.defineProperty(Storage,\"create\",{value:function(path,opts){return new Storage(path,opts)},writable:false,enumerable:false});module.exports=Storage})()},LzdP:function(module,exports,__webpack_require__){var $export=__webpack_require__(\"Y7ZC\");$export($export.S,\"Date\",{now:function(){return(new Date).getTime()}})},M1xp:function(module,exports,__webpack_require__){var cof=__webpack_require__(\"a0xu\");module.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(it){return cof(it)==\"String\"?it.split(\"\"):Object(it)}},MCSJ:function(module,exports){module.exports=function(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},MI3g:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var iterator=__webpack_require__(\"XVgq\");var iterator_default=__webpack_require__.n(iterator);var symbol=__webpack_require__(\"Z7t5\");var symbol_default=__webpack_require__.n(symbol);function typeof_typeof2(obj){if(typeof symbol_default.a===\"function\"&&typeof iterator_default.a===\"symbol\"){typeof_typeof2=function _typeof2(obj){return typeof obj}}else{typeof_typeof2=function _typeof2(obj){return obj&&typeof symbol_default.a===\"function\"&&obj.constructor===symbol_default.a&&obj!==symbol_default.a.prototype?\"symbol\":typeof obj}}return typeof_typeof2(obj)}function typeof_typeof(obj){if(typeof symbol_default.a===\"function\"&&typeof_typeof2(iterator_default.a)===\"symbol\"){typeof_typeof=function _typeof(obj){return typeof_typeof2(obj)}}else{typeof_typeof=function _typeof(obj){return obj&&typeof symbol_default.a===\"function\"&&obj.constructor===symbol_default.a&&obj!==symbol_default.a.prototype?\"symbol\":typeof_typeof2(obj)}}return typeof_typeof(obj)}var assertThisInitialized=__webpack_require__(\"AT/M\");__webpack_require__.d(__webpack_exports__,\"default\",function(){return _possibleConstructorReturn});function _possibleConstructorReturn(self,call){if(call&&(typeof_typeof(call)===\"object\"||typeof call===\"function\")){return call}return Object(assertThisInitialized[\"default\"])(self)}},MPFp:function(module,exports,__webpack_require__){\"use strict\";var LIBRARY=__webpack_require__(\"uOPS\");var $export=__webpack_require__(\"Y7ZC\");var redefine=__webpack_require__(\"kTiW\");var hide=__webpack_require__(\"NegM\");var Iterators=__webpack_require__(\"SBuE\");var $iterCreate=__webpack_require__(\"j2DC\");var setToStringTag=__webpack_require__(\"RfKB\");var getPrototypeOf=__webpack_require__(\"U+KD\");var ITERATOR=__webpack_require__(\"UWiX\")(\"iterator\");var BUGGY=!([].keys&&\"next\"in[].keys());var FF_ITERATOR=\"@@iterator\";var KEYS=\"keys\";var VALUES=\"values\";var returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+\" Iterator\";var DEF_VALUES=DEFAULT==VALUES;var VALUES_BUG=false;var proto=Base.prototype;var $native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT];var $default=$native||getMethod(DEFAULT);var $entries=DEFAULT?!DEF_VALUES?$default:getMethod(\"entries\"):undefined;var $anyNative=NAME==\"Array\"?proto.entries||$native:$native;var methods,key,IteratorPrototype;if($anyNative){IteratorPrototype=getPrototypeOf($anyNative.call(new Base));if(IteratorPrototype!==Object.prototype&&IteratorPrototype.next){setToStringTag(IteratorPrototype,TAG,true);if(!LIBRARY&&typeof IteratorPrototype[ITERATOR]!=\"function\")hide(IteratorPrototype,ITERATOR,returnThis)}}if(DEF_VALUES&&$native&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}if((!LIBRARY||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){hide(proto,ITERATOR,$default)}Iterators[NAME]=$default;Iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries};if(FORCED)for(key in methods){if(!(key in proto))redefine(proto,key,methods[key])}else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods}},MX0m:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"3niX\")},MfhB:function(module,exports,__webpack_require__){var global=__webpack_require__(\"ysHE\");var setGlobal=__webpack_require__(\"nX7E\");var SHARED=\"__core-js_shared__\";var store=global[SHARED]||setGlobal(SHARED,{});(module.exports=function(key,value){return store[key]||(store[key]=value!==undefined?value:{})})(\"versions\",[]).push({version:\"3.0.0\",mode:__webpack_require__(\"U5J1\")?\"pure\":\"global\",copyright:\"Â© 2019 Denis Pushkarev (zloirock.ru)\"})},MgzW:function(module,exports,__webpack_require__){\"use strict\";\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/var getOwnPropertySymbols=Object.getOwnPropertySymbols;var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val===null||val===undefined){throw new TypeError(\"Object.assign cannot be called with null or undefined\")}return Object(val)}function shouldUseNative(){try{if(!Object.assign){return false}var test1=new String(\"abc\");test1[5]=\"de\";if(Object.getOwnPropertyNames(test1)[0]===\"5\"){return false}var test2={};for(var i=0;i<10;i++){test2[\"_\"+String.fromCharCode(i)]=i}var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n]});if(order2.join(\"\")!==\"0123456789\"){return false}var test3={};\"abcdefghijklmnopqrst\".split(\"\").forEach(function(letter){test3[letter]=letter});if(Object.keys(Object.assign({},test3)).join(\"\")!==\"abcdefghijklmnopqrst\"){return false}return true}catch(err){return false}}module.exports=shouldUseNative()?Object.assign:function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key]}}if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++){if(propIsEnumerable.call(from,symbols[i])){to[symbols[i]]=from[symbols[i]]}}}}return to}},Mqbl:function(module,exports,__webpack_require__){var toObject=__webpack_require__(\"JB68\");var $keys=__webpack_require__(\"w6GO\");__webpack_require__(\"zn7N\")(\"keys\",function(){return function keys(it){return $keys(toObject(it))}})},MuAL:function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"toPrimitive\")},MvwC:function(module,exports,__webpack_require__){var document=__webpack_require__(\"5T2Y\").document;module.exports=document&&document.documentElement},N1ro:function(module,exports,__webpack_require__){\"use strict\";var Functor=__webpack_require__(\"Gfnk\"),Pledge=__webpack_require__(\"+7ve\");var Cell=function(tuple){this._ext=tuple[0];this._session=tuple[1];this._functors={incoming:new Functor(this._session,\"processIncomingMessage\"),outgoing:new Functor(this._session,\"processOutgoingMessage\")}};Cell.prototype.pending=function(direction){var functor=this._functors[direction];if(!functor._stopped)functor.pending+=1};Cell.prototype.incoming=function(error,message,callback,context){this._exec(\"incoming\",error,message,callback,context)};Cell.prototype.outgoing=function(error,message,callback,context){this._exec(\"outgoing\",error,message,callback,context)};Cell.prototype.close=function(){this._closed=this._closed||new Pledge;this._doClose();return this._closed};Cell.prototype._exec=function(direction,error,message,callback,context){this._functors[direction].call(error,message,function(err,msg){if(err)err.message=this._ext.name+\": \"+err.message;callback.call(context,err,msg);this._doClose()},this)};Cell.prototype._doClose=function(){var fin=this._functors.incoming,fout=this._functors.outgoing;if(!this._closed||fin.pending+fout.pending!==0)return;if(this._session)this._session.close();this._session=null;this._closed.done()};module.exports=Cell},N9n2:function(module,exports,__webpack_require__){var _Object$create=__webpack_require__(\"SqZg\");var setPrototypeOf=__webpack_require__(\"vjea\");function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=_Object$create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)setPrototypeOf(subClass,superClass)}module.exports=_inherits},NV0k:function(module,exports){exports.f={}.propertyIsEnumerable},NcST:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var instances=[];(function(LogLevel){LogLevel[LogLevel[\"DEBUG\"]=0]=\"DEBUG\";LogLevel[LogLevel[\"VERBOSE\"]=1]=\"VERBOSE\";LogLevel[LogLevel[\"INFO\"]=2]=\"INFO\";LogLevel[LogLevel[\"WARN\"]=3]=\"WARN\";LogLevel[LogLevel[\"ERROR\"]=4]=\"ERROR\";LogLevel[LogLevel[\"SILENT\"]=5]=\"SILENT\"})(exports.LogLevel||(exports.LogLevel={}));var defaultLogLevel=exports.LogLevel.INFO;var defaultLogHandler=function(instance,logType){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}if(logType<instance.logLevel)return;var now=(new Date).toISOString();switch(logType){case exports.LogLevel.DEBUG:console.log.apply(console,[\"[\"+now+\"]  \"+instance.name+\":\"].concat(args));break;case exports.LogLevel.VERBOSE:console.log.apply(console,[\"[\"+now+\"]  \"+instance.name+\":\"].concat(args));break;case exports.LogLevel.INFO:console.info.apply(console,[\"[\"+now+\"]  \"+instance.name+\":\"].concat(args));break;case exports.LogLevel.WARN:console.warn.apply(console,[\"[\"+now+\"]  \"+instance.name+\":\"].concat(args));break;case exports.LogLevel.ERROR:console.error.apply(console,[\"[\"+now+\"]  \"+instance.name+\":\"].concat(args));break;default:throw new Error(\"Attempted to log a message with an invalid logType (value: \"+logType+\")\")}};var Logger=function(){function Logger(name){this.name=name;this._logLevel=defaultLogLevel;this._logHandler=defaultLogHandler;instances.push(this)}Object.defineProperty(Logger.prototype,\"logLevel\",{get:function(){return this._logLevel},set:function(val){if(!(val in exports.LogLevel)){throw new TypeError(\"Invalid value assigned to `logLevel`\")}this._logLevel=val},enumerable:true,configurable:true});Object.defineProperty(Logger.prototype,\"logHandler\",{get:function(){return this._logHandler},set:function(val){if(typeof val!==\"function\"){throw new TypeError(\"Value assigned to `logHandler` must be a function\")}this._logHandler=val},enumerable:true,configurable:true});Logger.prototype.debug=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}this._logHandler.apply(this,[this,exports.LogLevel.DEBUG].concat(args))};Logger.prototype.log=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}this._logHandler.apply(this,[this,exports.LogLevel.VERBOSE].concat(args))};Logger.prototype.info=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}this._logHandler.apply(this,[this,exports.LogLevel.INFO].concat(args))};Logger.prototype.warn=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}this._logHandler.apply(this,[this,exports.LogLevel.WARN].concat(args))};Logger.prototype.error=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}this._logHandler.apply(this,[this,exports.LogLevel.ERROR].concat(args))};return Logger}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function setLogLevel(level){instances.forEach(function(inst){inst.logLevel=level})}exports.Logger=Logger;exports.setLogLevel=setLogLevel},NegM:function(module,exports,__webpack_require__){var dP=__webpack_require__(\"2faE\");var createDesc=__webpack_require__(\"rr1i\");module.exports=__webpack_require__(\"jmDH\")?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){object[key]=value;return object}},\"NsO/\":function(module,exports,__webpack_require__){var IObject=__webpack_require__(\"M1xp\");var defined=__webpack_require__(\"Jes0\");module.exports=function(it){return IObject(defined(it))}},NwJ3:function(module,exports,__webpack_require__){var Iterators=__webpack_require__(\"SBuE\");var ITERATOR=__webpack_require__(\"UWiX\")(\"iterator\");var ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},O1VW:function(module,exports,__webpack_require__){\"use strict\";var Base=__webpack_require__(\"Wdmt\"),util=__webpack_require__(\"jK02\");var Draft75=function(request,url,options){Base.apply(this,arguments);this._stage=0;this.version=\"hixie-75\";this._headers.set(\"Upgrade\",\"WebSocket\");this._headers.set(\"Connection\",\"Upgrade\");this._headers.set(\"WebSocket-Origin\",this._request.headers.origin);this._headers.set(\"WebSocket-Location\",this.url)};util.inherits(Draft75,Base);var instance={close:function(){if(this.readyState===3)return false;this.readyState=3;this.emit(\"close\",new Base.CloseEvent(null,null));return true},parse:function(chunk){if(this.readyState>1)return;this._reader.put(chunk);this._reader.eachByte(function(octet){var message;switch(this._stage){case-1:this._body.push(octet);this._sendHandshakeBody();break;case 0:this._parseLeadingByte(octet);break;case 1:this._length=(octet&127)+128*this._length;if(this._closing&&this._length===0){return this.close()}else if((octet&128)!==128){if(this._length===0){this._stage=0}else{this._skipped=0;this._stage=2}}break;case 2:if(octet===255){this._stage=0;message=new Buffer(this._buffer).toString(\"utf8\",0,this._buffer.length);this.emit(\"message\",new Base.MessageEvent(message))}else{if(this._length){this._skipped+=1;if(this._skipped===this._length)this._stage=0}else{this._buffer.push(octet);if(this._buffer.length>this._maxLength)return this.close()}}break}},this)},frame:function(buffer){if(this.readyState===0)return this._queue([buffer]);if(this.readyState>1)return false;if(typeof buffer!==\"string\")buffer=buffer.toString();var payload=new Buffer(buffer,\"utf8\"),frame=new Buffer(payload.length+2);frame[0]=0;frame[payload.length+1]=255;payload.copy(frame,1);this._write(frame);return true},_handshakeResponse:function(){var start=\"HTTP/1.1 101 Web Socket Protocol Handshake\",headers=[start,this._headers.toString(),\"\"];return new Buffer(headers.join(\"\\r\\n\"),\"utf8\")},_parseLeadingByte:function(octet){if((octet&128)===128){this._length=0;this._stage=1}else{delete this._length;delete this._skipped;this._buffer=[];this._stage=2}}};for(var key in instance)Draft75.prototype[key]=instance[key];module.exports=Draft75},O40h:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,\"default\",function(){return _asyncToGenerator});var _core_js_promise__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"eVuF\");var _core_js_promise__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_core_js_promise__WEBPACK_IMPORTED_MODULE_0__);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{_core_js_promise__WEBPACK_IMPORTED_MODULE_0___default.a.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new _core_js_promise__WEBPACK_IMPORTED_MODULE_0___default.a(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"next\",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"throw\",err)}_next(undefined)})}}},Ojgd:function(module,exports){var ceil=Math.ceil;var floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},PBE1:function(module,exports,__webpack_require__){\"use strict\";var $export=__webpack_require__(\"Y7ZC\");var core=__webpack_require__(\"WEpk\");var global=__webpack_require__(\"5T2Y\");var speciesConstructor=__webpack_require__(\"8gHz\");var promiseResolve=__webpack_require__(\"zXhZ\");$export($export.P+$export.R,\"Promise\",{finally:function(onFinally){var C=speciesConstructor(this,core.Promise||global.Promise);var isFunction=typeof onFinally==\"function\";return this.then(isFunction?function(x){return promiseResolve(C,onFinally()).then(function(){return x})}:onFinally,isFunction?function(e){return promiseResolve(C,onFinally()).then(function(){throw e})}:onFinally)}})},PJMN:function(module,exports){module.exports=require(\"crypto\")},PgRs:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"m/Pd\")},\"Q/yX\":function(module,exports,__webpack_require__){\"use strict\";var $export=__webpack_require__(\"Y7ZC\");var newPromiseCapability=__webpack_require__(\"ZW5q\");var perform=__webpack_require__(\"RDmV\");$export($export.S,\"Promise\",{try:function(callbackfn){var promiseCapability=newPromiseCapability.f(this);var result=perform(callbackfn);(result.e?promiseCapability.reject:promiseCapability.resolve)(result.v);return promiseCapability.promise}})},Q0KE:function(module,exports,__webpack_require__){\"use strict\";var __importStar=void 0&&(void 0).__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod){if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k]}result[\"default\"]=mod;return result};Object.defineProperty(exports,\"__esModule\",{value:true});var React=__importStar(__webpack_require__(\"q1tI\"));exports.LoadableContext=React.createContext(null)},Q2Kg:function(module,exports,__webpack_require__){var internalObjectKeys=__webpack_require__(\"2w5C\");var enumBugKeys=__webpack_require__(\"o9j8\");module.exports=Object.keys||function keys(O){return internalObjectKeys(O,enumBugKeys)}},QMMT:function(module,exports,__webpack_require__){var cof=__webpack_require__(\"a0xu\");var TAG=__webpack_require__(\"UWiX\")(\"toStringTag\");var ARG=cof(function(){return arguments}())==\"Arguments\";var tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,T,B;return it===undefined?\"Undefined\":it===null?\"Null\":typeof(T=tryGet(O=Object(it),TAG))==\"string\"?T:ARG?cof(O):(B=cof(O))==\"Object\"&&typeof O.callee==\"function\"?\"Arguments\":B}},QURa:function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"patternMatch\")},QXhf:function(module,exports,__webpack_require__){var ctx=__webpack_require__(\"2GTP\");var invoke=__webpack_require__(\"MCSJ\");var html=__webpack_require__(\"MvwC\");var cel=__webpack_require__(\"Hsns\");var global=__webpack_require__(\"5T2Y\");var process=global.process;var setTask=global.setImmediate;var clearTask=global.clearImmediate;var MessageChannel=global.MessageChannel;var Dispatch=global.Dispatch;var counter=0;var queue={};var ONREADYSTATECHANGE=\"onreadystatechange\";var defer,channel,port;var run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn()}};var listener=function(event){run.call(event.data)};if(!setTask||!clearTask){setTask=function setImmediate(fn){var args=[];var i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){invoke(typeof fn==\"function\"?fn:Function(fn),args)};defer(counter);return counter};clearTask=function clearImmediate(id){delete queue[id]};if(__webpack_require__(\"a0xu\")(process)==\"process\"){defer=function(id){process.nextTick(ctx(run,id,1))}}else if(Dispatch&&Dispatch.now){defer=function(id){Dispatch.now(ctx(run,id,1))}}else if(MessageChannel){channel=new MessageChannel;port=channel.port2;channel.port1.onmessage=listener;defer=ctx(port.postMessage,port,1)}else if(global.addEventListener&&typeof postMessage==\"function\"&&!global.importScripts){defer=function(id){global.postMessage(id+\"\",\"*\")};global.addEventListener(\"message\",listener,false)}else if(ONREADYSTATECHANGE in cel(\"script\")){defer=function(id){html.appendChild(cel(\"script\"))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run.call(id)}}}else{defer=function(id){setTimeout(ctx(run,id,1),0)}}}module.exports={set:setTask,clear:clearTask}},QduZ:function(module,exports){module.exports=require(\"child_process\")},Qs2e:function(module,exports){module.exports=require(\"net\")},Qs3B:function(module,exports){module.exports=require(\"assert\")},QvOV:function(module,exports,__webpack_require__){var toString=__webpack_require__(\"YCU0\");var ObjectPrototype=Object.prototype;if(toString!==ObjectPrototype.toString){__webpack_require__(\"1f/i\")(ObjectPrototype,\"toString\",toString,{unsafe:true})}},\"R+7+\":function(module,exports,__webpack_require__){var getKeys=__webpack_require__(\"w6GO\");var gOPS=__webpack_require__(\"mqlF\");var pIE=__webpack_require__(\"NV0k\");module.exports=function(it){var result=getKeys(it);var getSymbols=gOPS.f;if(getSymbols){var symbols=getSymbols(it);var isEnum=pIE.f;var i=0;var key;while(symbols.length>i)if(isEnum.call(it,key=symbols[i++]))result.push(key)}return result}},\"R+7f\":function(module,exports,__webpack_require__){\"use strict\";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result[\"default\"]=mod;return result};Object.defineProperty(exports,\"__esModule\",{value:true});const react_1=__importDefault(__webpack_require__(\"q1tI\"));const server_1=__webpack_require__(\"Fw1r\");const mitt_1=__importDefault(__webpack_require__(\"kiME\"));const utils_1=__webpack_require__(\"Bu4q\");const head_1=__importStar(__webpack_require__(\"m/Pd\"));const loadable_1=__importDefault(__webpack_require__(\"0KLy\"));const loadable_context_1=__webpack_require__(\"Q0KE\");const get_dynamic_import_bundles_1=__webpack_require__(\"W8Q5\");const get_page_files_1=__webpack_require__(\"bkef\");const amphtml_context_1=__webpack_require__(\"imt6\");function noRouter(){const message='No router instance found. you should only use \"next/router\" inside the client side of your app. https://err.sh/zeit/next.js/no-router-instance';throw new Error(message)}class ServerRouter{constructor(pathname,query,as){this.route=pathname.replace(/\\/$/,\"\")||\"/\";this.pathname=pathname;this.query=query;this.asPath=as;this.pathname=pathname}push(){noRouter()}replace(){noRouter()}reload(){noRouter()}back(){noRouter()}prefetch(){noRouter()}beforePopState(){noRouter()}}ServerRouter.events=mitt_1.default();function enhanceComponents(options,App,Component){if(typeof options===\"function\"){return{App:App,Component:options(Component)}}return{App:options.enhanceApp?options.enhanceApp(App):App,Component:options.enhanceComponent?options.enhanceComponent(Component):Component}}function render(renderElementToString,element){let html;let head;try{html=renderElementToString(element)}finally{head=head_1.default.rewind()||head_1.defaultHead()}return{html:html,head:head}}function renderDocument(Document,{ampEnabled:ampEnabled=false,props:props,docProps:docProps,pathname:pathname,query:query,buildId:buildId,assetPrefix:assetPrefix,runtimeConfig:runtimeConfig,nextExport:nextExport,dynamicImportsIds:dynamicImportsIds,err:err,dev:dev,ampPath:ampPath,amphtml:amphtml,hasAmp:hasAmp,staticMarkup:staticMarkup,devFiles:devFiles,files:files,dynamicImports:dynamicImports}){return\"<!DOCTYPE html>\"+server_1.renderToStaticMarkup(react_1.default.createElement(amphtml_context_1.IsAmpContext.Provider,{value:amphtml},react_1.default.createElement(Document,Object.assign({__NEXT_DATA__:{props:props,page:pathname,query:query,buildId:buildId,assetPrefix:assetPrefix===\"\"?undefined:assetPrefix,runtimeConfig:runtimeConfig,nextExport:nextExport,dynamicIds:dynamicImportsIds.length===0?undefined:dynamicImportsIds,err:err?serializeError(dev,err):undefined},ampEnabled:ampEnabled,ampPath:ampPath,amphtml:amphtml,hasAmp:hasAmp,staticMarkup:staticMarkup,devFiles:devFiles,files:files,dynamicImports:dynamicImports,assetPrefix:assetPrefix},docProps))))}async function renderToHTML(req,res,pathname,query,renderOpts){pathname=pathname===\"/index\"?\"/\":pathname;const{err:err,dev:dev=false,staticMarkup:staticMarkup=false,amphtml:amphtml=false,hasAmp:hasAmp=false,ampPath:ampPath=\"\",App:App,Document:Document,Component:Component,buildManifest:buildManifest,reactLoadableManifest:reactLoadableManifest,ErrorDebug:ErrorDebug}=renderOpts;await loadable_1.default.preloadAll();if(dev){const{isValidElementType:isValidElementType}=__webpack_require__(!function webpackMissingModule(){var e=new Error(\"Cannot find module 'react-is'\");e.code=\"MODULE_NOT_FOUND\";throw e}());if(!isValidElementType(Component)){throw new Error(`The default export is not a React Component in page: \"${pathname}\"`)}if(!isValidElementType(App)){throw new Error(`The default export is not a React Component in page: \"/_app\"`)}if(!isValidElementType(Document)){throw new Error(`The default export is not a React Component in page: \"/_document\"`)}}const asPath=req.url;const ctx={err:err,req:req,res:res,pathname:pathname,query:query,asPath:asPath};const router=new ServerRouter(pathname,query,asPath);let props;try{props=await utils_1.loadGetInitialProps(App,{Component:Component,router:router,ctx:ctx})}catch(err){if(!dev||!err)throw err;ctx.err=err;renderOpts.err=err}if(utils_1.isResSent(res))return null;const devFiles=buildManifest.devFiles;const files=[...new Set([...get_page_files_1.getPageFiles(buildManifest,pathname),...get_page_files_1.getPageFiles(buildManifest,\"/_app\")])];const reactLoadableModules=[];const renderPage=(options={})=>{const renderElementToString=staticMarkup?server_1.renderToStaticMarkup:server_1.renderToString;if(ctx.err&&ErrorDebug){return render(renderElementToString,react_1.default.createElement(ErrorDebug,{error:ctx.err}))}if(dev&&(props.router||props.Component)){throw new Error(`'router' and 'Component' can not be returned in getInitialProps from _app.js https://err.sh/zeit/next.js/cant-override-next-props.md`)}const{App:EnhancedApp,Component:EnhancedComponent}=enhanceComponents(options,App,Component);return render(renderElementToString,react_1.default.createElement(amphtml_context_1.IsAmpContext.Provider,{value:amphtml},react_1.default.createElement(loadable_context_1.LoadableContext.Provider,{value:moduleName=>reactLoadableModules.push(moduleName)},react_1.default.createElement(EnhancedApp,Object.assign({Component:EnhancedComponent,router:router},props)))))};const docProps=await utils_1.loadGetInitialProps(Document,Object.assign({},ctx,{renderPage:renderPage}));if(utils_1.isResSent(res))return null;const dynamicImports=[...get_dynamic_import_bundles_1.getDynamicImportBundles(reactLoadableManifest,reactLoadableModules)];const dynamicImportsIds=dynamicImports.map(bundle=>bundle.id);return renderDocument(Document,Object.assign({},renderOpts,{props:props,docProps:docProps,pathname:pathname,ampPath:ampPath,amphtml:amphtml,hasAmp:hasAmp,query:query,dynamicImportsIds:dynamicImportsIds,dynamicImports:dynamicImports,files:files,devFiles:devFiles}))}exports.renderToHTML=renderToHTML;function errorToJSON(err){const{name:name,message:message,stack:stack}=err;return{name:name,message:message,stack:stack}}function serializeError(dev,err){if(dev){return errorToJSON(err)}return{name:\"Internal Server Error.\",message:\"500 - Internal Server Error.\",statusCode:500}}},RDmV:function(module,exports){module.exports=function(exec){try{return{e:false,v:exec()}}catch(e){return{e:true,v:e}}}},\"RRc/\":function(module,exports,__webpack_require__){var forOf=__webpack_require__(\"oioR\");module.exports=function(iter,ITERATOR){var result=[];forOf(iter,false,result.push,result,ITERATOR);return result}},\"RU/L\":function(module,exports,__webpack_require__){__webpack_require__(\"Rqdy\");var $Object=__webpack_require__(\"WEpk\").Object;module.exports=function defineProperty(it,key,desc){return $Object.defineProperty(it,key,desc)}},RfKB:function(module,exports,__webpack_require__){var def=__webpack_require__(\"2faE\").f;var has=__webpack_require__(\"B+OT\");var TAG=__webpack_require__(\"UWiX\")(\"toStringTag\");module.exports=function(it,tag,stat){if(it&&!has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})}},Rp86:function(module,exports,__webpack_require__){__webpack_require__(\"bBy9\");__webpack_require__(\"FlQf\");module.exports=__webpack_require__(\"fXsU\")},Rqdy:function(module,exports,__webpack_require__){var $export=__webpack_require__(\"Y7ZC\");$export($export.S+$export.F*!__webpack_require__(\"jmDH\"),\"Object\",{defineProperty:__webpack_require__(\"2faE\").f})},S4gH:function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(\"TIpl\").f;var has=__webpack_require__(\"57wU\");var TO_STRING_TAG=__webpack_require__(\"aXXJ\")(\"toStringTag\");module.exports=function(it,TAG,STATIC){if(it&&!has(it=STATIC?it:it.prototype,TO_STRING_TAG)){defineProperty(it,TO_STRING_TAG,{configurable:true,value:TAG})}}},S5sp:function(module,exports,__webpack_require__){module.exports=!__webpack_require__(\"0HDe\")(function(){function F(){}F.prototype.constructor=null;return Object.getPrototypeOf(new F)!==F.prototype})},SAp2:function(module,exports,__webpack_require__){var requireObjectCoercible=__webpack_require__(\"9Nts\");module.exports=function(argument){return Object(requireObjectCoercible(argument))}},SBuE:function(module,exports){module.exports={}},SIcJ:function(module,exports,__webpack_require__){var objectKeys=__webpack_require__(\"Q2Kg\");var getOwnPropertySymbolsModule=__webpack_require__(\"fw2a\");var propertyIsEnumerableModule=__webpack_require__(\"iCuu\");module.exports=function(it){var result=objectKeys(it);var getOwnPropertySymbols=getOwnPropertySymbolsModule.f;if(getOwnPropertySymbols){var symbols=getOwnPropertySymbols(it);var propertyIsEnumerable=propertyIsEnumerableModule.f;var i=0;var key;while(symbols.length>i)if(propertyIsEnumerable.call(it,key=symbols[i++]))result.push(key)}return result}},SevZ:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _stringHash=_interopRequireDefault(__webpack_require__(\"9kyW\"));var _stylesheet=_interopRequireDefault(__webpack_require__(\"bVZc\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var sanitize=function sanitize(rule){return rule.replace(/\\/style/gi,\"\\\\/style\")};var StyleSheetRegistry=function(){function StyleSheetRegistry(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$styleSheet=_ref.styleSheet,styleSheet=_ref$styleSheet===void 0?null:_ref$styleSheet,_ref$optimizeForSpeed=_ref.optimizeForSpeed,optimizeForSpeed=_ref$optimizeForSpeed===void 0?false:_ref$optimizeForSpeed,_ref$isBrowser=_ref.isBrowser,isBrowser=_ref$isBrowser===void 0?typeof window!==\"undefined\":_ref$isBrowser;_classCallCheck(this,StyleSheetRegistry);this._sheet=styleSheet||new _stylesheet.default({name:\"styled-jsx\",optimizeForSpeed:optimizeForSpeed});this._sheet.inject();if(styleSheet&&typeof optimizeForSpeed===\"boolean\"){this._sheet.setOptimizeForSpeed(optimizeForSpeed);this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()}this._isBrowser=isBrowser;this._fromServer=undefined;this._indices={};this._instancesCounts={};this.computeId=this.createComputeId();this.computeSelector=this.createComputeSelector()}_createClass(StyleSheetRegistry,[{key:\"add\",value:function add(props){var _this=this;if(undefined===this._optimizeForSpeed){this._optimizeForSpeed=Array.isArray(props.children);this._sheet.setOptimizeForSpeed(this._optimizeForSpeed);this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()}if(this._isBrowser&&!this._fromServer){this._fromServer=this.selectFromServer();this._instancesCounts=Object.keys(this._fromServer).reduce(function(acc,tagName){acc[tagName]=0;return acc},{})}var _this$getIdAndRules=this.getIdAndRules(props),styleId=_this$getIdAndRules.styleId,rules=_this$getIdAndRules.rules;if(styleId in this._instancesCounts){this._instancesCounts[styleId]+=1;return}var indices=rules.map(function(rule){return _this._sheet.insertRule(rule)}).filter(function(index){return index!==-1});this._indices[styleId]=indices;this._instancesCounts[styleId]=1}},{key:\"remove\",value:function remove(props){var _this2=this;var _this$getIdAndRules2=this.getIdAndRules(props),styleId=_this$getIdAndRules2.styleId;invariant(styleId in this._instancesCounts,\"styleId: `\".concat(styleId,\"` not found\"));this._instancesCounts[styleId]-=1;if(this._instancesCounts[styleId]<1){var tagFromServer=this._fromServer&&this._fromServer[styleId];if(tagFromServer){tagFromServer.parentNode.removeChild(tagFromServer);delete this._fromServer[styleId]}else{this._indices[styleId].forEach(function(index){return _this2._sheet.deleteRule(index)});delete this._indices[styleId]}delete this._instancesCounts[styleId]}}},{key:\"update\",value:function update(props,nextProps){this.add(nextProps);this.remove(props)}},{key:\"flush\",value:function flush(){this._sheet.flush();this._sheet.inject();this._fromServer=undefined;this._indices={};this._instancesCounts={};this.computeId=this.createComputeId();this.computeSelector=this.createComputeSelector()}},{key:\"cssRules\",value:function cssRules(){var _this3=this;var fromServer=this._fromServer?Object.keys(this._fromServer).map(function(styleId){return[styleId,_this3._fromServer[styleId]]}):[];var cssRules=this._sheet.cssRules();return fromServer.concat(Object.keys(this._indices).map(function(styleId){return[styleId,_this3._indices[styleId].map(function(index){return cssRules[index].cssText}).join(_this3._optimizeForSpeed?\"\":\"\\n\")]}).filter(function(rule){return Boolean(rule[1])}))}},{key:\"createComputeId\",value:function createComputeId(){var cache={};return function(baseId,props){if(!props){return\"jsx-\".concat(baseId)}var propsToString=String(props);var key=baseId+propsToString;if(!cache[key]){cache[key]=\"jsx-\".concat((0,_stringHash.default)(\"\".concat(baseId,\"-\").concat(propsToString)))}return cache[key]}}},{key:\"createComputeSelector\",value:function createComputeSelector(){var selectoPlaceholderRegexp=arguments.length>0&&arguments[0]!==undefined?arguments[0]:/__jsx-style-dynamic-selector/g;var cache={};return function(id,css){if(!this._isBrowser){css=sanitize(css)}var idcss=id+css;if(!cache[idcss]){cache[idcss]=css.replace(selectoPlaceholderRegexp,id)}return cache[idcss]}}},{key:\"getIdAndRules\",value:function getIdAndRules(props){var _this4=this;var css=props.children,dynamic=props.dynamic,id=props.id;if(dynamic){var styleId=this.computeId(id,dynamic);return{styleId:styleId,rules:Array.isArray(css)?css.map(function(rule){return _this4.computeSelector(styleId,rule)}):[this.computeSelector(styleId,css)]}}return{styleId:this.computeId(id),rules:Array.isArray(css)?css:[css]}}},{key:\"selectFromServer\",value:function selectFromServer(){var elements=Array.prototype.slice.call(document.querySelectorAll('[id^=\"__jsx-\"]'));return elements.reduce(function(acc,element){var id=element.id.slice(2);acc[id]=element;return acc},{})}}]);return StyleSheetRegistry}();exports.default=StyleSheetRegistry;function invariant(condition,message){if(!condition){throw new Error(\"StyleSheetRegistry: \".concat(message,\".\"))}}},SqZg:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"3GJH\")},T3Qk:function(module,exports,__webpack_require__){__webpack_require__(\"q0E7\");__webpack_require__(\"//qW\");__webpack_require__(\"spD4\");module.exports=__webpack_require__(\"ahhG\").f(\"iterator\")},TIpl:function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(\"lb/b\");var IE8_DOM_DEFINE=__webpack_require__(\"a0i3\");var anObject=__webpack_require__(\"bcPd\");var toPrimitive=__webpack_require__(\"ehg7\");var nativeDefineProperty=Object.defineProperty;exports.f=DESCRIPTORS?nativeDefineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(IE8_DOM_DEFINE)try{return nativeDefineProperty(O,P,Attributes)}catch(e){}if(\"get\"in Attributes||\"set\"in Attributes)throw TypeError(\"Accessors not supported\");if(\"value\"in Attributes)O[P]=Attributes.value;return O}},TJWN:function(module,exports,__webpack_require__){\"use strict\";var global=__webpack_require__(\"5T2Y\");var core=__webpack_require__(\"WEpk\");var dP=__webpack_require__(\"2faE\");var DESCRIPTORS=__webpack_require__(\"jmDH\");var SPECIES=__webpack_require__(\"UWiX\")(\"species\");module.exports=function(KEY){var C=typeof core[KEY]==\"function\"?core[KEY]:global[KEY];if(DESCRIPTORS&&C&&!C[SPECIES])dP.f(C,SPECIES,{configurable:true,get:function(){return this}})}},TRZx:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"JbBM\")},Tit0:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var create=__webpack_require__(\"SqZg\");var create_default=__webpack_require__.n(create);var set_prototype_of=__webpack_require__(\"TRZx\");var set_prototype_of_default=__webpack_require__.n(set_prototype_of);function _setPrototypeOf(o,p){_setPrototypeOf=set_prototype_of_default.a||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}__webpack_require__.d(__webpack_exports__,\"default\",function(){return _inherits});function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=create_default()(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}},TuGD:function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(\"UWiX\")(\"iterator\");var SAFE_CLOSING=false;try{var riter=[7][ITERATOR]();riter[\"return\"]=function(){SAFE_CLOSING=true};Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7];var iter=arr[ITERATOR]();iter.next=function(){return{done:safe=true}};arr[ITERATOR]=function(){return iter};exec(arr)}catch(e){}return safe}},\"U+KD\":function(module,exports,__webpack_require__){var has=__webpack_require__(\"B+OT\");var toObject=__webpack_require__(\"JB68\");var IE_PROTO=__webpack_require__(\"VVlx\")(\"IE_PROTO\");var ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){O=toObject(O);if(has(O,IE_PROTO))return O[IE_PROTO];if(typeof O.constructor==\"function\"&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectProto:null}},U4hp:function(module,exports,__webpack_require__){\"use strict\";var toPrimitive=__webpack_require__(\"ehg7\");var definePropertyModule=__webpack_require__(\"TIpl\");var createPropertyDescriptor=__webpack_require__(\"2Hee\");module.exports=function(object,key,value){var propertyKey=toPrimitive(key);if(propertyKey in object)definePropertyModule.f(object,propertyKey,createPropertyDescriptor(0,value));else object[propertyKey]=value}},U5J1:function(module,exports){module.exports=false},UO39:function(module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},UWiX:function(module,exports,__webpack_require__){var store=__webpack_require__(\"29s/\")(\"wks\");var uid=__webpack_require__(\"YqAc\");var Symbol=__webpack_require__(\"5T2Y\").Symbol;var USE_SYMBOL=typeof Symbol==\"function\";var $exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)(\"Symbol.\"+name))};$exports.store=store},UXZV:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"UbbE\")},UbbE:function(module,exports,__webpack_require__){__webpack_require__(\"o8NH\");module.exports=__webpack_require__(\"WEpk\").Object.assign},UoHT:function(module,exports,__webpack_require__){\"use strict\";__webpack_require__(\"rjtV\");\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */},Uv6z:function(module,exports){(function(self){\"use strict\";if(self.fetch){return}var support={searchParams:\"URLSearchParams\"in self,iterable:\"Symbol\"in self&&\"iterator\"in Symbol,blob:\"FileReader\"in self&&\"Blob\"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:\"FormData\"in self,arrayBuffer:\"ArrayBuffer\"in self};if(support.arrayBuffer){var viewClasses=[\"[object Int8Array]\",\"[object Uint8Array]\",\"[object Uint8ClampedArray]\",\"[object Int16Array]\",\"[object Uint16Array]\",\"[object Int32Array]\",\"[object Uint32Array]\",\"[object Float32Array]\",\"[object Float64Array]\"];var isDataView=function(obj){return obj&&DataView.prototype.isPrototypeOf(obj)};var isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1}}function normalizeName(name){if(typeof name!==\"string\"){name=String(name)}if(/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)){throw new TypeError(\"Invalid character in header field name\")}return name.toLowerCase()}function normalizeValue(value){if(typeof value!==\"string\"){value=String(value)}return value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:value===undefined,value:value}}};if(support.iterable){iterator[Symbol.iterator]=function(){return iterator}}return iterator}function Headers(headers){this.map={};if(headers instanceof Headers){headers.forEach(function(value,name){this.append(name,value)},this)}else if(Array.isArray(headers)){headers.forEach(function(header){this.append(header[0],header[1])},this)}else if(headers){Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}}Headers.prototype.append=function(name,value){name=normalizeName(name);value=normalizeValue(value);var oldValue=this.map[name];this.map[name]=oldValue?oldValue+\",\"+value:value};Headers.prototype[\"delete\"]=function(name){delete this.map[normalizeName(name)]};Headers.prototype.get=function(name){name=normalizeName(name);return this.has(name)?this.map[name]:null};Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))};Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value)};Headers.prototype.forEach=function(callback,thisArg){for(var name in this.map){if(this.map.hasOwnProperty(name)){callback.call(thisArg,this.map[name],name,this)}}};Headers.prototype.keys=function(){var items=[];this.forEach(function(value,name){items.push(name)});return iteratorFor(items)};Headers.prototype.values=function(){var items=[];this.forEach(function(value){items.push(value)});return iteratorFor(items)};Headers.prototype.entries=function(){var items=[];this.forEach(function(value,name){items.push([name,value])});return iteratorFor(items)};if(support.iterable){Headers.prototype[Symbol.iterator]=Headers.prototype.entries}function consumed(body){if(body.bodyUsed){return Promise.reject(new TypeError(\"Already read\"))}body.bodyUsed=true}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader;var promise=fileReaderReady(reader);reader.readAsArrayBuffer(blob);return promise}function readBlobAsText(blob){var reader=new FileReader;var promise=fileReaderReady(reader);reader.readAsText(blob);return promise}function readArrayBufferAsText(buf){var view=new Uint8Array(buf);var chars=new Array(view.length);for(var i=0;i<view.length;i++){chars[i]=String.fromCharCode(view[i])}return chars.join(\"\")}function bufferClone(buf){if(buf.slice){return buf.slice(0)}else{var view=new Uint8Array(buf.byteLength);view.set(new Uint8Array(buf));return view.buffer}}function Body(){this.bodyUsed=false;this._initBody=function(body){this._bodyInit=body;if(!body){this._bodyText=\"\"}else if(typeof body===\"string\"){this._bodyText=body}else if(support.blob&&Blob.prototype.isPrototypeOf(body)){this._bodyBlob=body}else if(support.formData&&FormData.prototype.isPrototypeOf(body)){this._bodyFormData=body}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this._bodyText=body.toString()}else if(support.arrayBuffer&&support.blob&&isDataView(body)){this._bodyArrayBuffer=bufferClone(body.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(support.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(body)||isArrayBufferView(body))){this._bodyArrayBuffer=bufferClone(body)}else{throw new Error(\"unsupported BodyInit type\")}if(!this.headers.get(\"content-type\")){if(typeof body===\"string\"){this.headers.set(\"content-type\",\"text/plain;charset=UTF-8\")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set(\"content-type\",this._bodyBlob.type)}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this.headers.set(\"content-type\",\"application/x-www-form-urlencoded;charset=UTF-8\")}}};if(support.blob){this.blob=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error(\"could not read FormData body as blob\")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return consumed(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(readBlobAsArrayBuffer)}}}this.text=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return readBlobAsText(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error(\"could not read FormData body as text\")}else{return Promise.resolve(this._bodyText)}};if(support.formData){this.formData=function(){return this.text().then(decode)}}this.json=function(){return this.text().then(JSON.parse)};return this}var methods=[\"DELETE\",\"GET\",\"HEAD\",\"OPTIONS\",\"POST\",\"PUT\"];function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(input instanceof Request){if(input.bodyUsed){throw new TypeError(\"Already read\")}this.url=input.url;this.credentials=input.credentials;if(!options.headers){this.headers=new Headers(input.headers)}this.method=input.method;this.mode=input.mode;if(!body&&input._bodyInit!=null){body=input._bodyInit;input.bodyUsed=true}}else{this.url=String(input)}this.credentials=options.credentials||this.credentials||\"omit\";if(options.headers||!this.headers){this.headers=new Headers(options.headers)}this.method=normalizeMethod(options.method||this.method||\"GET\");this.mode=options.mode||this.mode||null;this.referrer=null;if((this.method===\"GET\"||this.method===\"HEAD\")&&body){throw new TypeError(\"Body not allowed for GET or HEAD requests\")}this._initBody(body)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})};function decode(body){var form=new FormData;body.trim().split(\"&\").forEach(function(bytes){if(bytes){var split=bytes.split(\"=\");var name=split.shift().replace(/\\+/g,\" \");var value=split.join(\"=\").replace(/\\+/g,\" \");form.append(decodeURIComponent(name),decodeURIComponent(value))}});return form}function parseHeaders(rawHeaders){var headers=new Headers;var preProcessedHeaders=rawHeaders.replace(/\\r?\\n[\\t ]+/g,\" \");preProcessedHeaders.split(/\\r?\\n/).forEach(function(line){var parts=line.split(\":\");var key=parts.shift().trim();if(key){var value=parts.join(\":\").trim();headers.append(key,value)}});return headers}Body.call(Request.prototype);function Response(bodyInit,options){if(!options){options={}}this.type=\"default\";this.status=options.status===undefined?200:options.status;this.ok=this.status>=200&&this.status<300;this.statusText=\"statusText\"in options?options.statusText:\"OK\";this.headers=new Headers(options.headers);this.url=options.url||\"\";this._initBody(bodyInit)}Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})};Response.error=function(){var response=new Response(null,{status:0,statusText:\"\"});response.type=\"error\";return response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(redirectStatuses.indexOf(status)===-1){throw new RangeError(\"Invalid status code\")}return new Response(null,{status:status,headers:{location:url}})};self.Headers=Headers;self.Request=Request;self.Response=Response;self.fetch=function(input,init){return new Promise(function(resolve,reject){var request=new Request(input,init);var xhr=new XMLHttpRequest;xhr.onload=function(){var options={status:xhr.status,statusText:xhr.statusText,headers:parseHeaders(xhr.getAllResponseHeaders()||\"\")};options.url=\"responseURL\"in xhr?xhr.responseURL:options.headers.get(\"X-Request-URL\");var body=\"response\"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))};xhr.onerror=function(){reject(new TypeError(\"Network request failed\"))};xhr.ontimeout=function(){reject(new TypeError(\"Network request failed\"))};xhr.open(request.method,request.url,true);if(request.credentials===\"include\"){xhr.withCredentials=true}else if(request.credentials===\"omit\"){xhr.withCredentials=false}if(\"responseType\"in xhr&&support.blob){xhr.responseType=\"blob\"}request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)});xhr.send(typeof request._bodyInit===\"undefined\"?null:request._bodyInit)})};self.fetch.polyfill=true})(typeof self!==\"undefined\"?self:this)},\"V+O7\":function(module,exports,__webpack_require__){__webpack_require__(\"aPfg\")(\"Set\")},V7Et:function(module,exports,__webpack_require__){var ctx=__webpack_require__(\"2GTP\");var IObject=__webpack_require__(\"M1xp\");var toObject=__webpack_require__(\"JB68\");var toLength=__webpack_require__(\"tEej\");var asc=__webpack_require__(\"v6xn\");module.exports=function(TYPE,$create){var IS_MAP=TYPE==1;var IS_FILTER=TYPE==2;var IS_SOME=TYPE==3;var IS_EVERY=TYPE==4;var IS_FIND_INDEX=TYPE==6;var NO_HOLES=TYPE==5||IS_FIND_INDEX;var create=$create||asc;return function($this,callbackfn,that){var O=toObject($this);var self=IObject(O);var f=ctx(callbackfn,that,3);var length=toLength(self.length);var index=0;var result=IS_MAP?create($this,length):IS_FILTER?create($this,0):undefined;var val,res;for(;length>index;index++)if(NO_HOLES||index in self){val=self[index];res=f(val,index,O);if(TYPE){if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return true;case 5:return val;case 6:return index;case 2:result.push(val)}else if(IS_EVERY)return false}}return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result}}},VDXt:function(module,exports,__webpack_require__){\"use strict\";var _interopRequireDefault=__webpack_require__(\"KI45\");var _stringify=_interopRequireDefault(__webpack_require__(\"9Jkg\"));var _keys=_interopRequireDefault(__webpack_require__(\"pLtp\"));var _assign=_interopRequireDefault(__webpack_require__(\"UXZV\"));var _now=_interopRequireDefault(__webpack_require__(\"Cg2A\"));var _classCallCheck2=_interopRequireDefault(__webpack_require__(\"/HRN\"));var _createClass2=_interopRequireDefault(__webpack_require__(\"WaGi\"));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(\"ZDA2\"));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(\"/+P4\"));var _inherits2=_interopRequireDefault(__webpack_require__(\"N9n2\"));var _getOwnPropertySymbols=_interopRequireDefault(__webpack_require__(\"4mXO\"));var __rest=void 0&&(void 0).__rest||function(s,e){var t={};for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p]}if(s!=null&&typeof _getOwnPropertySymbols.default===\"function\")for(var i=0,p=(0,_getOwnPropertySymbols.default)(s);i<p.length;i++){if(e.indexOf(p[i])<0)t[p[i]]=s[p[i]]}return t};var __importStar=void 0&&(void 0).__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod){if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k]}result[\"default\"]=mod;return result};var __importDefault=void 0&&(void 0).__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,\"__esModule\",{value:true});var react_1=__importStar(__webpack_require__(\"q1tI\"));var prop_types_1=__importDefault(__webpack_require__(\"17x9\"));var utils_1=__webpack_require__(\"Keko\");var htmlescape_1=__webpack_require__(\"AXZJ\");var server_1=__importDefault(__webpack_require__(\"DTay\"));var constants_1=__webpack_require__(\"dDGi\");var Document=function(_react_1$Component){(0,_inherits2.default)(Document,_react_1$Component);function Document(){(0,_classCallCheck2.default)(this,Document);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Document).apply(this,arguments))}(0,_createClass2.default)(Document,[{key:\"getChildContext\",value:function getChildContext(){return{_documentProps:this.props,_devOnlyInvalidateCacheQueryString:false?undefined:\"\"}}},{key:\"render\",value:function render(){return react_1.default.createElement(Html,null,react_1.default.createElement(Head,null),react_1.default.createElement(\"body\",null,react_1.default.createElement(Main,null),react_1.default.createElement(NextScript,null)))}}],[{key:\"getInitialProps\",value:function getInitialProps(_ref){var renderPage=_ref.renderPage;var _renderPage=renderPage(),html=_renderPage.html,head=_renderPage.head;var styles=server_1.default();return{html:html,head:head,styles:styles}}}]);return Document}(react_1.Component);Document.childContextTypes={_documentProps:prop_types_1.default.any,_devOnlyInvalidateCacheQueryString:prop_types_1.default.string};exports.default=Document;var Html=function(_react_1$Component2){(0,_inherits2.default)(Html,_react_1$Component2);function Html(){(0,_classCallCheck2.default)(this,Html);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Html).apply(this,arguments))}(0,_createClass2.default)(Html,[{key:\"render\",value:function render(){var amphtml=this.context._documentProps.amphtml;var _a=this.props,children=_a.children,props=__rest(_a,[\"children\"]);return react_1.default.createElement(\"html\",(0,_assign.default)({},props,{amp:amphtml?\"\":null}),children)}}]);return Html}(react_1.Component);Html.contextTypes={_documentProps:prop_types_1.default.any};Html.propTypes={children:prop_types_1.default.node.isRequired};exports.Html=Html;var Head=function(_react_1$Component3){(0,_inherits2.default)(Head,_react_1$Component3);function Head(){(0,_classCallCheck2.default)(this,Head);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Head).apply(this,arguments))}(0,_createClass2.default)(Head,[{key:\"getCssLinks\",value:function getCssLinks(){var _this=this;var _this$context$_docume=this.context._documentProps,assetPrefix=_this$context$_docume.assetPrefix,files=_this$context$_docume.files;if(!files||files.length===0){return null}return files.map(function(file){if(!/\\.css$/.exec(file)){return null}return react_1.default.createElement(\"link\",{key:file,nonce:_this.props.nonce,rel:\"stylesheet\",href:\"\".concat(assetPrefix,\"/_next/\").concat(file),crossOrigin:_this.props.crossOrigin||undefined})})}},{key:\"getPreloadDynamicChunks\",value:function getPreloadDynamicChunks(){var _this2=this;var _this$context$_docume2=this.context._documentProps,dynamicImports=_this$context$_docume2.dynamicImports,assetPrefix=_this$context$_docume2.assetPrefix;var _devOnlyInvalidateCacheQueryString=this.context._devOnlyInvalidateCacheQueryString;return dynamicImports.map(function(bundle){return react_1.default.createElement(\"link\",{rel:\"preload\",key:bundle.file,href:\"\".concat(assetPrefix,\"/_next/\").concat(bundle.file).concat(_devOnlyInvalidateCacheQueryString),as:\"script\",nonce:_this2.props.nonce,crossOrigin:_this2.props.crossOrigin||undefined})})}},{key:\"getPreloadMainLinks\",value:function getPreloadMainLinks(){var _this3=this;var _this$context$_docume3=this.context._documentProps,assetPrefix=_this$context$_docume3.assetPrefix,files=_this$context$_docume3.files;if(!files||files.length===0){return null}var _devOnlyInvalidateCacheQueryString=this.context._devOnlyInvalidateCacheQueryString;return files.map(function(file){if(!/\\.js$/.exec(file)){return null}return react_1.default.createElement(\"link\",{key:file,nonce:_this3.props.nonce,rel:\"preload\",href:\"\".concat(assetPrefix,\"/_next/\").concat(file).concat(_devOnlyInvalidateCacheQueryString),as:\"script\",crossOrigin:_this3.props.crossOrigin||undefined})})}},{key:\"render\",value:function render(){var _this$context$_docume4=this.context._documentProps,ampEnabled=_this$context$_docume4.ampEnabled,styles=_this$context$_docume4.styles,amphtml=_this$context$_docume4.amphtml,hasAmp=_this$context$_docume4.hasAmp,ampPath=_this$context$_docume4.ampPath,assetPrefix=_this$context$_docume4.assetPrefix,__NEXT_DATA__=_this$context$_docume4.__NEXT_DATA__;var _devOnlyInvalidateCacheQueryString=this.context._devOnlyInvalidateCacheQueryString;var page=__NEXT_DATA__.page,buildId=__NEXT_DATA__.buildId;var head=this.context._documentProps.head;var children=this.props.children;if(false){}head=!amphtml?head:react_1.default.Children.map(head,function(child){if(!child)return child;var type=child.type,props=child.props;var badProp;if(type===\"meta\"&&props.name===\"viewport\"){badProp='name=\"viewport\"'}else if(type===\"link\"&&props.rel===\"canonical\"){badProp='rel=\"canonical\"'}else if(type===\"script\"){badProp=\"<script\";(0,_keys.default)(props).forEach(function(prop){badProp+=\" \".concat(prop,'=\"').concat(props[prop],'\"')});badProp+=\"/>\"}if(badProp){console.warn('Found conflicting amp tag \"'.concat(child.type,'\" with conflicting prop ').concat(badProp,\". https://err.sh/next.js/conflicting-amp-tag\"));return null}return child});return react_1.default.createElement(\"head\",(0,_assign.default)({},this.props),children,head,amphtml&&react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(\"meta\",{name:\"viewport\",content:\"width=device-width,minimum-scale=1,initial-scale=1\"}),react_1.default.createElement(\"link\",{rel:\"canonical\",href:utils_1.cleanAmpPath(page)}),react_1.default.createElement(\"link\",{rel:\"preload\",as:\"script\",href:\"https://cdn.ampproject.org/v0.js\"}),styles&&react_1.default.createElement(\"style\",{\"amp-custom\":\"\",dangerouslySetInnerHTML:{__html:styles.map(function(style){return style.props.dangerouslySetInnerHTML.__html}).join(\"\").replace(/\\/\\*# sourceMappingURL=.*\\*\\//g,\"\").replace(/\\/\\*@ sourceURL=.*?\\*\\//g,\"\")}}),react_1.default.createElement(\"style\",{\"amp-boilerplate\":\"\",dangerouslySetInnerHTML:{__html:\"body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}\"}}),react_1.default.createElement(\"noscript\",null,react_1.default.createElement(\"style\",{\"amp-boilerplate\":\"\",dangerouslySetInnerHTML:{__html:\"body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}\"}})),react_1.default.createElement(\"script\",{async:true,src:\"https://cdn.ampproject.org/v0.js\"})),!amphtml&&react_1.default.createElement(react_1.default.Fragment,null,ampEnabled&&hasAmp&&react_1.default.createElement(\"link\",{rel:\"amphtml\",href:ampPath?ampPath:\"\".concat(page,\"?amp=1\")}),page!==\"/_error\"&&react_1.default.createElement(\"link\",{rel:\"preload\",href:\"\".concat(assetPrefix,\"/_next/static/\").concat(buildId,\"/pages\").concat(getPagePathname(page)).concat(_devOnlyInvalidateCacheQueryString),as:\"script\",nonce:this.props.nonce,crossOrigin:this.props.crossOrigin||undefined}),react_1.default.createElement(\"link\",{rel:\"preload\",href:\"\".concat(assetPrefix,\"/_next/static/\").concat(buildId,\"/pages/_app.js\").concat(_devOnlyInvalidateCacheQueryString),as:\"script\",nonce:this.props.nonce,crossOrigin:this.props.crossOrigin||undefined}),this.getPreloadDynamicChunks(),this.getPreloadMainLinks(),this.getCssLinks(),styles||null))}}]);return Head}(react_1.Component);Head.contextTypes={_documentProps:prop_types_1.default.any,_devOnlyInvalidateCacheQueryString:prop_types_1.default.string};Head.propTypes={nonce:prop_types_1.default.string,crossOrigin:prop_types_1.default.string};exports.Head=Head;var Main=function(_react_1$Component4){(0,_inherits2.default)(Main,_react_1$Component4);function Main(){(0,_classCallCheck2.default)(this,Main);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Main).apply(this,arguments))}(0,_createClass2.default)(Main,[{key:\"render\",value:function render(){var html=this.context._documentProps.html;return react_1.default.createElement(\"div\",{id:\"__next\",dangerouslySetInnerHTML:{__html:html}})}}]);return Main}(react_1.Component);Main.contextTypes={_documentProps:prop_types_1.default.any,_devOnlyInvalidateCacheQueryString:prop_types_1.default.string};exports.Main=Main;var NextScript=function(_react_1$Component5){(0,_inherits2.default)(NextScript,_react_1$Component5);function NextScript(){(0,_classCallCheck2.default)(this,NextScript);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(NextScript).apply(this,arguments))}(0,_createClass2.default)(NextScript,[{key:\"getDynamicChunks\",value:function getDynamicChunks(){var _this4=this;var _this$context$_docume5=this.context._documentProps,dynamicImports=_this$context$_docume5.dynamicImports,assetPrefix=_this$context$_docume5.assetPrefix;var _devOnlyInvalidateCacheQueryString=this.context._devOnlyInvalidateCacheQueryString;return dynamicImports.map(function(bundle){return react_1.default.createElement(\"script\",{async:true,key:bundle.file,src:\"\".concat(assetPrefix,\"/_next/\").concat(bundle.file).concat(_devOnlyInvalidateCacheQueryString),nonce:_this4.props.nonce,crossOrigin:_this4.props.crossOrigin||undefined})})}},{key:\"getScripts\",value:function getScripts(){var _this5=this;var _this$context$_docume6=this.context._documentProps,assetPrefix=_this$context$_docume6.assetPrefix,files=_this$context$_docume6.files;if(!files||files.length===0){return null}var _devOnlyInvalidateCacheQueryString=this.context._devOnlyInvalidateCacheQueryString;return files.map(function(file){if(!/\\.js$/.exec(file)){return null}return react_1.default.createElement(\"script\",{key:file,src:\"\".concat(assetPrefix,\"/_next/\").concat(file).concat(_devOnlyInvalidateCacheQueryString),nonce:_this5.props.nonce,async:true,crossOrigin:_this5.props.crossOrigin||undefined})})}},{key:\"render\",value:function render(){var _this6=this;var _this$context$_docume7=this.context._documentProps,staticMarkup=_this$context$_docume7.staticMarkup,assetPrefix=_this$context$_docume7.assetPrefix,amphtml=_this$context$_docume7.amphtml,devFiles=_this$context$_docume7.devFiles,__NEXT_DATA__=_this$context$_docume7.__NEXT_DATA__;var _devOnlyInvalidateCacheQueryString=this.context._devOnlyInvalidateCacheQueryString;if(amphtml){if(true){return null}var _devFiles=[constants_1.CLIENT_STATIC_FILES_RUNTIME_AMP,constants_1.CLIENT_STATIC_FILES_RUNTIME_WEBPACK];return react_1.default.createElement(react_1.default.Fragment,null,staticMarkup?null:react_1.default.createElement(\"script\",{id:\"__NEXT_DATA__\",type:\"application/json\",nonce:this.props.nonce,crossOrigin:this.props.crossOrigin||undefined,dangerouslySetInnerHTML:{__html:NextScript.getInlineScriptSource(this.context._documentProps)},\"data-amp-development-mode-only\":true}),_devFiles?_devFiles.map(function(file){return react_1.default.createElement(\"script\",{key:file,src:\"\".concat(assetPrefix,\"/_next/\").concat(file).concat(_devOnlyInvalidateCacheQueryString),nonce:_this6.props.nonce,crossOrigin:_this6.props.crossOrigin||undefined,\"data-amp-development-mode-only\":true})}):null)}var page=__NEXT_DATA__.page,buildId=__NEXT_DATA__.buildId;if(false){}return react_1.default.createElement(react_1.default.Fragment,null,devFiles?devFiles.map(function(file){return react_1.default.createElement(\"script\",{key:file,src:\"\".concat(assetPrefix,\"/_next/\").concat(file).concat(_devOnlyInvalidateCacheQueryString),nonce:_this6.props.nonce,crossOrigin:_this6.props.crossOrigin||undefined})}):null,staticMarkup?null:react_1.default.createElement(\"script\",{id:\"__NEXT_DATA__\",type:\"application/json\",nonce:this.props.nonce,crossOrigin:this.props.crossOrigin||undefined,dangerouslySetInnerHTML:{__html:NextScript.getInlineScriptSource(this.context._documentProps)}}),page!==\"/_error\"&&react_1.default.createElement(\"script\",{async:true,id:\"__NEXT_PAGE__\".concat(page),src:\"\".concat(assetPrefix,\"/_next/static/\").concat(buildId,\"/pages\").concat(getPagePathname(page)).concat(_devOnlyInvalidateCacheQueryString),nonce:this.props.nonce,crossOrigin:this.props.crossOrigin||undefined}),react_1.default.createElement(\"script\",{async:true,id:\"__NEXT_PAGE__/_app\",src:\"\".concat(assetPrefix,\"/_next/static/\").concat(buildId,\"/pages/_app.js\").concat(_devOnlyInvalidateCacheQueryString),nonce:this.props.nonce,crossOrigin:this.props.crossOrigin||undefined}),staticMarkup?null:this.getDynamicChunks(),staticMarkup?null:this.getScripts())}}],[{key:\"getInlineScriptSource\",value:function getInlineScriptSource(documentProps){var __NEXT_DATA__=documentProps.__NEXT_DATA__;try{var data=(0,_stringify.default)(__NEXT_DATA__);return htmlescape_1.htmlEscapeJsonString(data)}catch(err){if(err.message.indexOf(\"circular structure\")){throw new Error('Circular structure in \"getInitialProps\" result of page \"'.concat(__NEXT_DATA__.page,'\". https://err.sh/zeit/next.js/circular-structure'))}throw err}}}]);return NextScript}(react_1.Component);NextScript.contextTypes={_documentProps:prop_types_1.default.any,_devOnlyInvalidateCacheQueryString:prop_types_1.default.string};NextScript.propTypes={nonce:prop_types_1.default.string,crossOrigin:prop_types_1.default.string};exports.NextScript=NextScript;function getPagePathname(page){if(page===\"/\"){return\"/index.js\"}return\"\".concat(page,\".js\")}},VJsP:function(module,exports,__webpack_require__){\"use strict\";var ctx=__webpack_require__(\"2GTP\");var $export=__webpack_require__(\"Y7ZC\");var toObject=__webpack_require__(\"JB68\");var call=__webpack_require__(\"sNwI\");var isArrayIter=__webpack_require__(\"NwJ3\");var toLength=__webpack_require__(\"tEej\");var createProperty=__webpack_require__(\"IP1Z\");var getIterFn=__webpack_require__(\"fNZA\");$export($export.S+$export.F*!__webpack_require__(\"TuGD\")(function(iter){Array.from(iter)}),\"Array\",{from:function from(arrayLike){var O=toObject(arrayLike);var C=typeof this==\"function\"?this:Array;var aLen=arguments.length;var mapfn=aLen>1?arguments[1]:undefined;var mapping=mapfn!==undefined;var index=0;var iterFn=getIterFn(O);var length,result,step,iterator;if(mapping)mapfn=ctx(mapfn,aLen>2?arguments[2]:undefined,2);if(iterFn!=undefined&&!(C==Array&&isArrayIter(iterFn))){for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++){createProperty(result,index,mapping?call(iterator,mapfn,[step.value,index],true):step.value)}}else{length=toLength(O.length);for(result=new C(length);length>index;index++){createProperty(result,index,mapping?mapfn(O[index],index):O[index])}}result.length=index;return result}})},VKFn:function(module,exports,__webpack_require__){__webpack_require__(\"bBy9\");__webpack_require__(\"FlQf\");module.exports=__webpack_require__(\"ldVq\")},VVlx:function(module,exports,__webpack_require__){var shared=__webpack_require__(\"29s/\")(\"keys\");var uid=__webpack_require__(\"YqAc\");module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},ViYL:function(module,exports,__webpack_require__){\"use strict\";var util=__webpack_require__(\"jK02\"),HttpParser=__webpack_require__(\"ziip\"),Base=__webpack_require__(\"Wdmt\"),Draft75=__webpack_require__(\"O1VW\"),Draft76=__webpack_require__(\"HJXK\"),Hybi=__webpack_require__(\"dt2+\");var Server=function(options){Base.call(this,null,null,options);this._http=new HttpParser(\"request\")};util.inherits(Server,Base);var instance={EVENTS:[\"open\",\"message\",\"error\",\"close\"],_bindEventListeners:function(){this.messages.on(\"error\",function(){});this.on(\"error\",function(){})},parse:function(chunk){if(this._delegate)return this._delegate.parse(chunk);this._http.parse(chunk);if(!this._http.isComplete())return;this.method=this._http.method;this.url=this._http.url;this.headers=this._http.headers;this.body=this._http.body;var self=this;this._delegate=Server.http(this,this._options);this._delegate.messages=this.messages;this._delegate.io=this.io;this._open();this.EVENTS.forEach(function(event){this._delegate.on(event,function(e){self.emit(event,e)})},this);this.protocol=this._delegate.protocol;this.version=this._delegate.version;this.parse(this._http.body);this.emit(\"connect\",new Base.ConnectEvent)},_open:function(){this.__queue.forEach(function(msg){this._delegate[msg[0]].apply(this._delegate,msg[1])},this);this.__queue=[]}};[\"addExtension\",\"setHeader\",\"start\",\"frame\",\"text\",\"binary\",\"ping\",\"close\"].forEach(function(method){instance[method]=function(){if(this._delegate){return this._delegate[method].apply(this._delegate,arguments)}else{this.__queue.push([method,arguments]);return true}}});for(var key in instance)Server.prototype[key]=instance[key];Server.isSecureRequest=function(request){if(request.connection&&request.connection.authorized!==undefined)return true;if(request.socket&&request.socket.secure)return true;var headers=request.headers;if(!headers)return false;if(headers[\"https\"]===\"on\")return true;if(headers[\"x-forwarded-ssl\"]===\"on\")return true;if(headers[\"x-forwarded-scheme\"]===\"https\")return true;if(headers[\"x-forwarded-proto\"]===\"https\")return true;return false};Server.determineUrl=function(request){var scheme=this.isSecureRequest(request)?\"wss:\":\"ws:\";return scheme+\"//\"+request.headers.host+request.url};Server.http=function(request,options){options=options||{};if(options.requireMasking===undefined)options.requireMasking=true;var headers=request.headers,url=this.determineUrl(request);if(headers[\"sec-websocket-version\"])return new Hybi(request,url,options);else if(headers[\"sec-websocket-key1\"])return new Draft76(request,url,options);else return new Draft75(request,url,options)};module.exports=Server},VmYk:function(module,exports){module.exports=require(\"_stream_writable\")},VxiW:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",function(){return database});__webpack_require__.d(__webpack_exports__,\"b\",function(){return storageRoot});var firebase_app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"Wcq6\");var firebase_app__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(firebase_app__WEBPACK_IMPORTED_MODULE_0__);var firebase_database__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"UoHT\");var firebase_database__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(firebase_database__WEBPACK_IMPORTED_MODULE_1__);var firebase_auth__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"CMMD\");var firebase_auth__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(firebase_auth__WEBPACK_IMPORTED_MODULE_2__);var firebase_storage__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"hvlt\");var firebase_storage__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(firebase_storage__WEBPACK_IMPORTED_MODULE_3__);var config={apiKey:\"AIzaSyB9Mw9rK9wQQS9S-noqnauEcMzYaGLQQPs\",authDomain:\"bettergram-51769.firebaseapp.com\",databaseURL:\"https://bettergram-51769.firebaseio.com\",projectId:\"bettergram-51769\",storageBucket:\"bettergram-51769.appspot.com\",messagingSenderId:\"434119701235\"};if(!firebase_app__WEBPACK_IMPORTED_MODULE_0___default.a.apps.length){firebase_app__WEBPACK_IMPORTED_MODULE_0___default.a.initializeApp(config)}var database=firebase_app__WEBPACK_IMPORTED_MODULE_0___default.a.database();var auth=firebase_app__WEBPACK_IMPORTED_MODULE_0___default.a.auth();var googleAuthProvider=new firebase_app__WEBPACK_IMPORTED_MODULE_0___default.a.auth.GoogleAuthProvider;var storageRoot=firebase_app__WEBPACK_IMPORTED_MODULE_0___default.a.storage().ref();var storage=firebase_app__WEBPACK_IMPORTED_MODULE_0___default.a.storage();var _unused_webpack_default_export=firebase_app__WEBPACK_IMPORTED_MODULE_0___default.a},W070:function(module,exports,__webpack_require__){var toIObject=__webpack_require__(\"NsO/\");var toLength=__webpack_require__(\"tEej\");var toAbsoluteIndex=__webpack_require__(\"D8kY\");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIObject($this);var length=toLength(O.length);var index=toAbsoluteIndex(fromIndex,length);var value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++)if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0}return!IS_INCLUDES&&-1}}},W8Q5:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});function getDynamicImportBundles(manifest,moduleIds){return moduleIds.reduce((bundles,moduleId)=>{if(typeof manifest[moduleId]===\"undefined\"){return bundles}manifest[moduleId].map(item=>bundles.add(item));return bundles},new Set)}exports.getDynamicImportBundles=getDynamicImportBundles},WBJg:function(module,exports,__webpack_require__){__webpack_require__(\"pSMy\")({target:\"String\",proto:true},{repeat:__webpack_require__(\"nsc/\")})},WEpk:function(module,exports){var core=module.exports={version:\"2.6.5\"};if(typeof __e==\"number\")__e=core},WaGi:function(module,exports,__webpack_require__){var _Object$defineProperty=__webpack_require__(\"hfKm\");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;_Object$defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}module.exports=_createClass},WbBG:function(module,exports,__webpack_require__){\"use strict\";var ReactPropTypesSecret=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\";module.exports=ReactPropTypesSecret},Wcq6:function(module,exports,__webpack_require__){\"use strict\";function _interopDefault(ex){return ex&&typeof ex===\"object\"&&\"default\"in ex?ex[\"default\"]:ex}__webpack_require__(\"g/sU\");var firebase=_interopDefault(__webpack_require__(\"eq5/\"));\n/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */module.exports=firebase},Wdmt:function(module,exports,__webpack_require__){\"use strict\";var Emitter=__webpack_require__(\"/0p4\").EventEmitter,util=__webpack_require__(\"jK02\"),streams=__webpack_require__(\"u4G8\"),Headers=__webpack_require__(\"q+85\"),Reader=__webpack_require__(\"2nJ2\");var Base=function(request,url,options){Emitter.call(this);Base.validateOptions(options||{},[\"maxLength\",\"masking\",\"requireMasking\",\"protocols\"]);this._request=request;this._reader=new Reader;this._options=options||{};this._maxLength=this._options.maxLength||this.MAX_LENGTH;this._headers=new Headers;this.__queue=[];this.readyState=0;this.url=url;this.io=new streams.IO(this);this.messages=new streams.Messages(this);this._bindEventListeners()};util.inherits(Base,Emitter);Base.validateOptions=function(options,validKeys){for(var key in options){if(validKeys.indexOf(key)<0)throw new Error(\"Unrecognized option: \"+key)}};var instance={MAX_LENGTH:67108863,STATES:[\"connecting\",\"open\",\"closing\",\"closed\"],_bindEventListeners:function(){var self=this;this.messages.on(\"error\",function(){});this.on(\"message\",function(event){var messages=self.messages;if(messages.readable)messages.emit(\"data\",event.data)});this.on(\"error\",function(error){var messages=self.messages;if(messages.readable)messages.emit(\"error\",error)});this.on(\"close\",function(){var messages=self.messages;if(!messages.readable)return;messages.readable=messages.writable=false;messages.emit(\"end\")})},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(extension){return false},setHeader:function(name,value){if(this.readyState>0)return false;this._headers.set(name,value);return true},start:function(){if(this.readyState!==0)return false;var response=this._handshakeResponse();if(!response)return false;this._write(response);if(this._stage!==-1)this._open();return true},text:function(message){return this.frame(message)},binary:function(message){return false},ping:function(){return false},pong:function(){return false},close:function(reason,code){if(this.readyState!==1)return false;this.readyState=3;this.emit(\"close\",new Base.CloseEvent(null,null));return true},_open:function(){this.readyState=1;this.__queue.forEach(function(args){this.frame.apply(this,args)},this);this.__queue=[];this.emit(\"open\",new Base.OpenEvent)},_queue:function(message){this.__queue.push(message);return true},_write:function(chunk){var io=this.io;if(io.readable)io.emit(\"data\",chunk)}};for(var key in instance)Base.prototype[key]=instance[key];Base.ConnectEvent=function(){};Base.OpenEvent=function(){};Base.CloseEvent=function(code,reason){this.code=code;this.reason=reason};Base.MessageEvent=function(data){this.data=data};Base.PingEvent=function(data){this.data=data};Base.PongEvent=function(data){this.data=data};module.exports=Base},Wu5q:function(module,exports,__webpack_require__){\"use strict\";var dP=__webpack_require__(\"2faE\").f;var create=__webpack_require__(\"oVml\");var redefineAll=__webpack_require__(\"XJU/\");var ctx=__webpack_require__(\"2GTP\");var anInstance=__webpack_require__(\"EXMj\");var forOf=__webpack_require__(\"oioR\");var $iterDefine=__webpack_require__(\"MPFp\");var step=__webpack_require__(\"UO39\");var setSpecies=__webpack_require__(\"TJWN\");var DESCRIPTORS=__webpack_require__(\"jmDH\");var fastKey=__webpack_require__(\"6/1s\").fastKey;var validate=__webpack_require__(\"n3ko\");var SIZE=DESCRIPTORS?\"_s\":\"size\";var getEntry=function(that,key){var index=fastKey(key);var entry;if(index!==\"F\")return that._i[index];for(entry=that._f;entry;entry=entry.n){if(entry.k==key)return entry}};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,\"_i\");that._t=NAME;that._i=create(null);that._f=undefined;that._l=undefined;that[SIZE]=0;if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that)});redefineAll(C.prototype,{clear:function clear(){for(var that=validate(this,NAME),data=that._i,entry=that._f;entry;entry=entry.n){entry.r=true;if(entry.p)entry.p=entry.p.n=undefined;delete data[entry.i]}that._f=that._l=undefined;that[SIZE]=0},delete:function(key){var that=validate(this,NAME);var entry=getEntry(that,key);if(entry){var next=entry.n;var prev=entry.p;delete that._i[entry.i];entry.r=true;if(prev)prev.n=next;if(next)next.p=prev;if(that._f==entry)that._f=next;if(that._l==entry)that._l=prev;that[SIZE]--}return!!entry},forEach:function forEach(callbackfn){validate(this,NAME);var f=ctx(callbackfn,arguments.length>1?arguments[1]:undefined,3);var entry;while(entry=entry?entry.n:this._f){f(entry.v,entry.k,this);while(entry&&entry.r)entry=entry.p}},has:function has(key){return!!getEntry(validate(this,NAME),key)}});if(DESCRIPTORS)dP(C.prototype,\"size\",{get:function(){return validate(this,NAME)[SIZE]}});return C},def:function(that,key,value){var entry=getEntry(that,key);var prev,index;if(entry){entry.v=value}else{that._l=entry={i:index=fastKey(key,true),k:key,v:value,p:prev=that._l,n:undefined,r:false};if(!that._f)that._f=entry;if(prev)prev.n=entry;that[SIZE]++;if(index!==\"F\")that._i[index]=entry}return that},getEntry:getEntry,setStrong:function(C,NAME,IS_MAP){$iterDefine(C,NAME,function(iterated,kind){this._t=validate(iterated,NAME);this._k=kind;this._l=undefined},function(){var that=this;var kind=that._k;var entry=that._l;while(entry&&entry.r)entry=entry.p;if(!that._t||!(that._l=entry=entry?entry.n:that._t._f)){that._t=undefined;return step(1)}if(kind==\"keys\")return step(0,entry.k);if(kind==\"values\")return step(0,entry.v);return step(0,[entry.k,entry.v])},IS_MAP?\"entries\":\"values\",!IS_MAP,true);setSpecies(NAME)}}},XCog:function(module,exports,__webpack_require__){var validateSetPrototypeOfArguments=__webpack_require__(\"0Bu/\");module.exports=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var correctSetter=false;var test={};var setter;try{setter=Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\").set;setter.call(test,[]);correctSetter=test instanceof Array}catch(e){}return function setPrototypeOf(O,proto){validateSetPrototypeOfArguments(O,proto);if(correctSetter)setter.call(O,proto);else O.__proto__=proto;return O}}():undefined)},\"XJU/\":function(module,exports,__webpack_require__){var hide=__webpack_require__(\"NegM\");module.exports=function(target,src,safe){for(var key in src){if(safe&&target[key])target[key]=src[key];else hide(target,key,src[key])}return target}},XVgq:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"2Nb0\")},XXOK:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"Rp86\")},Xsdi:function(module,exports,__webpack_require__){\"use strict\";var Message=function(){this.rsv1=false;this.rsv2=false;this.rsv3=false;this.opcode=null;this.length=0;this._chunks=[]};var instance={read:function(){if(this.data)return this.data;this.data=new Buffer(this.length);var offset=0;for(var i=0,n=this._chunks.length;i<n;i++){this._chunks[i].copy(this.data,offset);offset+=this._chunks[i].length}return this.data},pushFrame:function(frame){this.rsv1=this.rsv1||frame.rsv1;this.rsv2=this.rsv2||frame.rsv2;this.rsv3=this.rsv3||frame.rsv3;if(this.opcode===null)this.opcode=frame.opcode;this._chunks.push(frame.payload);this.length+=frame.length}};for(var key in instance)Message.prototype[key]=instance[key];module.exports=Message},Y4gF:function(module,exports,__webpack_require__){\"use strict\";\n/*!\n * etag\n * Copyright(c) 2014-2016 Douglas Christopher Wilson\n * MIT Licensed\n */module.exports=etag;var crypto=__webpack_require__(\"PJMN\");var Stats=__webpack_require__(\"mw/K\").Stats;var toString=Object.prototype.toString;function entitytag(entity){if(entity.length===0){return'\"0-2jmj7l5rSw0yVb/vlWAYkK/YBwk\"'}var hash=crypto.createHash(\"sha1\").update(entity,\"utf8\").digest(\"base64\").substring(0,27);var len=typeof entity===\"string\"?Buffer.byteLength(entity,\"utf8\"):entity.length;return'\"'+len.toString(16)+\"-\"+hash+'\"'}function etag(entity,options){if(entity==null){throw new TypeError(\"argument entity is required\")}var isStats=isstats(entity);var weak=options&&typeof options.weak===\"boolean\"?options.weak:isStats;if(!isStats&&typeof entity!==\"string\"&&!Buffer.isBuffer(entity)){throw new TypeError(\"argument entity must be string, Buffer, or fs.Stats\")}var tag=isStats?stattag(entity):entitytag(entity);return weak?\"W/\"+tag:tag}function isstats(obj){if(typeof Stats===\"function\"&&obj instanceof Stats){return true}return obj&&typeof obj===\"object\"&&\"ctime\"in obj&&toString.call(obj.ctime)===\"[object Date]\"&&\"mtime\"in obj&&toString.call(obj.mtime)===\"[object Date]\"&&\"ino\"in obj&&typeof obj.ino===\"number\"&&\"size\"in obj&&typeof obj.size===\"number\"}function stattag(stat){var mtime=stat.mtime.getTime().toString(16);var size=stat.size.toString(16);return'\"'+size+\"-\"+mtime+'\"'}},Y7ZC:function(module,exports,__webpack_require__){var global=__webpack_require__(\"5T2Y\");var core=__webpack_require__(\"WEpk\");var ctx=__webpack_require__(\"2GTP\");var hide=__webpack_require__(\"NegM\");var has=__webpack_require__(\"B+OT\");var PROTOTYPE=\"prototype\";var $export=function(type,name,source){var IS_FORCED=type&$export.F;var IS_GLOBAL=type&$export.G;var IS_STATIC=type&$export.S;var IS_PROTO=type&$export.P;var IS_BIND=type&$export.B;var IS_WRAP=type&$export.W;var exports=IS_GLOBAL?core:core[name]||(core[name]={});var expProto=exports[PROTOTYPE];var target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{})[PROTOTYPE];var key,own,out;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&target[key]!==undefined;if(own&&has(exports,key))continue;out=own?target[key]:source[key];exports[key]=IS_GLOBAL&&typeof target[key]!=\"function\"?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(a,b,c){if(this instanceof C){switch(arguments.length){case 0:return new C;case 1:return new C(a);case 2:return new C(a,b)}return new C(a,b,c)}return C.apply(this,arguments)};F[PROTOTYPE]=C[PROTOTYPE];return F}(out):IS_PROTO&&typeof out==\"function\"?ctx(Function.call,out):out;if(IS_PROTO){(exports.virtual||(exports.virtual={}))[key]=out;if(type&$export.R&&expProto&&!expProto[key])hide(expProto,key,out)}}};$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;$export.U=64;$export.R=128;module.exports=$export},YCU0:function(module,exports,__webpack_require__){\"use strict\";var classof=__webpack_require__(\"ZrEc\");var TO_STRING_TAG=__webpack_require__(\"aXXJ\")(\"toStringTag\");var test={};test[TO_STRING_TAG]=\"z\";module.exports=String(test)!==\"[object z]\"?function toString(){return\"[object \"+classof(this)+\"]\"}:test.toString},YFqc:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"cTJO\")},YqAc:function(module,exports){var id=0;var px=Math.random();module.exports=function(key){return\"Symbol(\".concat(key===undefined?\"\":key,\")_\",(++id+px).toString(36))}},YxH6:function(module,exports,__webpack_require__){\"use strict\";var getPrototypeOf=__webpack_require__(\"0idE\");var hide=__webpack_require__(\"wBs/\");var has=__webpack_require__(\"57wU\");var IS_PURE=__webpack_require__(\"U5J1\");var ITERATOR=__webpack_require__(\"aXXJ\")(\"iterator\");var BUGGY_SAFARI_ITERATORS=false;var returnThis=function(){return this};var IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator;if([].keys){arrayIterator=[].keys();if(!(\"next\"in arrayIterator))BUGGY_SAFARI_ITERATORS=true;else{PrototypeOfArrayIteratorPrototype=getPrototypeOf(getPrototypeOf(arrayIterator));if(PrototypeOfArrayIteratorPrototype!==Object.prototype)IteratorPrototype=PrototypeOfArrayIteratorPrototype}}if(IteratorPrototype==undefined)IteratorPrototype={};if(!IS_PURE&&!has(IteratorPrototype,ITERATOR))hide(IteratorPrototype,ITERATOR,returnThis);module.exports={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS}},Z7t5:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"+SFK\")},ZDA2:function(module,exports,__webpack_require__){var _typeof=__webpack_require__(\"iZP3\");var assertThisInitialized=__webpack_require__(\"K47E\");function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)===\"object\"||typeof call===\"function\")){return call}return assertThisInitialized(self)}module.exports=_possibleConstructorReturn},ZPxF:function(module,exports,__webpack_require__){__webpack_require__(\"S4gH\")(__webpack_require__(\"ysHE\").JSON,\"JSON\",true)},ZW5q:function(module,exports,__webpack_require__){\"use strict\";var aFunction=__webpack_require__(\"eaoh\");function PromiseCapability(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError(\"Bad Promise constructor\");resolve=$$resolve;reject=$$reject});this.resolve=aFunction(resolve);this.reject=aFunction(reject)}module.exports.f=function(C){return new PromiseCapability(C)}},ZrEc:function(module,exports,__webpack_require__){var classofRaw=__webpack_require__(\"hdqJ\");var TO_STRING_TAG=__webpack_require__(\"aXXJ\")(\"toStringTag\");var CORRECT_ARGUMENTS=classofRaw(function(){return arguments}())==\"Arguments\";var tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,tag,result;return it===undefined?\"Undefined\":it===null?\"Null\":typeof(tag=tryGet(O=Object(it),TO_STRING_TAG))==\"string\"?tag:CORRECT_ARGUMENTS?classofRaw(O):(result=classofRaw(O))==\"Object\"&&typeof O.callee==\"function\"?\"Arguments\":result}},Zxgi:function(module,exports,__webpack_require__){var global=__webpack_require__(\"5T2Y\");var core=__webpack_require__(\"WEpk\");var LIBRARY=__webpack_require__(\"uOPS\");var wksExt=__webpack_require__(\"zLkG\");var defineProperty=__webpack_require__(\"2faE\").f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});if(name.charAt(0)!=\"_\"&&!(name in $Symbol))defineProperty($Symbol,name,{value:wksExt.f(name)})}},\"a+hM\":function(module,exports,__webpack_require__){var has=__webpack_require__(\"57wU\");var ownKeys=__webpack_require__(\"ySdl\");var getOwnPropertyDescriptorModule=__webpack_require__(\"pYsU\");var definePropertyModule=__webpack_require__(\"TIpl\");module.exports=function(target,source){var keys=ownKeys(source);var defineProperty=definePropertyModule.f;var getOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f;for(var i=0;i<keys.length;i++){var key=keys[i];if(!has(target,key))defineProperty(target,key,getOwnPropertyDescriptor(source,key))}}},a0i3:function(module,exports,__webpack_require__){module.exports=!__webpack_require__(\"lb/b\")&&!__webpack_require__(\"0HDe\")(function(){return Object.defineProperty(__webpack_require__(\"JIMt\")(\"div\"),\"a\",{get:function(){return 7}}).a!=7})},a0xu:function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},a7VT:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,\"default\",function(){return _getPrototypeOf});var _core_js_object_get_prototype_of__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"Bhuq\");var _core_js_object_get_prototype_of__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_core_js_object_get_prototype_of__WEBPACK_IMPORTED_MODULE_0__);var _core_js_object_set_prototype_of__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"TRZx\");var _core_js_object_set_prototype_of__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_core_js_object_set_prototype_of__WEBPACK_IMPORTED_MODULE_1__);function _getPrototypeOf(o){_getPrototypeOf=_core_js_object_set_prototype_of__WEBPACK_IMPORTED_MODULE_1___default.a?_core_js_object_get_prototype_of__WEBPACK_IMPORTED_MODULE_0___default.a:function _getPrototypeOf(o){return o.__proto__||_core_js_object_get_prototype_of__WEBPACK_IMPORTED_MODULE_0___default()(o)};return _getPrototypeOf(o)}},aPfg:function(module,exports,__webpack_require__){\"use strict\";var $export=__webpack_require__(\"Y7ZC\");var aFunction=__webpack_require__(\"eaoh\");var ctx=__webpack_require__(\"2GTP\");var forOf=__webpack_require__(\"oioR\");module.exports=function(COLLECTION){$export($export.S,COLLECTION,{from:function from(source){var mapFn=arguments[1];var mapping,A,n,cb;aFunction(this);mapping=mapFn!==undefined;if(mapping)aFunction(mapFn);if(source==undefined)return new this;A=[];if(mapping){n=0;cb=ctx(mapFn,arguments[2],2);forOf(source,false,function(nextItem){A.push(cb(nextItem,n++))})}else{forOf(source,false,A.push,A)}return new this(A)}})}},aW7e:function(module,exports,__webpack_require__){__webpack_require__(\"wgeU\");__webpack_require__(\"FlQf\");__webpack_require__(\"bBy9\");__webpack_require__(\"JMW+\");__webpack_require__(\"PBE1\");__webpack_require__(\"Q/yX\");module.exports=__webpack_require__(\"WEpk\").Promise},aXXJ:function(module,exports,__webpack_require__){var store=__webpack_require__(\"MfhB\")(\"wks\");var uid=__webpack_require__(\"ptKZ\");var Symbol=__webpack_require__(\"ysHE\").Symbol;var NATIVE_SYMBOL=__webpack_require__(\"mk1t\");module.exports=function(name){return store[name]||(store[name]=NATIVE_SYMBOL&&Symbol[name]||(NATIVE_SYMBOL?Symbol:uid)(\"Symbol.\"+name))}},adOz:function(module,exports,__webpack_require__){__webpack_require__(\"Zxgi\")(\"asyncIterator\")},ahhG:function(module,exports,__webpack_require__){exports.f=__webpack_require__(\"aXXJ\")},\"ar/p\":function(module,exports,__webpack_require__){var $keys=__webpack_require__(\"5vMV\");var hiddenKeys=__webpack_require__(\"FpHa\").concat(\"length\",\"prototype\");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return $keys(O,hiddenKeys)}},b2LF:function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"hasInstance\")},b3CU:function(module,exports,__webpack_require__){var _Reflect$construct=__webpack_require__(\"pbKT\");var setPrototypeOf=__webpack_require__(\"vjea\");function isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!_Reflect$construct)return false;if(_Reflect$construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(_Reflect$construct(Date,[],function(){}));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){module.exports=_construct=_Reflect$construct}else{module.exports=_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}module.exports=_construct},bBy9:function(module,exports,__webpack_require__){__webpack_require__(\"w2d+\");var global=__webpack_require__(\"5T2Y\");var hide=__webpack_require__(\"NegM\");var Iterators=__webpack_require__(\"SBuE\");var TO_STRING_TAG=__webpack_require__(\"UWiX\")(\"toStringTag\");var DOMIterables=(\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,\"+\"DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,\"+\"MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,\"+\"SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,\"+\"TextTrackList,TouchList\").split(\",\");for(var i=0;i<DOMIterables.length;i++){var NAME=DOMIterables[i];var Collection=global[NAME];var proto=Collection&&Collection.prototype;if(proto&&!proto[TO_STRING_TAG])hide(proto,TO_STRING_TAG,NAME);Iterators[NAME]=Iterators.Array}},bVZc:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var isProd=process.env&&\"production\"===\"production\";var isString=function isString(o){return Object.prototype.toString.call(o)===\"[object String]\"};var StyleSheet=function(){function StyleSheet(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$name=_ref.name,name=_ref$name===void 0?\"stylesheet\":_ref$name,_ref$optimizeForSpeed=_ref.optimizeForSpeed,optimizeForSpeed=_ref$optimizeForSpeed===void 0?isProd:_ref$optimizeForSpeed,_ref$isBrowser=_ref.isBrowser,isBrowser=_ref$isBrowser===void 0?typeof window!==\"undefined\":_ref$isBrowser;_classCallCheck(this,StyleSheet);invariant(isString(name),\"`name` must be a string\");this._name=name;this._deletedRulePlaceholder=\"#\".concat(name,\"-deleted-rule____{}\");invariant(typeof optimizeForSpeed===\"boolean\",\"`optimizeForSpeed` must be a boolean\");this._optimizeForSpeed=optimizeForSpeed;this._isBrowser=isBrowser;this._serverSheet=undefined;this._tags=[];this._injected=false;this._rulesCount=0;var node=this._isBrowser&&document.querySelector('meta[property=\"csp-nonce\"]');this._nonce=node?node.getAttribute(\"content\"):null}_createClass(StyleSheet,[{key:\"setOptimizeForSpeed\",value:function setOptimizeForSpeed(bool){invariant(typeof bool===\"boolean\",\"`setOptimizeForSpeed` accepts a boolean\");invariant(this._rulesCount===0,\"optimizeForSpeed cannot be when rules have already been inserted\");this.flush();this._optimizeForSpeed=bool;this.inject()}},{key:\"isOptimizeForSpeed\",value:function isOptimizeForSpeed(){return this._optimizeForSpeed}},{key:\"inject\",value:function inject(){var _this=this;invariant(!this._injected,\"sheet already injected\");this._injected=true;if(this._isBrowser&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name);this._optimizeForSpeed=\"insertRule\"in this.getSheet();if(!this._optimizeForSpeed){if(!isProd){console.warn(\"StyleSheet: optimizeForSpeed mode not supported falling back to standard mode.\")}this.flush();this._injected=true}return}this._serverSheet={cssRules:[],insertRule:function insertRule(rule,index){if(typeof index===\"number\"){_this._serverSheet.cssRules[index]={cssText:rule}}else{_this._serverSheet.cssRules.push({cssText:rule})}return index},deleteRule:function deleteRule(index){_this._serverSheet.cssRules[index]=null}}}},{key:\"getSheetForTag\",value:function getSheetForTag(tag){if(tag.sheet){return tag.sheet}for(var i=0;i<document.styleSheets.length;i++){if(document.styleSheets[i].ownerNode===tag){return document.styleSheets[i]}}}},{key:\"getSheet\",value:function getSheet(){return this.getSheetForTag(this._tags[this._tags.length-1])}},{key:\"insertRule\",value:function insertRule(rule,index){invariant(isString(rule),\"`insertRule` accepts only strings\");if(!this._isBrowser){if(typeof index!==\"number\"){index=this._serverSheet.cssRules.length}this._serverSheet.insertRule(rule,index);return this._rulesCount++}if(this._optimizeForSpeed){var sheet=this.getSheet();if(typeof index!==\"number\"){index=sheet.cssRules.length}try{sheet.insertRule(rule,index)}catch(error){if(!isProd){console.warn(\"StyleSheet: illegal rule: \\n\\n\".concat(rule,\"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\"))}return-1}}else{var insertionPoint=this._tags[index];this._tags.push(this.makeStyleTag(this._name,rule,insertionPoint))}return this._rulesCount++}},{key:\"replaceRule\",value:function replaceRule(index,rule){if(this._optimizeForSpeed||!this._isBrowser){var sheet=this._isBrowser?this.getSheet():this._serverSheet;if(!rule.trim()){rule=this._deletedRulePlaceholder}if(!sheet.cssRules[index]){return index}sheet.deleteRule(index);try{sheet.insertRule(rule,index)}catch(error){if(!isProd){console.warn(\"StyleSheet: illegal rule: \\n\\n\".concat(rule,\"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\"))}sheet.insertRule(this._deletedRulePlaceholder,index)}}else{var tag=this._tags[index];invariant(tag,\"old rule at index `\".concat(index,\"` not found\"));tag.textContent=rule}return index}},{key:\"deleteRule\",value:function deleteRule(index){if(!this._isBrowser){this._serverSheet.deleteRule(index);return}if(this._optimizeForSpeed){this.replaceRule(index,\"\")}else{var tag=this._tags[index];invariant(tag,\"rule at index `\".concat(index,\"` not found\"));tag.parentNode.removeChild(tag);this._tags[index]=null}}},{key:\"flush\",value:function flush(){this._injected=false;this._rulesCount=0;if(this._isBrowser){this._tags.forEach(function(tag){return tag&&tag.parentNode.removeChild(tag)});this._tags=[]}else{this._serverSheet.cssRules=[]}}},{key:\"cssRules\",value:function cssRules(){var _this2=this;if(!this._isBrowser){return this._serverSheet.cssRules}return this._tags.reduce(function(rules,tag){if(tag){rules=rules.concat(_this2.getSheetForTag(tag).cssRules.map(function(rule){return rule.cssText===_this2._deletedRulePlaceholder?null:rule}))}else{rules.push(null)}return rules},[])}},{key:\"makeStyleTag\",value:function makeStyleTag(name,cssString,relativeToTag){if(cssString){invariant(isString(cssString),\"makeStyleTag acceps only strings as second parameter\")}var tag=document.createElement(\"style\");if(this._nonce)tag.setAttribute(\"nonce\",this._nonce);tag.type=\"text/css\";tag.setAttribute(\"data-\".concat(name),\"\");if(cssString){tag.appendChild(document.createTextNode(cssString))}var head=document.head||document.getElementsByTagName(\"head\")[0];if(relativeToTag){head.insertBefore(tag,relativeToTag)}else{head.appendChild(tag)}return tag}},{key:\"length\",get:function get(){return this._rulesCount}}]);return StyleSheet}();exports.default=StyleSheet;function invariant(condition,message){if(!condition){throw new Error(\"StyleSheet: \".concat(message,\".\"))}}},bcPd:function(module,exports,__webpack_require__){var isObject=__webpack_require__(\"kpns\");module.exports=function(it){if(!isObject(it)){throw TypeError(String(it)+\" is not an object\")}return it}},bkef:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});const normalize_page_path_1=__webpack_require__(\"f7u1\");const require_1=__webpack_require__(\"6Z2F\");function getPageFiles(buildManifest,page){const normalizedPage=normalize_page_path_1.normalizePagePath(page);const files=buildManifest.pages[normalizedPage];if(!files){page=require_1.tryAmp(buildManifest.pages,normalizedPage)}if(!files){console.warn(`Could not find files for ${normalizedPage} in .next/build-manifest.json`);return[]}return files}exports.getPageFiles=getPageFiles},bzos:function(module,exports){module.exports=require(\"url\")},cHUd:function(module,exports,__webpack_require__){\"use strict\";var $export=__webpack_require__(\"Y7ZC\");module.exports=function(COLLECTION){$export($export.S,COLLECTION,{of:function of(){var length=arguments.length;var A=new Array(length);while(length--)A[length]=arguments[length];return new this(A)}})}},cKJ5:function(module,exports,__webpack_require__){var assert=__webpack_require__(\"Qs3B\");exports.HTTPParser=HTTPParser;function HTTPParser(type){assert.ok(type===HTTPParser.REQUEST||type===HTTPParser.RESPONSE);this.type=type;this.state=type+\"_LINE\";this.info={headers:[],upgrade:false};this.trailers=[];this.line=\"\";this.isChunked=false;this.connection=\"\";this.headerSize=0;this.body_bytes=null;this.isUserCall=false;this.hadError=false}HTTPParser.encoding=\"ascii\";HTTPParser.maxHeaderSize=80*1024;HTTPParser.REQUEST=\"REQUEST\";HTTPParser.RESPONSE=\"RESPONSE\";var kOnHeaders=HTTPParser.kOnHeaders=0;var kOnHeadersComplete=HTTPParser.kOnHeadersComplete=1;var kOnBody=HTTPParser.kOnBody=2;var kOnMessageComplete=HTTPParser.kOnMessageComplete=3;HTTPParser.prototype[kOnHeaders]=HTTPParser.prototype[kOnHeadersComplete]=HTTPParser.prototype[kOnBody]=HTTPParser.prototype[kOnMessageComplete]=function(){};var compatMode0_12=true;Object.defineProperty(HTTPParser,\"kOnExecute\",{get:function(){compatMode0_12=false;return 4}});var methods=exports.methods=HTTPParser.methods=[\"DELETE\",\"GET\",\"HEAD\",\"POST\",\"PUT\",\"CONNECT\",\"OPTIONS\",\"TRACE\",\"COPY\",\"LOCK\",\"MKCOL\",\"MOVE\",\"PROPFIND\",\"PROPPATCH\",\"SEARCH\",\"UNLOCK\",\"BIND\",\"REBIND\",\"UNBIND\",\"ACL\",\"REPORT\",\"MKACTIVITY\",\"CHECKOUT\",\"MERGE\",\"M-SEARCH\",\"NOTIFY\",\"SUBSCRIBE\",\"UNSUBSCRIBE\",\"PATCH\",\"PURGE\",\"MKCALENDAR\",\"LINK\",\"UNLINK\"];var method_connect=methods.indexOf(\"CONNECT\");HTTPParser.prototype.reinitialize=HTTPParser;HTTPParser.prototype.close=HTTPParser.prototype.pause=HTTPParser.prototype.resume=HTTPParser.prototype.free=function(){};HTTPParser.prototype._compatMode0_11=false;HTTPParser.prototype.getAsyncId=function(){return 0};var headerState={REQUEST_LINE:true,RESPONSE_LINE:true,HEADER:true};HTTPParser.prototype.execute=function(chunk,start,length){if(!(this instanceof HTTPParser)){throw new TypeError(\"not a HTTPParser\")}start=start||0;length=typeof length===\"number\"?length:chunk.length;this.chunk=chunk;this.offset=start;var end=this.end=start+length;try{while(this.offset<end){if(this[this.state]()){break}}}catch(err){if(this.isUserCall){throw err}this.hadError=true;return err}this.chunk=null;length=this.offset-start;if(headerState[this.state]){this.headerSize+=length;if(this.headerSize>HTTPParser.maxHeaderSize){return new Error(\"max header size exceeded\")}}return length};var stateFinishAllowed={REQUEST_LINE:true,RESPONSE_LINE:true,BODY_RAW:true};HTTPParser.prototype.finish=function(){if(this.hadError){return}if(!stateFinishAllowed[this.state]){return new Error(\"invalid state for EOF\")}if(this.state===\"BODY_RAW\"){this.userCall()(this[kOnMessageComplete]())}};HTTPParser.prototype.consume=HTTPParser.prototype.unconsume=HTTPParser.prototype.getCurrentBuffer=function(){};HTTPParser.prototype.userCall=function(){this.isUserCall=true;var self=this;return function(ret){self.isUserCall=false;return ret}};HTTPParser.prototype.nextRequest=function(){this.userCall()(this[kOnMessageComplete]());this.reinitialize(this.type)};HTTPParser.prototype.consumeLine=function(){var end=this.end,chunk=this.chunk;for(var i=this.offset;i<end;i++){if(chunk[i]===10){var line=this.line+chunk.toString(HTTPParser.encoding,this.offset,i);if(line.charAt(line.length-1)===\"\\r\"){line=line.substr(0,line.length-1)}this.line=\"\";this.offset=i+1;return line}}this.line+=chunk.toString(HTTPParser.encoding,this.offset,this.end);this.offset=this.end};var headerExp=/^([^: \\t]+):[ \\t]*((?:.*[^ \\t])|)/;var headerContinueExp=/^[ \\t]+(.*[^ \\t])/;HTTPParser.prototype.parseHeader=function(line,headers){if(line.indexOf(\"\\r\")!==-1){throw parseErrorCode(\"HPE_LF_EXPECTED\")}var match=headerExp.exec(line);var k=match&&match[1];if(k){headers.push(k);headers.push(match[2])}else{var matchContinue=headerContinueExp.exec(line);if(matchContinue&&headers.length){if(headers[headers.length-1]){headers[headers.length-1]+=\" \"}headers[headers.length-1]+=matchContinue[1]}}};var requestExp=/^([A-Z-]+) ([^ ]+) HTTP\\/(\\d)\\.(\\d)$/;HTTPParser.prototype.REQUEST_LINE=function(){var line=this.consumeLine();if(!line){return}var match=requestExp.exec(line);if(match===null){throw parseErrorCode(\"HPE_INVALID_CONSTANT\")}this.info.method=this._compatMode0_11?match[1]:methods.indexOf(match[1]);if(this.info.method===-1){throw new Error(\"invalid request method\")}this.info.url=match[2];this.info.versionMajor=+match[3];this.info.versionMinor=+match[4];this.body_bytes=0;this.state=\"HEADER\"};var responseExp=/^HTTP\\/(\\d)\\.(\\d) (\\d{3}) ?(.*)$/;HTTPParser.prototype.RESPONSE_LINE=function(){var line=this.consumeLine();if(!line){return}var match=responseExp.exec(line);if(match===null){throw parseErrorCode(\"HPE_INVALID_CONSTANT\")}this.info.versionMajor=+match[1];this.info.versionMinor=+match[2];var statusCode=this.info.statusCode=+match[3];this.info.statusMessage=match[4];if((statusCode/100|0)===1||statusCode===204||statusCode===304){this.body_bytes=0}this.state=\"HEADER\"};HTTPParser.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(this.connection.indexOf(\"close\")!==-1){return false}}else if(this.connection.indexOf(\"keep-alive\")===-1){return false}if(this.body_bytes!==null||this.isChunked){return true}return false};HTTPParser.prototype.HEADER=function(){var line=this.consumeLine();if(line===undefined){return}var info=this.info;if(line){this.parseHeader(line,info.headers)}else{var headers=info.headers;var hasContentLength=false;var currentContentLengthValue;var hasUpgradeHeader=false;for(var i=0;i<headers.length;i+=2){switch(headers[i].toLowerCase()){case\"transfer-encoding\":this.isChunked=headers[i+1].toLowerCase()===\"chunked\";break;case\"content-length\":currentContentLengthValue=+headers[i+1];if(hasContentLength){if(currentContentLengthValue!==this.body_bytes){throw parseErrorCode(\"HPE_UNEXPECTED_CONTENT_LENGTH\")}}else{hasContentLength=true;this.body_bytes=currentContentLengthValue}break;case\"connection\":this.connection+=headers[i+1].toLowerCase();break;case\"upgrade\":hasUpgradeHeader=true;break}}if(this.isChunked&&hasContentLength){hasContentLength=false;this.body_bytes=null}if(hasUpgradeHeader&&this.connection.indexOf(\"upgrade\")!=-1){info.upgrade=this.type===HTTPParser.REQUEST||info.statusCode===101}else{info.upgrade=info.method===method_connect}info.shouldKeepAlive=this.shouldKeepAlive();var skipBody;if(compatMode0_12){skipBody=this.userCall()(this[kOnHeadersComplete](info))}else{skipBody=this.userCall()(this[kOnHeadersComplete](info.versionMajor,info.versionMinor,info.headers,info.method,info.url,info.statusCode,info.statusMessage,info.upgrade,info.shouldKeepAlive))}if(skipBody===2){this.nextRequest();return true}else if(this.isChunked&&!skipBody){this.state=\"BODY_CHUNKHEAD\"}else if(skipBody||this.body_bytes===0){this.nextRequest();return info.upgrade}else if(this.body_bytes===null){this.state=\"BODY_RAW\"}else{this.state=\"BODY_SIZED\"}}};HTTPParser.prototype.BODY_CHUNKHEAD=function(){var line=this.consumeLine();if(line===undefined){return}this.body_bytes=parseInt(line,16);if(!this.body_bytes){this.state=\"BODY_CHUNKTRAILERS\"}else{this.state=\"BODY_CHUNK\"}};HTTPParser.prototype.BODY_CHUNK=function(){var length=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[kOnBody](this.chunk,this.offset,length));this.offset+=length;this.body_bytes-=length;if(!this.body_bytes){this.state=\"BODY_CHUNKEMPTYLINE\"}};HTTPParser.prototype.BODY_CHUNKEMPTYLINE=function(){var line=this.consumeLine();if(line===undefined){return}assert.equal(line,\"\");this.state=\"BODY_CHUNKHEAD\"};HTTPParser.prototype.BODY_CHUNKTRAILERS=function(){var line=this.consumeLine();if(line===undefined){return}if(line){this.parseHeader(line,this.trailers)}else{if(this.trailers.length){this.userCall()(this[kOnHeaders](this.trailers,\"\"))}this.nextRequest()}};HTTPParser.prototype.BODY_RAW=function(){var length=this.end-this.offset;this.userCall()(this[kOnBody](this.chunk,this.offset,length));this.offset=this.end};HTTPParser.prototype.BODY_SIZED=function(){var length=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[kOnBody](this.chunk,this.offset,length));this.offset+=length;this.body_bytes-=length;if(!this.body_bytes){this.nextRequest()}};[\"Headers\",\"HeadersComplete\",\"Body\",\"MessageComplete\"].forEach(function(name){var k=HTTPParser[\"kOn\"+name];Object.defineProperty(HTTPParser.prototype,\"on\"+name,{get:function(){return this[k]},set:function(to){this._compatMode0_11=true;method_connect=\"CONNECT\";return this[k]=to}})});function parseErrorCode(code){var err=new Error(\"Parse Error\");err.code=code;return err}},cTJO:function(module,exports,__webpack_require__){\"use strict\";var _interopRequireDefault=__webpack_require__(\"KI45\");var _stringify=_interopRequireDefault(__webpack_require__(\"9Jkg\"));var _classCallCheck2=_interopRequireDefault(__webpack_require__(\"/HRN\"));var _createClass2=_interopRequireDefault(__webpack_require__(\"WaGi\"));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(\"ZDA2\"));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(\"/+P4\"));var _inherits2=_interopRequireDefault(__webpack_require__(\"N9n2\"));var __importStar=void 0&&(void 0).__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod){if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k]}result[\"default\"]=mod;return result};var __importDefault=void 0&&(void 0).__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,\"__esModule\",{value:true});var url_1=__webpack_require__(\"bzos\");var react_1=__importStar(__webpack_require__(\"q1tI\"));var prop_types_1=__importDefault(__webpack_require__(\"17x9\"));var router_1=__importStar(__webpack_require__(\"nOHt\"));var utils_1=__webpack_require__(\"Bu4q\");function isLocal(href){var url=url_1.parse(href,false,true);var origin=url_1.parse(utils_1.getLocationOrigin(),false,true);return!url.host||url.protocol===origin.protocol&&url.host===origin.host}function memoizedFormatUrl(formatFunc){var lastHref=null;var lastAs=null;var lastResult=null;return function(href,as){if(href===lastHref&&as===lastAs){return lastResult}var result=formatFunc(href,as);lastHref=href;lastAs=as;lastResult=result;return result}}function formatUrl(url){return url&&typeof url===\"object\"?utils_1.formatWithValidation(url):url}var Link=function(_react_1$Component){(0,_inherits2.default)(Link,_react_1$Component);function Link(){var _this;(0,_classCallCheck2.default)(this,Link);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Link).apply(this,arguments));_this.formatUrls=memoizedFormatUrl(function(href,asHref){return{href:formatUrl(href),as:formatUrl(asHref,true)}});_this.linkClicked=function(e){var _e$currentTarget=e.currentTarget,nodeName=_e$currentTarget.nodeName,target=_e$currentTarget.target;if(nodeName===\"A\"&&(target&&target!==\"_self\"||e.metaKey||e.ctrlKey||e.shiftKey||e.nativeEvent&&e.nativeEvent.which===2)){return}var _this$formatUrls=_this.formatUrls(_this.props.href,_this.props.as),href=_this$formatUrls.href,as=_this$formatUrls.as;if(!isLocal(href)){return}var pathname=window.location.pathname;href=url_1.resolve(pathname,href);as=as?url_1.resolve(pathname,as):href;e.preventDefault();var scroll=_this.props.scroll;if(scroll==null){scroll=as.indexOf(\"#\")<0}router_1.default[_this.props.replace?\"replace\":\"push\"](href,as,{shallow:_this.props.shallow}).then(function(success){if(!success)return;if(scroll){window.scrollTo(0,0);document.body.focus()}}).catch(function(err){if(_this.props.onError)_this.props.onError(err)})};return _this}(0,_createClass2.default)(Link,[{key:\"componentDidMount\",value:function componentDidMount(){this.prefetch()}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if((0,_stringify.default)(this.props.href)!==(0,_stringify.default)(prevProps.href)){this.prefetch()}}},{key:\"prefetch\",value:function prefetch(){if(!this.props.prefetch)return;if(typeof window===\"undefined\")return;var pathname=window.location.pathname;var _this$formatUrls2=this.formatUrls(this.props.href,this.props.as),parsedHref=_this$formatUrls2.href;var href=url_1.resolve(pathname,parsedHref);router_1.default.prefetch(href)}},{key:\"render\",value:function render(){var _this2=this;var children=this.props.children;var _this$formatUrls3=this.formatUrls(this.props.href,this.props.as),href=_this$formatUrls3.href,as=_this$formatUrls3.as;if(typeof children===\"string\"){children=react_1.default.createElement(\"a\",null,children)}var child=react_1.Children.only(children);var props={onClick:function onClick(e){if(child.props&&typeof child.props.onClick===\"function\"){child.props.onClick(e)}if(!e.defaultPrevented){_this2.linkClicked(e)}}};if(this.props.passHref||child.type===\"a\"&&!(\"href\"in child.props)){props.href=as||href}if(true){if(props.href&&typeof __NEXT_DATA__!==\"undefined\"&&__NEXT_DATA__.nextExport){props.href=router_1.Router._rewriteUrlForNextExport(props.href)}}return react_1.default.cloneElement(child,props)}}]);return Link}(react_1.Component);if(false){var exact,warn}exports.default=Link},ccE7:function(module,exports,__webpack_require__){var toInteger=__webpack_require__(\"Ojgd\");var defined=__webpack_require__(\"Jes0\");module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that));var i=toInteger(pos);var l=s.length;var a,b;if(i<0||i>=l)return TO_STRING?\"\":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}},czwh:function(module,exports,__webpack_require__){var $export=__webpack_require__(\"Y7ZC\");var create=__webpack_require__(\"oVml\");var aFunction=__webpack_require__(\"eaoh\");var anObject=__webpack_require__(\"5K7Z\");var isObject=__webpack_require__(\"93I4\");var fails=__webpack_require__(\"KUxP\");var bind=__webpack_require__(\"wYmx\");var rConstruct=(__webpack_require__(\"5T2Y\").Reflect||{}).construct;var NEW_TARGET_BUG=fails(function(){function F(){}return!(rConstruct(function(){},[],F)instanceof F)});var ARGS_BUG=!fails(function(){rConstruct(function(){})});$export($export.S+$export.F*(NEW_TARGET_BUG||ARGS_BUG),\"Reflect\",{construct:function construct(Target,args){aFunction(Target);anObject(args);var newTarget=arguments.length<3?Target:aFunction(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return rConstruct(Target,args,newTarget);if(Target==newTarget){switch(args.length){case 0:return new Target;case 1:return new Target(args[0]);case 2:return new Target(args[0],args[1]);case 3:return new Target(args[0],args[1],args[2]);case 4:return new Target(args[0],args[1],args[2],args[3])}var $args=[null];$args.push.apply($args,args);return new(bind.apply(Target,$args))}var proto=newTarget.prototype;var instance=create(isObject(proto)?proto:Object.prototype);var result=Function.apply.call(Target,instance,args);return isObject(result)?result:instance}})},d04V:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"0tVQ\")},d8cw:function(module,exports,__webpack_require__){\"use strict\";var internalFind=__webpack_require__(\"vQkR\")(5);var FIND=\"find\";var SKIPS_HOLES=true;if(FIND in[])Array(1)[FIND](function(){SKIPS_HOLES=false});__webpack_require__(\"pSMy\")({target:\"Array\",proto:true,forced:SKIPS_HOLES},{find:function find(callbackfn){return internalFind(this,callbackfn,arguments.length>1?arguments[1]:undefined)}});__webpack_require__(\"gJLK\")(FIND)},dDGi:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"0gFS\")},dL40:function(module,exports,__webpack_require__){var $export=__webpack_require__(\"Y7ZC\");$export($export.P+$export.R,\"Set\",{toJSON:__webpack_require__(\"8iia\")(\"Set\")})},dYkh:function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"search\")},dfwq:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var is_array=__webpack_require__(\"p0XB\");var is_array_default=__webpack_require__.n(is_array);function _arrayWithoutHoles(arr){if(is_array_default()(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var from=__webpack_require__(\"d04V\");var from_default=__webpack_require__.n(from);var is_iterable=__webpack_require__(\"yLu3\");var is_iterable_default=__webpack_require__.n(is_iterable);function _iterableToArray(iter){if(is_iterable_default()(Object(iter))||Object.prototype.toString.call(iter)===\"[object Arguments]\")return from_default()(iter)}function _nonIterableSpread(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}__webpack_require__.d(__webpack_exports__,\"default\",function(){return _toConsumableArray});function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}},dl0q:function(module,exports,__webpack_require__){__webpack_require__(\"Zxgi\")(\"observable\")},doui:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var is_array=__webpack_require__(\"p0XB\");var is_array_default=__webpack_require__.n(is_array);function _arrayWithHoles(arr){if(is_array_default()(arr))return arr}var get_iterator=__webpack_require__(\"XXOK\");var get_iterator_default=__webpack_require__.n(get_iterator);function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=get_iterator_default()(arr),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i[\"return\"]!=null)_i[\"return\"]()}finally{if(_d)throw _e}}return _arr}function _nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}__webpack_require__.d(__webpack_exports__,\"default\",function(){return _slicedToArray});function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}},dstF:function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"replace\")},\"dt2+\":function(module,exports,__webpack_require__){\"use strict\";var crypto=__webpack_require__(\"PJMN\"),util=__webpack_require__(\"jK02\"),Extensions=__webpack_require__(\"2SO9\"),Base=__webpack_require__(\"Wdmt\"),Frame=__webpack_require__(\"Ejeu\"),Message=__webpack_require__(\"Xsdi\");var Hybi=function(request,url,options){Base.apply(this,arguments);this._extensions=new Extensions;this._stage=0;this._masking=this._options.masking;this._protocols=this._options.protocols||[];this._requireMasking=this._options.requireMasking;this._pingCallbacks={};if(typeof this._protocols===\"string\")this._protocols=this._protocols.split(/ *, */);if(!this._request)return;var secKey=this._request.headers[\"sec-websocket-key\"],protos=this._request.headers[\"sec-websocket-protocol\"],version=this._request.headers[\"sec-websocket-version\"],supported=this._protocols;this._headers.set(\"Upgrade\",\"websocket\");this._headers.set(\"Connection\",\"Upgrade\");this._headers.set(\"Sec-WebSocket-Accept\",Hybi.generateAccept(secKey));if(protos!==undefined){if(typeof protos===\"string\")protos=protos.split(/ *, */);this.protocol=protos.filter(function(p){return supported.indexOf(p)>=0})[0];if(this.protocol)this._headers.set(\"Sec-WebSocket-Protocol\",this.protocol)}this.version=\"hybi-\"+version};util.inherits(Hybi,Base);Hybi.mask=function(payload,mask,offset){if(!mask||mask.length===0)return payload;offset=offset||0;for(var i=0,n=payload.length-offset;i<n;i++){payload[offset+i]=payload[offset+i]^mask[i%4]}return payload};Hybi.generateAccept=function(key){var sha1=crypto.createHash(\"sha1\");sha1.update(key+Hybi.GUID);return sha1.digest(\"base64\")};Hybi.GUID=\"258EAFA5-E914-47DA-95CA-C5AB0DC85B11\";var instance={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\\x00-\\x7F]|[\\xC2-\\xDF][\\x80-\\xBF]|\\xE0[\\xA0-\\xBF][\\x80-\\xBF]|[\\xE1-\\xEC\\xEE\\xEF][\\x80-\\xBF]{2}|\\xED[\\x80-\\x9F][\\x80-\\xBF]|\\xF0[\\x90-\\xBF][\\x80-\\xBF]{2}|[\\xF1-\\xF3][\\x80-\\xBF]{3}|\\xF4[\\x80-\\x8F][\\x80-\\xBF]{2})*$/,addExtension:function(extension){this._extensions.add(extension);return true},parse:function(chunk){this._reader.put(chunk);var buffer=true;while(buffer){switch(this._stage){case 0:buffer=this._reader.read(1);if(buffer)this._parseOpcode(buffer[0]);break;case 1:buffer=this._reader.read(1);if(buffer)this._parseLength(buffer[0]);break;case 2:buffer=this._reader.read(this._frame.lengthBytes);if(buffer)this._parseExtendedLength(buffer);break;case 3:buffer=this._reader.read(4);if(buffer){this._stage=4;this._frame.maskingKey=buffer}break;case 4:buffer=this._reader.read(this._frame.length);if(buffer){this._stage=0;this._emitFrame(buffer)}break;default:buffer=null}}},text:function(message){if(this.readyState>1)return false;return this.frame(message,\"text\")},binary:function(message){if(this.readyState>1)return false;return this.frame(message,\"binary\")},ping:function(message,callback){if(this.readyState>1)return false;message=message||\"\";if(callback)this._pingCallbacks[message]=callback;return this.frame(message,\"ping\")},pong:function(message){if(this.readyState>1)return false;message=message||\"\";return this.frame(message,\"pong\")},close:function(reason,code){reason=reason||\"\";code=code||this.ERRORS.normal_closure;if(this.readyState<=0){this.readyState=3;this.emit(\"close\",new Base.CloseEvent(code,reason));return true}else if(this.readyState===1){this.readyState=2;this._extensions.close(function(){this.frame(reason,\"close\",code)},this);return true}else{return false}},frame:function(buffer,type,code){if(this.readyState<=0)return this._queue([buffer,type,code]);if(this.readyState>2)return false;if(buffer instanceof Array)buffer=new Buffer(buffer);if(typeof buffer===\"number\")buffer=buffer.toString();var message=new Message,isText=typeof buffer===\"string\",payload,copy;message.rsv1=message.rsv2=message.rsv3=false;message.opcode=this.OPCODES[type||(isText?\"text\":\"binary\")];payload=isText?new Buffer(buffer,\"utf8\"):buffer;if(code){copy=payload;payload=new Buffer(2+copy.length);payload.writeUInt16BE(code,0);copy.copy(payload,2)}message.data=payload;var onMessageReady=function(message){var frame=new Frame;frame.final=true;frame.rsv1=message.rsv1;frame.rsv2=message.rsv2;frame.rsv3=message.rsv3;frame.opcode=message.opcode;frame.masked=!!this._masking;frame.length=message.data.length;frame.payload=message.data;if(frame.masked)frame.maskingKey=crypto.randomBytes(4);this._sendFrame(frame)};if(this.MESSAGE_OPCODES.indexOf(message.opcode)>=0)this._extensions.processOutgoingMessage(message,function(error,message){if(error)return this._fail(\"extension_error\",error.message);onMessageReady.call(this,message)},this);else onMessageReady.call(this,message);return true},_sendFrame:function(frame){var length=frame.length,header=length<=125?2:length<=65535?4:10,offset=header+(frame.masked?4:0),buffer=new Buffer(offset+length),masked=frame.masked?this.MASK:0;buffer[0]=(frame.final?this.FIN:0)|(frame.rsv1?this.RSV1:0)|(frame.rsv2?this.RSV2:0)|(frame.rsv3?this.RSV3:0)|frame.opcode;if(length<=125){buffer[1]=masked|length}else if(length<=65535){buffer[1]=masked|126;buffer.writeUInt16BE(length,2)}else{buffer[1]=masked|127;buffer.writeUInt32BE(Math.floor(length/4294967296),2);buffer.writeUInt32BE(length%4294967296,6)}frame.payload.copy(buffer,offset);if(frame.masked){frame.maskingKey.copy(buffer,header);Hybi.mask(buffer,frame.maskingKey,offset)}this._write(buffer)},_handshakeResponse:function(){try{var extensions=this._extensions.generateResponse(this._request.headers[\"sec-websocket-extensions\"])}catch(e){return this._fail(\"protocol_error\",e.message)}if(extensions)this._headers.set(\"Sec-WebSocket-Extensions\",extensions);var start=\"HTTP/1.1 101 Switching Protocols\",headers=[start,this._headers.toString(),\"\"];return new Buffer(headers.join(\"\\r\\n\"),\"utf8\")},_shutdown:function(code,reason,error){delete this._frame;delete this._message;this._stage=5;var sendCloseFrame=this.readyState===1;this.readyState=2;this._extensions.close(function(){if(sendCloseFrame)this.frame(reason,\"close\",code);this.readyState=3;if(error)this.emit(\"error\",new Error(reason));this.emit(\"close\",new Base.CloseEvent(code,reason))},this)},_fail:function(type,message){if(this.readyState>1)return;this._shutdown(this.ERRORS[type],message,true)},_parseOpcode:function(octet){var rsvs=[this.RSV1,this.RSV2,this.RSV3].map(function(rsv){return(octet&rsv)===rsv});var frame=this._frame=new Frame;frame.final=(octet&this.FIN)===this.FIN;frame.rsv1=rsvs[0];frame.rsv2=rsvs[1];frame.rsv3=rsvs[2];frame.opcode=octet&this.OPCODE;this._stage=1;if(!this._extensions.validFrameRsv(frame))return this._fail(\"protocol_error\",\"One or more reserved bits are on: reserved1 = \"+(frame.rsv1?1:0)+\", reserved2 = \"+(frame.rsv2?1:0)+\", reserved3 = \"+(frame.rsv3?1:0));if(this.OPCODE_CODES.indexOf(frame.opcode)<0)return this._fail(\"protocol_error\",\"Unrecognized frame opcode: \"+frame.opcode);if(this.MESSAGE_OPCODES.indexOf(frame.opcode)<0&&!frame.final)return this._fail(\"protocol_error\",\"Received fragmented control frame: opcode = \"+frame.opcode);if(this._message&&this.OPENING_OPCODES.indexOf(frame.opcode)>=0)return this._fail(\"protocol_error\",\"Received new data frame but previous continuous frame is unfinished\")},_parseLength:function(octet){var frame=this._frame;frame.masked=(octet&this.MASK)===this.MASK;frame.length=octet&this.LENGTH;if(frame.length>=0&&frame.length<=125){this._stage=frame.masked?3:4;if(!this._checkFrameLength())return}else{this._stage=2;frame.lengthBytes=frame.length===126?2:8}if(this._requireMasking&&!frame.masked)return this._fail(\"unacceptable\",\"Received unmasked frame but masking is required\")},_parseExtendedLength:function(buffer){var frame=this._frame;frame.length=this._readUInt(buffer);this._stage=frame.masked?3:4;if(this.MESSAGE_OPCODES.indexOf(frame.opcode)<0&&frame.length>125)return this._fail(\"protocol_error\",\"Received control frame having too long payload: \"+frame.length);if(!this._checkFrameLength())return},_checkFrameLength:function(){var length=this._message?this._message.length:0;if(length+this._frame.length>this._maxLength){this._fail(\"too_large\",\"WebSocket frame length too large\");return false}else{return true}},_emitFrame:function(buffer){var frame=this._frame,payload=frame.payload=Hybi.mask(buffer,frame.maskingKey),opcode=frame.opcode,message,code,reason,callbacks,callback;delete this._frame;if(opcode===this.OPCODES.continuation){if(!this._message)return this._fail(\"protocol_error\",\"Received unexpected continuation frame\");this._message.pushFrame(frame)}if(opcode===this.OPCODES.text||opcode===this.OPCODES.binary){this._message=new Message;this._message.pushFrame(frame)}if(frame.final&&this.MESSAGE_OPCODES.indexOf(opcode)>=0)return this._emitMessage(this._message);if(opcode===this.OPCODES.close){code=payload.length>=2?payload.readUInt16BE(0):null;reason=payload.length>2?this._encode(payload.slice(2)):null;if(!(payload.length===0)&&!(code!==null&&code>=this.MIN_RESERVED_ERROR&&code<=this.MAX_RESERVED_ERROR)&&this.ERROR_CODES.indexOf(code)<0)code=this.ERRORS.protocol_error;if(payload.length>125||payload.length>2&&!reason)code=this.ERRORS.protocol_error;this._shutdown(code||this.DEFAULT_ERROR_CODE,reason||\"\")}if(opcode===this.OPCODES.ping){this.frame(payload,\"pong\");this.emit(\"ping\",new Base.PingEvent(payload.toString()))}if(opcode===this.OPCODES.pong){callbacks=this._pingCallbacks;message=this._encode(payload);callback=callbacks[message];delete callbacks[message];if(callback)callback();this.emit(\"pong\",new Base.PongEvent(payload.toString()))}},_emitMessage:function(message){var message=this._message;message.read();delete this._message;this._extensions.processIncomingMessage(message,function(error,message){if(error)return this._fail(\"extension_error\",error.message);var payload=message.data;if(message.opcode===this.OPCODES.text)payload=this._encode(payload);if(payload===null)return this._fail(\"encoding_error\",\"Could not decode a text frame as UTF-8\");else this.emit(\"message\",new Base.MessageEvent(payload))},this)},_encode:function(buffer){try{var string=buffer.toString(\"binary\",0,buffer.length);if(!this.UTF8_MATCH.test(string))return null}catch(e){}return buffer.toString(\"utf8\",0,buffer.length)},_readUInt:function(buffer){if(buffer.length===2)return buffer.readUInt16BE(0);return buffer.readUInt32BE(0)*4294967296+buffer.readUInt32BE(4)}};for(var key in instance)Hybi.prototype[key]=instance[key];module.exports=Hybi},eUtF:function(module,exports,__webpack_require__){module.exports=!__webpack_require__(\"jmDH\")&&!__webpack_require__(\"KUxP\")(function(){return Object.defineProperty(__webpack_require__(\"Hsns\")(\"div\"),\"a\",{get:function(){return 7}}).a!=7})},eVuF:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"aW7e\")},eaoh:function(module,exports){module.exports=function(it){if(typeof it!=\"function\")throw TypeError(it+\" is not a function!\");return it}},ehBJ:function(module,exports,__webpack_require__){__webpack_require__(\"73IE\");module.exports=__webpack_require__(\"vLVD\")(\"String\",\"startsWith\")},ehg7:function(module,exports,__webpack_require__){var isObject=__webpack_require__(\"kpns\");module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)==\"function\"&&!isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)==\"function\"&&!isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)==\"function\"&&!isObject(val=fn.call(it)))return val;throw TypeError(\"Can't convert object to primitive value\")}},\"eq5/\":function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});function _interopDefault(ex){return ex&&typeof ex===\"object\"&&\"default\"in ex?ex[\"default\"]:ex}var util=__webpack_require__(\"Jv5v\");var Storage=_interopDefault(__webpack_require__(\"LwWk\"));var xmlhttprequest=__webpack_require__(\"GnG2\");\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var contains=function(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)};var DEFAULT_ENTRY_NAME=\"[DEFAULT]\";var tokenListeners=[];var FirebaseAppImpl=function(){function FirebaseAppImpl(options,config,firebase_){this.firebase_=firebase_;this.isDeleted_=false;this.services_={};this.name_=config.name;this._automaticDataCollectionEnabled=config.automaticDataCollectionEnabled||false;this.options_=util.deepCopy(options);this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(callback){tokenListeners.push(callback);setTimeout(function(){return callback(null)},0)},removeAuthTokenListener:function(callback){tokenListeners=tokenListeners.filter(function(listener){return listener!==callback})}}}Object.defineProperty(FirebaseAppImpl.prototype,\"automaticDataCollectionEnabled\",{get:function(){this.checkDestroyed_();return this._automaticDataCollectionEnabled},set:function(val){this.checkDestroyed_();this._automaticDataCollectionEnabled=val},enumerable:true,configurable:true});Object.defineProperty(FirebaseAppImpl.prototype,\"name\",{get:function(){this.checkDestroyed_();return this.name_},enumerable:true,configurable:true});Object.defineProperty(FirebaseAppImpl.prototype,\"options\",{get:function(){this.checkDestroyed_();return this.options_},enumerable:true,configurable:true});FirebaseAppImpl.prototype.delete=function(){var _this=this;return new Promise(function(resolve){_this.checkDestroyed_();resolve()}).then(function(){_this.firebase_.INTERNAL.removeApp(_this.name_);var services=[];Object.keys(_this.services_).forEach(function(serviceKey){Object.keys(_this.services_[serviceKey]).forEach(function(instanceKey){services.push(_this.services_[serviceKey][instanceKey])})});return Promise.all(services.map(function(service){return service.INTERNAL.delete()}))}).then(function(){_this.isDeleted_=true;_this.services_={}})};FirebaseAppImpl.prototype._getService=function(name,instanceIdentifier){if(instanceIdentifier===void 0){instanceIdentifier=DEFAULT_ENTRY_NAME}this.checkDestroyed_();if(!this.services_[name]){this.services_[name]={}}if(!this.services_[name][instanceIdentifier]){var instanceSpecifier=instanceIdentifier!==DEFAULT_ENTRY_NAME?instanceIdentifier:undefined;var service=this.firebase_.INTERNAL.factories[name](this,this.extendApp.bind(this),instanceSpecifier);this.services_[name][instanceIdentifier]=service}return this.services_[name][instanceIdentifier]};FirebaseAppImpl.prototype.extendApp=function(props){var _this=this;util.deepExtend(this,props);if(props.INTERNAL&&props.INTERNAL.addAuthTokenListener){tokenListeners.forEach(function(listener){_this.INTERNAL.addAuthTokenListener(listener)});tokenListeners=[]}};FirebaseAppImpl.prototype.checkDestroyed_=function(){if(this.isDeleted_){error(\"app-deleted\",{name:this.name_})}};return FirebaseAppImpl}();FirebaseAppImpl.prototype.name&&FirebaseAppImpl.prototype.options||FirebaseAppImpl.prototype.delete||console.log(\"dc\");function createFirebaseNamespace(){var apps_={};var factories={};var appHooks={};var namespace={__esModule:true,initializeApp:initializeApp,app:app,apps:null,Promise:Promise,SDK_VERSION:\"5.9.4\",INTERNAL:{registerService:registerService,createFirebaseNamespace:createFirebaseNamespace,extendNamespace:extendNamespace,createSubscribe:util.createSubscribe,ErrorFactory:util.ErrorFactory,removeApp:removeApp,factories:factories,useAsService:useAsService,Promise:Promise,deepExtend:util.deepExtend}};util.patchProperty(namespace,\"default\",namespace);Object.defineProperty(namespace,\"apps\",{get:getApps});function removeApp(name){var app=apps_[name];callAppHooks(app,\"delete\");delete apps_[name]}function app(name){name=name||DEFAULT_ENTRY_NAME;if(!contains(apps_,name)){error(\"no-app\",{name:name})}return apps_[name]}util.patchProperty(app,\"App\",FirebaseAppImpl);function initializeApp(options,rawConfig){if(rawConfig===void 0){rawConfig={}}if(typeof rawConfig!==\"object\"||rawConfig===null){var name_1=rawConfig;rawConfig={name:name_1}}var config=rawConfig;if(config.name===undefined){config.name=DEFAULT_ENTRY_NAME}var name=config.name;if(typeof name!==\"string\"||!name){error(\"bad-app-name\",{name:name+\"\"})}if(contains(apps_,name)){error(\"duplicate-app\",{name:name})}var app=new FirebaseAppImpl(options,config,namespace);apps_[name]=app;callAppHooks(app,\"create\");return app}function getApps(){return Object.keys(apps_).map(function(name){return apps_[name]})}function registerService(name,createService,serviceProperties,appHook,allowMultipleInstances){if(factories[name]){error(\"duplicate-service\",{name:name})}factories[name]=createService;if(appHook){appHooks[name]=appHook;getApps().forEach(function(app){appHook(\"create\",app)})}var serviceNamespace=function(appArg){if(appArg===void 0){appArg=app()}if(typeof appArg[name]!==\"function\"){error(\"invalid-app-argument\",{name:name})}return appArg[name]()};if(serviceProperties!==undefined){util.deepExtend(serviceNamespace,serviceProperties)}namespace[name]=serviceNamespace;FirebaseAppImpl.prototype[name]=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var serviceFxn=this._getService.bind(this,name);return serviceFxn.apply(this,allowMultipleInstances?args:[])};return serviceNamespace}function extendNamespace(props){util.deepExtend(namespace,props)}function callAppHooks(app,eventName){Object.keys(factories).forEach(function(serviceName){var factoryName=useAsService(app,serviceName);if(factoryName===null){return}if(appHooks[factoryName]){appHooks[factoryName](eventName,app)}})}function useAsService(app,name){if(name===\"serverAuth\"){return null}var useService=name;var options=app.options;return useService}return namespace}function error(code,args){throw appErrors.create(code,args)}var errors={\"no-app\":\"No Firebase App '{$name}' has been created - \"+\"call Firebase App.initializeApp()\",\"bad-app-name\":\"Illegal App name: '{$name}\",\"duplicate-app\":\"Firebase App named '{$name}' already exists\",\"app-deleted\":\"Firebase App named '{$name}' already deleted\",\"duplicate-service\":\"Firebase service named '{$name}' already registered\",\"sa-not-supported\":\"Initializing the Firebase SDK with a service \"+\"account is only allowed in a Node.js environment. On client \"+\"devices, you should instead initialize the SDK with an api key and \"+\"auth domain\",\"invalid-app-argument\":\"firebase.{$name}() takes either no argument or a \"+\"Firebase App instance.\"};var appErrors=new util.ErrorFactory(\"app\",\"Firebase\",errors);\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var _firebase=createFirebaseNamespace();_firebase.INTERNAL.extendNamespace({INTERNAL:{node:{localStorage:new Storage(null,{strict:true}),sessionStorage:new Storage(null,{strict:true}),XMLHttpRequest:xmlhttprequest.XMLHttpRequest}}});var firebase=_firebase;exports.default=firebase;exports.firebase=firebase},f7u1:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});const path_1=__webpack_require__(\"oyvS\");function normalizePagePath(page){if(page===\"/\"){page=\"/index\"}if(page[0]!==\"/\"){page=`/${page}`}const resolvedPage=path_1.posix.normalize(page);if(page!==resolvedPage){throw new Error(\"Requested and resolved page mismatch\")}return page}exports.normalizePagePath=normalizePagePath},fNZA:function(module,exports,__webpack_require__){var classof=__webpack_require__(\"QMMT\");var ITERATOR=__webpack_require__(\"UWiX\")(\"iterator\");var Iterators=__webpack_require__(\"SBuE\");module.exports=__webpack_require__(\"WEpk\").getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it[\"@@iterator\"]||Iterators[classof(it)]}},fXsU:function(module,exports,__webpack_require__){var anObject=__webpack_require__(\"5K7Z\");var get=__webpack_require__(\"fNZA\");module.exports=__webpack_require__(\"WEpk\").getIterator=function(it){var iterFn=get(it);if(typeof iterFn!=\"function\")throw TypeError(it+\" is not iterable!\");return anObject(iterFn.call(it))}},fpC5:function(module,exports,__webpack_require__){var dP=__webpack_require__(\"2faE\");var anObject=__webpack_require__(\"5K7Z\");var getKeys=__webpack_require__(\"w6GO\");module.exports=__webpack_require__(\"jmDH\")?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var keys=getKeys(Properties);var length=keys.length;var i=0;var P;while(length>i)dP.f(O,P=keys[i++],Properties[P]);return O}},fw2a:function(module,exports){exports.f=Object.getOwnPropertySymbols},\"g/sU\":function(module,exports,__webpack_require__){\"use strict\";__webpack_require__(\"Uv6z\");__webpack_require__(\"pZxE\");__webpack_require__(\"9r11\");__webpack_require__(\"KaSA\");__webpack_require__(\"z5Af\");__webpack_require__(\"o/0F\");__webpack_require__(\"AzFY\");__webpack_require__(\"y2cN\");__webpack_require__(\"7xuS\");\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */},g7Su:function(module,exports,__webpack_require__){var fails=__webpack_require__(\"0HDe\");var SPECIES=__webpack_require__(\"aXXJ\")(\"species\");module.exports=function(METHOD_NAME){return!fails(function(){var array=[];var constructor=array.constructor={};constructor[SPECIES]=function(){return{foo:1}};return array[METHOD_NAME](Boolean).foo!==1})}},gIEr:function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"species\")},gJLK:function(module,exports,__webpack_require__){var UNSCOPABLES=__webpack_require__(\"aXXJ\")(\"unscopables\");var create=__webpack_require__(\"tzov\");var hide=__webpack_require__(\"wBs/\");var ArrayPrototype=Array.prototype;if(ArrayPrototype[UNSCOPABLES]==undefined){hide(ArrayPrototype,UNSCOPABLES,create(null))}module.exports=function(key){ArrayPrototype[UNSCOPABLES][key]=true}},gYWy:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});function _interopDefault(ex){return ex&&typeof ex===\"object\"&&\"default\"in ex?ex[\"default\"]:ex}var firebase=_interopDefault(__webpack_require__(\"eq5/\"));\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var DEFAULT_HOST=\"firebasestorage.googleapis.com\";var CONFIG_STORAGE_BUCKET_KEY=\"storageBucket\";var DEFAULT_MAX_OPERATION_RETRY_TIME=2*60*1e3;var DEFAULT_MAX_UPLOAD_RETRY_TIME=10*60*100;var MIN_SAFE_INTEGER=-9007199254740991;\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var FirebaseStorageError=function(){function FirebaseStorageError(code,message){this.code_=prependCode(code);this.message_=\"Firebase Storage: \"+message;this.serverResponse_=null;this.name_=\"FirebaseError\"}FirebaseStorageError.prototype.codeProp=function(){return this.code};FirebaseStorageError.prototype.codeEquals=function(code){return prependCode(code)===this.codeProp()};FirebaseStorageError.prototype.serverResponseProp=function(){return this.serverResponse_};FirebaseStorageError.prototype.setServerResponseProp=function(serverResponse){this.serverResponse_=serverResponse};Object.defineProperty(FirebaseStorageError.prototype,\"name\",{get:function(){return this.name_},enumerable:true,configurable:true});Object.defineProperty(FirebaseStorageError.prototype,\"code\",{get:function(){return this.code_},enumerable:true,configurable:true});Object.defineProperty(FirebaseStorageError.prototype,\"message\",{get:function(){return this.message_},enumerable:true,configurable:true});Object.defineProperty(FirebaseStorageError.prototype,\"serverResponse\",{get:function(){return this.serverResponse_},enumerable:true,configurable:true});return FirebaseStorageError}();var Code={UNKNOWN:\"unknown\",OBJECT_NOT_FOUND:\"object-not-found\",BUCKET_NOT_FOUND:\"bucket-not-found\",PROJECT_NOT_FOUND:\"project-not-found\",QUOTA_EXCEEDED:\"quota-exceeded\",UNAUTHENTICATED:\"unauthenticated\",UNAUTHORIZED:\"unauthorized\",RETRY_LIMIT_EXCEEDED:\"retry-limit-exceeded\",INVALID_CHECKSUM:\"invalid-checksum\",CANCELED:\"canceled\",INVALID_EVENT_NAME:\"invalid-event-name\",INVALID_URL:\"invalid-url\",INVALID_DEFAULT_BUCKET:\"invalid-default-bucket\",NO_DEFAULT_BUCKET:\"no-default-bucket\",CANNOT_SLICE_BLOB:\"cannot-slice-blob\",SERVER_FILE_WRONG_SIZE:\"server-file-wrong-size\",NO_DOWNLOAD_URL:\"no-download-url\",INVALID_ARGUMENT:\"invalid-argument\",INVALID_ARGUMENT_COUNT:\"invalid-argument-count\",APP_DELETED:\"app-deleted\",INVALID_ROOT_OPERATION:\"invalid-root-operation\",INVALID_FORMAT:\"invalid-format\",INTERNAL_ERROR:\"internal-error\"};function prependCode(code){return\"storage/\"+code}function unknown(){var message=\"An unknown error occurred, please check the error payload for \"+\"server response.\";return new FirebaseStorageError(Code.UNKNOWN,message)}function objectNotFound(path){return new FirebaseStorageError(Code.OBJECT_NOT_FOUND,\"Object '\"+path+\"' does not exist.\")}function quotaExceeded(bucket){return new FirebaseStorageError(Code.QUOTA_EXCEEDED,\"Quota for bucket '\"+bucket+\"' exceeded, please view quota on \"+\"https://firebase.google.com/pricing/.\")}function unauthenticated(){var message=\"User is not authenticated, please authenticate using Firebase \"+\"Authentication and try again.\";return new FirebaseStorageError(Code.UNAUTHENTICATED,message)}function unauthorized(path){return new FirebaseStorageError(Code.UNAUTHORIZED,\"User does not have permission to access '\"+path+\"'.\")}function retryLimitExceeded(){return new FirebaseStorageError(Code.RETRY_LIMIT_EXCEEDED,\"Max retry time for operation exceeded, please try again.\")}function canceled(){return new FirebaseStorageError(Code.CANCELED,\"User canceled the upload/download.\")}function invalidUrl(url){return new FirebaseStorageError(Code.INVALID_URL,\"Invalid URL '\"+url+\"'.\")}function invalidDefaultBucket(bucket){return new FirebaseStorageError(Code.INVALID_DEFAULT_BUCKET,\"Invalid default bucket '\"+bucket+\"'.\")}function cannotSliceBlob(){return new FirebaseStorageError(Code.CANNOT_SLICE_BLOB,\"Cannot slice blob for upload. Please retry the upload.\")}function serverFileWrongSize(){return new FirebaseStorageError(Code.SERVER_FILE_WRONG_SIZE,\"Server recorded incorrect upload file size, please retry the upload.\")}function noDownloadURL(){return new FirebaseStorageError(Code.NO_DOWNLOAD_URL,\"The given file does not have any download URLs.\")}function invalidArgument(index,fnName,message){return new FirebaseStorageError(Code.INVALID_ARGUMENT,\"Invalid argument in `\"+fnName+\"` at index \"+index+\": \"+message)}function invalidArgumentCount(argMin,argMax,fnName,real){var countPart;var plural;if(argMin===argMax){countPart=argMin;plural=argMin===1?\"argument\":\"arguments\"}else{countPart=\"between \"+argMin+\" and \"+argMax;plural=\"arguments\"}return new FirebaseStorageError(Code.INVALID_ARGUMENT_COUNT,\"Invalid argument count in `\"+fnName+\"`: Expected \"+countPart+\" \"+plural+\", received \"+real+\".\")}function appDeleted(){return new FirebaseStorageError(Code.APP_DELETED,\"The Firebase app was deleted.\")}function invalidRootOperation(name){return new FirebaseStorageError(Code.INVALID_ROOT_OPERATION,\"The operation '\"+name+\"' cannot be performed on a root reference, create a non-root \"+\"reference using child, such as .child('file.png').\")}function invalidFormat(format,message){return new FirebaseStorageError(Code.INVALID_FORMAT,\"String does not match format '\"+format+\"': \"+message)}function internalError(message){throw new FirebaseStorageError(Code.INTERNAL_ERROR,\"Internal error: \"+message)}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var StringFormat={RAW:\"raw\",BASE64:\"base64\",BASE64URL:\"base64url\",DATA_URL:\"data_url\"};function formatValidator(stringFormat){switch(stringFormat){case StringFormat.RAW:case StringFormat.BASE64:case StringFormat.BASE64URL:case StringFormat.DATA_URL:return;default:throw\"Expected one of the event types: [\"+StringFormat.RAW+\", \"+StringFormat.BASE64+\", \"+StringFormat.BASE64URL+\", \"+StringFormat.DATA_URL+\"].\"}}var StringData=function(){function StringData(data,opt_contentType){this.data=data;this.contentType=opt_contentType||null}return StringData}();function dataFromString(format,string){switch(format){case StringFormat.RAW:return new StringData(utf8Bytes_(string));case StringFormat.BASE64:case StringFormat.BASE64URL:return new StringData(base64Bytes_(format,string));case StringFormat.DATA_URL:return new StringData(dataURLBytes_(string),dataURLContentType_(string))}throw unknown()}function utf8Bytes_(string){var b=[];for(var i=0;i<string.length;i++){var c=string.charCodeAt(i);if(c<=127){b.push(c)}else{if(c<=2047){b.push(192|c>>6,128|c&63)}else{if((c&64512)==55296){var valid=i<string.length-1&&(string.charCodeAt(i+1)&64512)==56320;if(!valid){b.push(239,191,189)}else{var hi=c;var lo=string.charCodeAt(++i);c=65536|(hi&1023)<<10|lo&1023;b.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63)}}else{if((c&64512)==56320){b.push(239,191,189)}else{b.push(224|c>>12,128|c>>6&63,128|c&63)}}}}}return new Uint8Array(b)}function percentEncodedBytes_(string){var decoded;try{decoded=decodeURIComponent(string)}catch(e){throw invalidFormat(StringFormat.DATA_URL,\"Malformed data URL.\")}return utf8Bytes_(decoded)}function base64Bytes_(format,string){switch(format){case StringFormat.BASE64:{var hasMinus=string.indexOf(\"-\")!==-1;var hasUnder=string.indexOf(\"_\")!==-1;if(hasMinus||hasUnder){var invalidChar=hasMinus?\"-\":\"_\";throw invalidFormat(format,\"Invalid character '\"+invalidChar+\"' found: is it base64url encoded?\")}break}case StringFormat.BASE64URL:{var hasPlus=string.indexOf(\"+\")!==-1;var hasSlash=string.indexOf(\"/\")!==-1;if(hasPlus||hasSlash){var invalidChar=hasPlus?\"+\":\"/\";throw invalidFormat(format,\"Invalid character '\"+invalidChar+\"' found: is it base64 encoded?\")}string=string.replace(/-/g,\"+\").replace(/_/g,\"/\");break}}var bytes;try{bytes=atob(string)}catch(e){throw invalidFormat(format,\"Invalid character found\")}var array=new Uint8Array(bytes.length);for(var i=0;i<bytes.length;i++){array[i]=bytes.charCodeAt(i)}return array}var DataURLParts=function(){function DataURLParts(dataURL){this.base64=false;this.contentType=null;var matches=dataURL.match(/^data:([^,]+)?,/);if(matches===null){throw invalidFormat(StringFormat.DATA_URL,\"Must be formatted 'data:[<mediatype>][;base64],<data>\")}var middle=matches[1]||null;if(middle!=null){this.base64=endsWith(middle,\";base64\");this.contentType=this.base64?middle.substring(0,middle.length-\";base64\".length):middle}this.rest=dataURL.substring(dataURL.indexOf(\",\")+1)}return DataURLParts}();function dataURLBytes_(string){var parts=new DataURLParts(string);if(parts.base64){return base64Bytes_(StringFormat.BASE64,parts.rest)}else{return percentEncodedBytes_(parts.rest)}}function dataURLContentType_(string){var parts=new DataURLParts(string);return parts.contentType}function endsWith(s,end){var longEnough=s.length>=end.length;if(!longEnough){return false}return s.substring(s.length-end.length)===end}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var TaskEvent={STATE_CHANGED:\"state_changed\"};var InternalTaskState={RUNNING:\"running\",PAUSING:\"pausing\",PAUSED:\"paused\",SUCCESS:\"success\",CANCELING:\"canceling\",CANCELED:\"canceled\",ERROR:\"error\"};var TaskState={RUNNING:\"running\",PAUSED:\"paused\",SUCCESS:\"success\",CANCELED:\"canceled\",ERROR:\"error\"};function taskStateFromInternalTaskState(state){switch(state){case InternalTaskState.RUNNING:case InternalTaskState.PAUSING:case InternalTaskState.CANCELING:return TaskState.RUNNING;case InternalTaskState.PAUSED:return TaskState.PAUSED;case InternalTaskState.SUCCESS:return TaskState.SUCCESS;case InternalTaskState.CANCELED:return TaskState.CANCELED;case InternalTaskState.ERROR:return TaskState.ERROR;default:return TaskState.ERROR}}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function contains(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}function forEach(obj,f){for(var key in obj){if(contains(obj,key)){f(key,obj[key])}}}function clone(obj){if(obj==null){return{}}var c={};forEach(obj,function(key,val){c[key]=val});return c}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function make(resolver){return new Promise(resolver)}function resolve(value){return Promise.resolve(value)}function reject(error){return Promise.reject(error)}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function isDef(p){return p!=null}function isJustDef(p){return p!==void 0}function isFunction(p){return typeof p===\"function\"}function isObject(p){return typeof p===\"object\"}function isNonNullObject(p){return isObject(p)&&p!==null}function isNonArrayObject(p){return isObject(p)&&!Array.isArray(p)}function isString(p){return typeof p===\"string\"||p instanceof String}function isNumber(p){return typeof p===\"number\"||p instanceof Number}function isNativeBlob(p){return isNativeBlobDefined()&&p instanceof Blob}function isNativeBlobDefined(){return typeof Blob!==\"undefined\"}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var ErrorCode;(function(ErrorCode){ErrorCode[ErrorCode[\"NO_ERROR\"]=0]=\"NO_ERROR\";ErrorCode[ErrorCode[\"NETWORK_ERROR\"]=1]=\"NETWORK_ERROR\";ErrorCode[ErrorCode[\"ABORT\"]=2]=\"ABORT\"})(ErrorCode||(ErrorCode={}));\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var NetworkXhrIo=function(){function NetworkXhrIo(){var _this=this;this.sent_=false;this.xhr_=new XMLHttpRequest;this.errorCode_=ErrorCode.NO_ERROR;this.sendPromise_=make(function(resolve,reject){_this.xhr_.addEventListener(\"abort\",function(event){_this.errorCode_=ErrorCode.ABORT;resolve(_this)});_this.xhr_.addEventListener(\"error\",function(event){_this.errorCode_=ErrorCode.NETWORK_ERROR;resolve(_this)});_this.xhr_.addEventListener(\"load\",function(event){resolve(_this)})})}NetworkXhrIo.prototype.send=function(url,method,opt_body,opt_headers){var _this=this;if(this.sent_){throw internalError(\"cannot .send() more than once\")}this.sent_=true;this.xhr_.open(method,url,true);if(isDef(opt_headers)){var headers=opt_headers;forEach(headers,function(key,val){_this.xhr_.setRequestHeader(key,val.toString())})}if(isDef(opt_body)){this.xhr_.send(opt_body)}else{this.xhr_.send()}return this.sendPromise_};NetworkXhrIo.prototype.getErrorCode=function(){if(!this.sent_){throw internalError(\"cannot .getErrorCode() before sending\")}return this.errorCode_};NetworkXhrIo.prototype.getStatus=function(){if(!this.sent_){throw internalError(\"cannot .getStatus() before sending\")}try{return this.xhr_.status}catch(e){return-1}};NetworkXhrIo.prototype.getResponseText=function(){if(!this.sent_){throw internalError(\"cannot .getResponseText() before sending\")}return this.xhr_.responseText};NetworkXhrIo.prototype.abort=function(){this.xhr_.abort()};NetworkXhrIo.prototype.getResponseHeader=function(header){return this.xhr_.getResponseHeader(header)};NetworkXhrIo.prototype.addUploadProgressListener=function(listener){if(isDef(this.xhr_.upload)){this.xhr_.upload.addEventListener(\"progress\",listener)}};NetworkXhrIo.prototype.removeUploadProgressListener=function(listener){if(isDef(this.xhr_.upload)){this.xhr_.upload.removeEventListener(\"progress\",listener)}};return NetworkXhrIo}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var XhrIoPool=function(){function XhrIoPool(){}XhrIoPool.prototype.createXhrIo=function(){return new NetworkXhrIo};return XhrIoPool}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function jsonObjectOrNull(s){var obj;try{obj=JSON.parse(s)}catch(e){return null}if(isNonArrayObject(obj)){return obj}else{return null}}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Location=function(){function Location(bucket,path){this.bucket=bucket;this.path_=path}Object.defineProperty(Location.prototype,\"path\",{get:function(){return this.path_},enumerable:true,configurable:true});Location.prototype.fullServerUrl=function(){var encode=encodeURIComponent;return\"/b/\"+encode(this.bucket)+\"/o/\"+encode(this.path)};Location.prototype.bucketOnlyServerUrl=function(){var encode=encodeURIComponent;return\"/b/\"+encode(this.bucket)+\"/o\"};Location.makeFromBucketSpec=function(bucketString){var bucketLocation;try{bucketLocation=Location.makeFromUrl(bucketString)}catch(e){return new Location(bucketString,\"\")}if(bucketLocation.path===\"\"){return bucketLocation}else{throw invalidDefaultBucket(bucketString)}};Location.makeFromUrl=function(url){var location=null;var bucketDomain=\"([A-Za-z0-9.\\\\-_]+)\";function gsModify(loc){if(loc.path.charAt(loc.path.length-1)===\"/\"){loc.path_=loc.path_.slice(0,-1)}}var gsPath=\"(/(.*))?$\";var path=\"(/([^?#]*).*)?$\";var gsRegex=new RegExp(\"^gs://\"+bucketDomain+gsPath,\"i\");var gsIndices={bucket:1,path:3};function httpModify(loc){loc.path_=decodeURIComponent(loc.path)}var version=\"v[A-Za-z0-9_]+\";var hostRegex=DEFAULT_HOST.replace(/[.]/g,\"\\\\.\");var httpRegex=new RegExp(\"^https?://\"+hostRegex+\"/\"+version+\"/b/\"+bucketDomain+\"/o\"+path,\"i\");var httpIndices={bucket:1,path:3};var groups=[{regex:gsRegex,indices:gsIndices,postModify:gsModify},{regex:httpRegex,indices:httpIndices,postModify:httpModify}];for(var i=0;i<groups.length;i++){var group=groups[i];var captures=group.regex.exec(url);if(captures){var bucketValue=captures[group.indices.bucket];var pathValue=captures[group.indices.path];if(!pathValue){pathValue=\"\"}location=new Location(bucketValue,pathValue);group.postModify(location);break}}if(location==null){throw invalidUrl(url)}return location};return Location}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function parent(path){if(path.length==0){return null}var index=path.lastIndexOf(\"/\");if(index===-1){return\"\"}var newPath=path.slice(0,index);return newPath}function child(path,childPath){var canonicalChildPath=childPath.split(\"/\").filter(function(component){return component.length>0}).join(\"/\");if(path.length===0){return canonicalChildPath}else{return path+\"/\"+canonicalChildPath}}function lastComponent(path){var index=path.lastIndexOf(\"/\",path.length-2);if(index===-1){return path}else{return path.slice(index+1)}}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function makeUrl(urlPart){return\"https://\"+DEFAULT_HOST+\"/v0\"+urlPart}function makeQueryString(params){var encode=encodeURIComponent;var queryPart=\"?\";forEach(params,function(key,val){var nextPart=encode(key)+\"=\"+encode(val);queryPart=queryPart+nextPart+\"&\"});queryPart=queryPart.slice(0,-1);return queryPart}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function noXform_(metadata,value){return value}var Mapping=function(){function Mapping(server,opt_local,opt_writable,opt_xform){this.server=server;this.local=opt_local||server;this.writable=!!opt_writable;this.xform=opt_xform||noXform_}return Mapping}();var mappings_=null;function xformPath(fullPath){var valid=isString(fullPath);if(!valid||fullPath.length<2){return fullPath}else{fullPath=fullPath;return lastComponent(fullPath)}}function getMappings(){if(mappings_){return mappings_}var mappings=[];mappings.push(new Mapping(\"bucket\"));mappings.push(new Mapping(\"generation\"));mappings.push(new Mapping(\"metageneration\"));mappings.push(new Mapping(\"name\",\"fullPath\",true));function mappingsXformPath(metadata,fullPath){return xformPath(fullPath)}var nameMapping=new Mapping(\"name\");nameMapping.xform=mappingsXformPath;mappings.push(nameMapping);function xformSize(metadata,size){if(isDef(size)){return+size}else{return size}}var sizeMapping=new Mapping(\"size\");sizeMapping.xform=xformSize;mappings.push(sizeMapping);mappings.push(new Mapping(\"timeCreated\"));mappings.push(new Mapping(\"updated\"));mappings.push(new Mapping(\"md5Hash\",null,true));mappings.push(new Mapping(\"cacheControl\",null,true));mappings.push(new Mapping(\"contentDisposition\",null,true));mappings.push(new Mapping(\"contentEncoding\",null,true));mappings.push(new Mapping(\"contentLanguage\",null,true));mappings.push(new Mapping(\"contentType\",null,true));mappings.push(new Mapping(\"metadata\",\"customMetadata\",true));mappings_=mappings;return mappings_}function addRef(metadata,authWrapper){function generateRef(){var bucket=metadata[\"bucket\"];var path=metadata[\"fullPath\"];var loc=new Location(bucket,path);return authWrapper.makeStorageReference(loc)}Object.defineProperty(metadata,\"ref\",{get:generateRef})}function fromResource(authWrapper,resource,mappings){var metadata={};metadata[\"type\"]=\"file\";var len=mappings.length;for(var i=0;i<len;i++){var mapping=mappings[i];metadata[mapping.local]=mapping.xform(metadata,resource[mapping.server])}addRef(metadata,authWrapper);return metadata}function fromResourceString(authWrapper,resourceString,mappings){var obj=jsonObjectOrNull(resourceString);if(obj===null){return null}var resource=obj;return fromResource(authWrapper,resource,mappings)}function downloadUrlFromResourceString(metadata,resourceString){var obj=jsonObjectOrNull(resourceString);if(obj===null){return null}if(!isString(obj[\"downloadTokens\"])){return null}var tokens=obj[\"downloadTokens\"];if(tokens.length===0){return null}var encode=encodeURIComponent;var tokensList=tokens.split(\",\");var urls=tokensList.map(function(token){var bucket=metadata[\"bucket\"];var path=metadata[\"fullPath\"];var urlPart=\"/b/\"+encode(bucket)+\"/o/\"+encode(path);var base=makeUrl(urlPart);var queryString=makeQueryString({alt:\"media\",token:token});return base+queryString});return urls[0]}function toResourceString(metadata,mappings){var resource={};var len=mappings.length;for(var i=0;i<len;i++){var mapping=mappings[i];if(mapping.writable){resource[mapping.server]=metadata[mapping.local]}}return JSON.stringify(resource)}function metadataValidator(p){var validType=p&&isObject(p);if(!validType){throw\"Expected Metadata object.\"}for(var key in p){var val=p[key];if(key===\"customMetadata\"){if(!isObject(val)){throw\"Expected object for 'customMetadata' mapping.\"}}else{if(isNonNullObject(val)){throw\"Mapping for '\"+key+\"' cannot be an object.\"}}}}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function validate(name,specs,passed){var minArgs=specs.length;var maxArgs=specs.length;for(var i=0;i<specs.length;i++){if(specs[i].optional){minArgs=i;break}}var validLength=minArgs<=passed.length&&passed.length<=maxArgs;if(!validLength){throw invalidArgumentCount(minArgs,maxArgs,name,passed.length)}for(var i=0;i<passed.length;i++){try{specs[i].validator(passed[i])}catch(e){if(e instanceof Error){throw invalidArgument(i,name,e.message)}else{throw invalidArgument(i,name,e)}}}}var ArgSpec=function(){function ArgSpec(validator,opt_optional){var self=this;this.validator=function(p){if(self.optional&&!isJustDef(p)){return}validator(p)};this.optional=!!opt_optional}return ArgSpec}();function and_(v1,v2){return function(p){v1(p);v2(p)}}function stringSpec(opt_validator,opt_optional){function stringValidator(p){if(!isString(p)){throw\"Expected string.\"}}var validator;if(opt_validator){validator=and_(stringValidator,opt_validator)}else{validator=stringValidator}return new ArgSpec(validator,opt_optional)}function uploadDataSpec(){function validator(p){var valid=p instanceof Uint8Array||p instanceof ArrayBuffer||isNativeBlobDefined()&&p instanceof Blob;if(!valid){throw\"Expected Blob or File.\"}}return new ArgSpec(validator)}function metadataSpec(opt_optional){return new ArgSpec(metadataValidator,opt_optional)}function nonNegativeNumberSpec(){function validator(p){var valid=isNumber(p)&&p>=0;if(!valid){throw\"Expected a number 0 or greater.\"}}return new ArgSpec(validator)}function looseObjectSpec(opt_validator,opt_optional){function validator(p){var isLooseObject=p===null||isDef(p)&&p instanceof Object;if(!isLooseObject){throw\"Expected an Object.\"}if(opt_validator!==undefined&&opt_validator!==null){opt_validator(p)}}return new ArgSpec(validator,opt_optional)}function nullFunctionSpec(opt_optional){function validator(p){var valid=p===null||isFunction(p);if(!valid){throw\"Expected a Function.\"}}return new ArgSpec(validator,opt_optional)}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function getBlobBuilder(){if(typeof BlobBuilder!==\"undefined\"){return BlobBuilder}else if(typeof WebKitBlobBuilder!==\"undefined\"){return WebKitBlobBuilder}else{return undefined}}function getBlob(){var var_args=[];for(var _i=0;_i<arguments.length;_i++){var_args[_i]=arguments[_i]}var BlobBuilder=getBlobBuilder();if(BlobBuilder!==undefined){var bb=new BlobBuilder;for(var i=0;i<var_args.length;i++){bb.append(var_args[i])}return bb.getBlob()}else{if(isNativeBlobDefined()){return new Blob(var_args)}else{throw Error(\"This browser doesn't seem to support creating Blobs\")}}}function sliceBlob(blob,start,end){if(blob.webkitSlice){return blob.webkitSlice(start,end)}else if(blob.mozSlice){return blob.mozSlice(start,end)}else if(blob.slice){return blob.slice(start,end)}return null}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var FbsBlob=function(){function FbsBlob(data,opt_elideCopy){var size=0;var blobType=\"\";if(isNativeBlob(data)){this.data_=data;size=data.size;blobType=data.type}else if(data instanceof ArrayBuffer){if(opt_elideCopy){this.data_=new Uint8Array(data)}else{this.data_=new Uint8Array(data.byteLength);this.data_.set(new Uint8Array(data))}size=this.data_.length}else if(data instanceof Uint8Array){if(opt_elideCopy){this.data_=data}else{this.data_=new Uint8Array(data.length);this.data_.set(data)}size=data.length}this.size_=size;this.type_=blobType}FbsBlob.prototype.size=function(){return this.size_};FbsBlob.prototype.type=function(){return this.type_};FbsBlob.prototype.slice=function(startByte,endByte){if(isNativeBlob(this.data_)){var realBlob=this.data_;var sliced=sliceBlob(realBlob,startByte,endByte);if(sliced===null){return null}return new FbsBlob(sliced)}else{var slice=new Uint8Array(this.data_.buffer,startByte,endByte-startByte);return new FbsBlob(slice,true)}};FbsBlob.getBlob=function(){var var_args=[];for(var _i=0;_i<arguments.length;_i++){var_args[_i]=arguments[_i]}if(isNativeBlobDefined()){var blobby=var_args.map(function(val){if(val instanceof FbsBlob){return val.data_}else{return val}});return new FbsBlob(getBlob.apply(null,blobby))}else{var uint8Arrays=var_args.map(function(val){if(isString(val)){return dataFromString(StringFormat.RAW,val).data}else{return val.data_}});var finalLength_1=0;uint8Arrays.forEach(function(array){finalLength_1+=array.byteLength});var merged_1=new Uint8Array(finalLength_1);var index_1=0;uint8Arrays.forEach(function(array){for(var i=0;i<array.length;i++){merged_1[index_1++]=array[i]}});return new FbsBlob(merged_1,true)}};FbsBlob.prototype.uploadData=function(){return this.data_};return FbsBlob}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function contains$1(array,elem){return array.indexOf(elem)!==-1}function clone$1(arraylike){return Array.prototype.slice.call(arraylike)}function remove(array,elem){var i=array.indexOf(elem);if(i!==-1){array.splice(i,1)}}var RequestInfo=function(){function RequestInfo(url,method,handler,timeout){this.url=url;this.method=method;this.handler=handler;this.timeout=timeout;this.urlParams={};this.headers={};this.body=null;this.errorHandler=null;this.progressCallback=null;this.successCodes=[200];this.additionalRetryCodes=[]}return RequestInfo}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function handlerCheck(cndn){if(!cndn){throw unknown()}}function metadataHandler(authWrapper,mappings){function handler(xhr,text){var metadata=fromResourceString(authWrapper,text,mappings);handlerCheck(metadata!==null);return metadata}return handler}function downloadUrlHandler(authWrapper,mappings){function handler(xhr,text){var metadata=fromResourceString(authWrapper,text,mappings);handlerCheck(metadata!==null);return downloadUrlFromResourceString(metadata,text)}return handler}function sharedErrorHandler(location){function errorHandler(xhr,err){var newErr;if(xhr.getStatus()===401){newErr=unauthenticated()}else{if(xhr.getStatus()===402){newErr=quotaExceeded(location.bucket)}else{if(xhr.getStatus()===403){newErr=unauthorized(location.path)}else{newErr=err}}}newErr.setServerResponseProp(err.serverResponseProp());return newErr}return errorHandler}function objectErrorHandler(location){var shared=sharedErrorHandler(location);function errorHandler(xhr,err){var newErr=shared(xhr,err);if(xhr.getStatus()===404){newErr=objectNotFound(location.path)}newErr.setServerResponseProp(err.serverResponseProp());return newErr}return errorHandler}function getMetadata(authWrapper,location,mappings){var urlPart=location.fullServerUrl();var url=makeUrl(urlPart);var method=\"GET\";var timeout=authWrapper.maxOperationRetryTime();var requestInfo=new RequestInfo(url,method,metadataHandler(authWrapper,mappings),timeout);requestInfo.errorHandler=objectErrorHandler(location);return requestInfo}function getDownloadUrl(authWrapper,location,mappings){var urlPart=location.fullServerUrl();var url=makeUrl(urlPart);var method=\"GET\";var timeout=authWrapper.maxOperationRetryTime();var requestInfo=new RequestInfo(url,method,downloadUrlHandler(authWrapper,mappings),timeout);requestInfo.errorHandler=objectErrorHandler(location);return requestInfo}function updateMetadata(authWrapper,location,metadata,mappings){var urlPart=location.fullServerUrl();var url=makeUrl(urlPart);var method=\"PATCH\";var body=toResourceString(metadata,mappings);var headers={\"Content-Type\":\"application/json; charset=utf-8\"};var timeout=authWrapper.maxOperationRetryTime();var requestInfo=new RequestInfo(url,method,metadataHandler(authWrapper,mappings),timeout);requestInfo.headers=headers;requestInfo.body=body;requestInfo.errorHandler=objectErrorHandler(location);return requestInfo}function deleteObject(authWrapper,location){var urlPart=location.fullServerUrl();var url=makeUrl(urlPart);var method=\"DELETE\";var timeout=authWrapper.maxOperationRetryTime();function handler(xhr,text){}var requestInfo=new RequestInfo(url,method,handler,timeout);requestInfo.successCodes=[200,204];requestInfo.errorHandler=objectErrorHandler(location);return requestInfo}function determineContentType_(metadata,blob){return metadata&&metadata[\"contentType\"]||blob&&blob.type()||\"application/octet-stream\"}function metadataForUpload_(location,blob,opt_metadata){var metadata=clone(opt_metadata);metadata[\"fullPath\"]=location.path;metadata[\"size\"]=blob.size();if(!metadata[\"contentType\"]){metadata[\"contentType\"]=determineContentType_(null,blob)}return metadata}function multipartUpload(authWrapper,location,mappings,blob,opt_metadata){var urlPart=location.bucketOnlyServerUrl();var headers={\"X-Goog-Upload-Protocol\":\"multipart\"};function genBoundary(){var str=\"\";for(var i=0;i<2;i++){str=str+Math.random().toString().slice(2)}return str}var boundary=genBoundary();headers[\"Content-Type\"]=\"multipart/related; boundary=\"+boundary;var metadata=metadataForUpload_(location,blob,opt_metadata);var metadataString=toResourceString(metadata,mappings);var preBlobPart=\"--\"+boundary+\"\\r\\n\"+\"Content-Type: application/json; charset=utf-8\\r\\n\\r\\n\"+metadataString+\"\\r\\n--\"+boundary+\"\\r\\n\"+\"Content-Type: \"+metadata[\"contentType\"]+\"\\r\\n\\r\\n\";var postBlobPart=\"\\r\\n--\"+boundary+\"--\";var body=FbsBlob.getBlob(preBlobPart,blob,postBlobPart);if(body===null){throw cannotSliceBlob()}var urlParams={name:metadata[\"fullPath\"]};var url=makeUrl(urlPart);var method=\"POST\";var timeout=authWrapper.maxUploadRetryTime();var requestInfo=new RequestInfo(url,method,metadataHandler(authWrapper,mappings),timeout);requestInfo.urlParams=urlParams;requestInfo.headers=headers;requestInfo.body=body.uploadData();requestInfo.errorHandler=sharedErrorHandler(location);return requestInfo}var ResumableUploadStatus=function(){function ResumableUploadStatus(current,total,finalized,metadata){this.current=current;this.total=total;this.finalized=!!finalized;this.metadata=metadata||null}return ResumableUploadStatus}();function checkResumeHeader_(xhr,opt_allowed){var status;try{status=xhr.getResponseHeader(\"X-Goog-Upload-Status\")}catch(e){handlerCheck(false)}var allowed=opt_allowed||[\"active\"];handlerCheck(contains$1(allowed,status));return status}function createResumableUpload(authWrapper,location,mappings,blob,opt_metadata){var urlPart=location.bucketOnlyServerUrl();var metadata=metadataForUpload_(location,blob,opt_metadata);var urlParams={name:metadata[\"fullPath\"]};var url=makeUrl(urlPart);var method=\"POST\";var headers={\"X-Goog-Upload-Protocol\":\"resumable\",\"X-Goog-Upload-Command\":\"start\",\"X-Goog-Upload-Header-Content-Length\":blob.size(),\"X-Goog-Upload-Header-Content-Type\":metadata[\"contentType\"],\"Content-Type\":\"application/json; charset=utf-8\"};var body=toResourceString(metadata,mappings);var timeout=authWrapper.maxUploadRetryTime();function handler(xhr,text){checkResumeHeader_(xhr);var url;try{url=xhr.getResponseHeader(\"X-Goog-Upload-URL\")}catch(e){handlerCheck(false)}handlerCheck(isString(url));return url}var requestInfo=new RequestInfo(url,method,handler,timeout);requestInfo.urlParams=urlParams;requestInfo.headers=headers;requestInfo.body=body;requestInfo.errorHandler=sharedErrorHandler(location);return requestInfo}function getResumableUploadStatus(authWrapper,location,url,blob){var headers={\"X-Goog-Upload-Command\":\"query\"};function handler(xhr,text){var status=checkResumeHeader_(xhr,[\"active\",\"final\"]);var sizeString;try{sizeString=xhr.getResponseHeader(\"X-Goog-Upload-Size-Received\")}catch(e){handlerCheck(false)}var size=parseInt(sizeString,10);handlerCheck(!isNaN(size));return new ResumableUploadStatus(size,blob.size(),status===\"final\")}var method=\"POST\";var timeout=authWrapper.maxUploadRetryTime();var requestInfo=new RequestInfo(url,method,handler,timeout);requestInfo.headers=headers;requestInfo.errorHandler=sharedErrorHandler(location);return requestInfo}var resumableUploadChunkSize=256*1024;function continueResumableUpload(location,authWrapper,url,blob,chunkSize,mappings,opt_status,opt_progressCallback){var status=new ResumableUploadStatus(0,0);if(opt_status){status.current=opt_status.current;status.total=opt_status.total}else{status.current=0;status.total=blob.size()}if(blob.size()!==status.total){throw serverFileWrongSize()}var bytesLeft=status.total-status.current;var bytesToUpload=bytesLeft;if(chunkSize>0){bytesToUpload=Math.min(bytesToUpload,chunkSize)}var startByte=status.current;var endByte=startByte+bytesToUpload;var uploadCommand=bytesToUpload===bytesLeft?\"upload, finalize\":\"upload\";var headers={\"X-Goog-Upload-Command\":uploadCommand,\"X-Goog-Upload-Offset\":status.current};var body=blob.slice(startByte,endByte);if(body===null){throw cannotSliceBlob()}function handler(xhr,text){var uploadStatus=checkResumeHeader_(xhr,[\"active\",\"final\"]);var newCurrent=status.current+bytesToUpload;var size=blob.size();var metadata;if(uploadStatus===\"final\"){metadata=metadataHandler(authWrapper,mappings)(xhr,text)}else{metadata=null}return new ResumableUploadStatus(newCurrent,size,uploadStatus===\"final\",metadata)}var method=\"POST\";var timeout=authWrapper.maxUploadRetryTime();var requestInfo=new RequestInfo(url,method,handler,timeout);requestInfo.headers=headers;requestInfo.body=body.uploadData();requestInfo.progressCallback=opt_progressCallback||null;requestInfo.errorHandler=sharedErrorHandler(location);return requestInfo}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Observer=function(){function Observer(nextOrObserver,opt_error,opt_complete){var asFunctions=isFunction(nextOrObserver)||isDef(opt_error)||isDef(opt_complete);if(asFunctions){this.next=nextOrObserver;this.error=opt_error||null;this.complete=opt_complete||null}else{var observer=nextOrObserver;this.next=observer.next||null;this.error=observer.error||null;this.complete=observer.complete||null}}return Observer}();var UploadTaskSnapshot=function(){function UploadTaskSnapshot(bytesTransferred,totalBytes,state,metadata,task,ref){this.bytesTransferred=bytesTransferred;this.totalBytes=totalBytes;this.state=state;this.metadata=metadata;this.task=task;this.ref=ref}return UploadTaskSnapshot}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function async(f){return function(){var argsToForward=[];for(var _i=0;_i<arguments.length;_i++){argsToForward[_i]=arguments[_i]}resolve(true).then(function(){f.apply(null,argsToForward)})}}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var UploadTask=function(){function UploadTask(ref,authWrapper,location,mappings,blob,metadata){if(metadata===void 0){metadata=null}var _this=this;this.transferred_=0;this.needToFetchStatus_=false;this.needToFetchMetadata_=false;this.observers_=[];this.error_=null;this.uploadUrl_=null;this.request_=null;this.chunkMultiplier_=1;this.resolve_=null;this.reject_=null;this.ref_=ref;this.authWrapper_=authWrapper;this.location_=location;this.blob_=blob;this.metadata_=metadata;this.mappings_=mappings;this.resumable_=this.shouldDoResumable_(this.blob_);this.state_=InternalTaskState.RUNNING;this.errorHandler_=function(error){_this.request_=null;_this.chunkMultiplier_=1;if(error.codeEquals(Code.CANCELED)){_this.needToFetchStatus_=true;_this.completeTransitions_()}else{_this.error_=error;_this.transition_(InternalTaskState.ERROR)}};this.metadataErrorHandler_=function(error){_this.request_=null;if(error.codeEquals(Code.CANCELED)){_this.completeTransitions_()}else{_this.error_=error;_this.transition_(InternalTaskState.ERROR)}};this.promise_=make(function(resolve,reject){_this.resolve_=resolve;_this.reject_=reject;_this.start_()});this.promise_.then(null,function(){})}UploadTask.prototype.makeProgressCallback_=function(){var _this=this;var sizeBefore=this.transferred_;return function(loaded,total){_this.updateProgress_(sizeBefore+loaded)}};UploadTask.prototype.shouldDoResumable_=function(blob){return blob.size()>256*1024};UploadTask.prototype.start_=function(){if(this.state_!==InternalTaskState.RUNNING){return}if(this.request_!==null){return}if(this.resumable_){if(this.uploadUrl_===null){this.createResumable_()}else{if(this.needToFetchStatus_){this.fetchStatus_()}else{if(this.needToFetchMetadata_){this.fetchMetadata_()}else{this.continueUpload_()}}}}else{this.oneShotUpload_()}};UploadTask.prototype.resolveToken_=function(callback){var _this=this;this.authWrapper_.getAuthToken().then(function(authToken){switch(_this.state_){case InternalTaskState.RUNNING:callback(authToken);break;case InternalTaskState.CANCELING:_this.transition_(InternalTaskState.CANCELED);break;case InternalTaskState.PAUSING:_this.transition_(InternalTaskState.PAUSED);break;default:}})};UploadTask.prototype.createResumable_=function(){var _this=this;this.resolveToken_(function(authToken){var requestInfo=createResumableUpload(_this.authWrapper_,_this.location_,_this.mappings_,_this.blob_,_this.metadata_);var createRequest=_this.authWrapper_.makeRequest(requestInfo,authToken);_this.request_=createRequest;createRequest.getPromise().then(function(url){_this.request_=null;_this.uploadUrl_=url;_this.needToFetchStatus_=false;_this.completeTransitions_()},_this.errorHandler_)})};UploadTask.prototype.fetchStatus_=function(){var _this=this;var url=this.uploadUrl_;this.resolveToken_(function(authToken){var requestInfo=getResumableUploadStatus(_this.authWrapper_,_this.location_,url,_this.blob_);var statusRequest=_this.authWrapper_.makeRequest(requestInfo,authToken);_this.request_=statusRequest;statusRequest.getPromise().then(function(status){status=status;_this.request_=null;_this.updateProgress_(status.current);_this.needToFetchStatus_=false;if(status.finalized){_this.needToFetchMetadata_=true}_this.completeTransitions_()},_this.errorHandler_)})};UploadTask.prototype.continueUpload_=function(){var _this=this;var chunkSize=resumableUploadChunkSize*this.chunkMultiplier_;var status=new ResumableUploadStatus(this.transferred_,this.blob_.size());var url=this.uploadUrl_;this.resolveToken_(function(authToken){var requestInfo;try{requestInfo=continueResumableUpload(_this.location_,_this.authWrapper_,url,_this.blob_,chunkSize,_this.mappings_,status,_this.makeProgressCallback_())}catch(e){_this.error_=e;_this.transition_(InternalTaskState.ERROR);return}var uploadRequest=_this.authWrapper_.makeRequest(requestInfo,authToken);_this.request_=uploadRequest;uploadRequest.getPromise().then(function(newStatus){_this.increaseMultiplier_();_this.request_=null;_this.updateProgress_(newStatus.current);if(newStatus.finalized){_this.metadata_=newStatus.metadata;_this.transition_(InternalTaskState.SUCCESS)}else{_this.completeTransitions_()}},_this.errorHandler_)})};UploadTask.prototype.increaseMultiplier_=function(){var currentSize=resumableUploadChunkSize*this.chunkMultiplier_;if(currentSize<32*1024*1024){this.chunkMultiplier_*=2}};UploadTask.prototype.fetchMetadata_=function(){var _this=this;this.resolveToken_(function(authToken){var requestInfo=getMetadata(_this.authWrapper_,_this.location_,_this.mappings_);var metadataRequest=_this.authWrapper_.makeRequest(requestInfo,authToken);_this.request_=metadataRequest;metadataRequest.getPromise().then(function(metadata){_this.request_=null;_this.metadata_=metadata;_this.transition_(InternalTaskState.SUCCESS)},_this.metadataErrorHandler_)})};UploadTask.prototype.oneShotUpload_=function(){var _this=this;this.resolveToken_(function(authToken){var requestInfo=multipartUpload(_this.authWrapper_,_this.location_,_this.mappings_,_this.blob_,_this.metadata_);var multipartRequest=_this.authWrapper_.makeRequest(requestInfo,authToken);_this.request_=multipartRequest;multipartRequest.getPromise().then(function(metadata){_this.request_=null;_this.metadata_=metadata;_this.updateProgress_(_this.blob_.size());_this.transition_(InternalTaskState.SUCCESS)},_this.errorHandler_)})};UploadTask.prototype.updateProgress_=function(transferred){var old=this.transferred_;this.transferred_=transferred;if(this.transferred_!==old){this.notifyObservers_()}};UploadTask.prototype.transition_=function(state){if(this.state_===state){return}switch(state){case InternalTaskState.CANCELING:this.state_=state;if(this.request_!==null){this.request_.cancel()}break;case InternalTaskState.PAUSING:this.state_=state;if(this.request_!==null){this.request_.cancel()}break;case InternalTaskState.RUNNING:var wasPaused=this.state_===InternalTaskState.PAUSED;this.state_=state;if(wasPaused){this.notifyObservers_();this.start_()}break;case InternalTaskState.PAUSED:this.state_=state;this.notifyObservers_();break;case InternalTaskState.CANCELED:this.error_=canceled();this.state_=state;this.notifyObservers_();break;case InternalTaskState.ERROR:this.state_=state;this.notifyObservers_();break;case InternalTaskState.SUCCESS:this.state_=state;this.notifyObservers_();break}};UploadTask.prototype.completeTransitions_=function(){switch(this.state_){case InternalTaskState.PAUSING:this.transition_(InternalTaskState.PAUSED);break;case InternalTaskState.CANCELING:this.transition_(InternalTaskState.CANCELED);break;case InternalTaskState.RUNNING:this.start_();break;default:break}};Object.defineProperty(UploadTask.prototype,\"snapshot\",{get:function(){var externalState=taskStateFromInternalTaskState(this.state_);return new UploadTaskSnapshot(this.transferred_,this.blob_.size(),externalState,this.metadata_,this,this.ref_)},enumerable:true,configurable:true});UploadTask.prototype.on=function(type,nextOrObserver,error,completed){if(nextOrObserver===void 0){nextOrObserver=undefined}if(error===void 0){error=undefined}if(completed===void 0){completed=undefined}function typeValidator(_p){if(type!==TaskEvent.STATE_CHANGED){throw\"Expected one of the event types: [\"+TaskEvent.STATE_CHANGED+\"].\"}}var nextOrObserverMessage=\"Expected a function or an Object with one of \"+\"`next`, `error`, `complete` properties.\";var nextValidator=nullFunctionSpec(true).validator;var observerValidator=looseObjectSpec(null,true).validator;function nextOrObserverValidator(p){try{nextValidator(p);return}catch(e){}try{observerValidator(p);var anyDefined=isJustDef(p[\"next\"])||isJustDef(p[\"error\"])||isJustDef(p[\"complete\"]);if(!anyDefined){throw\"\"}return}catch(e){throw nextOrObserverMessage}}var specs=[stringSpec(typeValidator),looseObjectSpec(nextOrObserverValidator,true),nullFunctionSpec(true),nullFunctionSpec(true)];validate(\"on\",specs,arguments);var self=this;function makeBinder(specs){function binder(nextOrObserver,error,opt_complete){if(specs!==null){validate(\"on\",specs,arguments)}var observer=new Observer(nextOrObserver,error,completed);self.addObserver_(observer);return function(){self.removeObserver_(observer)}}return binder}function binderNextOrObserverValidator(p){if(p===null){throw nextOrObserverMessage}nextOrObserverValidator(p)}var binderSpecs=[looseObjectSpec(binderNextOrObserverValidator),nullFunctionSpec(true),nullFunctionSpec(true)];var typeOnly=!(isJustDef(nextOrObserver)||isJustDef(error)||isJustDef(completed));if(typeOnly){return makeBinder(binderSpecs)}else{return makeBinder(null)(nextOrObserver,error,completed)}};UploadTask.prototype.then=function(onFulfilled,onRejected){return this.promise_.then(onFulfilled,onRejected)};UploadTask.prototype.catch=function(onRejected){return this.then(null,onRejected)};UploadTask.prototype.addObserver_=function(observer){this.observers_.push(observer);this.notifyObserver_(observer)};UploadTask.prototype.removeObserver_=function(observer){remove(this.observers_,observer)};UploadTask.prototype.notifyObservers_=function(){var _this=this;this.finishPromise_();var observers=clone$1(this.observers_);observers.forEach(function(observer){_this.notifyObserver_(observer)})};UploadTask.prototype.finishPromise_=function(){if(this.resolve_!==null){var triggered=true;switch(taskStateFromInternalTaskState(this.state_)){case TaskState.SUCCESS:async(this.resolve_.bind(null,this.snapshot))();break;case TaskState.CANCELED:case TaskState.ERROR:var toCall=this.reject_;async(toCall.bind(null,this.error_))();break;default:triggered=false;break}if(triggered){this.resolve_=null;this.reject_=null}}};UploadTask.prototype.notifyObserver_=function(observer){var externalState=taskStateFromInternalTaskState(this.state_);switch(externalState){case TaskState.RUNNING:case TaskState.PAUSED:if(observer.next!==null){async(observer.next.bind(observer,this.snapshot))()}break;case TaskState.SUCCESS:if(observer.complete!==null){async(observer.complete.bind(observer))()}break;case TaskState.CANCELED:case TaskState.ERROR:if(observer.error!==null){async(observer.error.bind(observer,this.error_))()}break;default:if(observer.error!==null){async(observer.error.bind(observer,this.error_))()}}};UploadTask.prototype.resume=function(){validate(\"resume\",[],arguments);var valid=this.state_===InternalTaskState.PAUSED||this.state_===InternalTaskState.PAUSING;if(valid){this.transition_(InternalTaskState.RUNNING)}return valid};UploadTask.prototype.pause=function(){validate(\"pause\",[],arguments);var valid=this.state_===InternalTaskState.RUNNING;if(valid){this.transition_(InternalTaskState.PAUSING)}return valid};UploadTask.prototype.cancel=function(){validate(\"cancel\",[],arguments);var valid=this.state_===InternalTaskState.RUNNING||this.state_===InternalTaskState.PAUSING;if(valid){this.transition_(InternalTaskState.CANCELING)}return valid};return UploadTask}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Reference=function(){function Reference(authWrapper,location){this.authWrapper=authWrapper;if(location instanceof Location){this.location=location}else{this.location=Location.makeFromUrl(location)}}Reference.prototype.toString=function(){validate(\"toString\",[],arguments);return\"gs://\"+this.location.bucket+\"/\"+this.location.path};Reference.prototype.newRef=function(authWrapper,location){return new Reference(authWrapper,location)};Reference.prototype.mappings=function(){return getMappings()};Reference.prototype.child=function(childPath){validate(\"child\",[stringSpec()],arguments);var newPath=child(this.location.path,childPath);var location=new Location(this.location.bucket,newPath);return this.newRef(this.authWrapper,location)};Object.defineProperty(Reference.prototype,\"parent\",{get:function(){var newPath=parent(this.location.path);if(newPath===null){return null}var location=new Location(this.location.bucket,newPath);return this.newRef(this.authWrapper,location)},enumerable:true,configurable:true});Object.defineProperty(Reference.prototype,\"root\",{get:function(){var location=new Location(this.location.bucket,\"\");return this.newRef(this.authWrapper,location)},enumerable:true,configurable:true});Object.defineProperty(Reference.prototype,\"bucket\",{get:function(){return this.location.bucket},enumerable:true,configurable:true});Object.defineProperty(Reference.prototype,\"fullPath\",{get:function(){return this.location.path},enumerable:true,configurable:true});Object.defineProperty(Reference.prototype,\"name\",{get:function(){return lastComponent(this.location.path)},enumerable:true,configurable:true});Object.defineProperty(Reference.prototype,\"storage\",{get:function(){return this.authWrapper.service()},enumerable:true,configurable:true});Reference.prototype.put=function(data,metadata){if(metadata===void 0){metadata=null}validate(\"put\",[uploadDataSpec(),metadataSpec(true)],arguments);this.throwIfRoot_(\"put\");return new UploadTask(this,this.authWrapper,this.location,this.mappings(),new FbsBlob(data),metadata)};Reference.prototype.putString=function(string,format,opt_metadata){if(format===void 0){format=StringFormat.RAW}validate(\"putString\",[stringSpec(),stringSpec(formatValidator,true),metadataSpec(true)],arguments);this.throwIfRoot_(\"putString\");var data=dataFromString(format,string);var metadata=clone(opt_metadata);if(!isDef(metadata[\"contentType\"])&&isDef(data.contentType)){metadata[\"contentType\"]=data.contentType}return new UploadTask(this,this.authWrapper,this.location,this.mappings(),new FbsBlob(data.data,true),metadata)};Reference.prototype.delete=function(){validate(\"delete\",[],arguments);this.throwIfRoot_(\"delete\");var self=this;return this.authWrapper.getAuthToken().then(function(authToken){var requestInfo=deleteObject(self.authWrapper,self.location);return self.authWrapper.makeRequest(requestInfo,authToken).getPromise()})};Reference.prototype.getMetadata=function(){validate(\"getMetadata\",[],arguments);this.throwIfRoot_(\"getMetadata\");var self=this;return this.authWrapper.getAuthToken().then(function(authToken){var requestInfo=getMetadata(self.authWrapper,self.location,self.mappings());return self.authWrapper.makeRequest(requestInfo,authToken).getPromise()})};Reference.prototype.updateMetadata=function(metadata){validate(\"updateMetadata\",[metadataSpec()],arguments);this.throwIfRoot_(\"updateMetadata\");var self=this;return this.authWrapper.getAuthToken().then(function(authToken){var requestInfo=updateMetadata(self.authWrapper,self.location,metadata,self.mappings());return self.authWrapper.makeRequest(requestInfo,authToken).getPromise()})};Reference.prototype.getDownloadURL=function(){validate(\"getDownloadURL\",[],arguments);this.throwIfRoot_(\"getDownloadURL\");var self=this;return this.authWrapper.getAuthToken().then(function(authToken){var requestInfo=getDownloadUrl(self.authWrapper,self.location,self.mappings());return self.authWrapper.makeRequest(requestInfo,authToken).getPromise().then(function(url){if(url===null){throw noDownloadURL()}return url})})};Reference.prototype.throwIfRoot_=function(name){if(this.location.path===\"\"){throw invalidRootOperation(name)}};return Reference}();var FailRequest=function(){function FailRequest(error){this.promise_=reject(error)}FailRequest.prototype.getPromise=function(){return this.promise_};FailRequest.prototype.cancel=function(appDelete){if(appDelete===void 0){appDelete=false}};return FailRequest}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var RequestMap=function(){function RequestMap(){this.map_={};this.id_=MIN_SAFE_INTEGER}RequestMap.prototype.addRequest=function(r){var id=this.id_;this.id_++;this.map_[id]=r;var self=this;function unmap(){delete self.map_[id]}r.getPromise().then(unmap,unmap)};RequestMap.prototype.clear=function(){forEach(this.map_,function(key,val){if(val){val.cancel(true)}});this.map_={}};return RequestMap}();var AuthWrapper=function(){function AuthWrapper(app,maker,requestMaker,service,pool){this.bucket_=null;this.deleted_=false;this.app_=app;if(this.app_!==null){var options=this.app_.options;if(isDef(options)){this.bucket_=AuthWrapper.extractBucket_(options)}}this.storageRefMaker_=maker;this.requestMaker_=requestMaker;this.pool_=pool;this.service_=service;this.maxOperationRetryTime_=DEFAULT_MAX_OPERATION_RETRY_TIME;this.maxUploadRetryTime_=DEFAULT_MAX_UPLOAD_RETRY_TIME;this.requestMap_=new RequestMap}AuthWrapper.extractBucket_=function(config){var bucketString=config[CONFIG_STORAGE_BUCKET_KEY]||null;if(bucketString==null){return null}var loc=Location.makeFromBucketSpec(bucketString);return loc.bucket};AuthWrapper.prototype.getAuthToken=function(){if(this.app_!==null&&isDef(this.app_.INTERNAL)&&isDef(this.app_.INTERNAL.getToken)){return this.app_.INTERNAL.getToken().then(function(response){if(response!==null){return response.accessToken}else{return null}},function(_error){return null})}else{return resolve(null)}};AuthWrapper.prototype.bucket=function(){if(this.deleted_){throw appDeleted()}else{return this.bucket_}};AuthWrapper.prototype.service=function(){return this.service_};AuthWrapper.prototype.makeStorageReference=function(loc){return this.storageRefMaker_(this,loc)};AuthWrapper.prototype.makeRequest=function(requestInfo,authToken){if(!this.deleted_){var request=this.requestMaker_(requestInfo,authToken,this.pool_);this.requestMap_.addRequest(request);return request}else{return new FailRequest(appDeleted())}};AuthWrapper.prototype.deleteApp=function(){this.deleted_=true;this.app_=null;this.requestMap_.clear()};AuthWrapper.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_};AuthWrapper.prototype.setMaxUploadRetryTime=function(time){this.maxUploadRetryTime_=time};AuthWrapper.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_};AuthWrapper.prototype.setMaxOperationRetryTime=function(time){this.maxOperationRetryTime_=time};return AuthWrapper}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function start(f,callback,timeout){var waitSeconds=1;var timeoutId=null;var hitTimeout=false;var cancelState=0;function canceled(){return cancelState===2}var triggeredCallback=false;function triggerCallback(){if(!triggeredCallback){triggeredCallback=true;callback.apply(null,arguments)}}function callWithDelay(millis){timeoutId=setTimeout(function(){timeoutId=null;f(handler,canceled())},millis)}function handler(success){var var_args=[];for(var _i=1;_i<arguments.length;_i++){var_args[_i-1]=arguments[_i]}if(triggeredCallback){return}if(success){triggerCallback.apply(null,arguments);return}var mustStop=canceled()||hitTimeout;if(mustStop){triggerCallback.apply(null,arguments);return}if(waitSeconds<64){waitSeconds*=2}var waitMillis;if(cancelState===1){cancelState=2;waitMillis=0}else{waitMillis=(waitSeconds+Math.random())*1e3}callWithDelay(waitMillis)}var stopped=false;function stop(wasTimeout){if(stopped){return}stopped=true;if(triggeredCallback){return}if(timeoutId!==null){if(!wasTimeout){cancelState=2}clearTimeout(timeoutId);callWithDelay(0)}else{if(!wasTimeout){cancelState=1}}}callWithDelay(0);setTimeout(function(){hitTimeout=true;stop(true)},timeout);return stop}function stop(id){id(false)}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var NetworkRequest=function(){function NetworkRequest(url,method,headers,body,successCodes,additionalRetryCodes,callback,errorCallback,timeout,progressCallback,pool){this.pendingXhr_=null;this.backoffId_=null;this.resolve_=null;this.reject_=null;this.canceled_=false;this.appDelete_=false;this.url_=url;this.method_=method;this.headers_=headers;this.body_=body;this.successCodes_=successCodes.slice();this.additionalRetryCodes_=additionalRetryCodes.slice();this.callback_=callback;this.errorCallback_=errorCallback;this.progressCallback_=progressCallback;this.timeout_=timeout;this.pool_=pool;var self=this;this.promise_=make(function(resolve,reject){self.resolve_=resolve;self.reject_=reject;self.start_()})}NetworkRequest.prototype.start_=function(){var self=this;function doTheRequest(backoffCallback,canceled){if(canceled){backoffCallback(false,new RequestEndStatus(false,null,true));return}var xhr=self.pool_.createXhrIo();self.pendingXhr_=xhr;function progressListener(progressEvent){var loaded=progressEvent.loaded;var total=progressEvent.lengthComputable?progressEvent.total:-1;if(self.progressCallback_!==null){self.progressCallback_(loaded,total)}}if(self.progressCallback_!==null){xhr.addUploadProgressListener(progressListener)}xhr.send(self.url_,self.method_,self.body_,self.headers_).then(function(xhr){if(self.progressCallback_!==null){xhr.removeUploadProgressListener(progressListener)}self.pendingXhr_=null;xhr=xhr;var hitServer=xhr.getErrorCode()===ErrorCode.NO_ERROR;var status=xhr.getStatus();if(!hitServer||self.isRetryStatusCode_(status)){var wasCanceled=xhr.getErrorCode()===ErrorCode.ABORT;backoffCallback(false,new RequestEndStatus(false,null,wasCanceled));return}var successCode=contains$1(self.successCodes_,status);backoffCallback(true,new RequestEndStatus(successCode,xhr))})}function backoffDone(requestWentThrough,status){var resolve=self.resolve_;var reject=self.reject_;var xhr=status.xhr;if(status.wasSuccessCode){try{var result=self.callback_(xhr,xhr.getResponseText());if(isJustDef(result)){resolve(result)}else{resolve()}}catch(e){reject(e)}}else{if(xhr!==null){var err=unknown();err.setServerResponseProp(xhr.getResponseText());if(self.errorCallback_){reject(self.errorCallback_(xhr,err))}else{reject(err)}}else{if(status.canceled){var err=self.appDelete_?appDeleted():canceled();reject(err)}else{var err=retryLimitExceeded();reject(err)}}}}if(this.canceled_){backoffDone(false,new RequestEndStatus(false,null,true))}else{this.backoffId_=start(doTheRequest,backoffDone,this.timeout_)}};NetworkRequest.prototype.getPromise=function(){return this.promise_};NetworkRequest.prototype.cancel=function(appDelete){this.canceled_=true;this.appDelete_=appDelete||false;if(this.backoffId_!==null){stop(this.backoffId_)}if(this.pendingXhr_!==null){this.pendingXhr_.abort()}};NetworkRequest.prototype.isRetryStatusCode_=function(status){var isFiveHundredCode=status>=500&&status<600;var extraRetryCodes=[408,429];var isExtraRetryCode=contains$1(extraRetryCodes,status);var isRequestSpecificRetryCode=contains$1(this.additionalRetryCodes_,status);return isFiveHundredCode||isExtraRetryCode||isRequestSpecificRetryCode};return NetworkRequest}();var RequestEndStatus=function(){function RequestEndStatus(wasSuccessCode,xhr,opt_canceled){this.wasSuccessCode=wasSuccessCode;this.xhr=xhr;this.canceled=!!opt_canceled}return RequestEndStatus}();function addAuthHeader_(headers,authToken){if(authToken!==null&&authToken.length>0){headers[\"Authorization\"]=\"Firebase \"+authToken}}function addVersionHeader_(headers){var number=typeof firebase!==\"undefined\"?firebase.SDK_VERSION:\"AppManager\";headers[\"X-Firebase-Storage-Version\"]=\"webjs/\"+number}function makeRequest(requestInfo,authToken,pool){var queryPart=makeQueryString(requestInfo.urlParams);var url=requestInfo.url+queryPart;var headers=clone(requestInfo.headers);addAuthHeader_(headers,authToken);addVersionHeader_(headers);return new NetworkRequest(url,requestInfo.method,headers,requestInfo.body,requestInfo.successCodes,requestInfo.additionalRetryCodes,requestInfo.handler,requestInfo.errorHandler,requestInfo.timeout,requestInfo.progressCallback,pool)}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Service=function(){function Service(app,pool,url){this.bucket_=null;function maker(authWrapper,loc){return new Reference(authWrapper,loc)}this.authWrapper_=new AuthWrapper(app,maker,makeRequest,this,pool);this.app_=app;if(url!=null){this.bucket_=Location.makeFromBucketSpec(url)}else{var authWrapperBucket=this.authWrapper_.bucket();if(authWrapperBucket!=null){this.bucket_=new Location(authWrapperBucket,\"\")}}this.internals_=new ServiceInternals(this)}Service.prototype.ref=function(path){function validator(path){if(/^[A-Za-z]+:\\/\\//.test(path)){throw\"Expected child path but got a URL, use refFromURL instead.\"}}validate(\"ref\",[stringSpec(validator,true)],arguments);if(this.bucket_==null){throw new Error(\"No Storage Bucket defined in Firebase Options.\")}var ref=new Reference(this.authWrapper_,this.bucket_);if(path!=null){return ref.child(path)}else{return ref}};Service.prototype.refFromURL=function(url){function validator(p){if(!/^[A-Za-z]+:\\/\\//.test(p)){throw\"Expected full URL but got a child path, use ref instead.\"}try{Location.makeFromUrl(p)}catch(e){throw\"Expected valid full URL but got an invalid one.\"}}validate(\"refFromURL\",[stringSpec(validator,false)],arguments);return new Reference(this.authWrapper_,url)};Object.defineProperty(Service.prototype,\"maxUploadRetryTime\",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:true,configurable:true});Service.prototype.setMaxUploadRetryTime=function(time){validate(\"setMaxUploadRetryTime\",[nonNegativeNumberSpec()],arguments);this.authWrapper_.setMaxUploadRetryTime(time)};Service.prototype.setMaxOperationRetryTime=function(time){validate(\"setMaxOperationRetryTime\",[nonNegativeNumberSpec()],arguments);this.authWrapper_.setMaxOperationRetryTime(time)};Object.defineProperty(Service.prototype,\"app\",{get:function(){return this.app_},enumerable:true,configurable:true});Object.defineProperty(Service.prototype,\"INTERNAL\",{get:function(){return this.internals_},enumerable:true,configurable:true});return Service}();var ServiceInternals=function(){function ServiceInternals(service){this.service_=service}ServiceInternals.prototype.delete=function(){this.service_.authWrapper_.deleteApp();return resolve(undefined)};return ServiceInternals}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var STORAGE_TYPE=\"storage\";function factory(app,unused,opt_url){return new Service(app,new XhrIoPool,opt_url)}function registerStorage(instance){var namespaceExports={TaskState:TaskState,TaskEvent:TaskEvent,StringFormat:StringFormat,Storage:Service,Reference:Reference};instance.INTERNAL.registerService(STORAGE_TYPE,factory,namespaceExports,undefined,true)}registerStorage(firebase);exports.registerStorage=registerStorage},hDam:function(module,exports){module.exports=function(){}},hEy5:function(module,exports,__webpack_require__){var isRegExp=__webpack_require__(\"FnXw\");var requireObjectCoercible=__webpack_require__(\"9Nts\");module.exports=function(that,searchString,NAME){if(isRegExp(searchString)){throw TypeError(\"String.prototype.\"+NAME+\" doesn't accept regex\")}return String(requireObjectCoercible(that))}},hdqJ:function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},hfKm:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"RU/L\")},hvlt:function(module,exports,__webpack_require__){\"use strict\";__webpack_require__(\"gYWy\");\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */},iCuu:function(module,exports,__webpack_require__){\"use strict\";var nativePropertyIsEnumerable={}.propertyIsEnumerable;var nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var NASHORN_BUG=nativeGetOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1);exports.f=NASHORN_BUG?function propertyIsEnumerable(V){var descriptor=nativeGetOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable}:nativePropertyIsEnumerable},iZP3:function(module,exports,__webpack_require__){var _Symbol$iterator=__webpack_require__(\"XVgq\");var _Symbol=__webpack_require__(\"Z7t5\");function _typeof2(obj){if(typeof _Symbol===\"function\"&&typeof _Symbol$iterator===\"symbol\"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof _Symbol===\"function\"&&obj.constructor===_Symbol&&obj!==_Symbol.prototype?\"symbol\":typeof obj}}return _typeof2(obj)}function _typeof(obj){if(typeof _Symbol===\"function\"&&_typeof2(_Symbol$iterator)===\"symbol\"){module.exports=_typeof=function _typeof(obj){return _typeof2(obj)}}else{module.exports=_typeof=function _typeof(obj){return obj&&typeof _Symbol===\"function\"&&obj.constructor===_Symbol&&obj!==_Symbol.prototype?\"symbol\":_typeof2(obj)}}return _typeof(obj)}module.exports=_typeof},imt6:function(module,exports,__webpack_require__){\"use strict\";var __importStar=void 0&&(void 0).__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod){if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k]}result[\"default\"]=mod;return result};Object.defineProperty(exports,\"__esModule\",{value:true});var React=__importStar(__webpack_require__(\"q1tI\"));exports.IsAmpContext=React.createContext(false)},iq4v:function(module,exports,__webpack_require__){__webpack_require__(\"Mqbl\");module.exports=__webpack_require__(\"WEpk\").Object.keys},j2DC:function(module,exports,__webpack_require__){\"use strict\";var create=__webpack_require__(\"oVml\");var descriptor=__webpack_require__(\"rr1i\");var setToStringTag=__webpack_require__(\"RfKB\");var IteratorPrototype={};__webpack_require__(\"NegM\")(IteratorPrototype,__webpack_require__(\"UWiX\")(\"iterator\"),function(){return this});module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+\" Iterator\")}},jK02:function(module,exports){module.exports=require(\"util\")},jmDH:function(module,exports,__webpack_require__){module.exports=!__webpack_require__(\"KUxP\")(function(){return Object.defineProperty({},\"a\",{get:function(){return 7}}).a!=7})},k2qa:function(module,exports,__webpack_require__){var classof=__webpack_require__(\"hdqJ\");module.exports=Array.isArray||function isArray(arg){return classof(arg)==\"Array\"}},kAMH:function(module,exports,__webpack_require__){var cof=__webpack_require__(\"a0xu\");module.exports=Array.isArray||function isArray(arg){return cof(arg)==\"Array\"}},kTiW:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"NegM\")},kiME:function(module,exports,__webpack_require__){\"use strict\";var _interopRequireDefault=__webpack_require__(\"KI45\");var _create=_interopRequireDefault(__webpack_require__(\"SqZg\"));Object.defineProperty(exports,\"__esModule\",{value:true});function mitt(){var all=(0,_create.default)(null);return{on:function on(type,handler){(all[type]||(all[type]=[])).push(handler)},off:function off(type,handler){if(all[type]){all[type].splice(all[type].indexOf(handler)>>>0,1)}},emit:function emit(type){for(var _len=arguments.length,evts=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){evts[_key-1]=arguments[_key]}(all[type]||[]).slice().map(function(handler){handler.apply(void 0,evts)})}}}exports.default=mitt},kpns:function(module,exports){module.exports=function(it){return typeof it===\"object\"?it!==null:typeof it===\"function\"}},kwZ1:function(module,exports,__webpack_require__){\"use strict\";var getKeys=__webpack_require__(\"w6GO\");var gOPS=__webpack_require__(\"mqlF\");var pIE=__webpack_require__(\"NV0k\");var toObject=__webpack_require__(\"JB68\");var IObject=__webpack_require__(\"M1xp\");var $assign=Object.assign;module.exports=!$assign||__webpack_require__(\"KUxP\")(function(){var A={};var B={};var S=Symbol();var K=\"abcdefghijklmnopqrst\";A[S]=7;K.split(\"\").forEach(function(k){B[k]=k});return $assign({},A)[S]!=7||Object.keys($assign({},B)).join(\"\")!=K})?function assign(target,source){var T=toObject(target);var aLen=arguments.length;var index=1;var getSymbols=gOPS.f;var isEnum=pIE.f;while(aLen>index){var S=IObject(arguments[index++]);var keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S);var length=keys.length;var j=0;var key;while(length>j)if(isEnum.call(S,key=keys[j++]))T[key]=S[key]}return T}:$assign},lCc8:function(module,exports,__webpack_require__){var $export=__webpack_require__(\"Y7ZC\");$export($export.S,\"Object\",{create:__webpack_require__(\"oVml\")})},\"lb/b\":function(module,exports,__webpack_require__){module.exports=!__webpack_require__(\"0HDe\")(function(){return Object.defineProperty({},\"a\",{get:function(){return 7}}).a!=7})},ldVq:function(module,exports,__webpack_require__){var classof=__webpack_require__(\"QMMT\");var ITERATOR=__webpack_require__(\"UWiX\")(\"iterator\");var Iterators=__webpack_require__(\"SBuE\");module.exports=__webpack_require__(\"WEpk\").isIterable=function(it){var O=Object(it);return O[ITERATOR]!==undefined||\"@@iterator\"in O||Iterators.hasOwnProperty(classof(O))}},ln6h:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"u938\")},ls82:function(module,exports){!function(global){\"use strict\";var Op=Object.prototype;var hasOwn=Op.hasOwnProperty;var undefined;var $Symbol=typeof Symbol===\"function\"?Symbol:{};var iteratorSymbol=$Symbol.iterator||\"@@iterator\";var asyncIteratorSymbol=$Symbol.asyncIterator||\"@@asyncIterator\";var toStringTagSymbol=$Symbol.toStringTag||\"@@toStringTag\";var inModule=typeof module===\"object\";var runtime=global.regeneratorRuntime;if(runtime){if(inModule){module.exports=runtime}return}runtime=global.regeneratorRuntime=inModule?module.exports:{};function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator;var generator=Object.create(protoGenerator.prototype);var context=new Context(tryLocsList||[]);generator._invoke=makeInvokeMethod(innerFn,self,context);return generator}runtime.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:\"normal\",arg:fn.call(obj,arg)}}catch(err){return{type:\"throw\",arg:err}}}var GenStateSuspendedStart=\"suspendedStart\";var GenStateSuspendedYield=\"suspendedYield\";var GenStateExecuting=\"executing\";var GenStateCompleted=\"completed\";var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf;var NativeIteratorPrototype=getProto&&getProto(getProto(values([])));if(NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)){IteratorPrototype=NativeIteratorPrototype}var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName=\"GeneratorFunction\";function defineIteratorMethods(prototype){[\"next\",\"throw\",\"return\"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}runtime.isGeneratorFunction=function(genFun){var ctor=typeof genFun===\"function\"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)===\"GeneratorFunction\":false};runtime.mark=function(genFun){if(Object.setPrototypeOf){Object.setPrototypeOf(genFun,GeneratorFunctionPrototype)}else{genFun.__proto__=GeneratorFunctionPrototype;if(!(toStringTagSymbol in genFun)){genFun[toStringTagSymbol]=\"GeneratorFunction\"}}genFun.prototype=Object.create(Gp);return genFun};runtime.awrap=function(arg){return{__await:arg}};function AsyncIterator(generator){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(record.type===\"throw\"){reject(record.arg)}else{var result=record.arg;var value=result.value;if(value&&typeof value===\"object\"&&hasOwn.call(value,\"__await\")){return Promise.resolve(value.__await).then(function(value){invoke(\"next\",value,resolve,reject)},function(err){invoke(\"throw\",err,resolve,reject)})}return Promise.resolve(value).then(function(unwrapped){result.value=unwrapped;resolve(result)},function(error){return invoke(\"throw\",error,resolve,reject)})}}var previousPromise;function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){invoke(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}this._invoke=enqueue}defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this};runtime.AsyncIterator=AsyncIterator;runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})};function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting){throw new Error(\"Generator is already running\")}if(state===GenStateCompleted){if(method===\"throw\"){throw arg}return doneResult()}context.method=method;context.arg=arg;while(true){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if(context.method===\"next\"){context.sent=context._sent=context.arg}else if(context.method===\"throw\"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw context.arg}context.dispatchException(context.arg)}else if(context.method===\"return\"){context.abrupt(\"return\",context.arg)}state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type===\"normal\"){state=context.done?GenStateCompleted:GenStateSuspendedYield;if(record.arg===ContinueSentinel){continue}return{value:record.arg,done:context.done}}else if(record.type===\"throw\"){state=GenStateCompleted;context.method=\"throw\";context.arg=record.arg}}}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){context.delegate=null;if(context.method===\"throw\"){if(delegate.iterator.return){context.method=\"return\";context.arg=undefined;maybeInvokeDelegate(delegate,context);if(context.method===\"throw\"){return ContinueSentinel}}context.method=\"throw\";context.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if(record.type===\"throw\"){context.method=\"throw\";context.arg=record.arg;context.delegate=null;return ContinueSentinel}var info=record.arg;if(!info){context.method=\"throw\";context.arg=new TypeError(\"iterator result is not an object\");context.delegate=null;return ContinueSentinel}if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc;if(context.method!==\"return\"){context.method=\"next\";context.arg=undefined}}else{return info}context.delegate=null;return ContinueSentinel}defineIteratorMethods(Gp);Gp[toStringTagSymbol]=\"Generator\";Gp[iteratorSymbol]=function(){return this};Gp.toString=function(){return\"[object Generator]\"};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1]}if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3]}this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type=\"normal\";delete record.arg;entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:\"root\"}];tryLocsList.forEach(pushTryEntry,this);this.reset(true)}runtime.keys=function(object){var keys=[];for(var key in object){keys.push(key)}keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next}}next.done=true;return next}};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable)}if(typeof iterable.next===\"function\"){return iterable}if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next}}next.value=undefined;next.done=true;return next};return next.next=next}}return{next:doneResult}}runtime.values=values;function doneResult(){return{value:undefined,done:true}}Context.prototype={constructor:Context,reset:function(skipTempReset){this.prev=0;this.next=0;this.sent=this._sent=undefined;this.done=false;this.delegate=null;this.method=\"next\";this.arg=undefined;this.tryEntries.forEach(resetTryEntry);if(!skipTempReset){for(var name in this){if(name.charAt(0)===\"t\"&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))){this[name]=undefined}}}},stop:function(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type===\"throw\"){throw rootRecord.arg}return this.rval},dispatchException:function(exception){if(this.done){throw exception}var context=this;function handle(loc,caught){record.type=\"throw\";record.arg=exception;context.next=loc;if(caught){context.method=\"next\";context.arg=undefined}return!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc===\"root\"){return handle(\"end\")}if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,\"catchLoc\");var hasFinally=hasOwn.call(entry,\"finallyLoc\");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else{throw new Error(\"try statement without catch or finally\")}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,\"finallyLoc\")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}if(finallyEntry&&(type===\"break\"||type===\"continue\")&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc){finallyEntry=null}var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.method=\"next\";this.next=finallyEntry.finallyLoc;return ContinueSentinel}return this.complete(record)},complete:function(record,afterLoc){if(record.type===\"throw\"){throw record.arg}if(record.type===\"break\"||record.type===\"continue\"){this.next=record.arg}else if(record.type===\"return\"){this.rval=this.arg=record.arg;this.method=\"return\";this.next=\"end\"}else if(record.type===\"normal\"&&afterLoc){this.next=afterLoc}return ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){this.complete(entry.completion,entry.afterLoc);resetTryEntry(entry);return ContinueSentinel}}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type===\"throw\"){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error(\"illegal catch attempt\")},delegateYield:function(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};if(this.method===\"next\"){this.arg=undefined}return ContinueSentinel}}}(function(){return this||typeof self===\"object\"&&self}()||Function(\"return this\")())},luCB:function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"split\")},\"m/Pd\":function(module,exports,__webpack_require__){\"use strict\";var _interopRequireDefault=__webpack_require__(\"KI45\");var _set=_interopRequireDefault(__webpack_require__(\"ttDY\"));var __importDefault=void 0&&(void 0).__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,\"__esModule\",{value:true});var react_1=__importDefault(__webpack_require__(\"q1tI\"));var side_effect_1=__importDefault(__webpack_require__(\"4hZ1\"));var amphtml_context_1=__webpack_require__(\"imt6\");var head_manager_context_1=__webpack_require__(\"IClC\");function defaultHead(){var className=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"next-head\";var isAmp=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var head=[react_1.default.createElement(\"meta\",{key:\"charSet\",charSet:\"utf-8\",className:className})];if(!isAmp){head.push(react_1.default.createElement(\"meta\",{key:\"viewport\",name:\"viewport\",content:\"width=device-width,minimum-scale=1,initial-scale=1\",className:className}))}return head}exports.defaultHead=defaultHead;function onlyReactElement(list,child){if(typeof child===\"string\"||typeof child===\"number\"){return list}if(child.type===react_1.default.Fragment){return list.concat(react_1.default.Children.toArray(child.props.children).reduce(function(fragmentList,fragmentChild){if(typeof fragmentChild===\"string\"||typeof fragmentChild===\"number\"){return fragmentList}return fragmentList.concat(fragmentChild)},[]))}return list.concat(child)}var METATYPES=[\"name\",\"httpEquiv\",\"charSet\",\"viewport\",\"itemProp\"];function unique(){var keys=new _set.default;var tags=new _set.default;var metaTypes=new _set.default;var metaCategories={};return function(h){if(h.key&&typeof h.key!==\"number\"&&h.key.indexOf(\".$\")===0){if(keys.has(h.key))return false;keys.add(h.key);return true}switch(h.type){case\"title\":case\"base\":if(tags.has(h.type))return false;tags.add(h.type);break;case\"meta\":for(var i=0,len=METATYPES.length;i<len;i++){var metatype=METATYPES[i];if(!h.props.hasOwnProperty(metatype))continue;if(metatype===\"charSet\"||metatype===\"viewport\"){if(metaTypes.has(metatype))return false;metaTypes.add(metatype)}else{var category=h.props[metatype];var categories=metaCategories[metatype]||new _set.default;if(categories.has(category))return false;categories.add(category);metaCategories[metatype]=categories}}break}return true}}function reduceComponents(headElements,props){return headElements.reduce(function(list,headElement){var headElementChildren=react_1.default.Children.toArray(headElement.props.children);return list.concat(headElementChildren)},[]).reduce(onlyReactElement,[]).reverse().concat(defaultHead(\"\",props.isAmp)).filter(unique()).reverse().map(function(c,i){var className=(c.props&&c.props.className?c.props.className+\" \":\"\")+\"next-head\";var key=c.key||i;return react_1.default.cloneElement(c,{key:key,className:className})})}var Effect=side_effect_1.default();function Head(_ref){var children=_ref.children;return react_1.default.createElement(amphtml_context_1.IsAmpContext.Consumer,null,function(isAmp){return react_1.default.createElement(head_manager_context_1.HeadManagerContext.Consumer,null,function(updateHead){return react_1.default.createElement(Effect,{reduceComponentsToState:reduceComponents,handleStateChange:updateHead,isAmp:isAmp},children)})})}Head.rewind=Effect.rewind;exports.default=Head},mKQw:function(module,exports,__webpack_require__){var fails=__webpack_require__(\"0HDe\");var replacement=/#|\\.prototype\\./;var isForced=function(feature,detection){var value=data[normalize(feature)];return value==POLYFILL?true:value==NATIVE?false:typeof detection==\"function\"?fails(detection):!!detection};var normalize=isForced.normalize=function(string){return String(string).replace(replacement,\".\").toLowerCase()};var data=isForced.data={};var NATIVE=isForced.NATIVE=\"N\";var POLYFILL=isForced.POLYFILL=\"P\";module.exports=isForced},mk1t:function(module,exports,__webpack_require__){module.exports=!__webpack_require__(\"0HDe\")(function(){String(Symbol())})},mqlF:function(module,exports){exports.f=Object.getOwnPropertySymbols},msIP:function(module,exports){module.exports=require(\"stream\")},\"mw/K\":function(module,exports){module.exports=require(\"fs\")},n3ko:function(module,exports,__webpack_require__){var isObject=__webpack_require__(\"93I4\");module.exports=function(it,TYPE){if(!isObject(it)||it._t!==TYPE)throw TypeError(\"Incompatible receiver, \"+TYPE+\" required!\");return it}},nJQW:function(module,exports){module.exports=function(it){if(typeof it!=\"function\"){throw TypeError(String(it)+\" is not a function\")}return it}},nOHt:function(module,exports,__webpack_require__){\"use strict\";var _interopRequireDefault=__webpack_require__(\"KI45\");var _assign=_interopRequireDefault(__webpack_require__(\"UXZV\"));var _construct2=_interopRequireDefault(__webpack_require__(\"b3CU\"));var _defineProperty=_interopRequireDefault(__webpack_require__(\"hfKm\"));var __importDefault=void 0&&(void 0).__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,\"__esModule\",{value:true});var router_1=__importDefault(__webpack_require__(\"JQMT\"));var SingletonRouter={router:null,readyCallbacks:[],ready:function ready(cb){if(this.router)return cb();if(typeof window!==\"undefined\"){this.readyCallbacks.push(cb)}}};var urlPropertyFields=[\"pathname\",\"route\",\"query\",\"asPath\"];var propertyFields=[\"components\"];var routerEvents=[\"routeChangeStart\",\"beforeHistoryChange\",\"routeChangeComplete\",\"routeChangeError\",\"hashChangeStart\",\"hashChangeComplete\"];var coreMethodFields=[\"push\",\"replace\",\"reload\",\"back\",\"prefetch\",\"beforePopState\"];Object.defineProperty(SingletonRouter,\"events\",{get:function get(){return router_1.default.events}});propertyFields.concat(urlPropertyFields).forEach(function(field){(0,_defineProperty.default)(SingletonRouter,field,{get:function get(){throwIfNoRouter();return SingletonRouter.router[field]}})});coreMethodFields.forEach(function(field){SingletonRouter[field]=function(){var _SingletonRouter$rout;throwIfNoRouter();return(_SingletonRouter$rout=SingletonRouter.router)[field].apply(_SingletonRouter$rout,arguments)}});routerEvents.forEach(function(event){SingletonRouter.ready(function(){router_1.default.events.on(event,function(){var eventField=\"on\".concat(event.charAt(0).toUpperCase()).concat(event.substring(1));if(SingletonRouter[eventField]){try{SingletonRouter[eventField].apply(SingletonRouter,arguments)}catch(err){console.error(\"Error when running the Router event: \".concat(eventField));console.error(\"\".concat(err.message,\"\\n\").concat(err.stack))}}})})});function throwIfNoRouter(){if(!SingletonRouter.router){var message=\"No router instance found.\\n\"+'You should only use \"next/router\" inside the client side of your app.\\n';throw new Error(message)}}exports.default=SingletonRouter;var with_router_1=__webpack_require__(\"0Bsm\");exports.withRouter=with_router_1.default;exports.createRouter=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}SingletonRouter.router=(0,_construct2.default)(router_1.default,args);SingletonRouter.readyCallbacks.forEach(function(cb){return cb()});SingletonRouter.readyCallbacks=[];return SingletonRouter.router};exports.Router=router_1.default;function makePublicRouterInstance(router){var instance={};for(var _i=0;_i<urlPropertyFields.length;_i++){var property=urlPropertyFields[_i];if(typeof router[property]===\"object\"){instance[property]=(0,_assign.default)({},router[property]);continue}instance[property]=router[property]}instance.events=router_1.default.events;propertyFields.forEach(function(field){(0,_defineProperty.default)(instance,field,{get:function get(){return router[field]}})});coreMethodFields.forEach(function(field){instance[field]=function(){return router[field].apply(router,arguments)}});return instance}exports.makePublicRouterInstance=makePublicRouterInstance},nWF0:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=flushToReact;exports.flushToHTML=flushToHTML;var _react=_interopRequireDefault(__webpack_require__(\"q1tI\"));var _style=__webpack_require__(\"3niX\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function flushToReact(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return(0,_style.flush)().map(function(args){var id=args[0];var css=args[1];return _react.default.createElement(\"style\",{id:\"__\".concat(id),key:\"__\".concat(id),nonce:options.nonce?options.nonce:undefined,dangerouslySetInnerHTML:{__html:css}})})}function flushToHTML(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return(0,_style.flush)().reduce(function(html,args){var id=args[0];var css=args[1];html+='<style id=\"__'.concat(id,'\"').concat(options.nonce?' nonce=\"'.concat(options.nonce,'\"'):\"\",\">\").concat(css,\"</style>\");return html},\"\")}},nX7E:function(module,exports,__webpack_require__){var global=__webpack_require__(\"ysHE\");var hide=__webpack_require__(\"wBs/\");module.exports=function(key,value){try{hide(global,key,value)}catch(e){global[key]=value}return value}},\"nsc/\":function(module,exports,__webpack_require__){\"use strict\";var toInteger=__webpack_require__(\"JKJi\");var requireObjectCoercible=__webpack_require__(\"9Nts\");module.exports=\"\".repeat||function repeat(count){var str=String(requireObjectCoercible(this));var result=\"\";var n=toInteger(count);if(n<0||n==Infinity)throw RangeError(\"Wrong number of repetitions\");for(;n>0;(n>>>=1)&&(str+=str))if(n&1)result+=str;return result}},\"o/0F\":function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"ehBJ\")},o8NH:function(module,exports,__webpack_require__){var $export=__webpack_require__(\"Y7ZC\");$export($export.S+$export.F,\"Object\",{assign:__webpack_require__(\"kwZ1\")})},o9j8:function(module,exports){module.exports=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"]},oVml:function(module,exports,__webpack_require__){var anObject=__webpack_require__(\"5K7Z\");var dPs=__webpack_require__(\"fpC5\");var enumBugKeys=__webpack_require__(\"FpHa\");var IE_PROTO=__webpack_require__(\"VVlx\")(\"IE_PROTO\");var Empty=function(){};var PROTOTYPE=\"prototype\";var createDict=function(){var iframe=__webpack_require__(\"Hsns\")(\"iframe\");var i=enumBugKeys.length;var lt=\"<\";var gt=\">\";var iframeDocument;iframe.style.display=\"none\";__webpack_require__(\"MvwC\").appendChild(iframe);iframe.src=\"javascript:\";iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+\"script\"+gt+\"document.F=Object\"+lt+\"/script\"+gt);iframeDocument.close();createDict=iframeDocument.F;while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict()};module.exports=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE]=anObject(O);result=new Empty;Empty[PROTOTYPE]=null;result[IE_PROTO]=O}else result=createDict();return Properties===undefined?result:dPs(result,Properties)}},\"oh+g\":function(module,exports,__webpack_require__){var core=__webpack_require__(\"WEpk\");var $JSON=core.JSON||(core.JSON={stringify:JSON.stringify});module.exports=function stringify(it){return $JSON.stringify.apply($JSON,arguments)}},oioR:function(module,exports,__webpack_require__){var ctx=__webpack_require__(\"2GTP\");var call=__webpack_require__(\"sNwI\");var isArrayIter=__webpack_require__(\"NwJ3\");var anObject=__webpack_require__(\"5K7Z\");var toLength=__webpack_require__(\"tEej\");var getIterFn=__webpack_require__(\"fNZA\");var BREAK={};var RETURN={};var exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable);var f=ctx(fn,that,entries?2:1);var index=0;var length,step,iterator,result;if(typeof iterFn!=\"function\")throw TypeError(iterable+\" is not iterable!\");if(isArrayIter(iterFn))for(length=toLength(iterable.length);length>index;index++){result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]);if(result===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){result=call(iterator,f,step.value,entries);if(result===BREAK||result===RETURN)return result}};exports.BREAK=BREAK;exports.RETURN=RETURN},oyvS:function(module,exports){module.exports=require(\"path\")},p0XB:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"9BDd\")},pLtp:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"iq4v\")},pSMy:function(module,exports,__webpack_require__){var global=__webpack_require__(\"ysHE\");var getOwnPropertyDescriptor=__webpack_require__(\"pYsU\").f;var hide=__webpack_require__(\"wBs/\");var redefine=__webpack_require__(\"1f/i\");var setGlobal=__webpack_require__(\"nX7E\");var copyConstructorProperties=__webpack_require__(\"a+hM\");var isForced=__webpack_require__(\"mKQw\");module.exports=function(options,source){var TARGET=options.target;var GLOBAL=options.global;var STATIC=options.stat;var FORCED,target,key,targetProperty,sourceProperty,descriptor;if(GLOBAL){target=global}else if(STATIC){target=global[TARGET]||setGlobal(TARGET,{})}else{target=(global[TARGET]||{}).prototype}if(target)for(key in source){sourceProperty=source[key];if(options.noTargetGet){descriptor=getOwnPropertyDescriptor(target,key);targetProperty=descriptor&&descriptor.value}else targetProperty=target[key];FORCED=isForced(GLOBAL?key:TARGET+(STATIC?\".\":\"#\")+key,options.forced);if(!FORCED&&targetProperty!==undefined){if(typeof sourceProperty===typeof targetProperty)continue;copyConstructorProperties(sourceProperty,targetProperty)}if(options.sham||targetProperty&&targetProperty.sham){hide(sourceProperty,\"sham\",true)}redefine(target,key,sourceProperty,options)}}},pV7Z:function(module,exports,__webpack_require__){\"use strict\";if(true){module.exports=__webpack_require__(\"FDah\")}else{}},pYsU:function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(\"lb/b\");var propertyIsEnumerableModule=__webpack_require__(\"iCuu\");var createPropertyDescriptor=__webpack_require__(\"2Hee\");var toIndexedObject=__webpack_require__(\"IutQ\");var toPrimitive=__webpack_require__(\"ehg7\");var has=__webpack_require__(\"57wU\");var IE8_DOM_DEFINE=__webpack_require__(\"a0i3\");var nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;exports.f=DESCRIPTORS?nativeGetOwnPropertyDescriptor:function getOwnPropertyDescriptor(O,P){O=toIndexedObject(O);P=toPrimitive(P,true);if(IE8_DOM_DEFINE)try{return nativeGetOwnPropertyDescriptor(O,P)}catch(e){}if(has(O,P))return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O,P),O[P])}},pZxE:function(module,exports,__webpack_require__){\"use strict\";function finallyConstructor(callback){var constructor=this.constructor;return this.then(function(value){return constructor.resolve(callback()).then(function(){return value})},function(reason){return constructor.resolve(callback()).then(function(){return constructor.reject(reason)})})}var setTimeoutFunc=setTimeout;function noop(){}function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments)}}function Promise(fn){if(!(this instanceof Promise))throw new TypeError(\"Promises must be constructed via new\");if(typeof fn!==\"function\")throw new TypeError(\"not a function\");this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];doResolve(fn,this)}function handle(self,deferred){while(self._state===3){self=self._value}if(self._state===0){self._deferreds.push(deferred);return}self._handled=true;Promise._immediateFn(function(){var cb=self._state===1?deferred.onFulfilled:deferred.onRejected;if(cb===null){(self._state===1?resolve:reject)(deferred.promise,self._value);return}var ret;try{ret=cb(self._value)}catch(e){reject(deferred.promise,e);return}resolve(deferred.promise,ret)})}function resolve(self,newValue){try{if(newValue===self)throw new TypeError(\"A promise cannot be resolved with itself.\");if(newValue&&(typeof newValue===\"object\"||typeof newValue===\"function\")){var then=newValue.then;if(newValue instanceof Promise){self._state=3;self._value=newValue;finale(self);return}else if(typeof then===\"function\"){doResolve(bind(then,newValue),self);return}}self._state=1;self._value=newValue;finale(self)}catch(e){reject(self,e)}}function reject(self,newValue){self._state=2;self._value=newValue;finale(self)}function finale(self){if(self._state===2&&self._deferreds.length===0){Promise._immediateFn(function(){if(!self._handled){Promise._unhandledRejectionFn(self._value)}})}for(var i=0,len=self._deferreds.length;i<len;i++){handle(self,self._deferreds[i])}self._deferreds=null}function Handler(onFulfilled,onRejected,promise){this.onFulfilled=typeof onFulfilled===\"function\"?onFulfilled:null;this.onRejected=typeof onRejected===\"function\"?onRejected:null;this.promise=promise}function doResolve(fn,self){var done=false;try{fn(function(value){if(done)return;done=true;resolve(self,value)},function(reason){if(done)return;done=true;reject(self,reason)})}catch(ex){if(done)return;done=true;reject(self,ex)}}Promise.prototype[\"catch\"]=function(onRejected){return this.then(null,onRejected)};Promise.prototype.then=function(onFulfilled,onRejected){var prom=new this.constructor(noop);handle(this,new Handler(onFulfilled,onRejected,prom));return prom};Promise.prototype[\"finally\"]=finallyConstructor;Promise.all=function(arr){return new Promise(function(resolve,reject){if(!arr||typeof arr.length===\"undefined\")throw new TypeError(\"Promise.all accepts an array\");var args=Array.prototype.slice.call(arr);if(args.length===0)return resolve([]);var remaining=args.length;function res(i,val){try{if(val&&(typeof val===\"object\"||typeof val===\"function\")){var then=val.then;if(typeof then===\"function\"){then.call(val,function(val){res(i,val)},reject);return}}args[i]=val;if(--remaining===0){resolve(args)}}catch(ex){reject(ex)}}for(var i=0;i<args.length;i++){res(i,args[i])}})};Promise.resolve=function(value){if(value&&typeof value===\"object\"&&value.constructor===Promise){return value}return new Promise(function(resolve){resolve(value)})};Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})};Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++){values[i].then(resolve,reject)}})};Promise._immediateFn=typeof setImmediate===\"function\"&&function(fn){setImmediate(fn)}||function(fn){setTimeoutFunc(fn,0)};Promise._unhandledRejectionFn=function _unhandledRejectionFn(err){if(typeof console!==\"undefined\"&&console){console.warn(\"Possible Unhandled Promise Rejection:\",err)}};var globalNS=function(){if(typeof self!==\"undefined\"){return self}if(typeof window!==\"undefined\"){return window}if(typeof global!==\"undefined\"){return global}throw new Error(\"unable to locate global object\")}();if(!(\"Promise\"in globalNS)){globalNS[\"Promise\"]=Promise}else if(!globalNS.Promise.prototype[\"finally\"]){globalNS.Promise.prototype[\"finally\"]=finallyConstructor}},pbKT:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"qijr\")},ptKZ:function(module,exports){var id=0;var postfix=Math.random();module.exports=function(key){return\"Symbol(\".concat(key===undefined?\"\":key,\")_\",(++id+postfix).toString(36))}},pu1m:function(module,exports,__webpack_require__){var util=__webpack_require__(\"jK02\"),net=__webpack_require__(\"Qs2e\"),tls=__webpack_require__(\"ugmf\"),url=__webpack_require__(\"bzos\"),driver=__webpack_require__(\"qf7z\"),API=__webpack_require__(\"2RBK\"),Event=__webpack_require__(\"AhIK\");var DEFAULT_PORTS={\"http:\":80,\"https:\":443,\"ws:\":80,\"wss:\":443},SECURE_PROTOCOLS=[\"https:\",\"wss:\"];var Client=function(_url,protocols,options){options=options||{};this.url=_url;this._driver=driver.client(this.url,{maxLength:options.maxLength,protocols:protocols});[\"open\",\"error\"].forEach(function(event){this._driver.on(event,function(){self.headers=self._driver.headers;self.statusCode=self._driver.statusCode})},this);var proxy=options.proxy||{},endpoint=url.parse(proxy.origin||this.url),port=endpoint.port||DEFAULT_PORTS[endpoint.protocol],secure=SECURE_PROTOCOLS.indexOf(endpoint.protocol)>=0,onConnect=function(){self._onConnect()},netOptions=options.net||{},originTLS=options.tls||{},socketTLS=proxy.origin?proxy.tls||{}:originTLS,self=this;netOptions.host=socketTLS.host=endpoint.hostname;netOptions.port=socketTLS.port=port;originTLS.ca=originTLS.ca||options.ca;socketTLS.servername=socketTLS.servername||endpoint.hostname;this._stream=secure?tls.connect(socketTLS,onConnect):net.connect(netOptions,onConnect);if(proxy.origin)this._configureProxy(proxy,originTLS);API.call(this,options)};util.inherits(Client,API);Client.prototype._onConnect=function(){var worker=this._proxy||this._driver;worker.start()};Client.prototype._configureProxy=function(proxy,originTLS){var uri=url.parse(this.url),secure=SECURE_PROTOCOLS.indexOf(uri.protocol)>=0,self=this,name;this._proxy=this._driver.proxy(proxy.origin);if(proxy.headers){for(name in proxy.headers)this._proxy.setHeader(name,proxy.headers[name])}this._proxy.pipe(this._stream,{end:false});this._stream.pipe(this._proxy);this._proxy.on(\"connect\",function(){if(secure){var options={socket:self._stream,servername:uri.hostname};for(name in originTLS)options[name]=originTLS[name];self._stream=tls.connect(options);self._configureStream()}self._driver.io.pipe(self._stream);self._stream.pipe(self._driver.io);self._driver.start()});this._proxy.on(\"error\",function(error){self._driver.emit(\"error\",error)})};module.exports=Client},\"q+85\":function(module,exports,__webpack_require__){\"use strict\";var Headers=function(){this.clear()};Headers.prototype.ALLOWED_DUPLICATES=[\"set-cookie\",\"set-cookie2\",\"warning\",\"www-authenticate\"];Headers.prototype.clear=function(){this._sent={};this._lines=[]};Headers.prototype.set=function(name,value){if(value===undefined)return;name=this._strip(name);value=this._strip(value);var key=name.toLowerCase();if(!this._sent.hasOwnProperty(key)||this.ALLOWED_DUPLICATES.indexOf(key)>=0){this._sent[key]=true;this._lines.push(name+\": \"+value+\"\\r\\n\")}};Headers.prototype.toString=function(){return this._lines.join(\"\")};Headers.prototype._strip=function(string){return string.toString().replace(/^ */,\"\").replace(/ *$/,\"\")};module.exports=Headers},q0E7:function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"iterator\")},q1tI:function(module,exports,__webpack_require__){\"use strict\";if(true){module.exports=__webpack_require__(\"viRO\")}else{}},q6LJ:function(module,exports,__webpack_require__){var global=__webpack_require__(\"5T2Y\");var macrotask=__webpack_require__(\"QXhf\").set;var Observer=global.MutationObserver||global.WebKitMutationObserver;var process=global.process;var Promise=global.Promise;var isNode=__webpack_require__(\"a0xu\")(process)==\"process\";module.exports=function(){var head,last,notify;var flush=function(){var parent,fn;if(isNode&&(parent=process.domain))parent.exit();while(head){fn=head.fn;head=head.next;try{fn()}catch(e){if(head)notify();else last=undefined;throw e}}last=undefined;if(parent)parent.enter()};if(isNode){notify=function(){process.nextTick(flush)}}else if(Observer&&!(global.navigator&&global.navigator.standalone)){var toggle=true;var node=document.createTextNode(\"\");new Observer(flush).observe(node,{characterData:true});notify=function(){node.data=toggle=!toggle}}else if(Promise&&Promise.resolve){var promise=Promise.resolve(undefined);notify=function(){promise.then(flush)}}else{notify=function(){macrotask.call(global,flush)}}return function(fn){var task={fn:fn,next:undefined};if(last)last.next=task;if(!head){head=task;notify()}last=task}}},q94Q:function(module,exports,__webpack_require__){var path=__webpack_require__(\"4Ea8\");var has=__webpack_require__(\"57wU\");var wrappedWellKnownSymbolModule=__webpack_require__(\"ahhG\");var defineProperty=__webpack_require__(\"TIpl\").f;module.exports=function(NAME){var Symbol=path.Symbol||(path.Symbol={});if(!has(Symbol,NAME))defineProperty(Symbol,NAME,{value:wrappedWellKnownSymbolModule.f(NAME)})}},qBi7:function(module,exports,__webpack_require__){var shared=__webpack_require__(\"MfhB\")(\"keys\");var uid=__webpack_require__(\"ptKZ\");module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},qf7z:function(module,exports,__webpack_require__){\"use strict\";var Base=__webpack_require__(\"Wdmt\"),Client=__webpack_require__(\"AzCm\"),Server=__webpack_require__(\"ViYL\");var Driver={client:function(url,options){options=options||{};if(options.masking===undefined)options.masking=true;return new Client(url,options)},server:function(options){options=options||{};if(options.requireMasking===undefined)options.requireMasking=true;return new Server(options)},http:function(){return Server.http.apply(Server,arguments)},isSecureRequest:function(request){return Server.isSecureRequest(request)},isWebSocket:function(request){if(request.method!==\"GET\")return false;var connection=request.headers.connection||\"\",upgrade=request.headers.upgrade||\"\";return request.method===\"GET\"&&connection.toLowerCase().split(/ *, */).indexOf(\"upgrade\")>=0&&upgrade.toLowerCase()===\"websocket\"},validateOptions:function(options,validKeys){Base.validateOptions(options,validKeys)}};module.exports=Driver},qijr:function(module,exports,__webpack_require__){__webpack_require__(\"czwh\");module.exports=__webpack_require__(\"WEpk\").Reflect.construct},qjh4:function(module,exports,__webpack_require__){\"use strict\";var DESCRIPTORS=__webpack_require__(\"lb/b\");var has=__webpack_require__(\"57wU\");var isObject=__webpack_require__(\"kpns\");var defineProperty=__webpack_require__(\"TIpl\").f;var copyConstructorProperties=__webpack_require__(\"a+hM\");var NativeSymbol=__webpack_require__(\"ysHE\").Symbol;if(DESCRIPTORS&&typeof NativeSymbol==\"function\"&&(!(\"description\"in NativeSymbol.prototype)||NativeSymbol().description!==undefined)){var EmptyStringDescriptionStore={};var SymbolWrapper=function Symbol(){var description=arguments.length<1||arguments[0]===undefined?undefined:String(arguments[0]);var result=this instanceof SymbolWrapper?new NativeSymbol(description):description===undefined?NativeSymbol():NativeSymbol(description);if(description===\"\")EmptyStringDescriptionStore[result]=true;return result};copyConstructorProperties(SymbolWrapper,NativeSymbol);var symbolPrototype=SymbolWrapper.prototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString;var native=String(NativeSymbol(\"test\"))==\"Symbol(test)\";var regexp=/^Symbol\\((.*)\\)[^)]+$/;defineProperty(symbolPrototype,\"description\",{configurable:true,get:function description(){var symbol=isObject(this)?this.valueOf():this;var string=symbolToString.call(symbol);if(has(EmptyStringDescriptionStore,symbol))return\"\";var desc=native?string.slice(7,-1):string.replace(regexp,\"$1\");return desc===\"\"?undefined:desc}});__webpack_require__(\"pSMy\")({global:true,forced:true},{Symbol:SymbolWrapper})}},qlMm:function(module,exports,__webpack_require__){var util=__webpack_require__(\"jK02\"),driver=__webpack_require__(\"qf7z\"),API=__webpack_require__(\"2RBK\");var WebSocket=function(request,socket,body,protocols,options){options=options||{};this._stream=socket;this._driver=driver.http(request,{maxLength:options.maxLength,protocols:protocols});var self=this;if(!this._stream||!this._stream.writable)return;if(!this._stream.readable)return this._stream.end();var catchup=function(){self._stream.removeListener(\"data\",catchup)};this._stream.on(\"data\",catchup);API.call(this,options);process.nextTick(function(){self._driver.start();self._driver.io.write(body)})};util.inherits(WebSocket,API);WebSocket.isWebSocket=function(request){return driver.isWebSocket(request)};WebSocket.validateOptions=function(options,validKeys){driver.validateOptions(options,validKeys)};WebSocket.WebSocket=WebSocket;WebSocket.Client=__webpack_require__(\"pu1m\");WebSocket.EventSource=__webpack_require__(\"7X3U\");module.exports=WebSocket},rZEa:function(module,exports,__webpack_require__){\"use strict\";var isArray=__webpack_require__(\"k2qa\");var isObject=__webpack_require__(\"kpns\");var toObject=__webpack_require__(\"SAp2\");var toLength=__webpack_require__(\"H6ty\");var createProperty=__webpack_require__(\"U4hp\");var arraySpeciesCreate=__webpack_require__(\"rhCS\");var IS_CONCAT_SPREADABLE=__webpack_require__(\"aXXJ\")(\"isConcatSpreadable\");var MAX_SAFE_INTEGER=9007199254740991;var MAXIMUM_ALLOWED_INDEX_EXCEEDED=\"Maximum allowed index exceeded\";var IS_CONCAT_SPREADABLE_SUPPORT=!__webpack_require__(\"0HDe\")(function(){var array=[];array[IS_CONCAT_SPREADABLE]=false;return array.concat()[0]!==array});var SPECIES_SUPPORT=__webpack_require__(\"g7Su\")(\"concat\");var isConcatSpreadable=function(O){if(!isObject(O))return false;var spreadable=O[IS_CONCAT_SPREADABLE];return spreadable!==undefined?!!spreadable:isArray(O)};var FORCED=!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT;__webpack_require__(\"pSMy\")({target:\"Array\",proto:true,forced:FORCED},{concat:function concat(arg){var O=toObject(this);var A=arraySpeciesCreate(O,0);var n=0;var i,k,length,len,E;for(i=-1,length=arguments.length;i<length;i++){E=i===-1?O:arguments[i];if(isConcatSpreadable(E)){len=toLength(E.length);if(n+len>MAX_SAFE_INTEGER)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);for(k=0;k<len;k++,n++)if(k in E)createProperty(A,n,E[k])}else{if(n>=MAX_SAFE_INTEGER)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);createProperty(A,n++,E)}}A.length=n;return A}})},raTm:function(module,exports,__webpack_require__){\"use strict\";var global=__webpack_require__(\"5T2Y\");var $export=__webpack_require__(\"Y7ZC\");var meta=__webpack_require__(\"6/1s\");var fails=__webpack_require__(\"KUxP\");var hide=__webpack_require__(\"NegM\");var redefineAll=__webpack_require__(\"XJU/\");var forOf=__webpack_require__(\"oioR\");var anInstance=__webpack_require__(\"EXMj\");var isObject=__webpack_require__(\"93I4\");var setToStringTag=__webpack_require__(\"RfKB\");var dP=__webpack_require__(\"2faE\").f;var each=__webpack_require__(\"V7Et\")(0);var DESCRIPTORS=__webpack_require__(\"jmDH\");module.exports=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=global[NAME];var C=Base;var ADDER=IS_MAP?\"set\":\"add\";var proto=C&&C.prototype;var O={};if(!DESCRIPTORS||typeof C!=\"function\"||!(IS_WEAK||proto.forEach&&!fails(function(){(new C).entries().next()}))){C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER);redefineAll(C.prototype,methods);meta.NEED=true}else{C=wrapper(function(target,iterable){anInstance(target,C,NAME,\"_c\");target._c=new Base;if(iterable!=undefined)forOf(iterable,IS_MAP,target[ADDER],target)});each(\"add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON\".split(\",\"),function(KEY){var IS_ADDER=KEY==\"add\"||KEY==\"set\";if(KEY in proto&&!(IS_WEAK&&KEY==\"clear\"))hide(C.prototype,KEY,function(a,b){anInstance(this,C,KEY);if(!IS_ADDER&&IS_WEAK&&!isObject(a))return KEY==\"get\"?undefined:false;var result=this._c[KEY](a===0?0:a,b);return IS_ADDER?this:result})});IS_WEAK||dP(C.prototype,\"size\",{get:function(){return this._c.size}})}setToStringTag(C,NAME);O[NAME]=C;$export($export.G+$export.W+$export.F,O);if(!IS_WEAK)common.setStrong(C,NAME,IS_MAP);return C}},rhCS:function(module,exports,__webpack_require__){var isObject=__webpack_require__(\"kpns\");var isArray=__webpack_require__(\"k2qa\");var SPECIES=__webpack_require__(\"aXXJ\")(\"species\");module.exports=function(originalArray,length){var C;if(isArray(originalArray)){C=originalArray.constructor;if(typeof C==\"function\"&&(C===Array||isArray(C.prototype)))C=undefined;else if(isObject(C)){C=C[SPECIES];if(C===null)C=undefined}}return new(C===undefined?Array:C)(length===0?0:length)}},rjtV:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});function _interopDefault(ex){return ex&&typeof ex===\"object\"&&\"default\"in ex?ex[\"default\"]:ex}var firebase=_interopDefault(__webpack_require__(\"eq5/\"));var util=__webpack_require__(\"Jv5v\");var tslib_1=__webpack_require__(\"zOht\");var logger$1=__webpack_require__(\"NcST\");var fayeWebsocket=__webpack_require__(\"qlMm\");\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var DOMStorageWrapper=function(){function DOMStorageWrapper(domStorage_){this.domStorage_=domStorage_;this.prefix_=\"firebase:\"}DOMStorageWrapper.prototype.set=function(key,value){if(value==null){this.domStorage_.removeItem(this.prefixedName_(key))}else{this.domStorage_.setItem(this.prefixedName_(key),util.stringify(value))}};DOMStorageWrapper.prototype.get=function(key){var storedVal=this.domStorage_.getItem(this.prefixedName_(key));if(storedVal==null){return null}else{return util.jsonEval(storedVal)}};DOMStorageWrapper.prototype.remove=function(key){this.domStorage_.removeItem(this.prefixedName_(key))};DOMStorageWrapper.prototype.prefixedName_=function(name){return this.prefix_+name};DOMStorageWrapper.prototype.toString=function(){return this.domStorage_.toString()};return DOMStorageWrapper}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var MemoryStorage=function(){function MemoryStorage(){this.cache_={};this.isInMemoryStorage=true}MemoryStorage.prototype.set=function(key,value){if(value==null){delete this.cache_[key]}else{this.cache_[key]=value}};MemoryStorage.prototype.get=function(key){if(util.contains(this.cache_,key)){return this.cache_[key]}return null};MemoryStorage.prototype.remove=function(key){delete this.cache_[key]};return MemoryStorage}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var createStoragefor=function(domStorageName){try{if(typeof window!==\"undefined\"&&typeof window[domStorageName]!==\"undefined\"){var domStorage=window[domStorageName];domStorage.setItem(\"firebase:sentinel\",\"cache\");domStorage.removeItem(\"firebase:sentinel\");return new DOMStorageWrapper(domStorage)}}catch(e){}return new MemoryStorage};var PersistentStorage=createStoragefor(\"localStorage\");var SessionStorage=createStoragefor(\"sessionStorage\");\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var logClient=new logger$1.Logger(\"@firebase/database\");var LUIDGenerator=function(){var id=1;return function(){return id++}}();var sha1=function(str){var utf8Bytes=util.stringToByteArray(str);var sha1=new util.Sha1;sha1.update(utf8Bytes);var sha1Bytes=sha1.digest();return util.base64.encodeByteArray(sha1Bytes)};var buildLogMessage_=function(){var var_args=[];for(var _i=0;_i<arguments.length;_i++){var_args[_i]=arguments[_i]}var message=\"\";for(var i=0;i<var_args.length;i++){if(Array.isArray(var_args[i])||var_args[i]&&typeof var_args[i]===\"object\"&&typeof var_args[i].length===\"number\"){message+=buildLogMessage_.apply(null,var_args[i])}else if(typeof var_args[i]===\"object\"){message+=util.stringify(var_args[i])}else{message+=var_args[i]}message+=\" \"}return message};var logger=null;var firstLog_=true;var enableLogging=function(logger_,persistent){util.assert(!persistent||(logger_===true||logger_===false),\"Can't turn on custom loggers persistently.\");if(logger_===true){logClient.logLevel=logger$1.LogLevel.VERBOSE;logger=logClient.log.bind(logClient);if(persistent)SessionStorage.set(\"logging_enabled\",true)}else if(typeof logger_===\"function\"){logger=logger_}else{logger=null;SessionStorage.remove(\"logging_enabled\")}};var log=function(){var var_args=[];for(var _i=0;_i<arguments.length;_i++){var_args[_i]=arguments[_i]}if(firstLog_===true){firstLog_=false;if(logger===null&&SessionStorage.get(\"logging_enabled\")===true)enableLogging(true)}if(logger){var message=buildLogMessage_.apply(null,var_args);logger(message)}};var logWrapper=function(prefix){return function(){var var_args=[];for(var _i=0;_i<arguments.length;_i++){var_args[_i]=arguments[_i]}log.apply(void 0,[prefix].concat(var_args))}};var error=function(){var var_args=[];for(var _i=0;_i<arguments.length;_i++){var_args[_i]=arguments[_i]}var message=\"FIREBASE INTERNAL ERROR: \"+buildLogMessage_.apply(void 0,var_args);logClient.error(message)};var fatal=function(){var var_args=[];for(var _i=0;_i<arguments.length;_i++){var_args[_i]=arguments[_i]}var message=\"FIREBASE FATAL ERROR: \"+buildLogMessage_.apply(void 0,var_args);logClient.error(message);throw new Error(message)};var warn=function(){var var_args=[];for(var _i=0;_i<arguments.length;_i++){var_args[_i]=arguments[_i]}var message=\"FIREBASE WARNING: \"+buildLogMessage_.apply(void 0,var_args);logClient.warn(message)};var warnIfPageIsSecure=function(){if(typeof window!==\"undefined\"&&window.location&&window.location.protocol&&window.location.protocol.indexOf(\"https:\")!==-1){warn(\"Insecure Firebase access from a secure page. \"+\"Please use https in calls to new Firebase().\")}};var isInvalidJSONNumber=function(data){return typeof data===\"number\"&&(data!=data||data==Number.POSITIVE_INFINITY||data==Number.NEGATIVE_INFINITY)};var executeWhenDOMReady=function(fn){if(util.isNodeSdk()||document.readyState===\"complete\"){fn()}else{var called_1=false;var wrappedFn_1=function(){if(!document.body){setTimeout(wrappedFn_1,Math.floor(10));return}if(!called_1){called_1=true;fn()}};if(document.addEventListener){document.addEventListener(\"DOMContentLoaded\",wrappedFn_1,false);window.addEventListener(\"load\",wrappedFn_1,false)}else if(document.attachEvent){document.attachEvent(\"onreadystatechange\",function(){if(document.readyState===\"complete\")wrappedFn_1()});window.attachEvent(\"onload\",wrappedFn_1)}}};var MIN_NAME=\"[MIN_NAME]\";var MAX_NAME=\"[MAX_NAME]\";var nameCompare=function(a,b){if(a===b){return 0}else if(a===MIN_NAME||b===MAX_NAME){return-1}else if(b===MIN_NAME||a===MAX_NAME){return 1}else{var aAsInt=tryParseInt(a),bAsInt=tryParseInt(b);if(aAsInt!==null){if(bAsInt!==null){return aAsInt-bAsInt==0?a.length-b.length:aAsInt-bAsInt}else{return-1}}else if(bAsInt!==null){return 1}else{return a<b?-1:1}}};var stringCompare=function(a,b){if(a===b){return 0}else if(a<b){return-1}else{return 1}};var requireKey=function(key,obj){if(obj&&key in obj){return obj[key]}else{throw new Error(\"Missing required key (\"+key+\") in object: \"+util.stringify(obj))}};var ObjectToUniqueKey=function(obj){if(typeof obj!==\"object\"||obj===null)return util.stringify(obj);var keys=[];for(var k in obj){keys.push(k)}keys.sort();var key=\"{\";for(var i=0;i<keys.length;i++){if(i!==0)key+=\",\";key+=util.stringify(keys[i]);key+=\":\";key+=ObjectToUniqueKey(obj[keys[i]])}key+=\"}\";return key};var splitStringBySize=function(str,segsize){var len=str.length;if(len<=segsize){return[str]}var dataSegs=[];for(var c=0;c<len;c+=segsize){if(c+segsize>len){dataSegs.push(str.substring(c,len))}else{dataSegs.push(str.substring(c,c+segsize))}}return dataSegs};var each=function(obj,fn){if(Array.isArray(obj)){for(var i=0;i<obj.length;++i){fn(i,obj[i])}}else{util.forEach(obj,function(key,val){return fn(val,key)})}};var doubleToIEEE754String=function(v){util.assert(!isInvalidJSONNumber(v),\"Invalid JSON number\");var ebits=11,fbits=52;var bias=(1<<ebits-1)-1,s,e,f,ln,i,bits,str;if(v===0){e=0;f=0;s=1/v===-Infinity?1:0}else{s=v<0;v=Math.abs(v);if(v>=Math.pow(2,1-bias)){ln=Math.min(Math.floor(Math.log(v)/Math.LN2),bias);e=ln+bias;f=Math.round(v*Math.pow(2,fbits-ln)-Math.pow(2,fbits))}else{e=0;f=Math.round(v/Math.pow(2,1-bias-fbits))}}bits=[];for(i=fbits;i;i-=1){bits.push(f%2?1:0);f=Math.floor(f/2)}for(i=ebits;i;i-=1){bits.push(e%2?1:0);e=Math.floor(e/2)}bits.push(s?1:0);bits.reverse();str=bits.join(\"\");var hexByteString=\"\";for(i=0;i<64;i+=8){var hexByte=parseInt(str.substr(i,8),2).toString(16);if(hexByte.length===1)hexByte=\"0\"+hexByte;hexByteString=hexByteString+hexByte}return hexByteString.toLowerCase()};var isChromeExtensionContentScript=function(){return!!(typeof window===\"object\"&&window[\"chrome\"]&&window[\"chrome\"][\"extension\"]&&!/^chrome/.test(window.location.href))};var isWindowsStoreApp=function(){return typeof Windows===\"object\"&&typeof Windows.UI===\"object\"};var errorForServerCode=function(code,query){var reason=\"Unknown Error\";if(code===\"too_big\"){reason=\"The data requested exceeds the maximum size \"+\"that can be accessed with a single request.\"}else if(code==\"permission_denied\"){reason=\"Client doesn't have permission to access the desired data.\"}else if(code==\"unavailable\"){reason=\"The service is unavailable\"}var error=new Error(code+\" at \"+query.path.toString()+\": \"+reason);error.code=code.toUpperCase();return error};var INTEGER_REGEXP_=new RegExp(\"^-?\\\\d{1,10}$\");var tryParseInt=function(str){if(INTEGER_REGEXP_.test(str)){var intVal=Number(str);if(intVal>=-2147483648&&intVal<=2147483647){return intVal}}return null};var exceptionGuard=function(fn){try{fn()}catch(e){setTimeout(function(){var stack=e.stack||\"\";warn(\"Exception was thrown by user callback.\",stack);throw e},Math.floor(0))}};var beingCrawled=function(){var userAgent=typeof window===\"object\"&&window[\"navigator\"]&&window[\"navigator\"][\"userAgent\"]||\"\";return userAgent.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0};var setTimeoutNonBlocking=function(fn,time){var timeout=setTimeout(fn,time);if(typeof timeout===\"object\"&&timeout[\"unref\"]){timeout[\"unref\"]()}return timeout};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Path=function(){function Path(pathOrString,pieceNum){if(pieceNum===void 0){this.pieces_=pathOrString.split(\"/\");var copyTo=0;for(var i=0;i<this.pieces_.length;i++){if(this.pieces_[i].length>0){this.pieces_[copyTo]=this.pieces_[i];copyTo++}}this.pieces_.length=copyTo;this.pieceNum_=0}else{this.pieces_=pathOrString;this.pieceNum_=pieceNum}}Object.defineProperty(Path,\"Empty\",{get:function(){return new Path(\"\")},enumerable:true,configurable:true});Path.prototype.getFront=function(){if(this.pieceNum_>=this.pieces_.length)return null;return this.pieces_[this.pieceNum_]};Path.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_};Path.prototype.popFront=function(){var pieceNum=this.pieceNum_;if(pieceNum<this.pieces_.length){pieceNum++}return new Path(this.pieces_,pieceNum)};Path.prototype.getBack=function(){if(this.pieceNum_<this.pieces_.length)return this.pieces_[this.pieces_.length-1];return null};Path.prototype.toString=function(){var pathString=\"\";for(var i=this.pieceNum_;i<this.pieces_.length;i++){if(this.pieces_[i]!==\"\")pathString+=\"/\"+this.pieces_[i]}return pathString||\"/\"};Path.prototype.toUrlEncodedString=function(){var pathString=\"\";for(var i=this.pieceNum_;i<this.pieces_.length;i++){if(this.pieces_[i]!==\"\")pathString+=\"/\"+encodeURIComponent(String(this.pieces_[i]))}return pathString||\"/\"};Path.prototype.slice=function(begin){if(begin===void 0){begin=0}return this.pieces_.slice(this.pieceNum_+begin)};Path.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;var pieces=[];for(var i=this.pieceNum_;i<this.pieces_.length-1;i++)pieces.push(this.pieces_[i]);return new Path(pieces,0)};Path.prototype.child=function(childPathObj){var pieces=[];for(var i=this.pieceNum_;i<this.pieces_.length;i++)pieces.push(this.pieces_[i]);if(childPathObj instanceof Path){for(var i=childPathObj.pieceNum_;i<childPathObj.pieces_.length;i++){pieces.push(childPathObj.pieces_[i])}}else{var childPieces=childPathObj.split(\"/\");for(var i=0;i<childPieces.length;i++){if(childPieces[i].length>0)pieces.push(childPieces[i])}}return new Path(pieces,0)};Path.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length};Path.relativePath=function(outerPath,innerPath){var outer=outerPath.getFront(),inner=innerPath.getFront();if(outer===null){return innerPath}else if(outer===inner){return Path.relativePath(outerPath.popFront(),innerPath.popFront())}else{throw new Error(\"INTERNAL ERROR: innerPath (\"+innerPath+\") is not within \"+\"outerPath (\"+outerPath+\")\")}};Path.comparePaths=function(left,right){var leftKeys=left.slice();var rightKeys=right.slice();for(var i=0;i<leftKeys.length&&i<rightKeys.length;i++){var cmp=nameCompare(leftKeys[i],rightKeys[i]);if(cmp!==0)return cmp}if(leftKeys.length===rightKeys.length)return 0;return leftKeys.length<rightKeys.length?-1:1};Path.prototype.equals=function(other){if(this.getLength()!==other.getLength()){return false}for(var i=this.pieceNum_,j=other.pieceNum_;i<=this.pieces_.length;i++,j++){if(this.pieces_[i]!==other.pieces_[j]){return false}}return true};Path.prototype.contains=function(other){var i=this.pieceNum_;var j=other.pieceNum_;if(this.getLength()>other.getLength()){return false}while(i<this.pieces_.length){if(this.pieces_[i]!==other.pieces_[j]){return false}++i;++j}return true};return Path}();var ValidationPath=function(){function ValidationPath(path,errorPrefix_){this.errorPrefix_=errorPrefix_;this.parts_=path.slice();this.byteLength_=Math.max(1,this.parts_.length);for(var i=0;i<this.parts_.length;i++){this.byteLength_+=util.stringLength(this.parts_[i])}this.checkValid_()}Object.defineProperty(ValidationPath,\"MAX_PATH_DEPTH\",{get:function(){return 32},enumerable:true,configurable:true});Object.defineProperty(ValidationPath,\"MAX_PATH_LENGTH_BYTES\",{get:function(){return 768},enumerable:true,configurable:true});ValidationPath.prototype.push=function(child){if(this.parts_.length>0){this.byteLength_+=1}this.parts_.push(child);this.byteLength_+=util.stringLength(child);this.checkValid_()};ValidationPath.prototype.pop=function(){var last=this.parts_.pop();this.byteLength_-=util.stringLength(last);if(this.parts_.length>0){this.byteLength_-=1}};ValidationPath.prototype.checkValid_=function(){if(this.byteLength_>ValidationPath.MAX_PATH_LENGTH_BYTES){throw new Error(this.errorPrefix_+\"has a key path longer than \"+ValidationPath.MAX_PATH_LENGTH_BYTES+\" bytes (\"+this.byteLength_+\").\")}if(this.parts_.length>ValidationPath.MAX_PATH_DEPTH){throw new Error(this.errorPrefix_+\"path specified exceeds the maximum depth that can be written (\"+ValidationPath.MAX_PATH_DEPTH+\") or object contains a cycle \"+this.toErrorString())}};ValidationPath.prototype.toErrorString=function(){if(this.parts_.length==0){return\"\"}return\"in property '\"+this.parts_.join(\".\")+\"'\"};return ValidationPath}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var PROTOCOL_VERSION=\"5\";var VERSION_PARAM=\"v\";var TRANSPORT_SESSION_PARAM=\"s\";var REFERER_PARAM=\"r\";var FORGE_REF=\"f\";var FORGE_DOMAIN=\"firebaseio.com\";var LAST_SESSION_PARAM=\"ls\";var WEBSOCKET=\"websocket\";var LONG_POLLING=\"long_polling\";\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var RepoInfo=function(){function RepoInfo(host,secure,namespace,webSocketOnly,persistenceKey){if(persistenceKey===void 0){persistenceKey=\"\"}this.secure=secure;this.namespace=namespace;this.webSocketOnly=webSocketOnly;this.persistenceKey=persistenceKey;this.host=host.toLowerCase();this.domain=this.host.substr(this.host.indexOf(\".\")+1);this.internalHost=PersistentStorage.get(\"host:\"+host)||this.host}RepoInfo.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()};RepoInfo.prototype.isCacheableHost=function(){return this.internalHost.substr(0,2)===\"s-\"};RepoInfo.prototype.isDemoHost=function(){return this.domain===\"firebaseio-demo.com\"};RepoInfo.prototype.isCustomHost=function(){return this.domain!==\"firebaseio.com\"&&this.domain!==\"firebaseio-demo.com\"};RepoInfo.prototype.updateHost=function(newHost){if(newHost!==this.internalHost){this.internalHost=newHost;if(this.isCacheableHost()){PersistentStorage.set(\"host:\"+this.host,this.internalHost)}}};RepoInfo.prototype.connectionURL=function(type,params){util.assert(typeof type===\"string\",\"typeof type must == string\");util.assert(typeof params===\"object\",\"typeof params must == object\");var connURL;if(type===WEBSOCKET){connURL=(this.secure?\"wss://\":\"ws://\")+this.internalHost+\"/.ws?\"}else if(type===LONG_POLLING){connURL=(this.secure?\"https://\":\"http://\")+this.internalHost+\"/.lp?\"}else{throw new Error(\"Unknown connection type: \"+type)}if(this.needsQueryParam()){params[\"ns\"]=this.namespace}var pairs=[];util.forEach(params,function(key,value){pairs.push(key+\"=\"+value)});return connURL+pairs.join(\"&\")};RepoInfo.prototype.toString=function(){var str=this.toURLString();if(this.persistenceKey){str+=\"<\"+this.persistenceKey+\">\"}return str};RepoInfo.prototype.toURLString=function(){return(this.secure?\"https://\":\"http://\")+this.host};return RepoInfo}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function decodePath(pathString){var pathStringDecoded=\"\";var pieces=pathString.split(\"/\");for(var i=0;i<pieces.length;i++){if(pieces[i].length>0){var piece=pieces[i];try{piece=decodeURIComponent(piece.replace(/\\+/g,\" \"))}catch(e){}pathStringDecoded+=\"/\"+piece}}return pathStringDecoded}function decodeQuery(queryString){var results={};if(queryString.charAt(0)===\"?\"){queryString=queryString.substring(1)}for(var _i=0,_a=queryString.split(\"&\");_i<_a.length;_i++){var segment=_a[_i];if(segment.length===0){continue}var kv=segment.split(\"=\");if(kv.length===2){results[decodeURIComponent(kv[0])]=decodeURIComponent(kv[1])}else{warn(\"Invalid query segment '\"+segment+\"' in query '\"+queryString+\"'\")}}return results}var parseRepoInfo=function(dataURL){var parsedUrl=parseURL(dataURL),namespace=parsedUrl.subdomain;if(parsedUrl.domain===\"firebase\"){fatal(parsedUrl.host+\" is no longer supported. \"+\"Please use <YOUR FIREBASE>.firebaseio.com instead\")}if((!namespace||namespace==\"undefined\")&&parsedUrl.domain!==\"localhost\"){fatal(\"Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com\")}if(!parsedUrl.secure){warnIfPageIsSecure()}var webSocketOnly=parsedUrl.scheme===\"ws\"||parsedUrl.scheme===\"wss\";return{repoInfo:new RepoInfo(parsedUrl.host,parsedUrl.secure,namespace,webSocketOnly),path:new Path(parsedUrl.pathString)}};var parseURL=function(dataURL){var host=\"\",domain=\"\",subdomain=\"\",pathString=\"\";var secure=true,scheme=\"https\",port=443;if(typeof dataURL===\"string\"){var colonInd=dataURL.indexOf(\"//\");if(colonInd>=0){scheme=dataURL.substring(0,colonInd-1);dataURL=dataURL.substring(colonInd+2)}var slashInd=dataURL.indexOf(\"/\");if(slashInd===-1){slashInd=dataURL.length}var questionMarkInd=dataURL.indexOf(\"?\");if(questionMarkInd===-1){questionMarkInd=dataURL.length}host=dataURL.substring(0,Math.min(slashInd,questionMarkInd));if(slashInd<questionMarkInd){pathString=decodePath(dataURL.substring(slashInd,questionMarkInd))}var queryParams=decodeQuery(dataURL.substring(Math.min(dataURL.length,questionMarkInd)));colonInd=host.indexOf(\":\");if(colonInd>=0){secure=scheme===\"https\"||scheme===\"wss\";port=parseInt(host.substring(colonInd+1),10)}else{colonInd=dataURL.length}var parts=host.split(\".\");if(parts.length===3){domain=parts[1];subdomain=parts[0].toLowerCase()}else if(parts.length===2){domain=parts[0]}else if(parts[0].slice(0,colonInd).toLowerCase()===\"localhost\"){domain=\"localhost\"}if(subdomain===\"\"&&\"ns\"in queryParams){subdomain=queryParams[\"ns\"]}}return{host:host,port:port,domain:domain,subdomain:subdomain,secure:secure,scheme:scheme,pathString:pathString}};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var INVALID_KEY_REGEX_=/[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/;var INVALID_PATH_REGEX_=/[\\[\\].#$\\u0000-\\u001F\\u007F]/;var MAX_LEAF_SIZE_=10*1024*1024;var isValidKey=function(key){return typeof key===\"string\"&&key.length!==0&&!INVALID_KEY_REGEX_.test(key)};var isValidPathString=function(pathString){return typeof pathString===\"string\"&&pathString.length!==0&&!INVALID_PATH_REGEX_.test(pathString)};var isValidRootPathString=function(pathString){if(pathString){pathString=pathString.replace(/^\\/*\\.info(\\/|$)/,\"/\")}return isValidPathString(pathString)};var isValidPriority=function(priority){return priority===null||typeof priority===\"string\"||typeof priority===\"number\"&&!isInvalidJSONNumber(priority)||priority&&typeof priority===\"object\"&&util.contains(priority,\".sv\")};var validateFirebaseDataArg=function(fnName,argumentNumber,data,path,optional){if(optional&&data===undefined)return;validateFirebaseData(util.errorPrefix(fnName,argumentNumber,optional),data,path)};var validateFirebaseData=function(errorPrefix,data,path_){var path=path_ instanceof Path?new ValidationPath(path_,errorPrefix):path_;if(data===undefined){throw new Error(errorPrefix+\"contains undefined \"+path.toErrorString())}if(typeof data===\"function\"){throw new Error(errorPrefix+\"contains a function \"+path.toErrorString()+\" with contents = \"+data.toString())}if(isInvalidJSONNumber(data)){throw new Error(errorPrefix+\"contains \"+data.toString()+\" \"+path.toErrorString())}if(typeof data===\"string\"&&data.length>MAX_LEAF_SIZE_/3&&util.stringLength(data)>MAX_LEAF_SIZE_){throw new Error(errorPrefix+\"contains a string greater than \"+MAX_LEAF_SIZE_+\" utf8 bytes \"+path.toErrorString()+\" ('\"+data.substring(0,50)+\"...')\")}if(data&&typeof data===\"object\"){var hasDotValue_1=false,hasActualChild_1=false;util.forEach(data,function(key,value){if(key===\".value\"){hasDotValue_1=true}else if(key!==\".priority\"&&key!==\".sv\"){hasActualChild_1=true;if(!isValidKey(key)){throw new Error(errorPrefix+\" contains an invalid key (\"+key+\") \"+path.toErrorString()+\".  Keys must be non-empty strings \"+'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"')}}path.push(key);validateFirebaseData(errorPrefix,value,path);path.pop()});if(hasDotValue_1&&hasActualChild_1){throw new Error(errorPrefix+' contains \".value\" child '+path.toErrorString()+\" in addition to actual children.\")}}};var validateFirebaseMergePaths=function(errorPrefix,mergePaths){var i,curPath;for(i=0;i<mergePaths.length;i++){curPath=mergePaths[i];var keys=curPath.slice();for(var j=0;j<keys.length;j++){if(keys[j]===\".priority\"&&j===keys.length-1);else if(!isValidKey(keys[j])){throw new Error(errorPrefix+\"contains an invalid key (\"+keys[j]+\") in path \"+curPath.toString()+\". Keys must be non-empty strings \"+'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"')}}}mergePaths.sort(Path.comparePaths);var prevPath=null;for(i=0;i<mergePaths.length;i++){curPath=mergePaths[i];if(prevPath!==null&&prevPath.contains(curPath)){throw new Error(errorPrefix+\"contains a path \"+prevPath.toString()+\" that is ancestor of another path \"+curPath.toString())}prevPath=curPath}};var validateFirebaseMergeDataArg=function(fnName,argumentNumber,data,path,optional){if(optional&&data===undefined)return;var errorPrefix=util.errorPrefix(fnName,argumentNumber,optional);if(!(data&&typeof data===\"object\")||Array.isArray(data)){throw new Error(errorPrefix+\" must be an object containing the children to replace.\")}var mergePaths=[];util.forEach(data,function(key,value){var curPath=new Path(key);validateFirebaseData(errorPrefix,value,path.child(curPath));if(curPath.getBack()===\".priority\"){if(!isValidPriority(value)){throw new Error(errorPrefix+\"contains an invalid value for '\"+curPath.toString()+\"', which must be a valid \"+\"Firebase priority (a string, finite number, server value, or null).\")}}mergePaths.push(curPath)});validateFirebaseMergePaths(errorPrefix,mergePaths)};var validatePriority=function(fnName,argumentNumber,priority,optional){if(optional&&priority===undefined)return;if(isInvalidJSONNumber(priority))throw new Error(util.errorPrefix(fnName,argumentNumber,optional)+\"is \"+priority.toString()+\", but must be a valid Firebase priority (a string, finite number, \"+\"server value, or null).\");if(!isValidPriority(priority))throw new Error(util.errorPrefix(fnName,argumentNumber,optional)+\"must be a valid Firebase priority \"+\"(a string, finite number, server value, or null).\")};var validateEventType=function(fnName,argumentNumber,eventType,optional){if(optional&&eventType===undefined)return;switch(eventType){case\"value\":case\"child_added\":case\"child_removed\":case\"child_changed\":case\"child_moved\":break;default:throw new Error(util.errorPrefix(fnName,argumentNumber,optional)+'must be a valid event type = \"value\", \"child_added\", \"child_removed\", '+'\"child_changed\", or \"child_moved\".')}};var validateKey=function(fnName,argumentNumber,key,optional){if(optional&&key===undefined)return;if(!isValidKey(key))throw new Error(util.errorPrefix(fnName,argumentNumber,optional)+'was an invalid key = \"'+key+'\".  Firebase keys must be non-empty strings and '+'can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").')};var validatePathString=function(fnName,argumentNumber,pathString,optional){if(optional&&pathString===undefined)return;if(!isValidPathString(pathString))throw new Error(util.errorPrefix(fnName,argumentNumber,optional)+'was an invalid path = \"'+pathString+'\". Paths must be non-empty strings and '+'can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"')};var validateRootPathString=function(fnName,argumentNumber,pathString,optional){if(pathString){pathString=pathString.replace(/^\\/*\\.info(\\/|$)/,\"/\")}validatePathString(fnName,argumentNumber,pathString,optional)};var validateWritablePath=function(fnName,path){if(path.getFront()===\".info\"){throw new Error(fnName+\" failed = Can't modify data under /.info/\")}};var validateUrl=function(fnName,argumentNumber,parsedUrl){var pathString=parsedUrl.path.toString();if(!(typeof parsedUrl.repoInfo.host===\"string\")||parsedUrl.repoInfo.host.length===0||!isValidKey(parsedUrl.repoInfo.namespace)&&parsedUrl.repoInfo.host.split(\":\")[0]!==\"localhost\"||pathString.length!==0&&!isValidRootPathString(pathString)){throw new Error(util.errorPrefix(fnName,argumentNumber,false)+\"must be a valid firebase URL and \"+'the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".')}};var validateBoolean=function(fnName,argumentNumber,bool,optional){if(optional&&bool===undefined)return;if(typeof bool!==\"boolean\")throw new Error(util.errorPrefix(fnName,argumentNumber,optional)+\"must be a boolean.\")};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var OnDisconnect=function(){function OnDisconnect(repo_,path_){this.repo_=repo_;this.path_=path_}OnDisconnect.prototype.cancel=function(onComplete){util.validateArgCount(\"OnDisconnect.cancel\",0,1,arguments.length);util.validateCallback(\"OnDisconnect.cancel\",1,onComplete,true);var deferred=new util.Deferred;this.repo_.onDisconnectCancel(this.path_,deferred.wrapCallback(onComplete));return deferred.promise};OnDisconnect.prototype.remove=function(onComplete){util.validateArgCount(\"OnDisconnect.remove\",0,1,arguments.length);validateWritablePath(\"OnDisconnect.remove\",this.path_);util.validateCallback(\"OnDisconnect.remove\",1,onComplete,true);var deferred=new util.Deferred;this.repo_.onDisconnectSet(this.path_,null,deferred.wrapCallback(onComplete));return deferred.promise};OnDisconnect.prototype.set=function(value,onComplete){util.validateArgCount(\"OnDisconnect.set\",1,2,arguments.length);validateWritablePath(\"OnDisconnect.set\",this.path_);validateFirebaseDataArg(\"OnDisconnect.set\",1,value,this.path_,false);util.validateCallback(\"OnDisconnect.set\",2,onComplete,true);var deferred=new util.Deferred;this.repo_.onDisconnectSet(this.path_,value,deferred.wrapCallback(onComplete));return deferred.promise};OnDisconnect.prototype.setWithPriority=function(value,priority,onComplete){util.validateArgCount(\"OnDisconnect.setWithPriority\",2,3,arguments.length);validateWritablePath(\"OnDisconnect.setWithPriority\",this.path_);validateFirebaseDataArg(\"OnDisconnect.setWithPriority\",1,value,this.path_,false);validatePriority(\"OnDisconnect.setWithPriority\",2,priority,false);util.validateCallback(\"OnDisconnect.setWithPriority\",3,onComplete,true);var deferred=new util.Deferred;this.repo_.onDisconnectSetWithPriority(this.path_,value,priority,deferred.wrapCallback(onComplete));return deferred.promise};OnDisconnect.prototype.update=function(objectToMerge,onComplete){util.validateArgCount(\"OnDisconnect.update\",1,2,arguments.length);validateWritablePath(\"OnDisconnect.update\",this.path_);if(Array.isArray(objectToMerge)){var newObjectToMerge={};for(var i=0;i<objectToMerge.length;++i){newObjectToMerge[\"\"+i]=objectToMerge[i]}objectToMerge=newObjectToMerge;warn(\"Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the \"+\"existing data, or an Object with integer keys if you really do want to only update some of the children.\")}validateFirebaseMergeDataArg(\"OnDisconnect.update\",1,objectToMerge,this.path_,false);util.validateCallback(\"OnDisconnect.update\",2,onComplete,true);var deferred=new util.Deferred;this.repo_.onDisconnectUpdate(this.path_,objectToMerge,deferred.wrapCallback(onComplete));return deferred.promise};return OnDisconnect}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var TransactionResult=function(){function TransactionResult(committed,snapshot){this.committed=committed;this.snapshot=snapshot}TransactionResult.prototype.toJSON=function(){util.validateArgCount(\"TransactionResult.toJSON\",0,1,arguments.length);return{committed:this.committed,snapshot:this.snapshot.toJSON()}};return TransactionResult}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var nextPushId=function(){var PUSH_CHARS=\"-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz\";var lastPushTime=0;var lastRandChars=[];return function(now){var duplicateTime=now===lastPushTime;lastPushTime=now;var i;var timeStampChars=new Array(8);for(i=7;i>=0;i--){timeStampChars[i]=PUSH_CHARS.charAt(now%64);now=Math.floor(now/64)}util.assert(now===0,\"Cannot push at time == 0\");var id=timeStampChars.join(\"\");if(!duplicateTime){for(i=0;i<12;i++){lastRandChars[i]=Math.floor(Math.random()*64)}}else{for(i=11;i>=0&&lastRandChars[i]===63;i--){lastRandChars[i]=0}lastRandChars[i]++}for(i=0;i<12;i++){id+=PUSH_CHARS.charAt(lastRandChars[i])}util.assert(id.length===20,\"nextPushId: Length should be 20.\");return id}}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var NamedNode=function(){function NamedNode(name,node){this.name=name;this.node=node}NamedNode.Wrap=function(name,node){return new NamedNode(name,node)};return NamedNode}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Index=function(){function Index(){}Index.prototype.getCompare=function(){return this.compare.bind(this)};Index.prototype.indexedValueChanged=function(oldNode,newNode){var oldWrapped=new NamedNode(MIN_NAME,oldNode);var newWrapped=new NamedNode(MIN_NAME,newNode);return this.compare(oldWrapped,newWrapped)!==0};Index.prototype.minPost=function(){return NamedNode.MIN};return Index}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var __EMPTY_NODE;var KeyIndex=function(_super){tslib_1.__extends(KeyIndex,_super);function KeyIndex(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(KeyIndex,\"__EMPTY_NODE\",{get:function(){return __EMPTY_NODE},set:function(val){__EMPTY_NODE=val},enumerable:true,configurable:true});KeyIndex.prototype.compare=function(a,b){return nameCompare(a.name,b.name)};KeyIndex.prototype.isDefinedOn=function(node){throw util.assertionError(\"KeyIndex.isDefinedOn not expected to be called.\")};KeyIndex.prototype.indexedValueChanged=function(oldNode,newNode){return false};KeyIndex.prototype.minPost=function(){return NamedNode.MIN};KeyIndex.prototype.maxPost=function(){return new NamedNode(MAX_NAME,__EMPTY_NODE)};KeyIndex.prototype.makePost=function(indexValue,name){util.assert(typeof indexValue===\"string\",\"KeyIndex indexValue must always be a string.\");return new NamedNode(indexValue,__EMPTY_NODE)};KeyIndex.prototype.toString=function(){return\".key\"};return KeyIndex}(Index);var KEY_INDEX=new KeyIndex;\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var MAX_NODE;function setMaxNode(val){MAX_NODE=val}var priorityHashText=function(priority){if(typeof priority===\"number\")return\"number:\"+doubleToIEEE754String(priority);else return\"string:\"+priority};var validatePriorityNode=function(priorityNode){if(priorityNode.isLeafNode()){var val=priorityNode.val();util.assert(typeof val===\"string\"||typeof val===\"number\"||typeof val===\"object\"&&util.contains(val,\".sv\"),\"Priority must be a string or number.\")}else{util.assert(priorityNode===MAX_NODE||priorityNode.isEmpty(),\"priority of unexpected type.\")}util.assert(priorityNode===MAX_NODE||priorityNode.getPriority().isEmpty(),\"Priority nodes can't have a priority of their own.\")};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var __childrenNodeConstructor;var LeafNode=function(){function LeafNode(value_,priorityNode_){if(priorityNode_===void 0){priorityNode_=LeafNode.__childrenNodeConstructor.EMPTY_NODE}this.value_=value_;this.priorityNode_=priorityNode_;this.lazyHash_=null;util.assert(this.value_!==undefined&&this.value_!==null,\"LeafNode shouldn't be created with null/undefined value.\");validatePriorityNode(this.priorityNode_)}Object.defineProperty(LeafNode,\"__childrenNodeConstructor\",{get:function(){return __childrenNodeConstructor},set:function(val){__childrenNodeConstructor=val},enumerable:true,configurable:true});LeafNode.prototype.isLeafNode=function(){return true};LeafNode.prototype.getPriority=function(){return this.priorityNode_};LeafNode.prototype.updatePriority=function(newPriorityNode){return new LeafNode(this.value_,newPriorityNode)};LeafNode.prototype.getImmediateChild=function(childName){if(childName===\".priority\"){return this.priorityNode_}else{return LeafNode.__childrenNodeConstructor.EMPTY_NODE}};LeafNode.prototype.getChild=function(path){if(path.isEmpty()){return this}else if(path.getFront()===\".priority\"){return this.priorityNode_}else{return LeafNode.__childrenNodeConstructor.EMPTY_NODE}};LeafNode.prototype.hasChild=function(){return false};LeafNode.prototype.getPredecessorChildName=function(childName,childNode){return null};LeafNode.prototype.updateImmediateChild=function(childName,newChildNode){if(childName===\".priority\"){return this.updatePriority(newChildNode)}else if(newChildNode.isEmpty()&&childName!==\".priority\"){return this}else{return LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(childName,newChildNode).updatePriority(this.priorityNode_)}};LeafNode.prototype.updateChild=function(path,newChildNode){var front=path.getFront();if(front===null){return newChildNode}else if(newChildNode.isEmpty()&&front!==\".priority\"){return this}else{util.assert(front!==\".priority\"||path.getLength()===1,\".priority must be the last token in a path\");return this.updateImmediateChild(front,LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(path.popFront(),newChildNode))}};LeafNode.prototype.isEmpty=function(){return false};LeafNode.prototype.numChildren=function(){return 0};LeafNode.prototype.forEachChild=function(index,action){return false};LeafNode.prototype.val=function(exportFormat){if(exportFormat&&!this.getPriority().isEmpty())return{\".value\":this.getValue(),\".priority\":this.getPriority().val()};else return this.getValue()};LeafNode.prototype.hash=function(){if(this.lazyHash_===null){var toHash=\"\";if(!this.priorityNode_.isEmpty())toHash+=\"priority:\"+priorityHashText(this.priorityNode_.val())+\":\";var type=typeof this.value_;toHash+=type+\":\";if(type===\"number\"){toHash+=doubleToIEEE754String(this.value_)}else{toHash+=this.value_}this.lazyHash_=sha1(toHash)}return this.lazyHash_};LeafNode.prototype.getValue=function(){return this.value_};LeafNode.prototype.compareTo=function(other){if(other===LeafNode.__childrenNodeConstructor.EMPTY_NODE){return 1}else if(other instanceof LeafNode.__childrenNodeConstructor){return-1}else{util.assert(other.isLeafNode(),\"Unknown node type\");return this.compareToLeafNode_(other)}};LeafNode.prototype.compareToLeafNode_=function(otherLeaf){var otherLeafType=typeof otherLeaf.value_;var thisLeafType=typeof this.value_;var otherIndex=LeafNode.VALUE_TYPE_ORDER.indexOf(otherLeafType);var thisIndex=LeafNode.VALUE_TYPE_ORDER.indexOf(thisLeafType);util.assert(otherIndex>=0,\"Unknown leaf type: \"+otherLeafType);util.assert(thisIndex>=0,\"Unknown leaf type: \"+thisLeafType);if(otherIndex===thisIndex){if(thisLeafType===\"object\"){return 0}else{if(this.value_<otherLeaf.value_){return-1}else if(this.value_===otherLeaf.value_){return 0}else{return 1}}}else{return thisIndex-otherIndex}};LeafNode.prototype.withIndex=function(){return this};LeafNode.prototype.isIndexed=function(){return true};LeafNode.prototype.equals=function(other){if(other===this){return true}else if(other.isLeafNode()){var otherLeaf=other;return this.value_===otherLeaf.value_&&this.priorityNode_.equals(otherLeaf.priorityNode_)}else{return false}};LeafNode.VALUE_TYPE_ORDER=[\"object\",\"boolean\",\"number\",\"string\"];return LeafNode}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var nodeFromJSON;var MAX_NODE$1;function setNodeFromJSON(val){nodeFromJSON=val}function setMaxNode$1(val){MAX_NODE$1=val}var PriorityIndex=function(_super){tslib_1.__extends(PriorityIndex,_super);function PriorityIndex(){return _super!==null&&_super.apply(this,arguments)||this}PriorityIndex.prototype.compare=function(a,b){var aPriority=a.node.getPriority();var bPriority=b.node.getPriority();var indexCmp=aPriority.compareTo(bPriority);if(indexCmp===0){return nameCompare(a.name,b.name)}else{return indexCmp}};PriorityIndex.prototype.isDefinedOn=function(node){return!node.getPriority().isEmpty()};PriorityIndex.prototype.indexedValueChanged=function(oldNode,newNode){return!oldNode.getPriority().equals(newNode.getPriority())};PriorityIndex.prototype.minPost=function(){return NamedNode.MIN};PriorityIndex.prototype.maxPost=function(){return new NamedNode(MAX_NAME,new LeafNode(\"[PRIORITY-POST]\",MAX_NODE$1))};PriorityIndex.prototype.makePost=function(indexValue,name){var priorityNode=nodeFromJSON(indexValue);return new NamedNode(name,new LeafNode(\"[PRIORITY-POST]\",priorityNode))};PriorityIndex.prototype.toString=function(){return\".priority\"};return PriorityIndex}(Index);var PRIORITY_INDEX=new PriorityIndex;\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var SortedMapIterator=function(){function SortedMapIterator(node,startKey,comparator,isReverse_,resultGenerator_){if(resultGenerator_===void 0){resultGenerator_=null}this.isReverse_=isReverse_;this.resultGenerator_=resultGenerator_;this.nodeStack_=[];var cmp=1;while(!node.isEmpty()){node=node;cmp=startKey?comparator(node.key,startKey):1;if(isReverse_)cmp*=-1;if(cmp<0){if(this.isReverse_){node=node.left}else{node=node.right}}else if(cmp===0){this.nodeStack_.push(node);break}else{this.nodeStack_.push(node);if(this.isReverse_){node=node.right}else{node=node.left}}}}SortedMapIterator.prototype.getNext=function(){if(this.nodeStack_.length===0)return null;var node=this.nodeStack_.pop();var result;if(this.resultGenerator_)result=this.resultGenerator_(node.key,node.value);else result={key:node.key,value:node.value};if(this.isReverse_){node=node.left;while(!node.isEmpty()){this.nodeStack_.push(node);node=node.right}}else{node=node.right;while(!node.isEmpty()){this.nodeStack_.push(node);node=node.left}}return result};SortedMapIterator.prototype.hasNext=function(){return this.nodeStack_.length>0};SortedMapIterator.prototype.peek=function(){if(this.nodeStack_.length===0)return null;var node=this.nodeStack_[this.nodeStack_.length-1];if(this.resultGenerator_){return this.resultGenerator_(node.key,node.value)}else{return{key:node.key,value:node.value}}};return SortedMapIterator}();var LLRBNode=function(){function LLRBNode(key,value,color,left,right){this.key=key;this.value=value;this.color=color!=null?color:LLRBNode.RED;this.left=left!=null?left:SortedMap.EMPTY_NODE;this.right=right!=null?right:SortedMap.EMPTY_NODE}LLRBNode.prototype.copy=function(key,value,color,left,right){return new LLRBNode(key!=null?key:this.key,value!=null?value:this.value,color!=null?color:this.color,left!=null?left:this.left,right!=null?right:this.right)};LLRBNode.prototype.count=function(){return this.left.count()+1+this.right.count()};LLRBNode.prototype.isEmpty=function(){return false};LLRBNode.prototype.inorderTraversal=function(action){return this.left.inorderTraversal(action)||action(this.key,this.value)||this.right.inorderTraversal(action)};LLRBNode.prototype.reverseTraversal=function(action){return this.right.reverseTraversal(action)||action(this.key,this.value)||this.left.reverseTraversal(action)};LLRBNode.prototype.min_=function(){if(this.left.isEmpty()){return this}else{return this.left.min_()}};LLRBNode.prototype.minKey=function(){return this.min_().key};LLRBNode.prototype.maxKey=function(){if(this.right.isEmpty()){return this.key}else{return this.right.maxKey()}};LLRBNode.prototype.insert=function(key,value,comparator){var cmp,n;n=this;cmp=comparator(key,n.key);if(cmp<0){n=n.copy(null,null,null,n.left.insert(key,value,comparator),null)}else if(cmp===0){n=n.copy(null,value,null,null,null)}else{n=n.copy(null,null,null,null,n.right.insert(key,value,comparator))}return n.fixUp_()};LLRBNode.prototype.removeMin_=function(){if(this.left.isEmpty()){return SortedMap.EMPTY_NODE}var n=this;if(!n.left.isRed_()&&!n.left.left.isRed_())n=n.moveRedLeft_();n=n.copy(null,null,null,n.left.removeMin_(),null);return n.fixUp_()};LLRBNode.prototype.remove=function(key,comparator){var n,smallest;n=this;if(comparator(key,n.key)<0){if(!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()){n=n.moveRedLeft_()}n=n.copy(null,null,null,n.left.remove(key,comparator),null)}else{if(n.left.isRed_())n=n.rotateRight_();if(!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()){n=n.moveRedRight_()}if(comparator(key,n.key)===0){if(n.right.isEmpty()){return SortedMap.EMPTY_NODE}else{smallest=n.right.min_();n=n.copy(smallest.key,smallest.value,null,null,n.right.removeMin_())}}n=n.copy(null,null,null,null,n.right.remove(key,comparator))}return n.fixUp_()};LLRBNode.prototype.isRed_=function(){return this.color};LLRBNode.prototype.fixUp_=function(){var n=this;if(n.right.isRed_()&&!n.left.isRed_())n=n.rotateLeft_();if(n.left.isRed_()&&n.left.left.isRed_())n=n.rotateRight_();if(n.left.isRed_()&&n.right.isRed_())n=n.colorFlip_();return n};LLRBNode.prototype.moveRedLeft_=function(){var n=this.colorFlip_();if(n.right.left.isRed_()){n=n.copy(null,null,null,null,n.right.rotateRight_());n=n.rotateLeft_();n=n.colorFlip_()}return n};LLRBNode.prototype.moveRedRight_=function(){var n=this.colorFlip_();if(n.left.left.isRed_()){n=n.rotateRight_();n=n.colorFlip_()}return n};LLRBNode.prototype.rotateLeft_=function(){var nl=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,nl,null)};LLRBNode.prototype.rotateRight_=function(){var nr=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,nr)};LLRBNode.prototype.colorFlip_=function(){var left=this.left.copy(null,null,!this.left.color,null,null);var right=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,left,right)};LLRBNode.prototype.checkMaxDepth_=function(){var blackDepth=this.check_();return Math.pow(2,blackDepth)<=this.count()+1};LLRBNode.prototype.check_=function(){var blackDepth;if(this.isRed_()&&this.left.isRed_()){throw new Error(\"Red node has red child(\"+this.key+\",\"+this.value+\")\")}if(this.right.isRed_()){throw new Error(\"Right child of (\"+this.key+\",\"+this.value+\") is red\")}blackDepth=this.left.check_();if(blackDepth!==this.right.check_()){throw new Error(\"Black depths differ\")}else{return blackDepth+(this.isRed_()?0:1)}};LLRBNode.RED=true;LLRBNode.BLACK=false;return LLRBNode}();var LLRBEmptyNode=function(){function LLRBEmptyNode(){}LLRBEmptyNode.prototype.copy=function(key,value,color,left,right){return this};LLRBEmptyNode.prototype.insert=function(key,value,comparator){return new LLRBNode(key,value,null)};LLRBEmptyNode.prototype.remove=function(key,comparator){return this};LLRBEmptyNode.prototype.count=function(){return 0};LLRBEmptyNode.prototype.isEmpty=function(){return true};LLRBEmptyNode.prototype.inorderTraversal=function(action){return false};LLRBEmptyNode.prototype.reverseTraversal=function(action){return false};LLRBEmptyNode.prototype.minKey=function(){return null};LLRBEmptyNode.prototype.maxKey=function(){return null};LLRBEmptyNode.prototype.check_=function(){return 0};LLRBEmptyNode.prototype.isRed_=function(){return false};return LLRBEmptyNode}();var SortedMap=function(){function SortedMap(comparator_,root_){if(root_===void 0){root_=SortedMap.EMPTY_NODE}this.comparator_=comparator_;this.root_=root_}SortedMap.prototype.insert=function(key,value){return new SortedMap(this.comparator_,this.root_.insert(key,value,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))};SortedMap.prototype.remove=function(key){return new SortedMap(this.comparator_,this.root_.remove(key,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))};SortedMap.prototype.get=function(key){var cmp;var node=this.root_;while(!node.isEmpty()){cmp=this.comparator_(key,node.key);if(cmp===0){return node.value}else if(cmp<0){node=node.left}else if(cmp>0){node=node.right}}return null};SortedMap.prototype.getPredecessorKey=function(key){var cmp,node=this.root_,rightParent=null;while(!node.isEmpty()){cmp=this.comparator_(key,node.key);if(cmp===0){if(!node.left.isEmpty()){node=node.left;while(!node.right.isEmpty())node=node.right;return node.key}else if(rightParent){return rightParent.key}else{return null}}else if(cmp<0){node=node.left}else if(cmp>0){rightParent=node;node=node.right}}throw new Error(\"Attempted to find predecessor key for a nonexistent key.  What gives?\")};SortedMap.prototype.isEmpty=function(){return this.root_.isEmpty()};SortedMap.prototype.count=function(){return this.root_.count()};SortedMap.prototype.minKey=function(){return this.root_.minKey()};SortedMap.prototype.maxKey=function(){return this.root_.maxKey()};SortedMap.prototype.inorderTraversal=function(action){return this.root_.inorderTraversal(action)};SortedMap.prototype.reverseTraversal=function(action){return this.root_.reverseTraversal(action)};SortedMap.prototype.getIterator=function(resultGenerator){return new SortedMapIterator(this.root_,null,this.comparator_,false,resultGenerator)};SortedMap.prototype.getIteratorFrom=function(key,resultGenerator){return new SortedMapIterator(this.root_,key,this.comparator_,false,resultGenerator)};SortedMap.prototype.getReverseIteratorFrom=function(key,resultGenerator){return new SortedMapIterator(this.root_,key,this.comparator_,true,resultGenerator)};SortedMap.prototype.getReverseIterator=function(resultGenerator){return new SortedMapIterator(this.root_,null,this.comparator_,true,resultGenerator)};SortedMap.EMPTY_NODE=new LLRBEmptyNode;return SortedMap}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var LOG_2=Math.log(2);var Base12Num=function(){function Base12Num(length){var logBase2=function(num){return parseInt(Math.log(num)/LOG_2,10)};var bitMask=function(bits){return parseInt(Array(bits+1).join(\"1\"),2)};this.count=logBase2(length+1);this.current_=this.count-1;var mask=bitMask(this.count);this.bits_=length+1&mask}Base12Num.prototype.nextBitIsOne=function(){var result=!(this.bits_&1<<this.current_);this.current_--;return result};return Base12Num}();var buildChildSet=function(childList,cmp,keyFn,mapSortFn){childList.sort(cmp);var buildBalancedTree=function(low,high){var length=high-low;var namedNode;var key;if(length==0){return null}else if(length==1){namedNode=childList[low];key=keyFn?keyFn(namedNode):namedNode;return new LLRBNode(key,namedNode.node,LLRBNode.BLACK,null,null)}else{var middle=parseInt(length/2,10)+low;var left=buildBalancedTree(low,middle);var right=buildBalancedTree(middle+1,high);namedNode=childList[middle];key=keyFn?keyFn(namedNode):namedNode;return new LLRBNode(key,namedNode.node,LLRBNode.BLACK,left,right)}};var buildFrom12Array=function(base12){var node=null;var root=null;var index=childList.length;var buildPennant=function(chunkSize,color){var low=index-chunkSize;var high=index;index-=chunkSize;var childTree=buildBalancedTree(low+1,high);var namedNode=childList[low];var key=keyFn?keyFn(namedNode):namedNode;attachPennant(new LLRBNode(key,namedNode.node,color,null,childTree))};var attachPennant=function(pennant){if(node){node.left=pennant;node=pennant}else{root=pennant;node=pennant}};for(var i=0;i<base12.count;++i){var isOne=base12.nextBitIsOne();var chunkSize=Math.pow(2,base12.count-(i+1));if(isOne){buildPennant(chunkSize,LLRBNode.BLACK)}else{buildPennant(chunkSize,LLRBNode.BLACK);buildPennant(chunkSize,LLRBNode.RED)}}return root};var base12=new Base12Num(childList.length);var root=buildFrom12Array(base12);return new SortedMap(mapSortFn||cmp,root)};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var _defaultIndexMap;var fallbackObject={};var IndexMap=function(){function IndexMap(indexes_,indexSet_){this.indexes_=indexes_;this.indexSet_=indexSet_}Object.defineProperty(IndexMap,\"Default\",{get:function(){util.assert(fallbackObject&&PRIORITY_INDEX,\"ChildrenNode.ts has not been loaded\");_defaultIndexMap=_defaultIndexMap||new IndexMap({\".priority\":fallbackObject},{\".priority\":PRIORITY_INDEX});return _defaultIndexMap},enumerable:true,configurable:true});IndexMap.prototype.get=function(indexKey){var sortedMap=util.safeGet(this.indexes_,indexKey);if(!sortedMap)throw new Error(\"No index defined for \"+indexKey);if(sortedMap===fallbackObject){return null}else{return sortedMap}};IndexMap.prototype.hasIndex=function(indexDefinition){return util.contains(this.indexSet_,indexDefinition.toString())};IndexMap.prototype.addIndex=function(indexDefinition,existingChildren){util.assert(indexDefinition!==KEY_INDEX,\"KeyIndex always exists and isn't meant to be added to the IndexMap.\");var childList=[];var sawIndexedValue=false;var iter=existingChildren.getIterator(NamedNode.Wrap);var next=iter.getNext();while(next){sawIndexedValue=sawIndexedValue||indexDefinition.isDefinedOn(next.node);childList.push(next);next=iter.getNext()}var newIndex;if(sawIndexedValue){newIndex=buildChildSet(childList,indexDefinition.getCompare())}else{newIndex=fallbackObject}var indexName=indexDefinition.toString();var newIndexSet=util.clone(this.indexSet_);newIndexSet[indexName]=indexDefinition;var newIndexes=util.clone(this.indexes_);newIndexes[indexName]=newIndex;return new IndexMap(newIndexes,newIndexSet)};IndexMap.prototype.addToIndexes=function(namedNode,existingChildren){var _this=this;var newIndexes=util.map(this.indexes_,function(indexedChildren,indexName){var index=util.safeGet(_this.indexSet_,indexName);util.assert(index,\"Missing index implementation for \"+indexName);if(indexedChildren===fallbackObject){if(index.isDefinedOn(namedNode.node)){var childList=[];var iter=existingChildren.getIterator(NamedNode.Wrap);var next=iter.getNext();while(next){if(next.name!=namedNode.name){childList.push(next)}next=iter.getNext()}childList.push(namedNode);return buildChildSet(childList,index.getCompare())}else{return fallbackObject}}else{var existingSnap=existingChildren.get(namedNode.name);var newChildren=indexedChildren;if(existingSnap){newChildren=newChildren.remove(new NamedNode(namedNode.name,existingSnap))}return newChildren.insert(namedNode,namedNode.node)}});return new IndexMap(newIndexes,this.indexSet_)};IndexMap.prototype.removeFromIndexes=function(namedNode,existingChildren){var newIndexes=util.map(this.indexes_,function(indexedChildren){if(indexedChildren===fallbackObject){return indexedChildren}else{var existingSnap=existingChildren.get(namedNode.name);if(existingSnap){return indexedChildren.remove(new NamedNode(namedNode.name,existingSnap))}else{return indexedChildren}}});return new IndexMap(newIndexes,this.indexSet_)};return IndexMap}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function NAME_ONLY_COMPARATOR(left,right){return nameCompare(left.name,right.name)}function NAME_COMPARATOR(left,right){return nameCompare(left,right)}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var EMPTY_NODE;var ChildrenNode=function(){function ChildrenNode(children_,priorityNode_,indexMap_){this.children_=children_;this.priorityNode_=priorityNode_;this.indexMap_=indexMap_;this.lazyHash_=null;if(this.priorityNode_){validatePriorityNode(this.priorityNode_)}if(this.children_.isEmpty()){util.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),\"An empty node cannot have a priority\")}}Object.defineProperty(ChildrenNode,\"EMPTY_NODE\",{get:function(){return EMPTY_NODE||(EMPTY_NODE=new ChildrenNode(new SortedMap(NAME_COMPARATOR),null,IndexMap.Default))},enumerable:true,configurable:true});ChildrenNode.prototype.isLeafNode=function(){return false};ChildrenNode.prototype.getPriority=function(){return this.priorityNode_||EMPTY_NODE};ChildrenNode.prototype.updatePriority=function(newPriorityNode){if(this.children_.isEmpty()){return this}else{return new ChildrenNode(this.children_,newPriorityNode,this.indexMap_)}};ChildrenNode.prototype.getImmediateChild=function(childName){if(childName===\".priority\"){return this.getPriority()}else{var child=this.children_.get(childName);return child===null?EMPTY_NODE:child}};ChildrenNode.prototype.getChild=function(path){var front=path.getFront();if(front===null)return this;return this.getImmediateChild(front).getChild(path.popFront())};ChildrenNode.prototype.hasChild=function(childName){return this.children_.get(childName)!==null};ChildrenNode.prototype.updateImmediateChild=function(childName,newChildNode){util.assert(newChildNode,\"We should always be passing snapshot nodes\");if(childName===\".priority\"){return this.updatePriority(newChildNode)}else{var namedNode=new NamedNode(childName,newChildNode);var newChildren=void 0,newIndexMap=void 0,newPriority=void 0;if(newChildNode.isEmpty()){newChildren=this.children_.remove(childName);newIndexMap=this.indexMap_.removeFromIndexes(namedNode,this.children_)}else{newChildren=this.children_.insert(childName,newChildNode);newIndexMap=this.indexMap_.addToIndexes(namedNode,this.children_)}newPriority=newChildren.isEmpty()?EMPTY_NODE:this.priorityNode_;return new ChildrenNode(newChildren,newPriority,newIndexMap)}};ChildrenNode.prototype.updateChild=function(path,newChildNode){var front=path.getFront();if(front===null){return newChildNode}else{util.assert(path.getFront()!==\".priority\"||path.getLength()===1,\".priority must be the last token in a path\");var newImmediateChild=this.getImmediateChild(front).updateChild(path.popFront(),newChildNode);return this.updateImmediateChild(front,newImmediateChild)}};ChildrenNode.prototype.isEmpty=function(){return this.children_.isEmpty()};ChildrenNode.prototype.numChildren=function(){return this.children_.count()};ChildrenNode.prototype.val=function(exportFormat){if(this.isEmpty())return null;var obj={};var numKeys=0,maxKey=0,allIntegerKeys=true;this.forEachChild(PRIORITY_INDEX,function(key,childNode){obj[key]=childNode.val(exportFormat);numKeys++;if(allIntegerKeys&&ChildrenNode.INTEGER_REGEXP_.test(key)){maxKey=Math.max(maxKey,Number(key))}else{allIntegerKeys=false}});if(!exportFormat&&allIntegerKeys&&maxKey<2*numKeys){var array=[];for(var key in obj)array[key]=obj[key];return array}else{if(exportFormat&&!this.getPriority().isEmpty()){obj[\".priority\"]=this.getPriority().val()}return obj}};ChildrenNode.prototype.hash=function(){if(this.lazyHash_===null){var toHash_1=\"\";if(!this.getPriority().isEmpty())toHash_1+=\"priority:\"+priorityHashText(this.getPriority().val())+\":\";this.forEachChild(PRIORITY_INDEX,function(key,childNode){var childHash=childNode.hash();if(childHash!==\"\")toHash_1+=\":\"+key+\":\"+childHash});this.lazyHash_=toHash_1===\"\"?\"\":sha1(toHash_1)}return this.lazyHash_};ChildrenNode.prototype.getPredecessorChildName=function(childName,childNode,index){var idx=this.resolveIndex_(index);if(idx){var predecessor=idx.getPredecessorKey(new NamedNode(childName,childNode));return predecessor?predecessor.name:null}else{return this.children_.getPredecessorKey(childName)}};ChildrenNode.prototype.getFirstChildName=function(indexDefinition){var idx=this.resolveIndex_(indexDefinition);if(idx){var minKey=idx.minKey();return minKey&&minKey.name}else{return this.children_.minKey()}};ChildrenNode.prototype.getFirstChild=function(indexDefinition){var minKey=this.getFirstChildName(indexDefinition);if(minKey){return new NamedNode(minKey,this.children_.get(minKey))}else{return null}};ChildrenNode.prototype.getLastChildName=function(indexDefinition){var idx=this.resolveIndex_(indexDefinition);if(idx){var maxKey=idx.maxKey();return maxKey&&maxKey.name}else{return this.children_.maxKey()}};ChildrenNode.prototype.getLastChild=function(indexDefinition){var maxKey=this.getLastChildName(indexDefinition);if(maxKey){return new NamedNode(maxKey,this.children_.get(maxKey))}else{return null}};ChildrenNode.prototype.forEachChild=function(index,action){var idx=this.resolveIndex_(index);if(idx){return idx.inorderTraversal(function(wrappedNode){return action(wrappedNode.name,wrappedNode.node)})}else{return this.children_.inorderTraversal(action)}};ChildrenNode.prototype.getIterator=function(indexDefinition){return this.getIteratorFrom(indexDefinition.minPost(),indexDefinition)};ChildrenNode.prototype.getIteratorFrom=function(startPost,indexDefinition){var idx=this.resolveIndex_(indexDefinition);if(idx){return idx.getIteratorFrom(startPost,function(key){return key})}else{var iterator=this.children_.getIteratorFrom(startPost.name,NamedNode.Wrap);var next=iterator.peek();while(next!=null&&indexDefinition.compare(next,startPost)<0){iterator.getNext();next=iterator.peek()}return iterator}};ChildrenNode.prototype.getReverseIterator=function(indexDefinition){return this.getReverseIteratorFrom(indexDefinition.maxPost(),indexDefinition)};ChildrenNode.prototype.getReverseIteratorFrom=function(endPost,indexDefinition){var idx=this.resolveIndex_(indexDefinition);if(idx){return idx.getReverseIteratorFrom(endPost,function(key){return key})}else{var iterator=this.children_.getReverseIteratorFrom(endPost.name,NamedNode.Wrap);var next=iterator.peek();while(next!=null&&indexDefinition.compare(next,endPost)>0){iterator.getNext();next=iterator.peek()}return iterator}};ChildrenNode.prototype.compareTo=function(other){if(this.isEmpty()){if(other.isEmpty()){return 0}else{return-1}}else if(other.isLeafNode()||other.isEmpty()){return 1}else if(other===MAX_NODE$2){return-1}else{return 0}};ChildrenNode.prototype.withIndex=function(indexDefinition){if(indexDefinition===KEY_INDEX||this.indexMap_.hasIndex(indexDefinition)){return this}else{var newIndexMap=this.indexMap_.addIndex(indexDefinition,this.children_);return new ChildrenNode(this.children_,this.priorityNode_,newIndexMap)}};ChildrenNode.prototype.isIndexed=function(index){return index===KEY_INDEX||this.indexMap_.hasIndex(index)};ChildrenNode.prototype.equals=function(other){if(other===this){return true}else if(other.isLeafNode()){return false}else{var otherChildrenNode=other;if(!this.getPriority().equals(otherChildrenNode.getPriority())){return false}else if(this.children_.count()===otherChildrenNode.children_.count()){var thisIter=this.getIterator(PRIORITY_INDEX);var otherIter=otherChildrenNode.getIterator(PRIORITY_INDEX);var thisCurrent=thisIter.getNext();var otherCurrent=otherIter.getNext();while(thisCurrent&&otherCurrent){if(thisCurrent.name!==otherCurrent.name||!thisCurrent.node.equals(otherCurrent.node)){return false}thisCurrent=thisIter.getNext();otherCurrent=otherIter.getNext()}return thisCurrent===null&&otherCurrent===null}else{return false}}};ChildrenNode.prototype.resolveIndex_=function(indexDefinition){if(indexDefinition===KEY_INDEX){return null}else{return this.indexMap_.get(indexDefinition.toString())}};ChildrenNode.INTEGER_REGEXP_=/^(0|[1-9]\\d*)$/;return ChildrenNode}();var MaxNode=function(_super){tslib_1.__extends(MaxNode,_super);function MaxNode(){return _super.call(this,new SortedMap(NAME_COMPARATOR),ChildrenNode.EMPTY_NODE,IndexMap.Default)||this}MaxNode.prototype.compareTo=function(other){if(other===this){return 0}else{return 1}};MaxNode.prototype.equals=function(other){return other===this};MaxNode.prototype.getPriority=function(){return this};MaxNode.prototype.getImmediateChild=function(childName){return ChildrenNode.EMPTY_NODE};MaxNode.prototype.isEmpty=function(){return false};return MaxNode}(ChildrenNode);var MAX_NODE$2=new MaxNode;Object.defineProperties(NamedNode,{MIN:{value:new NamedNode(MIN_NAME,ChildrenNode.EMPTY_NODE)},MAX:{value:new NamedNode(MAX_NAME,MAX_NODE$2)}});KeyIndex.__EMPTY_NODE=ChildrenNode.EMPTY_NODE;LeafNode.__childrenNodeConstructor=ChildrenNode;setMaxNode(MAX_NODE$2);setMaxNode$1(MAX_NODE$2);\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var USE_HINZE=true;function nodeFromJSON$1(json,priority){if(priority===void 0){priority=null}if(json===null){return ChildrenNode.EMPTY_NODE}if(typeof json===\"object\"&&\".priority\"in json){priority=json[\".priority\"]}util.assert(priority===null||typeof priority===\"string\"||typeof priority===\"number\"||typeof priority===\"object\"&&\".sv\"in priority,\"Invalid priority type found: \"+typeof priority);if(typeof json===\"object\"&&\".value\"in json&&json[\".value\"]!==null){json=json[\".value\"]}if(typeof json!==\"object\"||\".sv\"in json){var jsonLeaf=json;return new LeafNode(jsonLeaf,nodeFromJSON$1(priority))}if(!(json instanceof Array)&&USE_HINZE){var children_1=[];var childrenHavePriority_1=false;var hinzeJsonObj_1=json;util.forEach(hinzeJsonObj_1,function(key,child){if(typeof key!==\"string\"||key.substring(0,1)!==\".\"){var childNode=nodeFromJSON$1(hinzeJsonObj_1[key]);if(!childNode.isEmpty()){childrenHavePriority_1=childrenHavePriority_1||!childNode.getPriority().isEmpty();children_1.push(new NamedNode(key,childNode))}}});if(children_1.length==0){return ChildrenNode.EMPTY_NODE}var childSet=buildChildSet(children_1,NAME_ONLY_COMPARATOR,function(namedNode){return namedNode.name},NAME_COMPARATOR);if(childrenHavePriority_1){var sortedChildSet=buildChildSet(children_1,PRIORITY_INDEX.getCompare());return new ChildrenNode(childSet,nodeFromJSON$1(priority),new IndexMap({\".priority\":sortedChildSet},{\".priority\":PRIORITY_INDEX}))}else{return new ChildrenNode(childSet,nodeFromJSON$1(priority),IndexMap.Default)}}else{var node_1=ChildrenNode.EMPTY_NODE;var jsonObj_1=json;util.forEach(jsonObj_1,function(key,childData){if(util.contains(jsonObj_1,key)){if(key.substring(0,1)!==\".\"){var childNode=nodeFromJSON$1(childData);if(childNode.isLeafNode()||!childNode.isEmpty())node_1=node_1.updateImmediateChild(key,childNode)}}});return node_1.updatePriority(nodeFromJSON$1(priority))}}setNodeFromJSON(nodeFromJSON$1);\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var ValueIndex=function(_super){tslib_1.__extends(ValueIndex,_super);function ValueIndex(){return _super!==null&&_super.apply(this,arguments)||this}ValueIndex.prototype.compare=function(a,b){var indexCmp=a.node.compareTo(b.node);if(indexCmp===0){return nameCompare(a.name,b.name)}else{return indexCmp}};ValueIndex.prototype.isDefinedOn=function(node){return true};ValueIndex.prototype.indexedValueChanged=function(oldNode,newNode){return!oldNode.equals(newNode)};ValueIndex.prototype.minPost=function(){return NamedNode.MIN};ValueIndex.prototype.maxPost=function(){return NamedNode.MAX};ValueIndex.prototype.makePost=function(indexValue,name){var valueNode=nodeFromJSON$1(indexValue);return new NamedNode(name,valueNode)};ValueIndex.prototype.toString=function(){return\".value\"};return ValueIndex}(Index);var VALUE_INDEX=new ValueIndex;\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var PathIndex=function(_super){tslib_1.__extends(PathIndex,_super);function PathIndex(indexPath_){var _this=_super.call(this)||this;_this.indexPath_=indexPath_;util.assert(!indexPath_.isEmpty()&&indexPath_.getFront()!==\".priority\",\"Can't create PathIndex with empty path or .priority key\");return _this}PathIndex.prototype.extractChild=function(snap){return snap.getChild(this.indexPath_)};PathIndex.prototype.isDefinedOn=function(node){return!node.getChild(this.indexPath_).isEmpty()};PathIndex.prototype.compare=function(a,b){var aChild=this.extractChild(a.node);var bChild=this.extractChild(b.node);var indexCmp=aChild.compareTo(bChild);if(indexCmp===0){return nameCompare(a.name,b.name)}else{return indexCmp}};PathIndex.prototype.makePost=function(indexValue,name){var valueNode=nodeFromJSON$1(indexValue);var node=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,valueNode);return new NamedNode(name,node)};PathIndex.prototype.maxPost=function(){var node=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,MAX_NODE$2);return new NamedNode(MAX_NAME,node)};PathIndex.prototype.toString=function(){return this.indexPath_.slice().join(\"/\")};return PathIndex}(Index);\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var DataSnapshot=function(){function DataSnapshot(node_,ref_,index_){this.node_=node_;this.ref_=ref_;this.index_=index_}DataSnapshot.prototype.val=function(){util.validateArgCount(\"DataSnapshot.val\",0,0,arguments.length);return this.node_.val()};DataSnapshot.prototype.exportVal=function(){util.validateArgCount(\"DataSnapshot.exportVal\",0,0,arguments.length);return this.node_.val(true)};DataSnapshot.prototype.toJSON=function(){util.validateArgCount(\"DataSnapshot.toJSON\",0,1,arguments.length);return this.exportVal()};DataSnapshot.prototype.exists=function(){util.validateArgCount(\"DataSnapshot.exists\",0,0,arguments.length);return!this.node_.isEmpty()};DataSnapshot.prototype.child=function(childPathString){util.validateArgCount(\"DataSnapshot.child\",0,1,arguments.length);childPathString=String(childPathString);validatePathString(\"DataSnapshot.child\",1,childPathString,false);var childPath=new Path(childPathString);var childRef=this.ref_.child(childPath);return new DataSnapshot(this.node_.getChild(childPath),childRef,PRIORITY_INDEX)};DataSnapshot.prototype.hasChild=function(childPathString){util.validateArgCount(\"DataSnapshot.hasChild\",1,1,arguments.length);validatePathString(\"DataSnapshot.hasChild\",1,childPathString,false);var childPath=new Path(childPathString);return!this.node_.getChild(childPath).isEmpty()};DataSnapshot.prototype.getPriority=function(){util.validateArgCount(\"DataSnapshot.getPriority\",0,0,arguments.length);return this.node_.getPriority().val()};DataSnapshot.prototype.forEach=function(action){var _this=this;util.validateArgCount(\"DataSnapshot.forEach\",1,1,arguments.length);util.validateCallback(\"DataSnapshot.forEach\",1,action,false);if(this.node_.isLeafNode())return false;var childrenNode=this.node_;return!!childrenNode.forEachChild(this.index_,function(key,node){return action(new DataSnapshot(node,_this.ref_.child(key),PRIORITY_INDEX))})};DataSnapshot.prototype.hasChildren=function(){util.validateArgCount(\"DataSnapshot.hasChildren\",0,0,arguments.length);if(this.node_.isLeafNode())return false;else return!this.node_.isEmpty()};Object.defineProperty(DataSnapshot.prototype,\"key\",{get:function(){return this.ref_.getKey()},enumerable:true,configurable:true});DataSnapshot.prototype.numChildren=function(){util.validateArgCount(\"DataSnapshot.numChildren\",0,0,arguments.length);return this.node_.numChildren()};DataSnapshot.prototype.getRef=function(){util.validateArgCount(\"DataSnapshot.ref\",0,0,arguments.length);return this.ref_};Object.defineProperty(DataSnapshot.prototype,\"ref\",{get:function(){return this.getRef()},enumerable:true,configurable:true});return DataSnapshot}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var DataEvent=function(){function DataEvent(eventType,eventRegistration,snapshot,prevName){this.eventType=eventType;this.eventRegistration=eventRegistration;this.snapshot=snapshot;this.prevName=prevName}DataEvent.prototype.getPath=function(){var ref=this.snapshot.getRef();if(this.eventType===\"value\"){return ref.path}else{return ref.getParent().path}};DataEvent.prototype.getEventType=function(){return this.eventType};DataEvent.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)};DataEvent.prototype.toString=function(){return this.getPath().toString()+\":\"+this.eventType+\":\"+util.stringify(this.snapshot.exportVal())};return DataEvent}();var CancelEvent=function(){function CancelEvent(eventRegistration,error,path){this.eventRegistration=eventRegistration;this.error=error;this.path=path}CancelEvent.prototype.getPath=function(){return this.path};CancelEvent.prototype.getEventType=function(){return\"cancel\"};CancelEvent.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)};CancelEvent.prototype.toString=function(){return this.path.toString()+\":cancel\"};return CancelEvent}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var ValueEventRegistration=function(){function ValueEventRegistration(callback_,cancelCallback_,context_){this.callback_=callback_;this.cancelCallback_=cancelCallback_;this.context_=context_}ValueEventRegistration.prototype.respondsTo=function(eventType){return eventType===\"value\"};ValueEventRegistration.prototype.createEvent=function(change,query){var index=query.getQueryParams().getIndex();return new DataEvent(\"value\",this,new DataSnapshot(change.snapshotNode,query.getRef(),index))};ValueEventRegistration.prototype.getEventRunner=function(eventData){var ctx=this.context_;if(eventData.getEventType()===\"cancel\"){util.assert(this.cancelCallback_,\"Raising a cancel event on a listener with no cancel callback\");var cancelCB_1=this.cancelCallback_;return function(){cancelCB_1.call(ctx,eventData.error)}}else{var cb_1=this.callback_;return function(){cb_1.call(ctx,eventData.snapshot)}}};ValueEventRegistration.prototype.createCancelEvent=function(error,path){if(this.cancelCallback_){return new CancelEvent(this,error,path)}else{return null}};ValueEventRegistration.prototype.matches=function(other){if(!(other instanceof ValueEventRegistration)){return false}else if(!other.callback_||!this.callback_){return true}else{return other.callback_===this.callback_&&other.context_===this.context_}};ValueEventRegistration.prototype.hasAnyCallback=function(){return this.callback_!==null};return ValueEventRegistration}();var ChildEventRegistration=function(){function ChildEventRegistration(callbacks_,cancelCallback_,context_){this.callbacks_=callbacks_;this.cancelCallback_=cancelCallback_;this.context_=context_}ChildEventRegistration.prototype.respondsTo=function(eventType){var eventToCheck=eventType===\"children_added\"?\"child_added\":eventType;eventToCheck=eventToCheck===\"children_removed\"?\"child_removed\":eventToCheck;return util.contains(this.callbacks_,eventToCheck)};ChildEventRegistration.prototype.createCancelEvent=function(error,path){if(this.cancelCallback_){return new CancelEvent(this,error,path)}else{return null}};ChildEventRegistration.prototype.createEvent=function(change,query){util.assert(change.childName!=null,\"Child events should have a childName.\");var ref=query.getRef().child(change.childName);var index=query.getQueryParams().getIndex();return new DataEvent(change.type,this,new DataSnapshot(change.snapshotNode,ref,index),change.prevName)};ChildEventRegistration.prototype.getEventRunner=function(eventData){var ctx=this.context_;if(eventData.getEventType()===\"cancel\"){util.assert(this.cancelCallback_,\"Raising a cancel event on a listener with no cancel callback\");var cancelCB_2=this.cancelCallback_;return function(){cancelCB_2.call(ctx,eventData.error)}}else{var cb_2=this.callbacks_[eventData.eventType];return function(){cb_2.call(ctx,eventData.snapshot,eventData.prevName)}}};ChildEventRegistration.prototype.matches=function(other){if(other instanceof ChildEventRegistration){if(!this.callbacks_||!other.callbacks_){return true}else if(this.context_===other.context_){var otherCount=util.getCount(other.callbacks_);var thisCount=util.getCount(this.callbacks_);if(otherCount===thisCount){if(otherCount===1){var otherKey=util.getAnyKey(other.callbacks_);var thisKey=util.getAnyKey(this.callbacks_);return thisKey===otherKey&&(!other.callbacks_[otherKey]||!this.callbacks_[thisKey]||other.callbacks_[otherKey]===this.callbacks_[thisKey])}else{return util.every(this.callbacks_,function(eventType,cb){return other.callbacks_[eventType]===cb})}}}}return false};ChildEventRegistration.prototype.hasAnyCallback=function(){return this.callbacks_!==null};return ChildEventRegistration}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var __referenceConstructor;var Query=function(){function Query(repo,path,queryParams_,orderByCalled_){this.repo=repo;this.path=path;this.queryParams_=queryParams_;this.orderByCalled_=orderByCalled_}Object.defineProperty(Query,\"__referenceConstructor\",{get:function(){util.assert(__referenceConstructor,\"Reference.ts has not been loaded\");return __referenceConstructor},set:function(val){__referenceConstructor=val},enumerable:true,configurable:true});Query.validateQueryEndpoints_=function(params){var startNode=null;var endNode=null;if(params.hasStart()){startNode=params.getIndexStartValue()}if(params.hasEnd()){endNode=params.getIndexEndValue()}if(params.getIndex()===KEY_INDEX){var tooManyArgsError=\"Query: When ordering by key, you may only pass one argument to \"+\"startAt(), endAt(), or equalTo().\";var wrongArgTypeError=\"Query: When ordering by key, the argument passed to startAt(), endAt(),\"+\"or equalTo() must be a string.\";if(params.hasStart()){var startName=params.getIndexStartName();if(startName!=MIN_NAME){throw new Error(tooManyArgsError)}else if(typeof startNode!==\"string\"){throw new Error(wrongArgTypeError)}}if(params.hasEnd()){var endName=params.getIndexEndName();if(endName!=MAX_NAME){throw new Error(tooManyArgsError)}else if(typeof endNode!==\"string\"){throw new Error(wrongArgTypeError)}}}else if(params.getIndex()===PRIORITY_INDEX){if(startNode!=null&&!isValidPriority(startNode)||endNode!=null&&!isValidPriority(endNode)){throw new Error(\"Query: When ordering by priority, the first argument passed to startAt(), \"+\"endAt(), or equalTo() must be a valid priority value (null, a number, or a string).\")}}else{util.assert(params.getIndex()instanceof PathIndex||params.getIndex()===VALUE_INDEX,\"unknown index type.\");if(startNode!=null&&typeof startNode===\"object\"||endNode!=null&&typeof endNode===\"object\"){throw new Error(\"Query: First argument passed to startAt(), endAt(), or equalTo() cannot be \"+\"an object.\")}}};Query.validateLimit_=function(params){if(params.hasStart()&&params.hasEnd()&&params.hasLimit()&&!params.hasAnchoredLimit()){throw new Error(\"Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.\")}};Query.prototype.validateNoPreviousOrderByCall_=function(fnName){if(this.orderByCalled_===true){throw new Error(fnName+\": You can't combine multiple orderBy calls.\")}};Query.prototype.getQueryParams=function(){return this.queryParams_};Query.prototype.getRef=function(){util.validateArgCount(\"Query.ref\",0,0,arguments.length);return new Query.__referenceConstructor(this.repo,this.path)};Query.prototype.on=function(eventType,callback,cancelCallbackOrContext,context){util.validateArgCount(\"Query.on\",2,4,arguments.length);validateEventType(\"Query.on\",1,eventType,false);util.validateCallback(\"Query.on\",2,callback,false);var ret=Query.getCancelAndContextArgs_(\"Query.on\",cancelCallbackOrContext,context);if(eventType===\"value\"){this.onValueEvent(callback,ret.cancel,ret.context)}else{var callbacks={};callbacks[eventType]=callback;this.onChildEvent(callbacks,ret.cancel,ret.context)}return callback};Query.prototype.onValueEvent=function(callback,cancelCallback,context){var container=new ValueEventRegistration(callback,cancelCallback||null,context||null);this.repo.addEventCallbackForQuery(this,container)};Query.prototype.onChildEvent=function(callbacks,cancelCallback,context){var container=new ChildEventRegistration(callbacks,cancelCallback,context);this.repo.addEventCallbackForQuery(this,container)};Query.prototype.off=function(eventType,callback,context){util.validateArgCount(\"Query.off\",0,3,arguments.length);validateEventType(\"Query.off\",1,eventType,true);util.validateCallback(\"Query.off\",2,callback,true);util.validateContextObject(\"Query.off\",3,context,true);var container=null;var callbacks=null;if(eventType===\"value\"){var valueCallback=callback||null;container=new ValueEventRegistration(valueCallback,null,context||null)}else if(eventType){if(callback){callbacks={};callbacks[eventType]=callback}container=new ChildEventRegistration(callbacks,null,context||null)}this.repo.removeEventCallbackForQuery(this,container)};Query.prototype.once=function(eventType,userCallback,cancelOrContext,context){var _this=this;util.validateArgCount(\"Query.once\",1,4,arguments.length);validateEventType(\"Query.once\",1,eventType,false);util.validateCallback(\"Query.once\",2,userCallback,true);var ret=Query.getCancelAndContextArgs_(\"Query.once\",cancelOrContext,context);var firstCall=true;var deferred=new util.Deferred;deferred.promise.catch(function(){});var onceCallback=function(snapshot){if(firstCall){firstCall=false;_this.off(eventType,onceCallback);if(userCallback){userCallback.bind(ret.context)(snapshot)}deferred.resolve(snapshot)}};this.on(eventType,onceCallback,function(err){_this.off(eventType,onceCallback);if(ret.cancel)ret.cancel.bind(ret.context)(err);deferred.reject(err)});return deferred.promise};Query.prototype.limitToFirst=function(limit){util.validateArgCount(\"Query.limitToFirst\",1,1,arguments.length);if(typeof limit!==\"number\"||Math.floor(limit)!==limit||limit<=0){throw new Error(\"Query.limitToFirst: First argument must be a positive integer.\")}if(this.queryParams_.hasLimit()){throw new Error(\"Query.limitToFirst: Limit was already set (by another call to limit, \"+\"limitToFirst, or limitToLast).\")}return new Query(this.repo,this.path,this.queryParams_.limitToFirst(limit),this.orderByCalled_)};Query.prototype.limitToLast=function(limit){util.validateArgCount(\"Query.limitToLast\",1,1,arguments.length);if(typeof limit!==\"number\"||Math.floor(limit)!==limit||limit<=0){throw new Error(\"Query.limitToLast: First argument must be a positive integer.\")}if(this.queryParams_.hasLimit()){throw new Error(\"Query.limitToLast: Limit was already set (by another call to limit, \"+\"limitToFirst, or limitToLast).\")}return new Query(this.repo,this.path,this.queryParams_.limitToLast(limit),this.orderByCalled_)};Query.prototype.orderByChild=function(path){util.validateArgCount(\"Query.orderByChild\",1,1,arguments.length);if(path===\"$key\"){throw new Error('Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.')}else if(path===\"$priority\"){throw new Error('Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.')}else if(path===\"$value\"){throw new Error('Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.')}validatePathString(\"Query.orderByChild\",1,path,false);this.validateNoPreviousOrderByCall_(\"Query.orderByChild\");var parsedPath=new Path(path);if(parsedPath.isEmpty()){throw new Error(\"Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.\")}var index=new PathIndex(parsedPath);var newParams=this.queryParams_.orderBy(index);Query.validateQueryEndpoints_(newParams);return new Query(this.repo,this.path,newParams,true)};Query.prototype.orderByKey=function(){util.validateArgCount(\"Query.orderByKey\",0,0,arguments.length);this.validateNoPreviousOrderByCall_(\"Query.orderByKey\");var newParams=this.queryParams_.orderBy(KEY_INDEX);Query.validateQueryEndpoints_(newParams);return new Query(this.repo,this.path,newParams,true)};Query.prototype.orderByPriority=function(){util.validateArgCount(\"Query.orderByPriority\",0,0,arguments.length);this.validateNoPreviousOrderByCall_(\"Query.orderByPriority\");var newParams=this.queryParams_.orderBy(PRIORITY_INDEX);Query.validateQueryEndpoints_(newParams);return new Query(this.repo,this.path,newParams,true)};Query.prototype.orderByValue=function(){util.validateArgCount(\"Query.orderByValue\",0,0,arguments.length);this.validateNoPreviousOrderByCall_(\"Query.orderByValue\");var newParams=this.queryParams_.orderBy(VALUE_INDEX);Query.validateQueryEndpoints_(newParams);return new Query(this.repo,this.path,newParams,true)};Query.prototype.startAt=function(value,name){if(value===void 0){value=null}util.validateArgCount(\"Query.startAt\",0,2,arguments.length);validateFirebaseDataArg(\"Query.startAt\",1,value,this.path,true);validateKey(\"Query.startAt\",2,name,true);var newParams=this.queryParams_.startAt(value,name);Query.validateLimit_(newParams);Query.validateQueryEndpoints_(newParams);if(this.queryParams_.hasStart()){throw new Error(\"Query.startAt: Starting point was already set (by another call to startAt \"+\"or equalTo).\")}if(value===undefined){value=null;name=null}return new Query(this.repo,this.path,newParams,this.orderByCalled_)};Query.prototype.endAt=function(value,name){if(value===void 0){value=null}util.validateArgCount(\"Query.endAt\",0,2,arguments.length);validateFirebaseDataArg(\"Query.endAt\",1,value,this.path,true);validateKey(\"Query.endAt\",2,name,true);var newParams=this.queryParams_.endAt(value,name);Query.validateLimit_(newParams);Query.validateQueryEndpoints_(newParams);if(this.queryParams_.hasEnd()){throw new Error(\"Query.endAt: Ending point was already set (by another call to endAt or \"+\"equalTo).\")}return new Query(this.repo,this.path,newParams,this.orderByCalled_)};Query.prototype.equalTo=function(value,name){util.validateArgCount(\"Query.equalTo\",1,2,arguments.length);validateFirebaseDataArg(\"Query.equalTo\",1,value,this.path,false);validateKey(\"Query.equalTo\",2,name,true);if(this.queryParams_.hasStart()){throw new Error(\"Query.equalTo: Starting point was already set (by another call to startAt or \"+\"equalTo).\")}if(this.queryParams_.hasEnd()){throw new Error(\"Query.equalTo: Ending point was already set (by another call to endAt or \"+\"equalTo).\")}return this.startAt(value,name).endAt(value,name)};Query.prototype.toString=function(){util.validateArgCount(\"Query.toString\",0,0,arguments.length);return this.repo.toString()+this.path.toUrlEncodedString()};Query.prototype.toJSON=function(){util.validateArgCount(\"Query.toJSON\",0,1,arguments.length);return this.toString()};Query.prototype.queryObject=function(){return this.queryParams_.getQueryObject()};Query.prototype.queryIdentifier=function(){var obj=this.queryObject();var id=ObjectToUniqueKey(obj);return id===\"{}\"?\"default\":id};Query.prototype.isEqual=function(other){util.validateArgCount(\"Query.isEqual\",1,1,arguments.length);if(!(other instanceof Query)){var error=\"Query.isEqual failed: First argument must be an instance of firebase.database.Query.\";throw new Error(error)}var sameRepo=this.repo===other.repo;var samePath=this.path.equals(other.path);var sameQueryIdentifier=this.queryIdentifier()===other.queryIdentifier();return sameRepo&&samePath&&sameQueryIdentifier};Query.getCancelAndContextArgs_=function(fnName,cancelOrContext,context){var ret={cancel:null,context:null};if(cancelOrContext&&context){ret.cancel=cancelOrContext;util.validateCallback(fnName,3,ret.cancel,true);ret.context=context;util.validateContextObject(fnName,4,ret.context,true)}else if(cancelOrContext){if(typeof cancelOrContext===\"object\"&&cancelOrContext!==null){ret.context=cancelOrContext}else if(typeof cancelOrContext===\"function\"){ret.cancel=cancelOrContext}else{throw new Error(util.errorPrefix(fnName,3,true)+\" must either be a cancel callback or a context object.\")}}return ret};Object.defineProperty(Query.prototype,\"ref\",{get:function(){return this.getRef()},enumerable:true,configurable:true});return Query}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var CountedSet=function(){function CountedSet(){this.set={}}CountedSet.prototype.add=function(item,val){this.set[item]=val!==null?val:true};CountedSet.prototype.contains=function(key){return util.contains(this.set,key)};CountedSet.prototype.get=function(item){return this.contains(item)?this.set[item]:undefined};CountedSet.prototype.remove=function(item){delete this.set[item]};CountedSet.prototype.clear=function(){this.set={}};CountedSet.prototype.isEmpty=function(){return util.isEmpty(this.set)};CountedSet.prototype.count=function(){return util.getCount(this.set)};CountedSet.prototype.each=function(fn){util.forEach(this.set,function(k,v){return fn(k,v)})};CountedSet.prototype.keys=function(){var keys=[];util.forEach(this.set,function(k){keys.push(k)});return keys};return CountedSet}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var SparseSnapshotTree=function(){function SparseSnapshotTree(){this.value_=null;this.children_=null}SparseSnapshotTree.prototype.find=function(path){if(this.value_!=null){return this.value_.getChild(path)}else if(!path.isEmpty()&&this.children_!=null){var childKey=path.getFront();path=path.popFront();if(this.children_.contains(childKey)){var childTree=this.children_.get(childKey);return childTree.find(path)}else{return null}}else{return null}};SparseSnapshotTree.prototype.remember=function(path,data){if(path.isEmpty()){this.value_=data;this.children_=null}else if(this.value_!==null){this.value_=this.value_.updateChild(path,data)}else{if(this.children_==null){this.children_=new CountedSet}var childKey=path.getFront();if(!this.children_.contains(childKey)){this.children_.add(childKey,new SparseSnapshotTree)}var child=this.children_.get(childKey);path=path.popFront();child.remember(path,data)}};SparseSnapshotTree.prototype.forget=function(path){if(path.isEmpty()){this.value_=null;this.children_=null;return true}else{if(this.value_!==null){if(this.value_.isLeafNode()){return false}else{var value=this.value_;this.value_=null;var self_1=this;value.forEachChild(PRIORITY_INDEX,function(key,tree){self_1.remember(new Path(key),tree)});return this.forget(path)}}else if(this.children_!==null){var childKey=path.getFront();path=path.popFront();if(this.children_.contains(childKey)){var safeToRemove=this.children_.get(childKey).forget(path);if(safeToRemove){this.children_.remove(childKey)}}if(this.children_.isEmpty()){this.children_=null;return true}else{return false}}else{return true}}};SparseSnapshotTree.prototype.forEachTree=function(prefixPath,func){if(this.value_!==null){func(prefixPath,this.value_)}else{this.forEachChild(function(key,tree){var path=new Path(prefixPath.toString()+\"/\"+key);tree.forEachTree(path,func)})}};SparseSnapshotTree.prototype.forEachChild=function(func){if(this.children_!==null){this.children_.each(function(key,tree){func(key,tree)})}};return SparseSnapshotTree}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var generateWithValues=function(values){values=values||{};values[\"timestamp\"]=values[\"timestamp\"]||(new Date).getTime();return values};var resolveDeferredValue=function(value,serverValues){if(!value||typeof value!==\"object\"){return value}else{util.assert(\".sv\"in value,\"Unexpected leaf node or priority contents\");return serverValues[value[\".sv\"]]}};var resolveDeferredValueTree=function(tree,serverValues){var resolvedTree=new SparseSnapshotTree;tree.forEachTree(new Path(\"\"),function(path,node){resolvedTree.remember(path,resolveDeferredValueSnapshot(node,serverValues))});return resolvedTree};var resolveDeferredValueSnapshot=function(node,serverValues){var rawPri=node.getPriority().val();var priority=resolveDeferredValue(rawPri,serverValues);var newNode;if(node.isLeafNode()){var leafNode=node;var value=resolveDeferredValue(leafNode.getValue(),serverValues);if(value!==leafNode.getValue()||priority!==leafNode.getPriority().val()){return new LeafNode(value,nodeFromJSON$1(priority))}else{return node}}else{var childrenNode=node;newNode=childrenNode;if(priority!==childrenNode.getPriority().val()){newNode=newNode.updatePriority(new LeafNode(priority))}childrenNode.forEachChild(PRIORITY_INDEX,function(childName,childNode){var newChildNode=resolveDeferredValueSnapshot(childNode,serverValues);if(newChildNode!==childNode){newNode=newNode.updateImmediateChild(childName,newChildNode)}});return newNode}};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var OperationType;(function(OperationType){OperationType[OperationType[\"OVERWRITE\"]=0]=\"OVERWRITE\";OperationType[OperationType[\"MERGE\"]=1]=\"MERGE\";OperationType[OperationType[\"ACK_USER_WRITE\"]=2]=\"ACK_USER_WRITE\";OperationType[OperationType[\"LISTEN_COMPLETE\"]=3]=\"LISTEN_COMPLETE\"})(OperationType||(OperationType={}));var OperationSource=function(){function OperationSource(fromUser,fromServer,queryId,tagged){this.fromUser=fromUser;this.fromServer=fromServer;this.queryId=queryId;this.tagged=tagged;util.assert(!tagged||fromServer,\"Tagged queries must be from server.\")}OperationSource.User=new OperationSource(true,false,null,false);OperationSource.Server=new OperationSource(false,true,null,false);OperationSource.forServerTaggedQuery=function(queryId){return new OperationSource(false,true,queryId,true)};return OperationSource}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var AckUserWrite=function(){function AckUserWrite(path,affectedTree,revert){this.path=path;this.affectedTree=affectedTree;this.revert=revert;this.type=OperationType.ACK_USER_WRITE;this.source=OperationSource.User}AckUserWrite.prototype.operationForChild=function(childName){if(!this.path.isEmpty()){util.assert(this.path.getFront()===childName,\"operationForChild called for unrelated child.\");return new AckUserWrite(this.path.popFront(),this.affectedTree,this.revert)}else if(this.affectedTree.value!=null){util.assert(this.affectedTree.children.isEmpty(),\"affectedTree should not have overlapping affected paths.\");return this}else{var childTree=this.affectedTree.subtree(new Path(childName));return new AckUserWrite(Path.Empty,childTree,this.revert)}};return AckUserWrite}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var emptyChildrenSingleton;var EmptyChildren=function(){if(!emptyChildrenSingleton){emptyChildrenSingleton=new SortedMap(stringCompare)}return emptyChildrenSingleton};var ImmutableTree=function(){function ImmutableTree(value,children){if(children===void 0){children=EmptyChildren()}this.value=value;this.children=children}ImmutableTree.fromObject=function(obj){var tree=ImmutableTree.Empty;util.forEach(obj,function(childPath,childSnap){tree=tree.set(new Path(childPath),childSnap)});return tree};ImmutableTree.prototype.isEmpty=function(){return this.value===null&&this.children.isEmpty()};ImmutableTree.prototype.findRootMostMatchingPathAndValue=function(relativePath,predicate){if(this.value!=null&&predicate(this.value)){return{path:Path.Empty,value:this.value}}else{if(relativePath.isEmpty()){return null}else{var front=relativePath.getFront();var child=this.children.get(front);if(child!==null){var childExistingPathAndValue=child.findRootMostMatchingPathAndValue(relativePath.popFront(),predicate);if(childExistingPathAndValue!=null){var fullPath=new Path(front).child(childExistingPathAndValue.path);return{path:fullPath,value:childExistingPathAndValue.value}}else{return null}}else{return null}}}};ImmutableTree.prototype.findRootMostValueAndPath=function(relativePath){return this.findRootMostMatchingPathAndValue(relativePath,function(){return true})};ImmutableTree.prototype.subtree=function(relativePath){if(relativePath.isEmpty()){return this}else{var front=relativePath.getFront();var childTree=this.children.get(front);if(childTree!==null){return childTree.subtree(relativePath.popFront())}else{return ImmutableTree.Empty}}};ImmutableTree.prototype.set=function(relativePath,toSet){if(relativePath.isEmpty()){return new ImmutableTree(toSet,this.children)}else{var front=relativePath.getFront();var child=this.children.get(front)||ImmutableTree.Empty;var newChild=child.set(relativePath.popFront(),toSet);var newChildren=this.children.insert(front,newChild);return new ImmutableTree(this.value,newChildren)}};ImmutableTree.prototype.remove=function(relativePath){if(relativePath.isEmpty()){if(this.children.isEmpty()){return ImmutableTree.Empty}else{return new ImmutableTree(null,this.children)}}else{var front=relativePath.getFront();var child=this.children.get(front);if(child){var newChild=child.remove(relativePath.popFront());var newChildren=void 0;if(newChild.isEmpty()){newChildren=this.children.remove(front)}else{newChildren=this.children.insert(front,newChild)}if(this.value===null&&newChildren.isEmpty()){return ImmutableTree.Empty}else{return new ImmutableTree(this.value,newChildren)}}else{return this}}};ImmutableTree.prototype.get=function(relativePath){if(relativePath.isEmpty()){return this.value}else{var front=relativePath.getFront();var child=this.children.get(front);if(child){return child.get(relativePath.popFront())}else{return null}}};ImmutableTree.prototype.setTree=function(relativePath,newTree){if(relativePath.isEmpty()){return newTree}else{var front=relativePath.getFront();var child=this.children.get(front)||ImmutableTree.Empty;var newChild=child.setTree(relativePath.popFront(),newTree);var newChildren=void 0;if(newChild.isEmpty()){newChildren=this.children.remove(front)}else{newChildren=this.children.insert(front,newChild)}return new ImmutableTree(this.value,newChildren)}};ImmutableTree.prototype.fold=function(fn){return this.fold_(Path.Empty,fn)};ImmutableTree.prototype.fold_=function(pathSoFar,fn){var accum={};this.children.inorderTraversal(function(childKey,childTree){accum[childKey]=childTree.fold_(pathSoFar.child(childKey),fn)});return fn(pathSoFar,this.value,accum)};ImmutableTree.prototype.findOnPath=function(path,f){return this.findOnPath_(path,Path.Empty,f)};ImmutableTree.prototype.findOnPath_=function(pathToFollow,pathSoFar,f){var result=this.value?f(pathSoFar,this.value):false;if(result){return result}else{if(pathToFollow.isEmpty()){return null}else{var front=pathToFollow.getFront();var nextChild=this.children.get(front);if(nextChild){return nextChild.findOnPath_(pathToFollow.popFront(),pathSoFar.child(front),f)}else{return null}}}};ImmutableTree.prototype.foreachOnPath=function(path,f){return this.foreachOnPath_(path,Path.Empty,f)};ImmutableTree.prototype.foreachOnPath_=function(pathToFollow,currentRelativePath,f){if(pathToFollow.isEmpty()){return this}else{if(this.value){f(currentRelativePath,this.value)}var front=pathToFollow.getFront();var nextChild=this.children.get(front);if(nextChild){return nextChild.foreachOnPath_(pathToFollow.popFront(),currentRelativePath.child(front),f)}else{return ImmutableTree.Empty}}};ImmutableTree.prototype.foreach=function(f){this.foreach_(Path.Empty,f)};ImmutableTree.prototype.foreach_=function(currentRelativePath,f){this.children.inorderTraversal(function(childName,childTree){childTree.foreach_(currentRelativePath.child(childName),f)});if(this.value){f(currentRelativePath,this.value)}};ImmutableTree.prototype.foreachChild=function(f){this.children.inorderTraversal(function(childName,childTree){if(childTree.value){f(childName,childTree.value)}})};ImmutableTree.Empty=new ImmutableTree(null);return ImmutableTree}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var ListenComplete=function(){function ListenComplete(source,path){this.source=source;this.path=path;this.type=OperationType.LISTEN_COMPLETE}ListenComplete.prototype.operationForChild=function(childName){if(this.path.isEmpty()){return new ListenComplete(this.source,Path.Empty)}else{return new ListenComplete(this.source,this.path.popFront())}};return ListenComplete}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Overwrite=function(){function Overwrite(source,path,snap){this.source=source;this.path=path;this.snap=snap;this.type=OperationType.OVERWRITE}Overwrite.prototype.operationForChild=function(childName){if(this.path.isEmpty()){return new Overwrite(this.source,Path.Empty,this.snap.getImmediateChild(childName))}else{return new Overwrite(this.source,this.path.popFront(),this.snap)}};return Overwrite}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Merge=function(){function Merge(source,path,children){this.source=source;this.path=path;this.children=children;this.type=OperationType.MERGE}Merge.prototype.operationForChild=function(childName){if(this.path.isEmpty()){var childTree=this.children.subtree(new Path(childName));if(childTree.isEmpty()){return null}else if(childTree.value){return new Overwrite(this.source,Path.Empty,childTree.value)}else{return new Merge(this.source,Path.Empty,childTree)}}else{util.assert(this.path.getFront()===childName,\"Can't get a merge for a child not on the path of the operation\");return new Merge(this.source,this.path.popFront(),this.children)}};Merge.prototype.toString=function(){return\"Operation(\"+this.path+\": \"+this.source.toString()+\" merge: \"+this.children.toString()+\")\"};return Merge}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var CacheNode=function(){function CacheNode(node_,fullyInitialized_,filtered_){this.node_=node_;this.fullyInitialized_=fullyInitialized_;this.filtered_=filtered_}CacheNode.prototype.isFullyInitialized=function(){return this.fullyInitialized_};CacheNode.prototype.isFiltered=function(){return this.filtered_};CacheNode.prototype.isCompleteForPath=function(path){if(path.isEmpty()){return this.isFullyInitialized()&&!this.filtered_}var childKey=path.getFront();return this.isCompleteForChild(childKey)};CacheNode.prototype.isCompleteForChild=function(key){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(key)};CacheNode.prototype.getNode=function(){return this.node_};return CacheNode}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var ViewCache=function(){function ViewCache(eventCache_,serverCache_){this.eventCache_=eventCache_;this.serverCache_=serverCache_}ViewCache.prototype.updateEventSnap=function(eventSnap,complete,filtered){return new ViewCache(new CacheNode(eventSnap,complete,filtered),this.serverCache_)};ViewCache.prototype.updateServerSnap=function(serverSnap,complete,filtered){return new ViewCache(this.eventCache_,new CacheNode(serverSnap,complete,filtered))};ViewCache.prototype.getEventCache=function(){return this.eventCache_};ViewCache.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null};ViewCache.prototype.getServerCache=function(){return this.serverCache_};ViewCache.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null};ViewCache.Empty=new ViewCache(new CacheNode(ChildrenNode.EMPTY_NODE,false,false),new CacheNode(ChildrenNode.EMPTY_NODE,false,false));return ViewCache}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Change=function(){function Change(type,snapshotNode,childName,oldSnap,prevName){this.type=type;this.snapshotNode=snapshotNode;this.childName=childName;this.oldSnap=oldSnap;this.prevName=prevName}Change.valueChange=function(snapshot){return new Change(Change.VALUE,snapshot)};Change.childAddedChange=function(childKey,snapshot){return new Change(Change.CHILD_ADDED,snapshot,childKey)};Change.childRemovedChange=function(childKey,snapshot){return new Change(Change.CHILD_REMOVED,snapshot,childKey)};Change.childChangedChange=function(childKey,newSnapshot,oldSnapshot){return new Change(Change.CHILD_CHANGED,newSnapshot,childKey,oldSnapshot)};Change.childMovedChange=function(childKey,snapshot){return new Change(Change.CHILD_MOVED,snapshot,childKey)};Change.CHILD_ADDED=\"child_added\";Change.CHILD_REMOVED=\"child_removed\";Change.CHILD_CHANGED=\"child_changed\";Change.CHILD_MOVED=\"child_moved\";Change.VALUE=\"value\";return Change}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var IndexedFilter=function(){function IndexedFilter(index_){this.index_=index_}IndexedFilter.prototype.updateChild=function(snap,key,newChild,affectedPath,source,optChangeAccumulator){util.assert(snap.isIndexed(this.index_),\"A node must be indexed if only a child is updated\");var oldChild=snap.getImmediateChild(key);if(oldChild.getChild(affectedPath).equals(newChild.getChild(affectedPath))){if(oldChild.isEmpty()==newChild.isEmpty()){return snap}}if(optChangeAccumulator!=null){if(newChild.isEmpty()){if(snap.hasChild(key)){optChangeAccumulator.trackChildChange(Change.childRemovedChange(key,oldChild))}else{util.assert(snap.isLeafNode(),\"A child remove without an old child only makes sense on a leaf node\")}}else if(oldChild.isEmpty()){optChangeAccumulator.trackChildChange(Change.childAddedChange(key,newChild))}else{optChangeAccumulator.trackChildChange(Change.childChangedChange(key,newChild,oldChild))}}if(snap.isLeafNode()&&newChild.isEmpty()){return snap}else{return snap.updateImmediateChild(key,newChild).withIndex(this.index_)}};IndexedFilter.prototype.updateFullNode=function(oldSnap,newSnap,optChangeAccumulator){if(optChangeAccumulator!=null){if(!oldSnap.isLeafNode()){oldSnap.forEachChild(PRIORITY_INDEX,function(key,childNode){if(!newSnap.hasChild(key)){optChangeAccumulator.trackChildChange(Change.childRemovedChange(key,childNode))}})}if(!newSnap.isLeafNode()){newSnap.forEachChild(PRIORITY_INDEX,function(key,childNode){if(oldSnap.hasChild(key)){var oldChild=oldSnap.getImmediateChild(key);if(!oldChild.equals(childNode)){optChangeAccumulator.trackChildChange(Change.childChangedChange(key,childNode,oldChild))}}else{optChangeAccumulator.trackChildChange(Change.childAddedChange(key,childNode))}})}}return newSnap.withIndex(this.index_)};IndexedFilter.prototype.updatePriority=function(oldSnap,newPriority){if(oldSnap.isEmpty()){return ChildrenNode.EMPTY_NODE}else{return oldSnap.updatePriority(newPriority)}};IndexedFilter.prototype.filtersNodes=function(){return false};IndexedFilter.prototype.getIndexedFilter=function(){return this};IndexedFilter.prototype.getIndex=function(){return this.index_};return IndexedFilter}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var ChildChangeAccumulator=function(){function ChildChangeAccumulator(){this.changeMap_={}}ChildChangeAccumulator.prototype.trackChildChange=function(change){var type=change.type;var childKey=change.childName;util.assert(type==Change.CHILD_ADDED||type==Change.CHILD_CHANGED||type==Change.CHILD_REMOVED,\"Only child changes supported for tracking\");util.assert(childKey!==\".priority\",\"Only non-priority child changes can be tracked.\");var oldChange=util.safeGet(this.changeMap_,childKey);if(oldChange){var oldType=oldChange.type;if(type==Change.CHILD_ADDED&&oldType==Change.CHILD_REMOVED){this.changeMap_[childKey]=Change.childChangedChange(childKey,change.snapshotNode,oldChange.snapshotNode)}else if(type==Change.CHILD_REMOVED&&oldType==Change.CHILD_ADDED){delete this.changeMap_[childKey]}else if(type==Change.CHILD_REMOVED&&oldType==Change.CHILD_CHANGED){this.changeMap_[childKey]=Change.childRemovedChange(childKey,oldChange.oldSnap)}else if(type==Change.CHILD_CHANGED&&oldType==Change.CHILD_ADDED){this.changeMap_[childKey]=Change.childAddedChange(childKey,change.snapshotNode)}else if(type==Change.CHILD_CHANGED&&oldType==Change.CHILD_CHANGED){this.changeMap_[childKey]=Change.childChangedChange(childKey,change.snapshotNode,oldChange.oldSnap)}else{throw util.assertionError(\"Illegal combination of changes: \"+change+\" occurred after \"+oldChange)}}else{this.changeMap_[childKey]=change}};ChildChangeAccumulator.prototype.getChanges=function(){return util.getValues(this.changeMap_)};return ChildChangeAccumulator}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var NoCompleteChildSource_=function(){function NoCompleteChildSource_(){}NoCompleteChildSource_.prototype.getCompleteChild=function(childKey){return null};NoCompleteChildSource_.prototype.getChildAfterChild=function(index,child,reverse){return null};return NoCompleteChildSource_}();var NO_COMPLETE_CHILD_SOURCE=new NoCompleteChildSource_;var WriteTreeCompleteChildSource=function(){function WriteTreeCompleteChildSource(writes_,viewCache_,optCompleteServerCache_){if(optCompleteServerCache_===void 0){optCompleteServerCache_=null}this.writes_=writes_;this.viewCache_=viewCache_;this.optCompleteServerCache_=optCompleteServerCache_}WriteTreeCompleteChildSource.prototype.getCompleteChild=function(childKey){var node=this.viewCache_.getEventCache();if(node.isCompleteForChild(childKey)){return node.getNode().getImmediateChild(childKey)}else{var serverNode=this.optCompleteServerCache_!=null?new CacheNode(this.optCompleteServerCache_,true,false):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(childKey,serverNode)}};WriteTreeCompleteChildSource.prototype.getChildAfterChild=function(index,child,reverse){var completeServerData=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap();var nodes=this.writes_.calcIndexedSlice(completeServerData,child,1,reverse,index);if(nodes.length===0){return null}else{return nodes[0]}};return WriteTreeCompleteChildSource}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var ProcessorResult=function(){function ProcessorResult(viewCache,changes){this.viewCache=viewCache;this.changes=changes}return ProcessorResult}();var ViewProcessor=function(){function ViewProcessor(filter_){this.filter_=filter_}ViewProcessor.prototype.assertIndexed=function(viewCache){util.assert(viewCache.getEventCache().getNode().isIndexed(this.filter_.getIndex()),\"Event snap not indexed\");util.assert(viewCache.getServerCache().getNode().isIndexed(this.filter_.getIndex()),\"Server snap not indexed\")};ViewProcessor.prototype.applyOperation=function(oldViewCache,operation,writesCache,completeCache){var accumulator=new ChildChangeAccumulator;var newViewCache,filterServerNode;if(operation.type===OperationType.OVERWRITE){var overwrite=operation;if(overwrite.source.fromUser){newViewCache=this.applyUserOverwrite_(oldViewCache,overwrite.path,overwrite.snap,writesCache,completeCache,accumulator)}else{util.assert(overwrite.source.fromServer,\"Unknown source.\");filterServerNode=overwrite.source.tagged||oldViewCache.getServerCache().isFiltered()&&!overwrite.path.isEmpty();newViewCache=this.applyServerOverwrite_(oldViewCache,overwrite.path,overwrite.snap,writesCache,completeCache,filterServerNode,accumulator)}}else if(operation.type===OperationType.MERGE){var merge=operation;if(merge.source.fromUser){newViewCache=this.applyUserMerge_(oldViewCache,merge.path,merge.children,writesCache,completeCache,accumulator)}else{util.assert(merge.source.fromServer,\"Unknown source.\");filterServerNode=merge.source.tagged||oldViewCache.getServerCache().isFiltered();newViewCache=this.applyServerMerge_(oldViewCache,merge.path,merge.children,writesCache,completeCache,filterServerNode,accumulator)}}else if(operation.type===OperationType.ACK_USER_WRITE){var ackUserWrite=operation;if(!ackUserWrite.revert){newViewCache=this.ackUserWrite_(oldViewCache,ackUserWrite.path,ackUserWrite.affectedTree,writesCache,completeCache,accumulator)}else{newViewCache=this.revertUserWrite_(oldViewCache,ackUserWrite.path,writesCache,completeCache,accumulator)}}else if(operation.type===OperationType.LISTEN_COMPLETE){newViewCache=this.listenComplete_(oldViewCache,operation.path,writesCache,accumulator)}else{throw util.assertionError(\"Unknown operation type: \"+operation.type)}var changes=accumulator.getChanges();ViewProcessor.maybeAddValueEvent_(oldViewCache,newViewCache,changes);return new ProcessorResult(newViewCache,changes)};ViewProcessor.maybeAddValueEvent_=function(oldViewCache,newViewCache,accumulator){var eventSnap=newViewCache.getEventCache();if(eventSnap.isFullyInitialized()){var isLeafOrEmpty=eventSnap.getNode().isLeafNode()||eventSnap.getNode().isEmpty();var oldCompleteSnap=oldViewCache.getCompleteEventSnap();if(accumulator.length>0||!oldViewCache.getEventCache().isFullyInitialized()||isLeafOrEmpty&&!eventSnap.getNode().equals(oldCompleteSnap)||!eventSnap.getNode().getPriority().equals(oldCompleteSnap.getPriority())){accumulator.push(Change.valueChange(newViewCache.getCompleteEventSnap()))}}};ViewProcessor.prototype.generateEventCacheAfterServerEvent_=function(viewCache,changePath,writesCache,source,accumulator){var oldEventSnap=viewCache.getEventCache();if(writesCache.shadowingWrite(changePath)!=null){return viewCache}else{var newEventCache=void 0,serverNode=void 0;if(changePath.isEmpty()){util.assert(viewCache.getServerCache().isFullyInitialized(),\"If change path is empty, we must have complete server data\");if(viewCache.getServerCache().isFiltered()){var serverCache=viewCache.getCompleteServerSnap();var completeChildren=serverCache instanceof ChildrenNode?serverCache:ChildrenNode.EMPTY_NODE;var completeEventChildren=writesCache.calcCompleteEventChildren(completeChildren);newEventCache=this.filter_.updateFullNode(viewCache.getEventCache().getNode(),completeEventChildren,accumulator)}else{var completeNode=writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap());newEventCache=this.filter_.updateFullNode(viewCache.getEventCache().getNode(),completeNode,accumulator)}}else{var childKey=changePath.getFront();if(childKey==\".priority\"){util.assert(changePath.getLength()==1,\"Can't have a priority with additional path components\");var oldEventNode=oldEventSnap.getNode();serverNode=viewCache.getServerCache().getNode();var updatedPriority=writesCache.calcEventCacheAfterServerOverwrite(changePath,oldEventNode,serverNode);if(updatedPriority!=null){newEventCache=this.filter_.updatePriority(oldEventNode,updatedPriority)}else{newEventCache=oldEventSnap.getNode()}}else{var childChangePath=changePath.popFront();var newEventChild=void 0;if(oldEventSnap.isCompleteForChild(childKey)){serverNode=viewCache.getServerCache().getNode();var eventChildUpdate=writesCache.calcEventCacheAfterServerOverwrite(changePath,oldEventSnap.getNode(),serverNode);if(eventChildUpdate!=null){newEventChild=oldEventSnap.getNode().getImmediateChild(childKey).updateChild(childChangePath,eventChildUpdate)}else{newEventChild=oldEventSnap.getNode().getImmediateChild(childKey)}}else{newEventChild=writesCache.calcCompleteChild(childKey,viewCache.getServerCache())}if(newEventChild!=null){newEventCache=this.filter_.updateChild(oldEventSnap.getNode(),childKey,newEventChild,childChangePath,source,accumulator)}else{newEventCache=oldEventSnap.getNode()}}}return viewCache.updateEventSnap(newEventCache,oldEventSnap.isFullyInitialized()||changePath.isEmpty(),this.filter_.filtersNodes())}};ViewProcessor.prototype.applyServerOverwrite_=function(oldViewCache,changePath,changedSnap,writesCache,completeCache,filterServerNode,accumulator){var oldServerSnap=oldViewCache.getServerCache();var newServerCache;var serverFilter=filterServerNode?this.filter_:this.filter_.getIndexedFilter();if(changePath.isEmpty()){newServerCache=serverFilter.updateFullNode(oldServerSnap.getNode(),changedSnap,null)}else if(serverFilter.filtersNodes()&&!oldServerSnap.isFiltered()){var newServerNode=oldServerSnap.getNode().updateChild(changePath,changedSnap);newServerCache=serverFilter.updateFullNode(oldServerSnap.getNode(),newServerNode,null)}else{var childKey=changePath.getFront();if(!oldServerSnap.isCompleteForPath(changePath)&&changePath.getLength()>1){return oldViewCache}var childChangePath=changePath.popFront();var childNode=oldServerSnap.getNode().getImmediateChild(childKey);var newChildNode=childNode.updateChild(childChangePath,changedSnap);if(childKey==\".priority\"){newServerCache=serverFilter.updatePriority(oldServerSnap.getNode(),newChildNode)}else{newServerCache=serverFilter.updateChild(oldServerSnap.getNode(),childKey,newChildNode,childChangePath,NO_COMPLETE_CHILD_SOURCE,null)}}var newViewCache=oldViewCache.updateServerSnap(newServerCache,oldServerSnap.isFullyInitialized()||changePath.isEmpty(),serverFilter.filtersNodes());var source=new WriteTreeCompleteChildSource(writesCache,newViewCache,completeCache);return this.generateEventCacheAfterServerEvent_(newViewCache,changePath,writesCache,source,accumulator)};ViewProcessor.prototype.applyUserOverwrite_=function(oldViewCache,changePath,changedSnap,writesCache,completeCache,accumulator){var oldEventSnap=oldViewCache.getEventCache();var newViewCache,newEventCache;var source=new WriteTreeCompleteChildSource(writesCache,oldViewCache,completeCache);if(changePath.isEmpty()){newEventCache=this.filter_.updateFullNode(oldViewCache.getEventCache().getNode(),changedSnap,accumulator);newViewCache=oldViewCache.updateEventSnap(newEventCache,true,this.filter_.filtersNodes())}else{var childKey=changePath.getFront();if(childKey===\".priority\"){newEventCache=this.filter_.updatePriority(oldViewCache.getEventCache().getNode(),changedSnap);newViewCache=oldViewCache.updateEventSnap(newEventCache,oldEventSnap.isFullyInitialized(),oldEventSnap.isFiltered())}else{var childChangePath=changePath.popFront();var oldChild=oldEventSnap.getNode().getImmediateChild(childKey);var newChild=void 0;if(childChangePath.isEmpty()){newChild=changedSnap}else{var childNode=source.getCompleteChild(childKey);if(childNode!=null){if(childChangePath.getBack()===\".priority\"&&childNode.getChild(childChangePath.parent()).isEmpty()){newChild=childNode}else{newChild=childNode.updateChild(childChangePath,changedSnap)}}else{newChild=ChildrenNode.EMPTY_NODE}}if(!oldChild.equals(newChild)){var newEventSnap=this.filter_.updateChild(oldEventSnap.getNode(),childKey,newChild,childChangePath,source,accumulator);newViewCache=oldViewCache.updateEventSnap(newEventSnap,oldEventSnap.isFullyInitialized(),this.filter_.filtersNodes())}else{newViewCache=oldViewCache}}}return newViewCache};ViewProcessor.cacheHasChild_=function(viewCache,childKey){return viewCache.getEventCache().isCompleteForChild(childKey)};ViewProcessor.prototype.applyUserMerge_=function(viewCache,path,changedChildren,writesCache,serverCache,accumulator){var _this=this;var curViewCache=viewCache;changedChildren.foreach(function(relativePath,childNode){var writePath=path.child(relativePath);if(ViewProcessor.cacheHasChild_(viewCache,writePath.getFront())){curViewCache=_this.applyUserOverwrite_(curViewCache,writePath,childNode,writesCache,serverCache,accumulator)}});changedChildren.foreach(function(relativePath,childNode){var writePath=path.child(relativePath);if(!ViewProcessor.cacheHasChild_(viewCache,writePath.getFront())){curViewCache=_this.applyUserOverwrite_(curViewCache,writePath,childNode,writesCache,serverCache,accumulator)}});return curViewCache};ViewProcessor.prototype.applyMerge_=function(node,merge){merge.foreach(function(relativePath,childNode){node=node.updateChild(relativePath,childNode)});return node};ViewProcessor.prototype.applyServerMerge_=function(viewCache,path,changedChildren,writesCache,serverCache,filterServerNode,accumulator){var _this=this;if(viewCache.getServerCache().getNode().isEmpty()&&!viewCache.getServerCache().isFullyInitialized()){return viewCache}var curViewCache=viewCache;var viewMergeTree;if(path.isEmpty()){viewMergeTree=changedChildren}else{viewMergeTree=ImmutableTree.Empty.setTree(path,changedChildren)}var serverNode=viewCache.getServerCache().getNode();viewMergeTree.children.inorderTraversal(function(childKey,childTree){if(serverNode.hasChild(childKey)){var serverChild=viewCache.getServerCache().getNode().getImmediateChild(childKey);var newChild=_this.applyMerge_(serverChild,childTree);curViewCache=_this.applyServerOverwrite_(curViewCache,new Path(childKey),newChild,writesCache,serverCache,filterServerNode,accumulator)}});viewMergeTree.children.inorderTraversal(function(childKey,childMergeTree){var isUnknownDeepMerge=!viewCache.getServerCache().isCompleteForChild(childKey)&&childMergeTree.value==null;if(!serverNode.hasChild(childKey)&&!isUnknownDeepMerge){var serverChild=viewCache.getServerCache().getNode().getImmediateChild(childKey);var newChild=_this.applyMerge_(serverChild,childMergeTree);curViewCache=_this.applyServerOverwrite_(curViewCache,new Path(childKey),newChild,writesCache,serverCache,filterServerNode,accumulator)}});return curViewCache};ViewProcessor.prototype.ackUserWrite_=function(viewCache,ackPath,affectedTree,writesCache,completeCache,accumulator){if(writesCache.shadowingWrite(ackPath)!=null){return viewCache}var filterServerNode=viewCache.getServerCache().isFiltered();var serverCache=viewCache.getServerCache();if(affectedTree.value!=null){if(ackPath.isEmpty()&&serverCache.isFullyInitialized()||serverCache.isCompleteForPath(ackPath)){return this.applyServerOverwrite_(viewCache,ackPath,serverCache.getNode().getChild(ackPath),writesCache,completeCache,filterServerNode,accumulator)}else if(ackPath.isEmpty()){var changedChildren_1=ImmutableTree.Empty;serverCache.getNode().forEachChild(KEY_INDEX,function(name,node){changedChildren_1=changedChildren_1.set(new Path(name),node)});return this.applyServerMerge_(viewCache,ackPath,changedChildren_1,writesCache,completeCache,filterServerNode,accumulator)}else{return viewCache}}else{var changedChildren_2=ImmutableTree.Empty;affectedTree.foreach(function(mergePath,value){var serverCachePath=ackPath.child(mergePath);if(serverCache.isCompleteForPath(serverCachePath)){changedChildren_2=changedChildren_2.set(mergePath,serverCache.getNode().getChild(serverCachePath))}});return this.applyServerMerge_(viewCache,ackPath,changedChildren_2,writesCache,completeCache,filterServerNode,accumulator)}};ViewProcessor.prototype.listenComplete_=function(viewCache,path,writesCache,accumulator){var oldServerNode=viewCache.getServerCache();var newViewCache=viewCache.updateServerSnap(oldServerNode.getNode(),oldServerNode.isFullyInitialized()||path.isEmpty(),oldServerNode.isFiltered());return this.generateEventCacheAfterServerEvent_(newViewCache,path,writesCache,NO_COMPLETE_CHILD_SOURCE,accumulator)};ViewProcessor.prototype.revertUserWrite_=function(viewCache,path,writesCache,completeServerCache,accumulator){var complete;if(writesCache.shadowingWrite(path)!=null){return viewCache}else{var source=new WriteTreeCompleteChildSource(writesCache,viewCache,completeServerCache);var oldEventCache=viewCache.getEventCache().getNode();var newEventCache=void 0;if(path.isEmpty()||path.getFront()===\".priority\"){var newNode=void 0;if(viewCache.getServerCache().isFullyInitialized()){newNode=writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap())}else{var serverChildren=viewCache.getServerCache().getNode();util.assert(serverChildren instanceof ChildrenNode,\"serverChildren would be complete if leaf node\");newNode=writesCache.calcCompleteEventChildren(serverChildren)}newNode=newNode;newEventCache=this.filter_.updateFullNode(oldEventCache,newNode,accumulator)}else{var childKey=path.getFront();var newChild=writesCache.calcCompleteChild(childKey,viewCache.getServerCache());if(newChild==null&&viewCache.getServerCache().isCompleteForChild(childKey)){newChild=oldEventCache.getImmediateChild(childKey)}if(newChild!=null){newEventCache=this.filter_.updateChild(oldEventCache,childKey,newChild,path.popFront(),source,accumulator)}else if(viewCache.getEventCache().getNode().hasChild(childKey)){newEventCache=this.filter_.updateChild(oldEventCache,childKey,ChildrenNode.EMPTY_NODE,path.popFront(),source,accumulator)}else{newEventCache=oldEventCache}if(newEventCache.isEmpty()&&viewCache.getServerCache().isFullyInitialized()){complete=writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap());if(complete.isLeafNode()){newEventCache=this.filter_.updateFullNode(newEventCache,complete,accumulator)}}}complete=viewCache.getServerCache().isFullyInitialized()||writesCache.shadowingWrite(Path.Empty)!=null;return viewCache.updateEventSnap(newEventCache,complete,this.filter_.filtersNodes())}};return ViewProcessor}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var EventGenerator=function(){function EventGenerator(query_){this.query_=query_;this.index_=this.query_.getQueryParams().getIndex()}EventGenerator.prototype.generateEventsForChanges=function(changes,eventCache,eventRegistrations){var _this=this;var events=[];var moves=[];changes.forEach(function(change){if(change.type===Change.CHILD_CHANGED&&_this.index_.indexedValueChanged(change.oldSnap,change.snapshotNode)){moves.push(Change.childMovedChange(change.childName,change.snapshotNode))}});this.generateEventsForType_(events,Change.CHILD_REMOVED,changes,eventRegistrations,eventCache);this.generateEventsForType_(events,Change.CHILD_ADDED,changes,eventRegistrations,eventCache);this.generateEventsForType_(events,Change.CHILD_MOVED,moves,eventRegistrations,eventCache);this.generateEventsForType_(events,Change.CHILD_CHANGED,changes,eventRegistrations,eventCache);this.generateEventsForType_(events,Change.VALUE,changes,eventRegistrations,eventCache);return events};EventGenerator.prototype.generateEventsForType_=function(events,eventType,changes,registrations,eventCache){var _this=this;var filteredChanges=changes.filter(function(change){return change.type===eventType});filteredChanges.sort(this.compareChanges_.bind(this));filteredChanges.forEach(function(change){var materializedChange=_this.materializeSingleChange_(change,eventCache);registrations.forEach(function(registration){if(registration.respondsTo(change.type)){events.push(registration.createEvent(materializedChange,_this.query_))}})})};EventGenerator.prototype.materializeSingleChange_=function(change,eventCache){if(change.type===\"value\"||change.type===\"child_removed\"){return change}else{change.prevName=eventCache.getPredecessorChildName(change.childName,change.snapshotNode,this.index_);return change}};EventGenerator.prototype.compareChanges_=function(a,b){if(a.childName==null||b.childName==null){throw util.assertionError(\"Should only compare child_ events.\")}var aWrapped=new NamedNode(a.childName,a.snapshotNode);var bWrapped=new NamedNode(b.childName,b.snapshotNode);return this.index_.compare(aWrapped,bWrapped)};return EventGenerator}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var View=function(){function View(query_,initialViewCache){this.query_=query_;this.eventRegistrations_=[];var params=this.query_.getQueryParams();var indexFilter=new IndexedFilter(params.getIndex());var filter=params.getNodeFilter();this.processor_=new ViewProcessor(filter);var initialServerCache=initialViewCache.getServerCache();var initialEventCache=initialViewCache.getEventCache();var serverSnap=indexFilter.updateFullNode(ChildrenNode.EMPTY_NODE,initialServerCache.getNode(),null);var eventSnap=filter.updateFullNode(ChildrenNode.EMPTY_NODE,initialEventCache.getNode(),null);var newServerCache=new CacheNode(serverSnap,initialServerCache.isFullyInitialized(),indexFilter.filtersNodes());var newEventCache=new CacheNode(eventSnap,initialEventCache.isFullyInitialized(),filter.filtersNodes());this.viewCache_=new ViewCache(newEventCache,newServerCache);this.eventGenerator_=new EventGenerator(this.query_)}View.prototype.getQuery=function(){return this.query_};View.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()};View.prototype.getCompleteServerCache=function(path){var cache=this.viewCache_.getCompleteServerSnap();if(cache){if(this.query_.getQueryParams().loadsAllData()||!path.isEmpty()&&!cache.getImmediateChild(path.getFront()).isEmpty()){return cache.getChild(path)}}return null};View.prototype.isEmpty=function(){return this.eventRegistrations_.length===0};View.prototype.addEventRegistration=function(eventRegistration){this.eventRegistrations_.push(eventRegistration)};View.prototype.removeEventRegistration=function(eventRegistration,cancelError){var cancelEvents=[];if(cancelError){util.assert(eventRegistration==null,\"A cancel should cancel all event registrations.\");var path_1=this.query_.path;this.eventRegistrations_.forEach(function(registration){cancelError=cancelError;var maybeEvent=registration.createCancelEvent(cancelError,path_1);if(maybeEvent){cancelEvents.push(maybeEvent)}})}if(eventRegistration){var remaining=[];for(var i=0;i<this.eventRegistrations_.length;++i){var existing=this.eventRegistrations_[i];if(!existing.matches(eventRegistration)){remaining.push(existing)}else if(eventRegistration.hasAnyCallback()){remaining=remaining.concat(this.eventRegistrations_.slice(i+1));break}}this.eventRegistrations_=remaining}else{this.eventRegistrations_=[]}return cancelEvents};View.prototype.applyOperation=function(operation,writesCache,completeServerCache){if(operation.type===OperationType.MERGE&&operation.source.queryId!==null){util.assert(this.viewCache_.getCompleteServerSnap(),\"We should always have a full cache before handling merges\");util.assert(this.viewCache_.getCompleteEventSnap(),\"Missing event cache, even though we have a server cache\")}var oldViewCache=this.viewCache_;var result=this.processor_.applyOperation(oldViewCache,operation,writesCache,completeServerCache);this.processor_.assertIndexed(result.viewCache);util.assert(result.viewCache.getServerCache().isFullyInitialized()||!oldViewCache.getServerCache().isFullyInitialized(),\"Once a server snap is complete, it should never go back\");this.viewCache_=result.viewCache;return this.generateEventsForChanges_(result.changes,result.viewCache.getEventCache().getNode(),null)};View.prototype.getInitialEvents=function(registration){var eventSnap=this.viewCache_.getEventCache();var initialChanges=[];if(!eventSnap.getNode().isLeafNode()){var eventNode=eventSnap.getNode();eventNode.forEachChild(PRIORITY_INDEX,function(key,childNode){initialChanges.push(Change.childAddedChange(key,childNode))})}if(eventSnap.isFullyInitialized()){initialChanges.push(Change.valueChange(eventSnap.getNode()))}return this.generateEventsForChanges_(initialChanges,eventSnap.getNode(),registration)};View.prototype.generateEventsForChanges_=function(changes,eventCache,eventRegistration){var registrations=eventRegistration?[eventRegistration]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(changes,eventCache,registrations)};return View}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var __referenceConstructor$1;var SyncPoint=function(){function SyncPoint(){this.views_={}}Object.defineProperty(SyncPoint,\"__referenceConstructor\",{get:function(){util.assert(__referenceConstructor$1,\"Reference.ts has not been loaded\");return __referenceConstructor$1},set:function(val){util.assert(!__referenceConstructor$1,\"__referenceConstructor has already been defined\");__referenceConstructor$1=val},enumerable:true,configurable:true});SyncPoint.prototype.isEmpty=function(){return util.isEmpty(this.views_)};SyncPoint.prototype.applyOperation=function(operation,writesCache,optCompleteServerCache){var queryId=operation.source.queryId;if(queryId!==null){var view=util.safeGet(this.views_,queryId);util.assert(view!=null,\"SyncTree gave us an op for an invalid query.\");return view.applyOperation(operation,writesCache,optCompleteServerCache)}else{var events_1=[];util.forEach(this.views_,function(key,view){events_1=events_1.concat(view.applyOperation(operation,writesCache,optCompleteServerCache))});return events_1}};SyncPoint.prototype.addEventRegistration=function(query,eventRegistration,writesCache,serverCache,serverCacheComplete){var queryId=query.queryIdentifier();var view=util.safeGet(this.views_,queryId);if(!view){var eventCache=writesCache.calcCompleteEventCache(serverCacheComplete?serverCache:null);var eventCacheComplete=false;if(eventCache){eventCacheComplete=true}else if(serverCache instanceof ChildrenNode){eventCache=writesCache.calcCompleteEventChildren(serverCache);eventCacheComplete=false}else{eventCache=ChildrenNode.EMPTY_NODE;eventCacheComplete=false}var viewCache=new ViewCache(new CacheNode(eventCache,eventCacheComplete,false),new CacheNode(serverCache,serverCacheComplete,false));view=new View(query,viewCache);this.views_[queryId]=view}view.addEventRegistration(eventRegistration);return view.getInitialEvents(eventRegistration)};SyncPoint.prototype.removeEventRegistration=function(query,eventRegistration,cancelError){var queryId=query.queryIdentifier();var removed=[];var cancelEvents=[];var hadCompleteView=this.hasCompleteView();if(queryId===\"default\"){var self_1=this;util.forEach(this.views_,function(viewQueryId,view){cancelEvents=cancelEvents.concat(view.removeEventRegistration(eventRegistration,cancelError));if(view.isEmpty()){delete self_1.views_[viewQueryId];if(!view.getQuery().getQueryParams().loadsAllData()){removed.push(view.getQuery())}}})}else{var view=util.safeGet(this.views_,queryId);if(view){cancelEvents=cancelEvents.concat(view.removeEventRegistration(eventRegistration,cancelError));if(view.isEmpty()){delete this.views_[queryId];if(!view.getQuery().getQueryParams().loadsAllData()){removed.push(view.getQuery())}}}}if(hadCompleteView&&!this.hasCompleteView()){removed.push(new SyncPoint.__referenceConstructor(query.repo,query.path))}return{removed:removed,events:cancelEvents}};SyncPoint.prototype.getQueryViews=function(){var _this=this;var values=Object.keys(this.views_).map(function(key){return _this.views_[key]});return values.filter(function(view){return!view.getQuery().getQueryParams().loadsAllData()})};SyncPoint.prototype.getCompleteServerCache=function(path){var serverCache=null;util.forEach(this.views_,function(key,view){serverCache=serverCache||view.getCompleteServerCache(path)});return serverCache};SyncPoint.prototype.viewForQuery=function(query){var params=query.getQueryParams();if(params.loadsAllData()){return this.getCompleteView()}else{var queryId=query.queryIdentifier();return util.safeGet(this.views_,queryId)}};SyncPoint.prototype.viewExistsForQuery=function(query){return this.viewForQuery(query)!=null};SyncPoint.prototype.hasCompleteView=function(){return this.getCompleteView()!=null};SyncPoint.prototype.getCompleteView=function(){var completeView=util.findValue(this.views_,function(view){return view.getQuery().getQueryParams().loadsAllData()});return completeView||null};return SyncPoint}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var CompoundWrite=function(){function CompoundWrite(writeTree_){this.writeTree_=writeTree_}CompoundWrite.prototype.addWrite=function(path,node){if(path.isEmpty()){return new CompoundWrite(new ImmutableTree(node))}else{var rootmost=this.writeTree_.findRootMostValueAndPath(path);if(rootmost!=null){var rootMostPath=rootmost.path;var value=rootmost.value;var relativePath=Path.relativePath(rootMostPath,path);value=value.updateChild(relativePath,node);return new CompoundWrite(this.writeTree_.set(rootMostPath,value))}else{var subtree=new ImmutableTree(node);var newWriteTree=this.writeTree_.setTree(path,subtree);return new CompoundWrite(newWriteTree)}}};CompoundWrite.prototype.addWrites=function(path,updates){var newWrite=this;util.forEach(updates,function(childKey,node){newWrite=newWrite.addWrite(path.child(childKey),node)});return newWrite};CompoundWrite.prototype.removeWrite=function(path){if(path.isEmpty()){return CompoundWrite.Empty}else{var newWriteTree=this.writeTree_.setTree(path,ImmutableTree.Empty);return new CompoundWrite(newWriteTree)}};CompoundWrite.prototype.hasCompleteWrite=function(path){return this.getCompleteNode(path)!=null};CompoundWrite.prototype.getCompleteNode=function(path){var rootmost=this.writeTree_.findRootMostValueAndPath(path);if(rootmost!=null){return this.writeTree_.get(rootmost.path).getChild(Path.relativePath(rootmost.path,path))}else{return null}};CompoundWrite.prototype.getCompleteChildren=function(){var children=[];var node=this.writeTree_.value;if(node!=null){if(!node.isLeafNode()){node.forEachChild(PRIORITY_INDEX,function(childName,childNode){children.push(new NamedNode(childName,childNode))})}}else{this.writeTree_.children.inorderTraversal(function(childName,childTree){if(childTree.value!=null){children.push(new NamedNode(childName,childTree.value))}})}return children};CompoundWrite.prototype.childCompoundWrite=function(path){if(path.isEmpty()){return this}else{var shadowingNode=this.getCompleteNode(path);if(shadowingNode!=null){return new CompoundWrite(new ImmutableTree(shadowingNode))}else{return new CompoundWrite(this.writeTree_.subtree(path))}}};CompoundWrite.prototype.isEmpty=function(){return this.writeTree_.isEmpty()};CompoundWrite.prototype.apply=function(node){return CompoundWrite.applySubtreeWrite_(Path.Empty,this.writeTree_,node)};CompoundWrite.Empty=new CompoundWrite(new ImmutableTree(null));CompoundWrite.applySubtreeWrite_=function(relativePath,writeTree,node){if(writeTree.value!=null){return node.updateChild(relativePath,writeTree.value)}else{var priorityWrite_1=null;writeTree.children.inorderTraversal(function(childKey,childTree){if(childKey===\".priority\"){util.assert(childTree.value!==null,\"Priority writes must always be leaf nodes\");priorityWrite_1=childTree.value}else{node=CompoundWrite.applySubtreeWrite_(relativePath.child(childKey),childTree,node)}});if(!node.getChild(relativePath).isEmpty()&&priorityWrite_1!==null){node=node.updateChild(relativePath.child(\".priority\"),priorityWrite_1)}return node}};return CompoundWrite}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var WriteTree=function(){function WriteTree(){this.visibleWrites_=CompoundWrite.Empty;this.allWrites_=[];this.lastWriteId_=-1}WriteTree.prototype.childWrites=function(path){return new WriteTreeRef(path,this)};WriteTree.prototype.addOverwrite=function(path,snap,writeId,visible){util.assert(writeId>this.lastWriteId_,\"Stacking an older write on top of newer ones\");if(visible===undefined){visible=true}this.allWrites_.push({path:path,snap:snap,writeId:writeId,visible:visible});if(visible){this.visibleWrites_=this.visibleWrites_.addWrite(path,snap)}this.lastWriteId_=writeId};WriteTree.prototype.addMerge=function(path,changedChildren,writeId){util.assert(writeId>this.lastWriteId_,\"Stacking an older merge on top of newer ones\");this.allWrites_.push({path:path,children:changedChildren,writeId:writeId,visible:true});this.visibleWrites_=this.visibleWrites_.addWrites(path,changedChildren);this.lastWriteId_=writeId};WriteTree.prototype.getWrite=function(writeId){for(var i=0;i<this.allWrites_.length;i++){var record=this.allWrites_[i];if(record.writeId===writeId){return record}}return null};WriteTree.prototype.removeWrite=function(writeId){var _this=this;var idx=this.allWrites_.findIndex(function(s){return s.writeId===writeId});util.assert(idx>=0,\"removeWrite called with nonexistent writeId.\");var writeToRemove=this.allWrites_[idx];this.allWrites_.splice(idx,1);var removedWriteWasVisible=writeToRemove.visible;var removedWriteOverlapsWithOtherWrites=false;var i=this.allWrites_.length-1;while(removedWriteWasVisible&&i>=0){var currentWrite=this.allWrites_[i];if(currentWrite.visible){if(i>=idx&&this.recordContainsPath_(currentWrite,writeToRemove.path)){removedWriteWasVisible=false}else if(writeToRemove.path.contains(currentWrite.path)){removedWriteOverlapsWithOtherWrites=true}}i--}if(!removedWriteWasVisible){return false}else if(removedWriteOverlapsWithOtherWrites){this.resetTree_();return true}else{if(writeToRemove.snap){this.visibleWrites_=this.visibleWrites_.removeWrite(writeToRemove.path)}else{var children=writeToRemove.children;util.forEach(children,function(childName){_this.visibleWrites_=_this.visibleWrites_.removeWrite(writeToRemove.path.child(childName))})}return true}};WriteTree.prototype.getCompleteWriteData=function(path){return this.visibleWrites_.getCompleteNode(path)};WriteTree.prototype.calcCompleteEventCache=function(treePath,completeServerCache,writeIdsToExclude,includeHiddenWrites){if(!writeIdsToExclude&&!includeHiddenWrites){var shadowingNode=this.visibleWrites_.getCompleteNode(treePath);if(shadowingNode!=null){return shadowingNode}else{var subMerge=this.visibleWrites_.childCompoundWrite(treePath);if(subMerge.isEmpty()){return completeServerCache}else if(completeServerCache==null&&!subMerge.hasCompleteWrite(Path.Empty)){return null}else{var layeredCache=completeServerCache||ChildrenNode.EMPTY_NODE;return subMerge.apply(layeredCache)}}}else{var merge=this.visibleWrites_.childCompoundWrite(treePath);if(!includeHiddenWrites&&merge.isEmpty()){return completeServerCache}else{if(!includeHiddenWrites&&completeServerCache==null&&!merge.hasCompleteWrite(Path.Empty)){return null}else{var filter=function(write){return(write.visible||includeHiddenWrites)&&(!writeIdsToExclude||!~writeIdsToExclude.indexOf(write.writeId))&&(write.path.contains(treePath)||treePath.contains(write.path))};var mergeAtPath=WriteTree.layerTree_(this.allWrites_,filter,treePath);var layeredCache=completeServerCache||ChildrenNode.EMPTY_NODE;return mergeAtPath.apply(layeredCache)}}}};WriteTree.prototype.calcCompleteEventChildren=function(treePath,completeServerChildren){var completeChildren=ChildrenNode.EMPTY_NODE;var topLevelSet=this.visibleWrites_.getCompleteNode(treePath);if(topLevelSet){if(!topLevelSet.isLeafNode()){topLevelSet.forEachChild(PRIORITY_INDEX,function(childName,childSnap){completeChildren=completeChildren.updateImmediateChild(childName,childSnap)})}return completeChildren}else if(completeServerChildren){var merge_1=this.visibleWrites_.childCompoundWrite(treePath);completeServerChildren.forEachChild(PRIORITY_INDEX,function(childName,childNode){var node=merge_1.childCompoundWrite(new Path(childName)).apply(childNode);completeChildren=completeChildren.updateImmediateChild(childName,node)});merge_1.getCompleteChildren().forEach(function(namedNode){completeChildren=completeChildren.updateImmediateChild(namedNode.name,namedNode.node)});return completeChildren}else{var merge=this.visibleWrites_.childCompoundWrite(treePath);merge.getCompleteChildren().forEach(function(namedNode){completeChildren=completeChildren.updateImmediateChild(namedNode.name,namedNode.node)});return completeChildren}};WriteTree.prototype.calcEventCacheAfterServerOverwrite=function(treePath,childPath,existingEventSnap,existingServerSnap){util.assert(existingEventSnap||existingServerSnap,\"Either existingEventSnap or existingServerSnap must exist\");var path=treePath.child(childPath);if(this.visibleWrites_.hasCompleteWrite(path)){return null}else{var childMerge=this.visibleWrites_.childCompoundWrite(path);if(childMerge.isEmpty()){return existingServerSnap.getChild(childPath)}else{return childMerge.apply(existingServerSnap.getChild(childPath))}}};WriteTree.prototype.calcCompleteChild=function(treePath,childKey,existingServerSnap){var path=treePath.child(childKey);var shadowingNode=this.visibleWrites_.getCompleteNode(path);if(shadowingNode!=null){return shadowingNode}else{if(existingServerSnap.isCompleteForChild(childKey)){var childMerge=this.visibleWrites_.childCompoundWrite(path);return childMerge.apply(existingServerSnap.getNode().getImmediateChild(childKey))}else{return null}}};WriteTree.prototype.shadowingWrite=function(path){return this.visibleWrites_.getCompleteNode(path)};WriteTree.prototype.calcIndexedSlice=function(treePath,completeServerData,startPost,count,reverse,index){var toIterate;var merge=this.visibleWrites_.childCompoundWrite(treePath);var shadowingNode=merge.getCompleteNode(Path.Empty);if(shadowingNode!=null){toIterate=shadowingNode}else if(completeServerData!=null){toIterate=merge.apply(completeServerData)}else{return[]}toIterate=toIterate.withIndex(index);if(!toIterate.isEmpty()&&!toIterate.isLeafNode()){var nodes=[];var cmp=index.getCompare();var iter=reverse?toIterate.getReverseIteratorFrom(startPost,index):toIterate.getIteratorFrom(startPost,index);var next=iter.getNext();while(next&&nodes.length<count){if(cmp(next,startPost)!==0){nodes.push(next)}next=iter.getNext()}return nodes}else{return[]}};WriteTree.prototype.recordContainsPath_=function(writeRecord,path){if(writeRecord.snap){return writeRecord.path.contains(path)}else{return!!util.findKey(writeRecord.children,function(childSnap,childName){return writeRecord.path.child(childName).contains(path)})}};WriteTree.prototype.resetTree_=function(){this.visibleWrites_=WriteTree.layerTree_(this.allWrites_,WriteTree.DefaultFilter_,Path.Empty);if(this.allWrites_.length>0){this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId}else{this.lastWriteId_=-1}};WriteTree.DefaultFilter_=function(write){return write.visible};WriteTree.layerTree_=function(writes,filter,treeRoot){var compoundWrite=CompoundWrite.Empty;for(var i=0;i<writes.length;++i){var write=writes[i];if(filter(write)){var writePath=write.path;var relativePath=void 0;if(write.snap){if(treeRoot.contains(writePath)){relativePath=Path.relativePath(treeRoot,writePath);compoundWrite=compoundWrite.addWrite(relativePath,write.snap)}else if(writePath.contains(treeRoot)){relativePath=Path.relativePath(writePath,treeRoot);compoundWrite=compoundWrite.addWrite(Path.Empty,write.snap.getChild(relativePath))}}else if(write.children){if(treeRoot.contains(writePath)){relativePath=Path.relativePath(treeRoot,writePath);compoundWrite=compoundWrite.addWrites(relativePath,write.children)}else if(writePath.contains(treeRoot)){relativePath=Path.relativePath(writePath,treeRoot);if(relativePath.isEmpty()){compoundWrite=compoundWrite.addWrites(Path.Empty,write.children)}else{var child=util.safeGet(write.children,relativePath.getFront());if(child){var deepNode=child.getChild(relativePath.popFront());compoundWrite=compoundWrite.addWrite(Path.Empty,deepNode)}}}}else{throw util.assertionError(\"WriteRecord should have .snap or .children\")}}}return compoundWrite};return WriteTree}();var WriteTreeRef=function(){function WriteTreeRef(path,writeTree){this.treePath_=path;this.writeTree_=writeTree}WriteTreeRef.prototype.calcCompleteEventCache=function(completeServerCache,writeIdsToExclude,includeHiddenWrites){return this.writeTree_.calcCompleteEventCache(this.treePath_,completeServerCache,writeIdsToExclude,includeHiddenWrites)};WriteTreeRef.prototype.calcCompleteEventChildren=function(completeServerChildren){return this.writeTree_.calcCompleteEventChildren(this.treePath_,completeServerChildren)};WriteTreeRef.prototype.calcEventCacheAfterServerOverwrite=function(path,existingEventSnap,existingServerSnap){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,path,existingEventSnap,existingServerSnap)};WriteTreeRef.prototype.shadowingWrite=function(path){return this.writeTree_.shadowingWrite(this.treePath_.child(path))};WriteTreeRef.prototype.calcIndexedSlice=function(completeServerData,startPost,count,reverse,index){return this.writeTree_.calcIndexedSlice(this.treePath_,completeServerData,startPost,count,reverse,index)};WriteTreeRef.prototype.calcCompleteChild=function(childKey,existingServerCache){return this.writeTree_.calcCompleteChild(this.treePath_,childKey,existingServerCache)};WriteTreeRef.prototype.child=function(childName){return new WriteTreeRef(this.treePath_.child(childName),this.writeTree_)};return WriteTreeRef}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var SyncTree=function(){function SyncTree(listenProvider_){this.listenProvider_=listenProvider_;this.syncPointTree_=ImmutableTree.Empty;this.pendingWriteTree_=new WriteTree;this.tagToQueryMap_={};this.queryToTagMap_={}}SyncTree.prototype.applyUserOverwrite=function(path,newData,writeId,visible){this.pendingWriteTree_.addOverwrite(path,newData,writeId,visible);if(!visible){return[]}else{return this.applyOperationToSyncPoints_(new Overwrite(OperationSource.User,path,newData))}};SyncTree.prototype.applyUserMerge=function(path,changedChildren,writeId){this.pendingWriteTree_.addMerge(path,changedChildren,writeId);var changeTree=ImmutableTree.fromObject(changedChildren);return this.applyOperationToSyncPoints_(new Merge(OperationSource.User,path,changeTree))};SyncTree.prototype.ackUserWrite=function(writeId,revert){if(revert===void 0){revert=false}var write=this.pendingWriteTree_.getWrite(writeId);var needToReevaluate=this.pendingWriteTree_.removeWrite(writeId);if(!needToReevaluate){return[]}else{var affectedTree_1=ImmutableTree.Empty;if(write.snap!=null){affectedTree_1=affectedTree_1.set(Path.Empty,true)}else{util.forEach(write.children,function(pathString,node){affectedTree_1=affectedTree_1.set(new Path(pathString),node)})}return this.applyOperationToSyncPoints_(new AckUserWrite(write.path,affectedTree_1,revert))}};SyncTree.prototype.applyServerOverwrite=function(path,newData){return this.applyOperationToSyncPoints_(new Overwrite(OperationSource.Server,path,newData))};SyncTree.prototype.applyServerMerge=function(path,changedChildren){var changeTree=ImmutableTree.fromObject(changedChildren);return this.applyOperationToSyncPoints_(new Merge(OperationSource.Server,path,changeTree))};SyncTree.prototype.applyListenComplete=function(path){return this.applyOperationToSyncPoints_(new ListenComplete(OperationSource.Server,path))};SyncTree.prototype.applyTaggedQueryOverwrite=function(path,snap,tag){var queryKey=this.queryKeyForTag_(tag);if(queryKey!=null){var r=SyncTree.parseQueryKey_(queryKey);var queryPath=r.path,queryId=r.queryId;var relativePath=Path.relativePath(queryPath,path);var op=new Overwrite(OperationSource.forServerTaggedQuery(queryId),relativePath,snap);return this.applyTaggedOperation_(queryPath,op)}else{return[]}};SyncTree.prototype.applyTaggedQueryMerge=function(path,changedChildren,tag){var queryKey=this.queryKeyForTag_(tag);if(queryKey){var r=SyncTree.parseQueryKey_(queryKey);var queryPath=r.path,queryId=r.queryId;var relativePath=Path.relativePath(queryPath,path);var changeTree=ImmutableTree.fromObject(changedChildren);var op=new Merge(OperationSource.forServerTaggedQuery(queryId),relativePath,changeTree);return this.applyTaggedOperation_(queryPath,op)}else{return[]}};SyncTree.prototype.applyTaggedListenComplete=function(path,tag){var queryKey=this.queryKeyForTag_(tag);if(queryKey){var r=SyncTree.parseQueryKey_(queryKey);var queryPath=r.path,queryId=r.queryId;var relativePath=Path.relativePath(queryPath,path);var op=new ListenComplete(OperationSource.forServerTaggedQuery(queryId),relativePath);return this.applyTaggedOperation_(queryPath,op)}else{return[]}};SyncTree.prototype.addEventRegistration=function(query,eventRegistration){var path=query.path;var serverCache=null;var foundAncestorDefaultView=false;this.syncPointTree_.foreachOnPath(path,function(pathToSyncPoint,sp){var relativePath=Path.relativePath(pathToSyncPoint,path);serverCache=serverCache||sp.getCompleteServerCache(relativePath);foundAncestorDefaultView=foundAncestorDefaultView||sp.hasCompleteView()});var syncPoint=this.syncPointTree_.get(path);if(!syncPoint){syncPoint=new SyncPoint;this.syncPointTree_=this.syncPointTree_.set(path,syncPoint)}else{foundAncestorDefaultView=foundAncestorDefaultView||syncPoint.hasCompleteView();serverCache=serverCache||syncPoint.getCompleteServerCache(Path.Empty)}var serverCacheComplete;if(serverCache!=null){serverCacheComplete=true}else{serverCacheComplete=false;serverCache=ChildrenNode.EMPTY_NODE;var subtree=this.syncPointTree_.subtree(path);subtree.foreachChild(function(childName,childSyncPoint){var completeCache=childSyncPoint.getCompleteServerCache(Path.Empty);if(completeCache){serverCache=serverCache.updateImmediateChild(childName,completeCache)}})}var viewAlreadyExists=syncPoint.viewExistsForQuery(query);if(!viewAlreadyExists&&!query.getQueryParams().loadsAllData()){var queryKey=SyncTree.makeQueryKey_(query);util.assert(!(queryKey in this.queryToTagMap_),\"View does not exist, but we have a tag\");var tag=SyncTree.getNextQueryTag_();this.queryToTagMap_[queryKey]=tag;this.tagToQueryMap_[\"_\"+tag]=queryKey}var writesCache=this.pendingWriteTree_.childWrites(path);var events=syncPoint.addEventRegistration(query,eventRegistration,writesCache,serverCache,serverCacheComplete);if(!viewAlreadyExists&&!foundAncestorDefaultView){var view=syncPoint.viewForQuery(query);events=events.concat(this.setupListener_(query,view))}return events};SyncTree.prototype.removeEventRegistration=function(query,eventRegistration,cancelError){var _this=this;var path=query.path;var maybeSyncPoint=this.syncPointTree_.get(path);var cancelEvents=[];if(maybeSyncPoint&&(query.queryIdentifier()===\"default\"||maybeSyncPoint.viewExistsForQuery(query))){var removedAndEvents=maybeSyncPoint.removeEventRegistration(query,eventRegistration,cancelError);if(maybeSyncPoint.isEmpty()){this.syncPointTree_=this.syncPointTree_.remove(path)}var removed=removedAndEvents.removed;cancelEvents=removedAndEvents.events;var removingDefault=-1!==removed.findIndex(function(query){return query.getQueryParams().loadsAllData()});var covered=this.syncPointTree_.findOnPath(path,function(relativePath,parentSyncPoint){return parentSyncPoint.hasCompleteView()});if(removingDefault&&!covered){var subtree=this.syncPointTree_.subtree(path);if(!subtree.isEmpty()){var newViews=this.collectDistinctViewsForSubTree_(subtree);for(var i=0;i<newViews.length;++i){var view=newViews[i],newQuery=view.getQuery();var listener=this.createListenerForView_(view);this.listenProvider_.startListening(SyncTree.queryForListening_(newQuery),this.tagForQuery_(newQuery),listener.hashFn,listener.onComplete)}}}if(!covered&&removed.length>0&&!cancelError){if(removingDefault){var defaultTag=null;this.listenProvider_.stopListening(SyncTree.queryForListening_(query),defaultTag)}else{removed.forEach(function(queryToRemove){var tagToRemove=_this.queryToTagMap_[SyncTree.makeQueryKey_(queryToRemove)];_this.listenProvider_.stopListening(SyncTree.queryForListening_(queryToRemove),tagToRemove)})}}this.removeTags_(removed)}return cancelEvents};SyncTree.prototype.calcCompleteEventCache=function(path,writeIdsToExclude){var includeHiddenSets=true;var writeTree=this.pendingWriteTree_;var serverCache=this.syncPointTree_.findOnPath(path,function(pathSoFar,syncPoint){var relativePath=Path.relativePath(pathSoFar,path);var serverCache=syncPoint.getCompleteServerCache(relativePath);if(serverCache){return serverCache}});return writeTree.calcCompleteEventCache(path,serverCache,writeIdsToExclude,includeHiddenSets)};SyncTree.prototype.collectDistinctViewsForSubTree_=function(subtree){return subtree.fold(function(relativePath,maybeChildSyncPoint,childMap){if(maybeChildSyncPoint&&maybeChildSyncPoint.hasCompleteView()){var completeView=maybeChildSyncPoint.getCompleteView();return[completeView]}else{var views_1=[];if(maybeChildSyncPoint){views_1=maybeChildSyncPoint.getQueryViews()}util.forEach(childMap,function(key,childViews){views_1=views_1.concat(childViews)});return views_1}})};SyncTree.prototype.removeTags_=function(queries){for(var j=0;j<queries.length;++j){var removedQuery=queries[j];if(!removedQuery.getQueryParams().loadsAllData()){var removedQueryKey=SyncTree.makeQueryKey_(removedQuery);var removedQueryTag=this.queryToTagMap_[removedQueryKey];delete this.queryToTagMap_[removedQueryKey];delete this.tagToQueryMap_[\"_\"+removedQueryTag]}}};SyncTree.queryForListening_=function(query){if(query.getQueryParams().loadsAllData()&&!query.getQueryParams().isDefault()){return query.getRef()}else{return query}};SyncTree.prototype.setupListener_=function(query,view){var path=query.path;var tag=this.tagForQuery_(query);var listener=this.createListenerForView_(view);var events=this.listenProvider_.startListening(SyncTree.queryForListening_(query),tag,listener.hashFn,listener.onComplete);var subtree=this.syncPointTree_.subtree(path);if(tag){util.assert(!subtree.value.hasCompleteView(),\"If we're adding a query, it shouldn't be shadowed\")}else{var queriesToStop=subtree.fold(function(relativePath,maybeChildSyncPoint,childMap){if(!relativePath.isEmpty()&&maybeChildSyncPoint&&maybeChildSyncPoint.hasCompleteView()){return[maybeChildSyncPoint.getCompleteView().getQuery()]}else{var queries_1=[];if(maybeChildSyncPoint){queries_1=queries_1.concat(maybeChildSyncPoint.getQueryViews().map(function(view){return view.getQuery()}))}util.forEach(childMap,function(key,childQueries){queries_1=queries_1.concat(childQueries)});return queries_1}});for(var i=0;i<queriesToStop.length;++i){var queryToStop=queriesToStop[i];this.listenProvider_.stopListening(SyncTree.queryForListening_(queryToStop),this.tagForQuery_(queryToStop))}}return events};SyncTree.prototype.createListenerForView_=function(view){var _this=this;var query=view.getQuery();var tag=this.tagForQuery_(query);return{hashFn:function(){var cache=view.getServerCache()||ChildrenNode.EMPTY_NODE;return cache.hash()},onComplete:function(status){if(status===\"ok\"){if(tag){return _this.applyTaggedListenComplete(query.path,tag)}else{return _this.applyListenComplete(query.path)}}else{var error=errorForServerCode(status,query);return _this.removeEventRegistration(query,null,error)}}}};SyncTree.makeQueryKey_=function(query){return query.path.toString()+\"$\"+query.queryIdentifier()};SyncTree.parseQueryKey_=function(queryKey){var splitIndex=queryKey.indexOf(\"$\");util.assert(splitIndex!==-1&&splitIndex<queryKey.length-1,\"Bad queryKey.\");return{queryId:queryKey.substr(splitIndex+1),path:new Path(queryKey.substr(0,splitIndex))}};SyncTree.prototype.queryKeyForTag_=function(tag){return this.tagToQueryMap_[\"_\"+tag]};SyncTree.prototype.tagForQuery_=function(query){var queryKey=SyncTree.makeQueryKey_(query);return util.safeGet(this.queryToTagMap_,queryKey)};SyncTree.getNextQueryTag_=function(){return SyncTree.nextQueryTag_++};SyncTree.prototype.applyTaggedOperation_=function(queryPath,operation){var syncPoint=this.syncPointTree_.get(queryPath);util.assert(syncPoint,\"Missing sync point for query tag that we're tracking\");var writesCache=this.pendingWriteTree_.childWrites(queryPath);return syncPoint.applyOperation(operation,writesCache,null)};SyncTree.prototype.applyOperationToSyncPoints_=function(operation){return this.applyOperationHelper_(operation,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Path.Empty))};SyncTree.prototype.applyOperationHelper_=function(operation,syncPointTree,serverCache,writesCache){if(operation.path.isEmpty()){return this.applyOperationDescendantsHelper_(operation,syncPointTree,serverCache,writesCache)}else{var syncPoint=syncPointTree.get(Path.Empty);if(serverCache==null&&syncPoint!=null){serverCache=syncPoint.getCompleteServerCache(Path.Empty)}var events=[];var childName=operation.path.getFront();var childOperation=operation.operationForChild(childName);var childTree=syncPointTree.children.get(childName);if(childTree&&childOperation){var childServerCache=serverCache?serverCache.getImmediateChild(childName):null;var childWritesCache=writesCache.child(childName);events=events.concat(this.applyOperationHelper_(childOperation,childTree,childServerCache,childWritesCache))}if(syncPoint){events=events.concat(syncPoint.applyOperation(operation,writesCache,serverCache))}return events}};SyncTree.prototype.applyOperationDescendantsHelper_=function(operation,syncPointTree,serverCache,writesCache){var _this=this;var syncPoint=syncPointTree.get(Path.Empty);if(serverCache==null&&syncPoint!=null){serverCache=syncPoint.getCompleteServerCache(Path.Empty)}var events=[];syncPointTree.children.inorderTraversal(function(childName,childTree){var childServerCache=serverCache?serverCache.getImmediateChild(childName):null;var childWritesCache=writesCache.child(childName);var childOperation=operation.operationForChild(childName);if(childOperation){events=events.concat(_this.applyOperationDescendantsHelper_(childOperation,childTree,childServerCache,childWritesCache))}});if(syncPoint){events=events.concat(syncPoint.applyOperation(operation,writesCache,serverCache))}return events};SyncTree.nextQueryTag_=1;return SyncTree}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var SnapshotHolder=function(){function SnapshotHolder(){this.rootNode_=ChildrenNode.EMPTY_NODE}SnapshotHolder.prototype.getNode=function(path){return this.rootNode_.getChild(path)};SnapshotHolder.prototype.updateSnapshot=function(path,newSnapshotNode){this.rootNode_=this.rootNode_.updateChild(path,newSnapshotNode)};return SnapshotHolder}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var AuthTokenProvider=function(){function AuthTokenProvider(app_){this.app_=app_}AuthTokenProvider.prototype.getToken=function(forceRefresh){return this.app_[\"INTERNAL\"][\"getToken\"](forceRefresh).then(null,function(error){if(error&&error.code===\"auth/token-not-initialized\"){log(\"Got auth/token-not-initialized error.  Treating as null token.\");return null}else{return Promise.reject(error)}})};AuthTokenProvider.prototype.addTokenChangeListener=function(listener){this.app_[\"INTERNAL\"][\"addAuthTokenListener\"](listener)};AuthTokenProvider.prototype.removeTokenChangeListener=function(listener){this.app_[\"INTERNAL\"][\"removeAuthTokenListener\"](listener)};AuthTokenProvider.prototype.notifyForInvalidToken=function(){var errorMessage='Provided authentication credentials for the app named \"'+this.app_.name+'\" are invalid. This usually indicates your app was not '+\"initialized correctly. \";if(\"credential\"in this.app_.options){errorMessage+='Make sure the \"credential\" property provided to initializeApp() '+'is authorized to access the specified \"databaseURL\" and is from the correct '+\"project.\"}else if(\"serviceAccount\"in this.app_.options){errorMessage+='Make sure the \"serviceAccount\" property provided to initializeApp() '+'is authorized to access the specified \"databaseURL\" and is from the correct '+\"project.\"}else{errorMessage+='Make sure the \"apiKey\" and \"databaseURL\" properties provided to '+\"initializeApp() match the values provided for your app at \"+\"https://console.firebase.google.com/.\"}warn(errorMessage)};return AuthTokenProvider}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var StatsCollection=function(){function StatsCollection(){this.counters_={}}StatsCollection.prototype.incrementCounter=function(name,amount){if(amount===void 0){amount=1}if(!util.contains(this.counters_,name))this.counters_[name]=0;this.counters_[name]+=amount};StatsCollection.prototype.get=function(){return util.deepCopy(this.counters_)};return StatsCollection}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var StatsManager=function(){function StatsManager(){}StatsManager.getCollection=function(repoInfo){var hashString=repoInfo.toString();if(!this.collections_[hashString]){this.collections_[hashString]=new StatsCollection}return this.collections_[hashString]};StatsManager.getOrCreateReporter=function(repoInfo,creatorFunction){var hashString=repoInfo.toString();if(!this.reporters_[hashString]){this.reporters_[hashString]=creatorFunction()}return this.reporters_[hashString]};StatsManager.collections_={};StatsManager.reporters_={};return StatsManager}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var StatsListener=function(){function StatsListener(collection_){this.collection_=collection_;this.last_=null}StatsListener.prototype.get=function(){var newStats=this.collection_.get();var delta=util.clone(newStats);if(this.last_){util.forEach(this.last_,function(stat,value){delta[stat]=delta[stat]-value})}this.last_=newStats;return delta};return StatsListener}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var FIRST_STATS_MIN_TIME=10*1e3;var FIRST_STATS_MAX_TIME=30*1e3;var REPORT_STATS_INTERVAL=5*60*1e3;var StatsReporter=function(){function StatsReporter(collection,server_){this.server_=server_;this.statsToReport_={};this.statsListener_=new StatsListener(collection);var timeout=FIRST_STATS_MIN_TIME+(FIRST_STATS_MAX_TIME-FIRST_STATS_MIN_TIME)*Math.random();setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(timeout))}StatsReporter.prototype.includeStat=function(stat){this.statsToReport_[stat]=true};StatsReporter.prototype.reportStats_=function(){var _this=this;var stats=this.statsListener_.get();var reportedStats={};var haveStatsToReport=false;util.forEach(stats,function(stat,value){if(value>0&&util.contains(_this.statsToReport_,stat)){reportedStats[stat]=value;haveStatsToReport=true}});if(haveStatsToReport){this.server_.reportStats(reportedStats)}setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(Math.random()*2*REPORT_STATS_INTERVAL))};return StatsReporter}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var EventQueue=function(){function EventQueue(){this.eventLists_=[];this.recursionDepth_=0}EventQueue.prototype.queueEvents=function(eventDataList){var currList=null;for(var i=0;i<eventDataList.length;i++){var eventData=eventDataList[i];var eventPath=eventData.getPath();if(currList!==null&&!eventPath.equals(currList.getPath())){this.eventLists_.push(currList);currList=null}if(currList===null){currList=new EventList(eventPath)}currList.add(eventData)}if(currList){this.eventLists_.push(currList)}};EventQueue.prototype.raiseEventsAtPath=function(path,eventDataList){this.queueEvents(eventDataList);this.raiseQueuedEventsMatchingPredicate_(function(eventPath){return eventPath.equals(path)})};EventQueue.prototype.raiseEventsForChangedPath=function(changedPath,eventDataList){this.queueEvents(eventDataList);this.raiseQueuedEventsMatchingPredicate_(function(eventPath){return eventPath.contains(changedPath)||changedPath.contains(eventPath)})};EventQueue.prototype.raiseQueuedEventsMatchingPredicate_=function(predicate){this.recursionDepth_++;var sentAll=true;for(var i=0;i<this.eventLists_.length;i++){var eventList=this.eventLists_[i];if(eventList){var eventPath=eventList.getPath();if(predicate(eventPath)){this.eventLists_[i].raise();this.eventLists_[i]=null}else{sentAll=false}}}if(sentAll){this.eventLists_=[]}this.recursionDepth_--};return EventQueue}();var EventList=function(){function EventList(path_){this.path_=path_;this.events_=[]}EventList.prototype.add=function(eventData){this.events_.push(eventData)};EventList.prototype.raise=function(){for(var i=0;i<this.events_.length;i++){var eventData=this.events_[i];if(eventData!==null){this.events_[i]=null;var eventFn=eventData.getEventRunner();if(logger){log(\"event: \"+eventData.toString())}exceptionGuard(eventFn)}}};EventList.prototype.getPath=function(){return this.path_};return EventList}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var EventEmitter=function(){function EventEmitter(allowedEvents_){this.allowedEvents_=allowedEvents_;this.listeners_={};util.assert(Array.isArray(allowedEvents_)&&allowedEvents_.length>0,\"Requires a non-empty array\")}EventEmitter.prototype.trigger=function(eventType){var var_args=[];for(var _i=1;_i<arguments.length;_i++){var_args[_i-1]=arguments[_i]}if(Array.isArray(this.listeners_[eventType])){var listeners=this.listeners_[eventType].slice();for(var i=0;i<listeners.length;i++){listeners[i].callback.apply(listeners[i].context,var_args)}}};EventEmitter.prototype.on=function(eventType,callback,context){this.validateEventType_(eventType);this.listeners_[eventType]=this.listeners_[eventType]||[];this.listeners_[eventType].push({callback:callback,context:context});var eventData=this.getInitialEvent(eventType);if(eventData){callback.apply(context,eventData)}};EventEmitter.prototype.off=function(eventType,callback,context){this.validateEventType_(eventType);var listeners=this.listeners_[eventType]||[];for(var i=0;i<listeners.length;i++){if(listeners[i].callback===callback&&(!context||context===listeners[i].context)){listeners.splice(i,1);return}}};EventEmitter.prototype.validateEventType_=function(eventType){util.assert(this.allowedEvents_.find(function(et){return et===eventType}),\"Unknown event: \"+eventType)};return EventEmitter}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var VisibilityMonitor=function(_super){tslib_1.__extends(VisibilityMonitor,_super);function VisibilityMonitor(){var _this=_super.call(this,[\"visible\"])||this;var hidden;var visibilityChange;if(typeof document!==\"undefined\"&&typeof document.addEventListener!==\"undefined\"){if(typeof document[\"hidden\"]!==\"undefined\"){visibilityChange=\"visibilitychange\";hidden=\"hidden\"}else if(typeof document[\"mozHidden\"]!==\"undefined\"){visibilityChange=\"mozvisibilitychange\";hidden=\"mozHidden\"}else if(typeof document[\"msHidden\"]!==\"undefined\"){visibilityChange=\"msvisibilitychange\";hidden=\"msHidden\"}else if(typeof document[\"webkitHidden\"]!==\"undefined\"){visibilityChange=\"webkitvisibilitychange\";hidden=\"webkitHidden\"}}_this.visible_=true;if(visibilityChange){document.addEventListener(visibilityChange,function(){var visible=!document[hidden];if(visible!==_this.visible_){_this.visible_=visible;_this.trigger(\"visible\",visible)}},false)}return _this}VisibilityMonitor.getInstance=function(){return new VisibilityMonitor};VisibilityMonitor.prototype.getInitialEvent=function(eventType){util.assert(eventType===\"visible\",\"Unknown event type: \"+eventType);return[this.visible_]};return VisibilityMonitor}(EventEmitter);\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var OnlineMonitor=function(_super){tslib_1.__extends(OnlineMonitor,_super);function OnlineMonitor(){var _this=_super.call(this,[\"online\"])||this;_this.online_=true;if(typeof window!==\"undefined\"&&typeof window.addEventListener!==\"undefined\"&&!util.isMobileCordova()){window.addEventListener(\"online\",function(){if(!_this.online_){_this.online_=true;_this.trigger(\"online\",true)}},false);window.addEventListener(\"offline\",function(){if(_this.online_){_this.online_=false;_this.trigger(\"online\",false)}},false)}return _this}OnlineMonitor.getInstance=function(){return new OnlineMonitor};OnlineMonitor.prototype.getInitialEvent=function(eventType){util.assert(eventType===\"online\",\"Unknown event type: \"+eventType);return[this.online_]};OnlineMonitor.prototype.currentlyOnline=function(){return this.online_};return OnlineMonitor}(EventEmitter);\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var PacketReceiver=function(){function PacketReceiver(onMessage_){this.onMessage_=onMessage_;this.pendingResponses=[];this.currentResponseNum=0;this.closeAfterResponse=-1;this.onClose=null}PacketReceiver.prototype.closeAfter=function(responseNum,callback){this.closeAfterResponse=responseNum;this.onClose=callback;if(this.closeAfterResponse<this.currentResponseNum){this.onClose();this.onClose=null}};PacketReceiver.prototype.handleResponse=function(requestNum,data){var _this=this;this.pendingResponses[requestNum]=data;var _loop_1=function(){var toProcess=this_1.pendingResponses[this_1.currentResponseNum];delete this_1.pendingResponses[this_1.currentResponseNum];var _loop_2=function(i){if(toProcess[i]){exceptionGuard(function(){_this.onMessage_(toProcess[i])})}};for(var i=0;i<toProcess.length;++i){_loop_2(i)}if(this_1.currentResponseNum===this_1.closeAfterResponse){if(this_1.onClose){this_1.onClose();this_1.onClose=null}return\"break\"}this_1.currentResponseNum++};var this_1=this;while(this.pendingResponses[this.currentResponseNum]){var state_1=_loop_1();if(state_1===\"break\")break}};return PacketReceiver}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var FIREBASE_LONGPOLL_START_PARAM=\"start\";var FIREBASE_LONGPOLL_CLOSE_COMMAND=\"close\";var FIREBASE_LONGPOLL_COMMAND_CB_NAME=\"pLPCommand\";var FIREBASE_LONGPOLL_DATA_CB_NAME=\"pRTLPCB\";var FIREBASE_LONGPOLL_ID_PARAM=\"id\";var FIREBASE_LONGPOLL_PW_PARAM=\"pw\";var FIREBASE_LONGPOLL_SERIAL_PARAM=\"ser\";var FIREBASE_LONGPOLL_CALLBACK_ID_PARAM=\"cb\";var FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM=\"seg\";var FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET=\"ts\";var FIREBASE_LONGPOLL_DATA_PARAM=\"d\";var FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM=\"disconn\";var FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM=\"dframe\";var MAX_URL_DATA_SIZE=1870;var SEG_HEADER_SIZE=30;var MAX_PAYLOAD_SIZE=MAX_URL_DATA_SIZE-SEG_HEADER_SIZE;var KEEPALIVE_REQUEST_INTERVAL=25e3;var LP_CONNECT_TIMEOUT=3e4;var BrowserPollConnection=function(){function BrowserPollConnection(connId,repoInfo,transportSessionId,lastSessionId){this.connId=connId;this.repoInfo=repoInfo;this.transportSessionId=transportSessionId;this.lastSessionId=lastSessionId;this.bytesSent=0;this.bytesReceived=0;this.everConnected_=false;this.log_=logWrapper(connId);this.stats_=StatsManager.getCollection(repoInfo);this.urlFn=function(params){return repoInfo.connectionURL(LONG_POLLING,params)}}BrowserPollConnection.prototype.open=function(onMessage,onDisconnect){var _this=this;this.curSegmentNum=0;this.onDisconnect_=onDisconnect;this.myPacketOrderer=new PacketReceiver(onMessage);this.isClosed_=false;this.connectTimeoutTimer_=setTimeout(function(){_this.log_(\"Timed out trying to connect.\");_this.onClosed_();_this.connectTimeoutTimer_=null},Math.floor(LP_CONNECT_TIMEOUT));executeWhenDOMReady(function(){if(_this.isClosed_)return;_this.scriptTagHolder=new FirebaseIFrameScriptHolder(function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var command=args[0],arg1=args[1],arg2=args[2];_this.incrementIncomingBytes_(args);if(!_this.scriptTagHolder)return;if(_this.connectTimeoutTimer_){clearTimeout(_this.connectTimeoutTimer_);_this.connectTimeoutTimer_=null}_this.everConnected_=true;if(command==FIREBASE_LONGPOLL_START_PARAM){_this.id=arg1;_this.password=arg2}else if(command===FIREBASE_LONGPOLL_CLOSE_COMMAND){if(arg1){_this.scriptTagHolder.sendNewPolls=false;_this.myPacketOrderer.closeAfter(arg1,function(){_this.onClosed_()})}else{_this.onClosed_()}}else{throw new Error(\"Unrecognized command received: \"+command)}},function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var pN=args[0],data=args[1];_this.incrementIncomingBytes_(args);_this.myPacketOrderer.handleResponse(pN,data)},function(){_this.onClosed_()},_this.urlFn);var urlParams={};urlParams[FIREBASE_LONGPOLL_START_PARAM]=\"t\";urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(Math.random()*1e8);if(_this.scriptTagHolder.uniqueCallbackIdentifier)urlParams[FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=_this.scriptTagHolder.uniqueCallbackIdentifier;urlParams[VERSION_PARAM]=PROTOCOL_VERSION;if(_this.transportSessionId){urlParams[TRANSPORT_SESSION_PARAM]=_this.transportSessionId}if(_this.lastSessionId){urlParams[LAST_SESSION_PARAM]=_this.lastSessionId}if(!util.isNodeSdk()&&typeof location!==\"undefined\"&&location.href&&location.href.indexOf(FORGE_DOMAIN)!==-1){urlParams[REFERER_PARAM]=FORGE_REF}var connectURL=_this.urlFn(urlParams);_this.log_(\"Connecting via long-poll to \"+connectURL);_this.scriptTagHolder.addTag(connectURL,function(){})})};BrowserPollConnection.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password);this.addDisconnectPingFrame(this.id,this.password)};BrowserPollConnection.forceAllow=function(){BrowserPollConnection.forceAllow_=true};BrowserPollConnection.forceDisallow=function(){BrowserPollConnection.forceDisallow_=true};BrowserPollConnection.isAvailable=function(){return BrowserPollConnection.forceAllow_||!BrowserPollConnection.forceDisallow_&&typeof document!==\"undefined\"&&document.createElement!=null&&!isChromeExtensionContentScript()&&!isWindowsStoreApp()&&!util.isNodeSdk()};BrowserPollConnection.prototype.markConnectionHealthy=function(){};BrowserPollConnection.prototype.shutdown_=function(){this.isClosed_=true;if(this.scriptTagHolder){this.scriptTagHolder.close();this.scriptTagHolder=null}if(this.myDisconnFrame){document.body.removeChild(this.myDisconnFrame);this.myDisconnFrame=null}if(this.connectTimeoutTimer_){clearTimeout(this.connectTimeoutTimer_);this.connectTimeoutTimer_=null}};BrowserPollConnection.prototype.onClosed_=function(){if(!this.isClosed_){this.log_(\"Longpoll is closing itself\");this.shutdown_();if(this.onDisconnect_){this.onDisconnect_(this.everConnected_);this.onDisconnect_=null}}};BrowserPollConnection.prototype.close=function(){if(!this.isClosed_){this.log_(\"Longpoll is being closed.\");this.shutdown_()}};BrowserPollConnection.prototype.send=function(data){var dataStr=util.stringify(data);this.bytesSent+=dataStr.length;this.stats_.incrementCounter(\"bytes_sent\",dataStr.length);var base64data=util.base64Encode(dataStr);var dataSegs=splitStringBySize(base64data,MAX_PAYLOAD_SIZE);for(var i=0;i<dataSegs.length;i++){this.scriptTagHolder.enqueueSegment(this.curSegmentNum,dataSegs.length,dataSegs[i]);this.curSegmentNum++}};BrowserPollConnection.prototype.addDisconnectPingFrame=function(id,pw){if(util.isNodeSdk())return;this.myDisconnFrame=document.createElement(\"iframe\");var urlParams={};urlParams[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]=\"t\";urlParams[FIREBASE_LONGPOLL_ID_PARAM]=id;urlParams[FIREBASE_LONGPOLL_PW_PARAM]=pw;this.myDisconnFrame.src=this.urlFn(urlParams);this.myDisconnFrame.style.display=\"none\";document.body.appendChild(this.myDisconnFrame)};BrowserPollConnection.prototype.incrementIncomingBytes_=function(args){var bytesReceived=util.stringify(args).length;this.bytesReceived+=bytesReceived;this.stats_.incrementCounter(\"bytes_received\",bytesReceived)};return BrowserPollConnection}();var FirebaseIFrameScriptHolder=function(){function FirebaseIFrameScriptHolder(commandCB,onMessageCB,onDisconnect,urlFn){this.onDisconnect=onDisconnect;this.urlFn=urlFn;this.outstandingRequests=new CountedSet;this.pendingSegs=[];this.currentSerial=Math.floor(Math.random()*1e8);this.sendNewPolls=true;if(!util.isNodeSdk()){this.uniqueCallbackIdentifier=LUIDGenerator();window[FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=commandCB;window[FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=onMessageCB;this.myIFrame=FirebaseIFrameScriptHolder.createIFrame_();var script=\"\";if(this.myIFrame.src&&this.myIFrame.src.substr(0,\"javascript:\".length)===\"javascript:\"){var currentDomain=document.domain;script='<script>document.domain=\"'+currentDomain+'\";<\\/script>'}var iframeContents=\"<html><body>\"+script+\"</body></html>\";try{this.myIFrame.doc.open();this.myIFrame.doc.write(iframeContents);this.myIFrame.doc.close()}catch(e){log(\"frame writing exception\");if(e.stack){log(e.stack)}log(e)}}else{this.commandCB=commandCB;this.onMessageCB=onMessageCB}}FirebaseIFrameScriptHolder.createIFrame_=function(){var iframe=document.createElement(\"iframe\");iframe.style.display=\"none\";if(document.body){document.body.appendChild(iframe);try{var a=iframe.contentWindow.document;if(!a){log(\"No IE domain setting required\")}}catch(e){var domain=document.domain;iframe.src=\"javascript:void((function(){document.open();document.domain='\"+domain+\"';document.close();})())\"}}else{throw\"Document body has not initialized. Wait to initialize Firebase until after the document is ready.\"}if(iframe.contentDocument){iframe.doc=iframe.contentDocument}else if(iframe.contentWindow){iframe.doc=iframe.contentWindow.document}else if(iframe.document){iframe.doc=iframe.document}return iframe};FirebaseIFrameScriptHolder.prototype.close=function(){var _this=this;this.alive=false;if(this.myIFrame){this.myIFrame.doc.body.innerHTML=\"\";setTimeout(function(){if(_this.myIFrame!==null){document.body.removeChild(_this.myIFrame);_this.myIFrame=null}},Math.floor(0))}if(util.isNodeSdk()&&this.myID){var urlParams={};urlParams[FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM]=\"t\";urlParams[FIREBASE_LONGPOLL_ID_PARAM]=this.myID;urlParams[FIREBASE_LONGPOLL_PW_PARAM]=this.myPW;var theURL=this.urlFn(urlParams);FirebaseIFrameScriptHolder.nodeRestRequest(theURL)}var onDisconnect=this.onDisconnect;if(onDisconnect){this.onDisconnect=null;onDisconnect()}};FirebaseIFrameScriptHolder.prototype.startLongPoll=function(id,pw){this.myID=id;this.myPW=pw;this.alive=true;while(this.newRequest_()){}};FirebaseIFrameScriptHolder.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var urlParams={};urlParams[FIREBASE_LONGPOLL_ID_PARAM]=this.myID;urlParams[FIREBASE_LONGPOLL_PW_PARAM]=this.myPW;urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;var theURL=this.urlFn(urlParams);var curDataString=\"\";var i=0;while(this.pendingSegs.length>0){var nextSeg=this.pendingSegs[0];if(nextSeg.d.length+SEG_HEADER_SIZE+curDataString.length<=MAX_URL_DATA_SIZE){var theSeg=this.pendingSegs.shift();curDataString=curDataString+\"&\"+FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+i+\"=\"+theSeg.seg+\"&\"+FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+i+\"=\"+theSeg.ts+\"&\"+FIREBASE_LONGPOLL_DATA_PARAM+i+\"=\"+theSeg.d;i++}else{break}}theURL=theURL+curDataString;this.addLongPollTag_(theURL,this.currentSerial);return true}else{return false}};FirebaseIFrameScriptHolder.prototype.enqueueSegment=function(segnum,totalsegs,data){this.pendingSegs.push({seg:segnum,ts:totalsegs,d:data});if(this.alive){this.newRequest_()}};FirebaseIFrameScriptHolder.prototype.addLongPollTag_=function(url,serial){var _this=this;this.outstandingRequests.add(serial,1);var doNewRequest=function(){_this.outstandingRequests.remove(serial);_this.newRequest_()};var keepaliveTimeout=setTimeout(doNewRequest,Math.floor(KEEPALIVE_REQUEST_INTERVAL));var readyStateCB=function(){clearTimeout(keepaliveTimeout);doNewRequest()};this.addTag(url,readyStateCB)};FirebaseIFrameScriptHolder.prototype.addTag=function(url,loadCB){var _this=this;if(util.isNodeSdk()){this.doNodeLongPoll(url,loadCB)}else{setTimeout(function(){try{if(!_this.sendNewPolls)return;var newScript_1=_this.myIFrame.doc.createElement(\"script\");newScript_1.type=\"text/javascript\";newScript_1.async=true;newScript_1.src=url;newScript_1.onload=newScript_1.onreadystatechange=function(){var rstate=newScript_1.readyState;if(!rstate||rstate===\"loaded\"||rstate===\"complete\"){newScript_1.onload=newScript_1.onreadystatechange=null;if(newScript_1.parentNode){newScript_1.parentNode.removeChild(newScript_1)}loadCB()}};newScript_1.onerror=function(){log(\"Long-poll script failed to load: \"+url);_this.sendNewPolls=false;_this.close()};_this.myIFrame.doc.body.appendChild(newScript_1)}catch(e){}},Math.floor(1))}};return FirebaseIFrameScriptHolder}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var WEBSOCKET_MAX_FRAME_SIZE=16384;var WEBSOCKET_KEEPALIVE_INTERVAL=45e3;var WebSocketImpl=null;if(typeof MozWebSocket!==\"undefined\"){WebSocketImpl=MozWebSocket}else if(typeof WebSocket!==\"undefined\"){WebSocketImpl=WebSocket}function setWebSocketImpl(impl){WebSocketImpl=impl}var WebSocketConnection=function(){function WebSocketConnection(connId,repoInfo,transportSessionId,lastSessionId){this.connId=connId;this.keepaliveTimer=null;this.frames=null;this.totalFrames=0;this.bytesSent=0;this.bytesReceived=0;this.log_=logWrapper(this.connId);this.stats_=StatsManager.getCollection(repoInfo);this.connURL=WebSocketConnection.connectionURL_(repoInfo,transportSessionId,lastSessionId)}WebSocketConnection.connectionURL_=function(repoInfo,transportSessionId,lastSessionId){var urlParams={};urlParams[VERSION_PARAM]=PROTOCOL_VERSION;if(!util.isNodeSdk()&&typeof location!==\"undefined\"&&location.href&&location.href.indexOf(FORGE_DOMAIN)!==-1){urlParams[REFERER_PARAM]=FORGE_REF}if(transportSessionId){urlParams[TRANSPORT_SESSION_PARAM]=transportSessionId}if(lastSessionId){urlParams[LAST_SESSION_PARAM]=lastSessionId}return repoInfo.connectionURL(WEBSOCKET,urlParams)};WebSocketConnection.prototype.open=function(onMessage,onDisconnect){var _this=this;this.onDisconnect=onDisconnect;this.onMessage=onMessage;this.log_(\"Websocket connecting to \"+this.connURL);this.everConnected_=false;PersistentStorage.set(\"previous_websocket_failure\",true);try{if(util.isNodeSdk()){var device=util.CONSTANTS.NODE_ADMIN?\"AdminNode\":\"Node\";var options={headers:{\"User-Agent\":\"Firebase/\"+PROTOCOL_VERSION+\"/\"+firebase.SDK_VERSION+\"/\"+process.platform+\"/\"+device}};var env=process[\"env\"];var proxy=this.connURL.indexOf(\"wss://\")==0?env[\"HTTPS_PROXY\"]||env[\"https_proxy\"]:env[\"HTTP_PROXY\"]||env[\"http_proxy\"];if(proxy){options[\"proxy\"]={origin:proxy}}this.mySock=new WebSocketImpl(this.connURL,[],options)}else{this.mySock=new WebSocketImpl(this.connURL)}}catch(e){this.log_(\"Error instantiating WebSocket.\");var error=e.message||e.data;if(error){this.log_(error)}this.onClosed_();return}this.mySock.onopen=function(){_this.log_(\"Websocket connected.\");_this.everConnected_=true};this.mySock.onclose=function(){_this.log_(\"Websocket connection was disconnected.\");_this.mySock=null;_this.onClosed_()};this.mySock.onmessage=function(m){_this.handleIncomingFrame(m)};this.mySock.onerror=function(e){_this.log_(\"WebSocket error.  Closing connection.\");var error=e.message||e.data;if(error){_this.log_(error)}_this.onClosed_()}};WebSocketConnection.prototype.start=function(){};WebSocketConnection.forceDisallow=function(){WebSocketConnection.forceDisallow_=true};WebSocketConnection.isAvailable=function(){var isOldAndroid=false;if(typeof navigator!==\"undefined\"&&navigator.userAgent){var oldAndroidRegex=/Android ([0-9]{0,}\\.[0-9]{0,})/;var oldAndroidMatch=navigator.userAgent.match(oldAndroidRegex);if(oldAndroidMatch&&oldAndroidMatch.length>1){if(parseFloat(oldAndroidMatch[1])<4.4){isOldAndroid=true}}}return!isOldAndroid&&WebSocketImpl!==null&&!WebSocketConnection.forceDisallow_};WebSocketConnection.previouslyFailed=function(){return PersistentStorage.isInMemoryStorage||PersistentStorage.get(\"previous_websocket_failure\")===true};WebSocketConnection.prototype.markConnectionHealthy=function(){PersistentStorage.remove(\"previous_websocket_failure\")};WebSocketConnection.prototype.appendFrame_=function(data){this.frames.push(data);if(this.frames.length==this.totalFrames){var fullMess=this.frames.join(\"\");this.frames=null;var jsonMess=util.jsonEval(fullMess);this.onMessage(jsonMess)}};WebSocketConnection.prototype.handleNewFrameCount_=function(frameCount){this.totalFrames=frameCount;this.frames=[]};WebSocketConnection.prototype.extractFrameCount_=function(data){util.assert(this.frames===null,\"We already have a frame buffer\");if(data.length<=6){var frameCount=Number(data);if(!isNaN(frameCount)){this.handleNewFrameCount_(frameCount);return null}}this.handleNewFrameCount_(1);return data};WebSocketConnection.prototype.handleIncomingFrame=function(mess){if(this.mySock===null)return;var data=mess[\"data\"];this.bytesReceived+=data.length;this.stats_.incrementCounter(\"bytes_received\",data.length);this.resetKeepAlive();if(this.frames!==null){this.appendFrame_(data)}else{var remainingData=this.extractFrameCount_(data);if(remainingData!==null){this.appendFrame_(remainingData)}}};WebSocketConnection.prototype.send=function(data){this.resetKeepAlive();var dataStr=util.stringify(data);this.bytesSent+=dataStr.length;this.stats_.incrementCounter(\"bytes_sent\",dataStr.length);var dataSegs=splitStringBySize(dataStr,WEBSOCKET_MAX_FRAME_SIZE);if(dataSegs.length>1){this.sendString_(String(dataSegs.length))}for(var i=0;i<dataSegs.length;i++){this.sendString_(dataSegs[i])}};WebSocketConnection.prototype.shutdown_=function(){this.isClosed_=true;if(this.keepaliveTimer){clearInterval(this.keepaliveTimer);this.keepaliveTimer=null}if(this.mySock){this.mySock.close();this.mySock=null}};WebSocketConnection.prototype.onClosed_=function(){if(!this.isClosed_){this.log_(\"WebSocket is closing itself\");this.shutdown_();if(this.onDisconnect){this.onDisconnect(this.everConnected_);this.onDisconnect=null}}};WebSocketConnection.prototype.close=function(){if(!this.isClosed_){this.log_(\"WebSocket is being closed\");this.shutdown_()}};WebSocketConnection.prototype.resetKeepAlive=function(){var _this=this;clearInterval(this.keepaliveTimer);this.keepaliveTimer=setInterval(function(){if(_this.mySock){_this.sendString_(\"0\")}_this.resetKeepAlive()},Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL))};WebSocketConnection.prototype.sendString_=function(str){try{this.mySock.send(str)}catch(e){this.log_(\"Exception thrown from WebSocket.send():\",e.message||e.data,\"Closing connection.\");setTimeout(this.onClosed_.bind(this),0)}};WebSocketConnection.responsesRequiredToBeHealthy=2;WebSocketConnection.healthyTimeout=3e4;return WebSocketConnection}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var TransportManager=function(){function TransportManager(repoInfo){this.initTransports_(repoInfo)}Object.defineProperty(TransportManager,\"ALL_TRANSPORTS\",{get:function(){return[BrowserPollConnection,WebSocketConnection]},enumerable:true,configurable:true});TransportManager.prototype.initTransports_=function(repoInfo){var isWebSocketsAvailable=WebSocketConnection&&WebSocketConnection[\"isAvailable\"]();var isSkipPollConnection=isWebSocketsAvailable&&!WebSocketConnection.previouslyFailed();if(repoInfo.webSocketOnly){if(!isWebSocketsAvailable)warn(\"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\");isSkipPollConnection=true}if(isSkipPollConnection){this.transports_=[WebSocketConnection]}else{var transports_1=this.transports_=[];each(TransportManager.ALL_TRANSPORTS,function(i,transport){if(transport&&transport[\"isAvailable\"]()){transports_1.push(transport)}})}};TransportManager.prototype.initialTransport=function(){if(this.transports_.length>0){return this.transports_[0]}else{throw new Error(\"No transports available\")}};TransportManager.prototype.upgradeTransport=function(){if(this.transports_.length>1){return this.transports_[1]}else{return null}};return TransportManager}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var UPGRADE_TIMEOUT=6e4;var DELAY_BEFORE_SENDING_EXTRA_REQUESTS=5e3;var BYTES_SENT_HEALTHY_OVERRIDE=10*1024;var BYTES_RECEIVED_HEALTHY_OVERRIDE=100*1024;var MESSAGE_TYPE=\"t\";var MESSAGE_DATA=\"d\";var CONTROL_SHUTDOWN=\"s\";var CONTROL_RESET=\"r\";var CONTROL_ERROR=\"e\";var CONTROL_PONG=\"o\";var SWITCH_ACK=\"a\";var END_TRANSMISSION=\"n\";var PING=\"p\";var SERVER_HELLO=\"h\";var Connection=function(){function Connection(id,repoInfo_,onMessage_,onReady_,onDisconnect_,onKill_,lastSessionId){this.id=id;this.repoInfo_=repoInfo_;this.onMessage_=onMessage_;this.onReady_=onReady_;this.onDisconnect_=onDisconnect_;this.onKill_=onKill_;this.lastSessionId=lastSessionId;this.connectionCount=0;this.pendingDataMessages=[];this.state_=0;this.log_=logWrapper(\"c:\"+this.id+\":\");this.transportManager_=new TransportManager(repoInfo_);this.log_(\"Connection created\");this.start_()}Connection.prototype.start_=function(){var _this=this;var conn=this.transportManager_.initialTransport();this.conn_=new conn(this.nextTransportId_(),this.repoInfo_,undefined,this.lastSessionId);this.primaryResponsesRequired_=conn[\"responsesRequiredToBeHealthy\"]||0;var onMessageReceived=this.connReceiver_(this.conn_);var onConnectionLost=this.disconnReceiver_(this.conn_);this.tx_=this.conn_;this.rx_=this.conn_;this.secondaryConn_=null;this.isHealthy_=false;setTimeout(function(){_this.conn_&&_this.conn_.open(onMessageReceived,onConnectionLost)},Math.floor(0));var healthyTimeout_ms=conn[\"healthyTimeout\"]||0;if(healthyTimeout_ms>0){this.healthyTimeout_=setTimeoutNonBlocking(function(){_this.healthyTimeout_=null;if(!_this.isHealthy_){if(_this.conn_&&_this.conn_.bytesReceived>BYTES_RECEIVED_HEALTHY_OVERRIDE){_this.log_(\"Connection exceeded healthy timeout but has received \"+_this.conn_.bytesReceived+\" bytes.  Marking connection healthy.\");_this.isHealthy_=true;_this.conn_.markConnectionHealthy()}else if(_this.conn_&&_this.conn_.bytesSent>BYTES_SENT_HEALTHY_OVERRIDE){_this.log_(\"Connection exceeded healthy timeout but has sent \"+_this.conn_.bytesSent+\" bytes.  Leaving connection alive.\")}else{_this.log_(\"Closing unhealthy connection after timeout.\");_this.close()}}},Math.floor(healthyTimeout_ms))}};Connection.prototype.nextTransportId_=function(){return\"c:\"+this.id+\":\"+this.connectionCount++};Connection.prototype.disconnReceiver_=function(conn){var _this=this;return function(everConnected){if(conn===_this.conn_){_this.onConnectionLost_(everConnected)}else if(conn===_this.secondaryConn_){_this.log_(\"Secondary connection lost.\");_this.onSecondaryConnectionLost_()}else{_this.log_(\"closing an old connection\")}}};Connection.prototype.connReceiver_=function(conn){var _this=this;return function(message){if(_this.state_!=2){if(conn===_this.rx_){_this.onPrimaryMessageReceived_(message)}else if(conn===_this.secondaryConn_){_this.onSecondaryMessageReceived_(message)}else{_this.log_(\"message on old connection\")}}}};Connection.prototype.sendRequest=function(dataMsg){var msg={t:\"d\",d:dataMsg};this.sendData_(msg)};Connection.prototype.tryCleanupConnection=function(){if(this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_){this.log_(\"cleaning up and promoting a connection: \"+this.secondaryConn_.connId);this.conn_=this.secondaryConn_;this.secondaryConn_=null}};Connection.prototype.onSecondaryControl_=function(controlData){if(MESSAGE_TYPE in controlData){var cmd=controlData[MESSAGE_TYPE];if(cmd===SWITCH_ACK){this.upgradeIfSecondaryHealthy_()}else if(cmd===CONTROL_RESET){this.log_(\"Got a reset on secondary, closing it\");this.secondaryConn_.close();if(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_){this.close()}}else if(cmd===CONTROL_PONG){this.log_(\"got pong on secondary.\");this.secondaryResponsesRequired_--;this.upgradeIfSecondaryHealthy_()}}};Connection.prototype.onSecondaryMessageReceived_=function(parsedData){var layer=requireKey(\"t\",parsedData);var data=requireKey(\"d\",parsedData);if(layer==\"c\"){this.onSecondaryControl_(data)}else if(layer==\"d\"){this.pendingDataMessages.push(data)}else{throw new Error(\"Unknown protocol layer: \"+layer)}};Connection.prototype.upgradeIfSecondaryHealthy_=function(){if(this.secondaryResponsesRequired_<=0){this.log_(\"Secondary connection is healthy.\");this.isHealthy_=true;this.secondaryConn_.markConnectionHealthy();this.proceedWithUpgrade_()}else{this.log_(\"sending ping on secondary.\");this.secondaryConn_.send({t:\"c\",d:{t:PING,d:{}}})}};Connection.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start();this.log_(\"sending client ack on secondary\");this.secondaryConn_.send({t:\"c\",d:{t:SWITCH_ACK,d:{}}});this.log_(\"Ending transmission on primary\");this.conn_.send({t:\"c\",d:{t:END_TRANSMISSION,d:{}}});this.tx_=this.secondaryConn_;this.tryCleanupConnection()};Connection.prototype.onPrimaryMessageReceived_=function(parsedData){var layer=requireKey(\"t\",parsedData);var data=requireKey(\"d\",parsedData);if(layer==\"c\"){this.onControl_(data)}else if(layer==\"d\"){this.onDataMessage_(data)}};Connection.prototype.onDataMessage_=function(message){this.onPrimaryResponse_();this.onMessage_(message)};Connection.prototype.onPrimaryResponse_=function(){if(!this.isHealthy_){this.primaryResponsesRequired_--;if(this.primaryResponsesRequired_<=0){this.log_(\"Primary connection is healthy.\");this.isHealthy_=true;this.conn_.markConnectionHealthy()}}};Connection.prototype.onControl_=function(controlData){var cmd=requireKey(MESSAGE_TYPE,controlData);if(MESSAGE_DATA in controlData){var payload=controlData[MESSAGE_DATA];if(cmd===SERVER_HELLO){this.onHandshake_(payload)}else if(cmd===END_TRANSMISSION){this.log_(\"recvd end transmission on primary\");this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i){this.onDataMessage_(this.pendingDataMessages[i])}this.pendingDataMessages=[];this.tryCleanupConnection()}else if(cmd===CONTROL_SHUTDOWN){this.onConnectionShutdown_(payload)}else if(cmd===CONTROL_RESET){this.onReset_(payload)}else if(cmd===CONTROL_ERROR){error(\"Server Error: \"+payload)}else if(cmd===CONTROL_PONG){this.log_(\"got pong on primary.\");this.onPrimaryResponse_();this.sendPingOnPrimaryIfNecessary_()}else{error(\"Unknown control packet command: \"+cmd)}}};Connection.prototype.onHandshake_=function(handshake){var timestamp=handshake.ts;var version=handshake.v;var host=handshake.h;this.sessionId=handshake.s;this.repoInfo_.updateHost(host);if(this.state_==0){this.conn_.start();this.onConnectionEstablished_(this.conn_,timestamp);if(PROTOCOL_VERSION!==version){warn(\"Protocol version mismatch detected\")}this.tryStartUpgrade_()}};Connection.prototype.tryStartUpgrade_=function(){var conn=this.transportManager_.upgradeTransport();if(conn){this.startUpgrade_(conn)}};Connection.prototype.startUpgrade_=function(conn){var _this=this;this.secondaryConn_=new conn(this.nextTransportId_(),this.repoInfo_,this.sessionId);this.secondaryResponsesRequired_=conn[\"responsesRequiredToBeHealthy\"]||0;var onMessage=this.connReceiver_(this.secondaryConn_);var onDisconnect=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(onMessage,onDisconnect);setTimeoutNonBlocking(function(){if(_this.secondaryConn_){_this.log_(\"Timed out trying to upgrade.\");_this.secondaryConn_.close()}},Math.floor(UPGRADE_TIMEOUT))};Connection.prototype.onReset_=function(host){this.log_(\"Reset packet received.  New host: \"+host);this.repoInfo_.updateHost(host);if(this.state_===1){this.close()}else{this.closeConnections_();this.start_()}};Connection.prototype.onConnectionEstablished_=function(conn,timestamp){var _this=this;this.log_(\"Realtime connection established.\");this.conn_=conn;this.state_=1;if(this.onReady_){this.onReady_(timestamp,this.sessionId);this.onReady_=null}if(this.primaryResponsesRequired_===0){this.log_(\"Primary connection is healthy.\");this.isHealthy_=true}else{setTimeoutNonBlocking(function(){_this.sendPingOnPrimaryIfNecessary_()},Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS))}};Connection.prototype.sendPingOnPrimaryIfNecessary_=function(){if(!this.isHealthy_&&this.state_===1){this.log_(\"sending ping on primary.\");this.sendData_({t:\"c\",d:{t:PING,d:{}}})}};Connection.prototype.onSecondaryConnectionLost_=function(){var conn=this.secondaryConn_;this.secondaryConn_=null;if(this.tx_===conn||this.rx_===conn){this.close()}};Connection.prototype.onConnectionLost_=function(everConnected){this.conn_=null;if(!everConnected&&this.state_===0){this.log_(\"Realtime connection failed.\");if(this.repoInfo_.isCacheableHost()){PersistentStorage.remove(\"host:\"+this.repoInfo_.host);this.repoInfo_.internalHost=this.repoInfo_.host}}else if(this.state_===1){this.log_(\"Realtime connection lost.\")}this.close()};Connection.prototype.onConnectionShutdown_=function(reason){this.log_(\"Connection shutdown command received. Shutting down...\");if(this.onKill_){this.onKill_(reason);this.onKill_=null}this.onDisconnect_=null;this.close()};Connection.prototype.sendData_=function(data){if(this.state_!==1){throw\"Connection is not connected\"}else{this.tx_.send(data)}};Connection.prototype.close=function(){if(this.state_!==2){this.log_(\"Closing realtime connection.\");this.state_=2;this.closeConnections_();if(this.onDisconnect_){this.onDisconnect_();this.onDisconnect_=null}}};Connection.prototype.closeConnections_=function(){this.log_(\"Shutting down all connections\");if(this.conn_){this.conn_.close();this.conn_=null}if(this.secondaryConn_){this.secondaryConn_.close();this.secondaryConn_=null}if(this.healthyTimeout_){clearTimeout(this.healthyTimeout_);this.healthyTimeout_=null}};return Connection}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var ServerActions=function(){function ServerActions(){}ServerActions.prototype.put=function(pathString,data,onComplete,hash){};ServerActions.prototype.merge=function(pathString,data,onComplete,hash){};ServerActions.prototype.refreshAuthToken=function(token){};ServerActions.prototype.onDisconnectPut=function(pathString,data,onComplete){};ServerActions.prototype.onDisconnectMerge=function(pathString,data,onComplete){};ServerActions.prototype.onDisconnectCancel=function(pathString,onComplete){};ServerActions.prototype.reportStats=function(stats){};return ServerActions}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var RECONNECT_MIN_DELAY=1e3;var RECONNECT_MAX_DELAY_DEFAULT=60*5*1e3;var RECONNECT_MAX_DELAY_FOR_ADMINS=30*1e3;var RECONNECT_DELAY_MULTIPLIER=1.3;var RECONNECT_DELAY_RESET_TIMEOUT=3e4;var SERVER_KILL_INTERRUPT_REASON=\"server_kill\";var INVALID_AUTH_TOKEN_THRESHOLD=3;var PersistentConnection=function(_super){tslib_1.__extends(PersistentConnection,_super);function PersistentConnection(repoInfo_,onDataUpdate_,onConnectStatus_,onServerInfoUpdate_,authTokenProvider_,authOverride_){var _this=_super.call(this)||this;_this.repoInfo_=repoInfo_;_this.onDataUpdate_=onDataUpdate_;_this.onConnectStatus_=onConnectStatus_;_this.onServerInfoUpdate_=onServerInfoUpdate_;_this.authTokenProvider_=authTokenProvider_;_this.authOverride_=authOverride_;_this.id=PersistentConnection.nextPersistentConnectionId_++;_this.log_=logWrapper(\"p:\"+_this.id+\":\");_this.interruptReasons_={};_this.listens_={};_this.outstandingPuts_=[];_this.outstandingPutCount_=0;_this.onDisconnectRequestQueue_=[];_this.connected_=false;_this.reconnectDelay_=RECONNECT_MIN_DELAY;_this.maxReconnectDelay_=RECONNECT_MAX_DELAY_DEFAULT;_this.securityDebugCallback_=null;_this.lastSessionId=null;_this.establishConnectionTimer_=null;_this.visible_=false;_this.requestCBHash_={};_this.requestNumber_=0;_this.realtime_=null;_this.authToken_=null;_this.forceTokenRefresh_=false;_this.invalidAuthTokenCount_=0;_this.firstConnection_=true;_this.lastConnectionAttemptTime_=null;_this.lastConnectionEstablishedTime_=null;if(authOverride_&&!util.isNodeSdk()){throw new Error(\"Auth override specified in options, but not supported on non Node.js platforms\")}_this.scheduleConnect_(0);VisibilityMonitor.getInstance().on(\"visible\",_this.onVisible_,_this);if(repoInfo_.host.indexOf(\"fblocal\")===-1){OnlineMonitor.getInstance().on(\"online\",_this.onOnline_,_this)}return _this}PersistentConnection.prototype.sendRequest=function(action,body,onResponse){var curReqNum=++this.requestNumber_;var msg={r:curReqNum,a:action,b:body};this.log_(util.stringify(msg));util.assert(this.connected_,\"sendRequest call when we're not connected not allowed.\");this.realtime_.sendRequest(msg);if(onResponse){this.requestCBHash_[curReqNum]=onResponse}};PersistentConnection.prototype.listen=function(query,currentHashFn,tag,onComplete){var queryId=query.queryIdentifier();var pathString=query.path.toString();this.log_(\"Listen called for \"+pathString+\" \"+queryId);this.listens_[pathString]=this.listens_[pathString]||{};util.assert(query.getQueryParams().isDefault()||!query.getQueryParams().loadsAllData(),\"listen() called for non-default but complete query\");util.assert(!this.listens_[pathString][queryId],\"listen() called twice for same path/queryId.\");var listenSpec={onComplete:onComplete,hashFn:currentHashFn,query:query,tag:tag};this.listens_[pathString][queryId]=listenSpec;if(this.connected_){this.sendListen_(listenSpec)}};PersistentConnection.prototype.sendListen_=function(listenSpec){var _this=this;var query=listenSpec.query;var pathString=query.path.toString();var queryId=query.queryIdentifier();this.log_(\"Listen on \"+pathString+\" for \"+queryId);var req={p:pathString};var action=\"q\";if(listenSpec.tag){req[\"q\"]=query.queryObject();req[\"t\"]=listenSpec.tag}req[\"h\"]=listenSpec.hashFn();this.sendRequest(action,req,function(message){var payload=message[\"d\"];var status=message[\"s\"];PersistentConnection.warnOnListenWarnings_(payload,query);var currentListenSpec=_this.listens_[pathString]&&_this.listens_[pathString][queryId];if(currentListenSpec===listenSpec){_this.log_(\"listen response\",message);if(status!==\"ok\"){_this.removeListen_(pathString,queryId)}if(listenSpec.onComplete){listenSpec.onComplete(status,payload)}}})};PersistentConnection.warnOnListenWarnings_=function(payload,query){if(payload&&typeof payload===\"object\"&&util.contains(payload,\"w\")){var warnings=util.safeGet(payload,\"w\");if(Array.isArray(warnings)&&~warnings.indexOf(\"no_index\")){var indexSpec='\".indexOn\": \"'+query.getQueryParams().getIndex().toString()+'\"';var indexPath=query.path.toString();warn(\"Using an unspecified index. Your data will be downloaded and \"+(\"filtered on the client. Consider adding \"+indexSpec+\" at \")+(indexPath+\" to your security rules for better performance.\"))}}};PersistentConnection.prototype.refreshAuthToken=function(token){this.authToken_=token;this.log_(\"Auth token refreshed\");if(this.authToken_){this.tryAuth()}else{if(this.connected_){this.sendRequest(\"unauth\",{},function(){})}}this.reduceReconnectDelayIfAdminCredential_(token)};PersistentConnection.prototype.reduceReconnectDelayIfAdminCredential_=function(credential){var isFirebaseSecret=credential&&credential.length===40;if(isFirebaseSecret||util.isAdmin(credential)){this.log_(\"Admin auth credential detected.  Reducing max reconnect time.\");this.maxReconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS}};PersistentConnection.prototype.tryAuth=function(){var _this=this;if(this.connected_&&this.authToken_){var token_1=this.authToken_;var authMethod=util.isValidFormat(token_1)?\"auth\":\"gauth\";var requestData={cred:token_1};if(this.authOverride_===null){requestData[\"noauth\"]=true}else if(typeof this.authOverride_===\"object\"){requestData[\"authvar\"]=this.authOverride_}this.sendRequest(authMethod,requestData,function(res){var status=res[\"s\"];var data=res[\"d\"]||\"error\";if(_this.authToken_===token_1){if(status===\"ok\"){_this.invalidAuthTokenCount_=0}else{_this.onAuthRevoked_(status,data)}}})}};PersistentConnection.prototype.unlisten=function(query,tag){var pathString=query.path.toString();var queryId=query.queryIdentifier();this.log_(\"Unlisten called for \"+pathString+\" \"+queryId);util.assert(query.getQueryParams().isDefault()||!query.getQueryParams().loadsAllData(),\"unlisten() called for non-default but complete query\");var listen=this.removeListen_(pathString,queryId);if(listen&&this.connected_){this.sendUnlisten_(pathString,queryId,query.queryObject(),tag)}};PersistentConnection.prototype.sendUnlisten_=function(pathString,queryId,queryObj,tag){this.log_(\"Unlisten on \"+pathString+\" for \"+queryId);var req={p:pathString};var action=\"n\";if(tag){req[\"q\"]=queryObj;req[\"t\"]=tag}this.sendRequest(action,req)};PersistentConnection.prototype.onDisconnectPut=function(pathString,data,onComplete){if(this.connected_){this.sendOnDisconnect_(\"o\",pathString,data,onComplete)}else{this.onDisconnectRequestQueue_.push({pathString:pathString,action:\"o\",data:data,onComplete:onComplete})}};PersistentConnection.prototype.onDisconnectMerge=function(pathString,data,onComplete){if(this.connected_){this.sendOnDisconnect_(\"om\",pathString,data,onComplete)}else{this.onDisconnectRequestQueue_.push({pathString:pathString,action:\"om\",data:data,onComplete:onComplete})}};PersistentConnection.prototype.onDisconnectCancel=function(pathString,onComplete){if(this.connected_){this.sendOnDisconnect_(\"oc\",pathString,null,onComplete)}else{this.onDisconnectRequestQueue_.push({pathString:pathString,action:\"oc\",data:null,onComplete:onComplete})}};PersistentConnection.prototype.sendOnDisconnect_=function(action,pathString,data,onComplete){var request={p:pathString,d:data};this.log_(\"onDisconnect \"+action,request);this.sendRequest(action,request,function(response){if(onComplete){setTimeout(function(){onComplete(response[\"s\"],response[\"d\"])},Math.floor(0))}})};PersistentConnection.prototype.put=function(pathString,data,onComplete,hash){this.putInternal(\"p\",pathString,data,onComplete,hash)};PersistentConnection.prototype.merge=function(pathString,data,onComplete,hash){this.putInternal(\"m\",pathString,data,onComplete,hash)};PersistentConnection.prototype.putInternal=function(action,pathString,data,onComplete,hash){var request={p:pathString,d:data};if(hash!==undefined)request[\"h\"]=hash;this.outstandingPuts_.push({action:action,request:request,onComplete:onComplete});this.outstandingPutCount_++;var index=this.outstandingPuts_.length-1;if(this.connected_){this.sendPut_(index)}else{this.log_(\"Buffering put: \"+pathString)}};PersistentConnection.prototype.sendPut_=function(index){var _this=this;var action=this.outstandingPuts_[index].action;var request=this.outstandingPuts_[index].request;var onComplete=this.outstandingPuts_[index].onComplete;this.outstandingPuts_[index].queued=this.connected_;this.sendRequest(action,request,function(message){_this.log_(action+\" response\",message);delete _this.outstandingPuts_[index];_this.outstandingPutCount_--;if(_this.outstandingPutCount_===0){_this.outstandingPuts_=[]}if(onComplete)onComplete(message[\"s\"],message[\"d\"])})};PersistentConnection.prototype.reportStats=function(stats){var _this=this;if(this.connected_){var request={c:stats};this.log_(\"reportStats\",request);this.sendRequest(\"s\",request,function(result){var status=result[\"s\"];if(status!==\"ok\"){var errorReason=result[\"d\"];_this.log_(\"reportStats\",\"Error sending stats: \"+errorReason)}})}};PersistentConnection.prototype.onDataMessage_=function(message){if(\"r\"in message){this.log_(\"from server: \"+util.stringify(message));var reqNum=message[\"r\"];var onResponse=this.requestCBHash_[reqNum];if(onResponse){delete this.requestCBHash_[reqNum];onResponse(message[\"b\"])}}else if(\"error\"in message){throw\"A server-side error has occurred: \"+message[\"error\"]}else if(\"a\"in message){this.onDataPush_(message[\"a\"],message[\"b\"])}};PersistentConnection.prototype.onDataPush_=function(action,body){this.log_(\"handleServerMessage\",action,body);if(action===\"d\")this.onDataUpdate_(body[\"p\"],body[\"d\"],false,body[\"t\"]);else if(action===\"m\")this.onDataUpdate_(body[\"p\"],body[\"d\"],true,body[\"t\"]);else if(action===\"c\")this.onListenRevoked_(body[\"p\"],body[\"q\"]);else if(action===\"ac\")this.onAuthRevoked_(body[\"s\"],body[\"d\"]);else if(action===\"sd\")this.onSecurityDebugPacket_(body);else error(\"Unrecognized action received from server: \"+util.stringify(action)+\"\\nAre you using the latest client?\")};PersistentConnection.prototype.onReady_=function(timestamp,sessionId){this.log_(\"connection ready\");this.connected_=true;this.lastConnectionEstablishedTime_=(new Date).getTime();this.handleTimestamp_(timestamp);this.lastSessionId=sessionId;if(this.firstConnection_){this.sendConnectStats_()}this.restoreState_();this.firstConnection_=false;this.onConnectStatus_(true)};PersistentConnection.prototype.scheduleConnect_=function(timeout){var _this=this;util.assert(!this.realtime_,\"Scheduling a connect when we're already connected/ing?\");if(this.establishConnectionTimer_){clearTimeout(this.establishConnectionTimer_)}this.establishConnectionTimer_=setTimeout(function(){_this.establishConnectionTimer_=null;_this.establishConnection_()},Math.floor(timeout))};PersistentConnection.prototype.onVisible_=function(visible){if(visible&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_){this.log_(\"Window became visible.  Reducing delay.\");this.reconnectDelay_=RECONNECT_MIN_DELAY;if(!this.realtime_){this.scheduleConnect_(0)}}this.visible_=visible};PersistentConnection.prototype.onOnline_=function(online){if(online){this.log_(\"Browser went online.\");this.reconnectDelay_=RECONNECT_MIN_DELAY;if(!this.realtime_){this.scheduleConnect_(0)}}else{this.log_(\"Browser went offline.  Killing connection.\");if(this.realtime_){this.realtime_.close()}}};PersistentConnection.prototype.onRealtimeDisconnect_=function(){this.log_(\"data client disconnected\");this.connected_=false;this.realtime_=null;this.cancelSentTransactions_();this.requestCBHash_={};if(this.shouldReconnect_()){if(!this.visible_){this.log_(\"Window isn't visible.  Delaying reconnect.\");this.reconnectDelay_=this.maxReconnectDelay_;this.lastConnectionAttemptTime_=(new Date).getTime()}else if(this.lastConnectionEstablishedTime_){var timeSinceLastConnectSucceeded=(new Date).getTime()-this.lastConnectionEstablishedTime_;if(timeSinceLastConnectSucceeded>RECONNECT_DELAY_RESET_TIMEOUT)this.reconnectDelay_=RECONNECT_MIN_DELAY;this.lastConnectionEstablishedTime_=null}var timeSinceLastConnectAttempt=(new Date).getTime()-this.lastConnectionAttemptTime_;var reconnectDelay=Math.max(0,this.reconnectDelay_-timeSinceLastConnectAttempt);reconnectDelay=Math.random()*reconnectDelay;this.log_(\"Trying to reconnect in \"+reconnectDelay+\"ms\");this.scheduleConnect_(reconnectDelay);this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RECONNECT_DELAY_MULTIPLIER)}this.onConnectStatus_(false)};PersistentConnection.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_(\"Making a connection attempt\");this.lastConnectionAttemptTime_=(new Date).getTime();this.lastConnectionEstablishedTime_=null;var onDataMessage_1=this.onDataMessage_.bind(this);var onReady_1=this.onReady_.bind(this);var onDisconnect_1=this.onRealtimeDisconnect_.bind(this);var connId_1=this.id+\":\"+PersistentConnection.nextConnectionId_++;var self_1=this;var lastSessionId_1=this.lastSessionId;var canceled_1=false;var connection_1=null;var closeFn_1=function(){if(connection_1){connection_1.close()}else{canceled_1=true;onDisconnect_1()}};var sendRequestFn=function(msg){util.assert(connection_1,\"sendRequest call when we're not connected not allowed.\");connection_1.sendRequest(msg)};this.realtime_={close:closeFn_1,sendRequest:sendRequestFn};var forceRefresh=this.forceTokenRefresh_;this.forceTokenRefresh_=false;this.authTokenProvider_.getToken(forceRefresh).then(function(result){if(!canceled_1){log(\"getToken() completed. Creating connection.\");self_1.authToken_=result&&result.accessToken;connection_1=new Connection(connId_1,self_1.repoInfo_,onDataMessage_1,onReady_1,onDisconnect_1,function(reason){warn(reason+\" (\"+self_1.repoInfo_.toString()+\")\");self_1.interrupt(SERVER_KILL_INTERRUPT_REASON)},lastSessionId_1)}else{log(\"getToken() completed but was canceled\")}}).then(null,function(error){self_1.log_(\"Failed to get token: \"+error);if(!canceled_1){if(util.CONSTANTS.NODE_ADMIN){warn(error)}closeFn_1()}})}};PersistentConnection.prototype.interrupt=function(reason){log(\"Interrupting connection for reason: \"+reason);this.interruptReasons_[reason]=true;if(this.realtime_){this.realtime_.close()}else{if(this.establishConnectionTimer_){clearTimeout(this.establishConnectionTimer_);this.establishConnectionTimer_=null}if(this.connected_){this.onRealtimeDisconnect_()}}};PersistentConnection.prototype.resume=function(reason){log(\"Resuming connection for reason: \"+reason);delete this.interruptReasons_[reason];if(util.isEmpty(this.interruptReasons_)){this.reconnectDelay_=RECONNECT_MIN_DELAY;if(!this.realtime_){this.scheduleConnect_(0)}}};PersistentConnection.prototype.handleTimestamp_=function(timestamp){var delta=timestamp-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:delta})};PersistentConnection.prototype.cancelSentTransactions_=function(){for(var i=0;i<this.outstandingPuts_.length;i++){var put=this.outstandingPuts_[i];if(put&&\"h\"in put.request&&put.queued){if(put.onComplete)put.onComplete(\"disconnect\");delete this.outstandingPuts_[i];this.outstandingPutCount_--}}if(this.outstandingPutCount_===0)this.outstandingPuts_=[]};PersistentConnection.prototype.onListenRevoked_=function(pathString,query){var queryId;if(!query){queryId=\"default\"}else{queryId=query.map(function(q){return ObjectToUniqueKey(q)}).join(\"$\")}var listen=this.removeListen_(pathString,queryId);if(listen&&listen.onComplete)listen.onComplete(\"permission_denied\")};PersistentConnection.prototype.removeListen_=function(pathString,queryId){var normalizedPathString=new Path(pathString).toString();var listen;if(this.listens_[normalizedPathString]!==undefined){listen=this.listens_[normalizedPathString][queryId];delete this.listens_[normalizedPathString][queryId];if(util.getCount(this.listens_[normalizedPathString])===0){delete this.listens_[normalizedPathString]}}else{listen=undefined}return listen};PersistentConnection.prototype.onAuthRevoked_=function(statusCode,explanation){log(\"Auth token revoked: \"+statusCode+\"/\"+explanation);this.authToken_=null;this.forceTokenRefresh_=true;this.realtime_.close();if(statusCode===\"invalid_token\"||statusCode===\"permission_denied\"){this.invalidAuthTokenCount_++;if(this.invalidAuthTokenCount_>=INVALID_AUTH_TOKEN_THRESHOLD){this.reconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS;this.authTokenProvider_.notifyForInvalidToken()}}};PersistentConnection.prototype.onSecurityDebugPacket_=function(body){if(this.securityDebugCallback_){this.securityDebugCallback_(body)}else{if(\"msg\"in body){console.log(\"FIREBASE: \"+body[\"msg\"].replace(\"\\n\",\"\\nFIREBASE: \"))}}};PersistentConnection.prototype.restoreState_=function(){var _this=this;this.tryAuth();util.forEach(this.listens_,function(pathString,queries){util.forEach(queries,function(key,listenSpec){_this.sendListen_(listenSpec)})});for(var i=0;i<this.outstandingPuts_.length;i++){if(this.outstandingPuts_[i])this.sendPut_(i)}while(this.onDisconnectRequestQueue_.length){var request=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(request.action,request.pathString,request.data,request.onComplete)}};PersistentConnection.prototype.sendConnectStats_=function(){var stats={};var clientName=\"js\";if(util.CONSTANTS.NODE_ADMIN){clientName=\"admin_node\"}else if(util.CONSTANTS.NODE_CLIENT){clientName=\"node\"}stats[\"sdk.\"+clientName+\".\"+firebase.SDK_VERSION.replace(/\\./g,\"-\")]=1;if(util.isMobileCordova()){stats[\"framework.cordova\"]=1}else if(util.isReactNative()){stats[\"framework.reactnative\"]=1}this.reportStats(stats)};PersistentConnection.prototype.shouldReconnect_=function(){var online=OnlineMonitor.getInstance().currentlyOnline();return util.isEmpty(this.interruptReasons_)&&online};PersistentConnection.nextPersistentConnectionId_=0;PersistentConnection.nextConnectionId_=0;return PersistentConnection}(ServerActions);\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var ReadonlyRestClient=function(_super){tslib_1.__extends(ReadonlyRestClient,_super);function ReadonlyRestClient(repoInfo_,onDataUpdate_,authTokenProvider_){var _this=_super.call(this)||this;_this.repoInfo_=repoInfo_;_this.onDataUpdate_=onDataUpdate_;_this.authTokenProvider_=authTokenProvider_;_this.log_=logWrapper(\"p:rest:\");_this.listens_={};return _this}ReadonlyRestClient.prototype.reportStats=function(stats){throw new Error(\"Method not implemented.\")};ReadonlyRestClient.getListenId_=function(query,tag){if(tag!==undefined){return\"tag$\"+tag}else{util.assert(query.getQueryParams().isDefault(),\"should have a tag if it's not a default query.\");return query.path.toString()}};ReadonlyRestClient.prototype.listen=function(query,currentHashFn,tag,onComplete){var _this=this;var pathString=query.path.toString();this.log_(\"Listen called for \"+pathString+\" \"+query.queryIdentifier());var listenId=ReadonlyRestClient.getListenId_(query,tag);var thisListen={};this.listens_[listenId]=thisListen;var queryStringParameters=query.getQueryParams().toRestQueryStringParameters();this.restRequest_(pathString+\".json\",queryStringParameters,function(error,result){var data=result;if(error===404){data=null;error=null}if(error===null){_this.onDataUpdate_(pathString,data,false,tag)}if(util.safeGet(_this.listens_,listenId)===thisListen){var status_1;if(!error){status_1=\"ok\"}else if(error==401){status_1=\"permission_denied\"}else{status_1=\"rest_error:\"+error}onComplete(status_1,null)}})};ReadonlyRestClient.prototype.unlisten=function(query,tag){var listenId=ReadonlyRestClient.getListenId_(query,tag);delete this.listens_[listenId]};ReadonlyRestClient.prototype.refreshAuthToken=function(token){};ReadonlyRestClient.prototype.restRequest_=function(pathString,queryStringParameters,callback){var _this=this;if(queryStringParameters===void 0){queryStringParameters={}}queryStringParameters[\"format\"]=\"export\";this.authTokenProvider_.getToken(false).then(function(authTokenData){var authToken=authTokenData&&authTokenData.accessToken;if(authToken){queryStringParameters[\"auth\"]=authToken}var url=(_this.repoInfo_.secure?\"https://\":\"http://\")+_this.repoInfo_.host+pathString+\"?\"+\"ns=\"+_this.repoInfo_.namespace+util.querystring(queryStringParameters);_this.log_(\"Sending REST request for \"+url);var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(callback&&xhr.readyState===4){_this.log_(\"REST Response for \"+url+\" received. status:\",xhr.status,\"response:\",xhr.responseText);var res=null;if(xhr.status>=200&&xhr.status<300){try{res=util.jsonEval(xhr.responseText)}catch(e){warn(\"Failed to parse JSON response for \"+url+\": \"+xhr.responseText)}callback(null,res)}else{if(xhr.status!==401&&xhr.status!==404){warn(\"Got unsuccessful REST response for \"+url+\" Status: \"+xhr.status)}callback(xhr.status)}callback=null}};xhr.open(\"GET\",url,true);xhr.send()})};return ReadonlyRestClient}(ServerActions);\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var INTERRUPT_REASON=\"repo_interrupt\";var Repo=function(){function Repo(repoInfo_,forceRestClient,app){var _this=this;this.repoInfo_=repoInfo_;this.app=app;this.dataUpdateCount=0;this.statsListener_=null;this.eventQueue_=new EventQueue;this.nextWriteId_=1;this.interceptServerDataCallback_=null;this.onDisconnect_=new SparseSnapshotTree;this.persistentConnection_=null;var authTokenProvider=new AuthTokenProvider(app);this.stats_=StatsManager.getCollection(repoInfo_);if(forceRestClient||beingCrawled()){this.server_=new ReadonlyRestClient(this.repoInfo_,this.onDataUpdate_.bind(this),authTokenProvider);setTimeout(this.onConnectStatus_.bind(this,true),0)}else{var authOverride=app.options[\"databaseAuthVariableOverride\"];if(typeof authOverride!==\"undefined\"&&authOverride!==null){if(typeof authOverride!==\"object\"){throw new Error(\"Only objects are supported for option databaseAuthVariableOverride\")}try{util.stringify(authOverride)}catch(e){throw new Error(\"Invalid authOverride provided: \"+e)}}this.persistentConnection_=new PersistentConnection(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),authTokenProvider,authOverride);this.server_=this.persistentConnection_}authTokenProvider.addTokenChangeListener(function(token){_this.server_.refreshAuthToken(token)});this.statsReporter_=StatsManager.getOrCreateReporter(repoInfo_,function(){return new StatsReporter(_this.stats_,_this.server_)});this.transactions_init_();this.infoData_=new SnapshotHolder;this.infoSyncTree_=new SyncTree({startListening:function(query,tag,currentHashFn,onComplete){var infoEvents=[];var node=_this.infoData_.getNode(query.path);if(!node.isEmpty()){infoEvents=_this.infoSyncTree_.applyServerOverwrite(query.path,node);setTimeout(function(){onComplete(\"ok\")},0)}return infoEvents},stopListening:function(){}});this.updateInfo_(\"connected\",false);this.serverSyncTree_=new SyncTree({startListening:function(query,tag,currentHashFn,onComplete){_this.server_.listen(query,currentHashFn,tag,function(status,data){var events=onComplete(status,data);_this.eventQueue_.raiseEventsForChangedPath(query.path,events)});return[]},stopListening:function(query,tag){_this.server_.unlisten(query,tag)}})}Repo.prototype.toString=function(){return(this.repoInfo_.secure?\"https://\":\"http://\")+this.repoInfo_.host};Repo.prototype.name=function(){return this.repoInfo_.namespace};Repo.prototype.serverTime=function(){var offsetNode=this.infoData_.getNode(new Path(\".info/serverTimeOffset\"));var offset=offsetNode.val()||0;return(new Date).getTime()+offset};Repo.prototype.generateServerValues=function(){return generateWithValues({timestamp:this.serverTime()})};Repo.prototype.onDataUpdate_=function(pathString,data,isMerge,tag){this.dataUpdateCount++;var path=new Path(pathString);data=this.interceptServerDataCallback_?this.interceptServerDataCallback_(pathString,data):data;var events=[];if(tag){if(isMerge){var taggedChildren=util.map(data,function(raw){return nodeFromJSON$1(raw)});events=this.serverSyncTree_.applyTaggedQueryMerge(path,taggedChildren,tag)}else{var taggedSnap=nodeFromJSON$1(data);events=this.serverSyncTree_.applyTaggedQueryOverwrite(path,taggedSnap,tag)}}else if(isMerge){var changedChildren=util.map(data,function(raw){return nodeFromJSON$1(raw)});events=this.serverSyncTree_.applyServerMerge(path,changedChildren)}else{var snap=nodeFromJSON$1(data);events=this.serverSyncTree_.applyServerOverwrite(path,snap)}var affectedPath=path;if(events.length>0){affectedPath=this.rerunTransactions_(path)}this.eventQueue_.raiseEventsForChangedPath(affectedPath,events)};Repo.prototype.interceptServerData_=function(callback){this.interceptServerDataCallback_=callback};Repo.prototype.onConnectStatus_=function(connectStatus){this.updateInfo_(\"connected\",connectStatus);if(connectStatus===false){this.runOnDisconnectEvents_()}};Repo.prototype.onServerInfoUpdate_=function(updates){var _this=this;each(updates,function(value,key){_this.updateInfo_(key,value)})};Repo.prototype.updateInfo_=function(pathString,value){var path=new Path(\"/.info/\"+pathString);var newNode=nodeFromJSON$1(value);this.infoData_.updateSnapshot(path,newNode);var events=this.infoSyncTree_.applyServerOverwrite(path,newNode);this.eventQueue_.raiseEventsForChangedPath(path,events)};Repo.prototype.getNextWriteId_=function(){return this.nextWriteId_++};Repo.prototype.setWithPriority=function(path,newVal,newPriority,onComplete){var _this=this;this.log_(\"set\",{path:path.toString(),value:newVal,priority:newPriority});var serverValues=this.generateServerValues();var newNodeUnresolved=nodeFromJSON$1(newVal,newPriority);var newNode=resolveDeferredValueSnapshot(newNodeUnresolved,serverValues);var writeId=this.getNextWriteId_();var events=this.serverSyncTree_.applyUserOverwrite(path,newNode,writeId,true);this.eventQueue_.queueEvents(events);this.server_.put(path.toString(),newNodeUnresolved.val(true),function(status,errorReason){var success=status===\"ok\";if(!success){warn(\"set at \"+path+\" failed: \"+status)}var clearEvents=_this.serverSyncTree_.ackUserWrite(writeId,!success);_this.eventQueue_.raiseEventsForChangedPath(path,clearEvents);_this.callOnCompleteCallback(onComplete,status,errorReason)});var affectedPath=this.abortTransactions_(path);this.rerunTransactions_(affectedPath);this.eventQueue_.raiseEventsForChangedPath(affectedPath,[])};Repo.prototype.update=function(path,childrenToMerge,onComplete){var _this=this;this.log_(\"update\",{path:path.toString(),value:childrenToMerge});var empty=true;var serverValues=this.generateServerValues();var changedChildren={};util.forEach(childrenToMerge,function(changedKey,changedValue){empty=false;var newNodeUnresolved=nodeFromJSON$1(changedValue);changedChildren[changedKey]=resolveDeferredValueSnapshot(newNodeUnresolved,serverValues)});if(!empty){var writeId_1=this.getNextWriteId_();var events=this.serverSyncTree_.applyUserMerge(path,changedChildren,writeId_1);this.eventQueue_.queueEvents(events);this.server_.merge(path.toString(),childrenToMerge,function(status,errorReason){var success=status===\"ok\";if(!success){warn(\"update at \"+path+\" failed: \"+status)}var clearEvents=_this.serverSyncTree_.ackUserWrite(writeId_1,!success);var affectedPath=clearEvents.length>0?_this.rerunTransactions_(path):path;_this.eventQueue_.raiseEventsForChangedPath(affectedPath,clearEvents);_this.callOnCompleteCallback(onComplete,status,errorReason)});util.forEach(childrenToMerge,function(changedPath){var affectedPath=_this.abortTransactions_(path.child(changedPath));_this.rerunTransactions_(affectedPath)});this.eventQueue_.raiseEventsForChangedPath(path,[])}else{log(\"update() called with empty data.  Don't do anything.\");this.callOnCompleteCallback(onComplete,\"ok\")}};Repo.prototype.runOnDisconnectEvents_=function(){var _this=this;this.log_(\"onDisconnectEvents\");var serverValues=this.generateServerValues();var resolvedOnDisconnectTree=resolveDeferredValueTree(this.onDisconnect_,serverValues);var events=[];resolvedOnDisconnectTree.forEachTree(Path.Empty,function(path,snap){events=events.concat(_this.serverSyncTree_.applyServerOverwrite(path,snap));var affectedPath=_this.abortTransactions_(path);_this.rerunTransactions_(affectedPath)});this.onDisconnect_=new SparseSnapshotTree;this.eventQueue_.raiseEventsForChangedPath(Path.Empty,events)};Repo.prototype.onDisconnectCancel=function(path,onComplete){var _this=this;this.server_.onDisconnectCancel(path.toString(),function(status,errorReason){if(status===\"ok\"){_this.onDisconnect_.forget(path)}_this.callOnCompleteCallback(onComplete,status,errorReason)})};Repo.prototype.onDisconnectSet=function(path,value,onComplete){var _this=this;var newNode=nodeFromJSON$1(value);this.server_.onDisconnectPut(path.toString(),newNode.val(true),function(status,errorReason){if(status===\"ok\"){_this.onDisconnect_.remember(path,newNode)}_this.callOnCompleteCallback(onComplete,status,errorReason)})};Repo.prototype.onDisconnectSetWithPriority=function(path,value,priority,onComplete){var _this=this;var newNode=nodeFromJSON$1(value,priority);this.server_.onDisconnectPut(path.toString(),newNode.val(true),function(status,errorReason){if(status===\"ok\"){_this.onDisconnect_.remember(path,newNode)}_this.callOnCompleteCallback(onComplete,status,errorReason)})};Repo.prototype.onDisconnectUpdate=function(path,childrenToMerge,onComplete){var _this=this;if(util.isEmpty(childrenToMerge)){log(\"onDisconnect().update() called with empty data.  Don't do anything.\");this.callOnCompleteCallback(onComplete,\"ok\");return}this.server_.onDisconnectMerge(path.toString(),childrenToMerge,function(status,errorReason){if(status===\"ok\"){util.forEach(childrenToMerge,function(childName,childNode){var newChildNode=nodeFromJSON$1(childNode);_this.onDisconnect_.remember(path.child(childName),newChildNode)})}_this.callOnCompleteCallback(onComplete,status,errorReason)})};Repo.prototype.addEventCallbackForQuery=function(query,eventRegistration){var events;if(query.path.getFront()===\".info\"){events=this.infoSyncTree_.addEventRegistration(query,eventRegistration)}else{events=this.serverSyncTree_.addEventRegistration(query,eventRegistration)}this.eventQueue_.raiseEventsAtPath(query.path,events)};Repo.prototype.removeEventCallbackForQuery=function(query,eventRegistration){var events;if(query.path.getFront()===\".info\"){events=this.infoSyncTree_.removeEventRegistration(query,eventRegistration)}else{events=this.serverSyncTree_.removeEventRegistration(query,eventRegistration)}this.eventQueue_.raiseEventsAtPath(query.path,events)};Repo.prototype.interrupt=function(){if(this.persistentConnection_){this.persistentConnection_.interrupt(INTERRUPT_REASON)}};Repo.prototype.resume=function(){if(this.persistentConnection_){this.persistentConnection_.resume(INTERRUPT_REASON)}};Repo.prototype.stats=function(showDelta){if(showDelta===void 0){showDelta=false}if(typeof console===\"undefined\")return;var stats;if(showDelta){if(!this.statsListener_)this.statsListener_=new StatsListener(this.stats_);stats=this.statsListener_.get()}else{stats=this.stats_.get()}var longestName=Object.keys(stats).reduce(function(previousValue,currentValue){return Math.max(currentValue.length,previousValue)},0);util.forEach(stats,function(stat,value){for(var i=stat.length;i<longestName+2;i++)stat+=\" \";console.log(stat+value)})};Repo.prototype.statsIncrementCounter=function(metric){this.stats_.incrementCounter(metric);this.statsReporter_.includeStat(metric)};Repo.prototype.log_=function(){var var_args=[];for(var _i=0;_i<arguments.length;_i++){var_args[_i]=arguments[_i]}var prefix=\"\";if(this.persistentConnection_){prefix=this.persistentConnection_.id+\":\"}log.apply(void 0,[prefix].concat(var_args))};Repo.prototype.callOnCompleteCallback=function(callback,status,errorReason){if(callback){exceptionGuard(function(){if(status==\"ok\"){callback(null)}else{var code=(status||\"error\").toUpperCase();var message=code;if(errorReason)message+=\": \"+errorReason;var error=new Error(message);error.code=code;callback(error)}})}};Object.defineProperty(Repo.prototype,\"database\",{get:function(){return this.__database||(this.__database=new Database(this))},enumerable:true,configurable:true});return Repo}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var RangedFilter=function(){function RangedFilter(params){this.indexedFilter_=new IndexedFilter(params.getIndex());this.index_=params.getIndex();this.startPost_=RangedFilter.getStartPost_(params);this.endPost_=RangedFilter.getEndPost_(params)}RangedFilter.prototype.getStartPost=function(){return this.startPost_};RangedFilter.prototype.getEndPost=function(){return this.endPost_};RangedFilter.prototype.matches=function(node){return this.index_.compare(this.getStartPost(),node)<=0&&this.index_.compare(node,this.getEndPost())<=0};RangedFilter.prototype.updateChild=function(snap,key,newChild,affectedPath,source,optChangeAccumulator){if(!this.matches(new NamedNode(key,newChild))){newChild=ChildrenNode.EMPTY_NODE}return this.indexedFilter_.updateChild(snap,key,newChild,affectedPath,source,optChangeAccumulator)};RangedFilter.prototype.updateFullNode=function(oldSnap,newSnap,optChangeAccumulator){if(newSnap.isLeafNode()){newSnap=ChildrenNode.EMPTY_NODE}var filtered=newSnap.withIndex(this.index_);filtered=filtered.updatePriority(ChildrenNode.EMPTY_NODE);var self=this;newSnap.forEachChild(PRIORITY_INDEX,function(key,childNode){if(!self.matches(new NamedNode(key,childNode))){filtered=filtered.updateImmediateChild(key,ChildrenNode.EMPTY_NODE)}});return this.indexedFilter_.updateFullNode(oldSnap,filtered,optChangeAccumulator)};RangedFilter.prototype.updatePriority=function(oldSnap,newPriority){return oldSnap};RangedFilter.prototype.filtersNodes=function(){return true};RangedFilter.prototype.getIndexedFilter=function(){return this.indexedFilter_};RangedFilter.prototype.getIndex=function(){return this.index_};RangedFilter.getStartPost_=function(params){if(params.hasStart()){var startName=params.getIndexStartName();return params.getIndex().makePost(params.getIndexStartValue(),startName)}else{return params.getIndex().minPost()}};RangedFilter.getEndPost_=function(params){if(params.hasEnd()){var endName=params.getIndexEndName();return params.getIndex().makePost(params.getIndexEndValue(),endName)}else{return params.getIndex().maxPost()}};return RangedFilter}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var LimitedFilter=function(){function LimitedFilter(params){this.rangedFilter_=new RangedFilter(params);this.index_=params.getIndex();this.limit_=params.getLimit();this.reverse_=!params.isViewFromLeft()}LimitedFilter.prototype.updateChild=function(snap,key,newChild,affectedPath,source,optChangeAccumulator){if(!this.rangedFilter_.matches(new NamedNode(key,newChild))){newChild=ChildrenNode.EMPTY_NODE}if(snap.getImmediateChild(key).equals(newChild)){return snap}else if(snap.numChildren()<this.limit_){return this.rangedFilter_.getIndexedFilter().updateChild(snap,key,newChild,affectedPath,source,optChangeAccumulator)}else{return this.fullLimitUpdateChild_(snap,key,newChild,source,optChangeAccumulator)}};LimitedFilter.prototype.updateFullNode=function(oldSnap,newSnap,optChangeAccumulator){var filtered;if(newSnap.isLeafNode()||newSnap.isEmpty()){filtered=ChildrenNode.EMPTY_NODE.withIndex(this.index_)}else{if(this.limit_*2<newSnap.numChildren()&&newSnap.isIndexed(this.index_)){filtered=ChildrenNode.EMPTY_NODE.withIndex(this.index_);var iterator=void 0;if(this.reverse_){iterator=newSnap.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_)}else{iterator=newSnap.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_)}var count=0;while(iterator.hasNext()&&count<this.limit_){var next=iterator.getNext();var inRange=void 0;if(this.reverse_){inRange=this.index_.compare(this.rangedFilter_.getStartPost(),next)<=0}else{inRange=this.index_.compare(next,this.rangedFilter_.getEndPost())<=0}if(inRange){filtered=filtered.updateImmediateChild(next.name,next.node);count++}else{break}}}else{filtered=newSnap.withIndex(this.index_);filtered=filtered.updatePriority(ChildrenNode.EMPTY_NODE);var startPost=void 0;var endPost=void 0;var cmp=void 0;var iterator=void 0;if(this.reverse_){iterator=filtered.getReverseIterator(this.index_);startPost=this.rangedFilter_.getEndPost();endPost=this.rangedFilter_.getStartPost();var indexCompare_1=this.index_.getCompare();cmp=function(a,b){return indexCompare_1(b,a)}}else{iterator=filtered.getIterator(this.index_);startPost=this.rangedFilter_.getStartPost();endPost=this.rangedFilter_.getEndPost();cmp=this.index_.getCompare()}var count=0;var foundStartPost=false;while(iterator.hasNext()){var next=iterator.getNext();if(!foundStartPost&&cmp(startPost,next)<=0){foundStartPost=true}var inRange=foundStartPost&&count<this.limit_&&cmp(next,endPost)<=0;if(inRange){count++}else{filtered=filtered.updateImmediateChild(next.name,ChildrenNode.EMPTY_NODE)}}}}return this.rangedFilter_.getIndexedFilter().updateFullNode(oldSnap,filtered,optChangeAccumulator)};LimitedFilter.prototype.updatePriority=function(oldSnap,newPriority){return oldSnap};LimitedFilter.prototype.filtersNodes=function(){return true};LimitedFilter.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()};LimitedFilter.prototype.getIndex=function(){return this.index_};LimitedFilter.prototype.fullLimitUpdateChild_=function(snap,childKey,childSnap,source,changeAccumulator){var cmp;if(this.reverse_){var indexCmp_1=this.index_.getCompare();cmp=function(a,b){return indexCmp_1(b,a)}}else{cmp=this.index_.getCompare()}var oldEventCache=snap;util.assert(oldEventCache.numChildren()==this.limit_,\"\");var newChildNamedNode=new NamedNode(childKey,childSnap);var windowBoundary=this.reverse_?oldEventCache.getFirstChild(this.index_):oldEventCache.getLastChild(this.index_);var inRange=this.rangedFilter_.matches(newChildNamedNode);if(oldEventCache.hasChild(childKey)){var oldChildSnap=oldEventCache.getImmediateChild(childKey);var nextChild=source.getChildAfterChild(this.index_,windowBoundary,this.reverse_);while(nextChild!=null&&(nextChild.name==childKey||oldEventCache.hasChild(nextChild.name))){nextChild=source.getChildAfterChild(this.index_,nextChild,this.reverse_)}var compareNext=nextChild==null?1:cmp(nextChild,newChildNamedNode);var remainsInWindow=inRange&&!childSnap.isEmpty()&&compareNext>=0;if(remainsInWindow){if(changeAccumulator!=null){changeAccumulator.trackChildChange(Change.childChangedChange(childKey,childSnap,oldChildSnap))}return oldEventCache.updateImmediateChild(childKey,childSnap)}else{if(changeAccumulator!=null){changeAccumulator.trackChildChange(Change.childRemovedChange(childKey,oldChildSnap))}var newEventCache=oldEventCache.updateImmediateChild(childKey,ChildrenNode.EMPTY_NODE);var nextChildInRange=nextChild!=null&&this.rangedFilter_.matches(nextChild);if(nextChildInRange){if(changeAccumulator!=null){changeAccumulator.trackChildChange(Change.childAddedChange(nextChild.name,nextChild.node))}return newEventCache.updateImmediateChild(nextChild.name,nextChild.node)}else{return newEventCache}}}else if(childSnap.isEmpty()){return snap}else if(inRange){if(cmp(windowBoundary,newChildNamedNode)>=0){if(changeAccumulator!=null){changeAccumulator.trackChildChange(Change.childRemovedChange(windowBoundary.name,windowBoundary.node));changeAccumulator.trackChildChange(Change.childAddedChange(childKey,childSnap))}return oldEventCache.updateImmediateChild(childKey,childSnap).updateImmediateChild(windowBoundary.name,ChildrenNode.EMPTY_NODE)}else{return snap}}else{return snap}};return LimitedFilter}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var QueryParams=function(){function QueryParams(){this.limitSet_=false;this.startSet_=false;this.startNameSet_=false;this.endSet_=false;this.endNameSet_=false;this.limit_=0;this.viewFrom_=\"\";this.indexStartValue_=null;this.indexStartName_=\"\";this.indexEndValue_=null;this.indexEndName_=\"\";this.index_=PRIORITY_INDEX}QueryParams.prototype.hasStart=function(){return this.startSet_};QueryParams.prototype.isViewFromLeft=function(){if(this.viewFrom_===\"\"){return this.startSet_}else{return this.viewFrom_===QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT}};QueryParams.prototype.getIndexStartValue=function(){util.assert(this.startSet_,\"Only valid if start has been set\");return this.indexStartValue_};QueryParams.prototype.getIndexStartName=function(){util.assert(this.startSet_,\"Only valid if start has been set\");if(this.startNameSet_){return this.indexStartName_}else{return MIN_NAME}};QueryParams.prototype.hasEnd=function(){return this.endSet_};QueryParams.prototype.getIndexEndValue=function(){util.assert(this.endSet_,\"Only valid if end has been set\");return this.indexEndValue_};QueryParams.prototype.getIndexEndName=function(){util.assert(this.endSet_,\"Only valid if end has been set\");if(this.endNameSet_){return this.indexEndName_}else{return MAX_NAME}};QueryParams.prototype.hasLimit=function(){return this.limitSet_};QueryParams.prototype.hasAnchoredLimit=function(){return this.limitSet_&&this.viewFrom_!==\"\"};QueryParams.prototype.getLimit=function(){util.assert(this.limitSet_,\"Only valid if limit has been set\");return this.limit_};QueryParams.prototype.getIndex=function(){return this.index_};QueryParams.prototype.copy_=function(){var copy=new QueryParams;copy.limitSet_=this.limitSet_;copy.limit_=this.limit_;copy.startSet_=this.startSet_;copy.indexStartValue_=this.indexStartValue_;copy.startNameSet_=this.startNameSet_;copy.indexStartName_=this.indexStartName_;copy.endSet_=this.endSet_;copy.indexEndValue_=this.indexEndValue_;copy.endNameSet_=this.endNameSet_;copy.indexEndName_=this.indexEndName_;copy.index_=this.index_;copy.viewFrom_=this.viewFrom_;return copy};QueryParams.prototype.limit=function(newLimit){var newParams=this.copy_();newParams.limitSet_=true;newParams.limit_=newLimit;newParams.viewFrom_=\"\";return newParams};QueryParams.prototype.limitToFirst=function(newLimit){var newParams=this.copy_();newParams.limitSet_=true;newParams.limit_=newLimit;newParams.viewFrom_=QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT;return newParams};QueryParams.prototype.limitToLast=function(newLimit){var newParams=this.copy_();newParams.limitSet_=true;newParams.limit_=newLimit;newParams.viewFrom_=QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT;return newParams};QueryParams.prototype.startAt=function(indexValue,key){var newParams=this.copy_();newParams.startSet_=true;if(indexValue===undefined){indexValue=null}newParams.indexStartValue_=indexValue;if(key!=null){newParams.startNameSet_=true;newParams.indexStartName_=key}else{newParams.startNameSet_=false;newParams.indexStartName_=\"\"}return newParams};QueryParams.prototype.endAt=function(indexValue,key){var newParams=this.copy_();newParams.endSet_=true;if(indexValue===undefined){indexValue=null}newParams.indexEndValue_=indexValue;if(key!==undefined){newParams.endNameSet_=true;newParams.indexEndName_=key}else{newParams.endNameSet_=false;newParams.indexEndName_=\"\"}return newParams};QueryParams.prototype.orderBy=function(index){var newParams=this.copy_();newParams.index_=index;return newParams};QueryParams.prototype.getQueryObject=function(){var WIRE_PROTOCOL_CONSTANTS=QueryParams.WIRE_PROTOCOL_CONSTANTS_;var obj={};if(this.startSet_){obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_VALUE]=this.indexStartValue_;if(this.startNameSet_){obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_NAME]=this.indexStartName_}}if(this.endSet_){obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_VALUE]=this.indexEndValue_;if(this.endNameSet_){obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_NAME]=this.indexEndName_}}if(this.limitSet_){obj[WIRE_PROTOCOL_CONSTANTS.LIMIT]=this.limit_;var viewFrom=this.viewFrom_;if(viewFrom===\"\"){if(this.isViewFromLeft()){viewFrom=WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_LEFT}else{viewFrom=WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_RIGHT}}obj[WIRE_PROTOCOL_CONSTANTS.VIEW_FROM]=viewFrom}if(this.index_!==PRIORITY_INDEX){obj[WIRE_PROTOCOL_CONSTANTS.INDEX]=this.index_.toString()}return obj};QueryParams.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)};QueryParams.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==PRIORITY_INDEX};QueryParams.prototype.getNodeFilter=function(){if(this.loadsAllData()){return new IndexedFilter(this.getIndex())}else if(this.hasLimit()){return new LimitedFilter(this)}else{return new RangedFilter(this)}};QueryParams.prototype.toRestQueryStringParameters=function(){var REST_CONSTANTS=QueryParams.REST_QUERY_CONSTANTS_;var qs={};if(this.isDefault()){return qs}var orderBy;if(this.index_===PRIORITY_INDEX){orderBy=REST_CONSTANTS.PRIORITY_INDEX}else if(this.index_===VALUE_INDEX){orderBy=REST_CONSTANTS.VALUE_INDEX}else if(this.index_===KEY_INDEX){orderBy=REST_CONSTANTS.KEY_INDEX}else{util.assert(this.index_ instanceof PathIndex,\"Unrecognized index type!\");orderBy=this.index_.toString()}qs[REST_CONSTANTS.ORDER_BY]=util.stringify(orderBy);if(this.startSet_){qs[REST_CONSTANTS.START_AT]=util.stringify(this.indexStartValue_);if(this.startNameSet_){qs[REST_CONSTANTS.START_AT]+=\",\"+util.stringify(this.indexStartName_)}}if(this.endSet_){qs[REST_CONSTANTS.END_AT]=util.stringify(this.indexEndValue_);if(this.endNameSet_){qs[REST_CONSTANTS.END_AT]+=\",\"+util.stringify(this.indexEndName_)}}if(this.limitSet_){if(this.isViewFromLeft()){qs[REST_CONSTANTS.LIMIT_TO_FIRST]=this.limit_}else{qs[REST_CONSTANTS.LIMIT_TO_LAST]=this.limit_}}return qs};QueryParams.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:\"sp\",INDEX_START_NAME:\"sn\",INDEX_END_VALUE:\"ep\",INDEX_END_NAME:\"en\",LIMIT:\"l\",VIEW_FROM:\"vf\",VIEW_FROM_LEFT:\"l\",VIEW_FROM_RIGHT:\"r\",INDEX:\"i\"};QueryParams.REST_QUERY_CONSTANTS_={ORDER_BY:\"orderBy\",PRIORITY_INDEX:\"$priority\",VALUE_INDEX:\"$value\",KEY_INDEX:\"$key\",START_AT:\"startAt\",END_AT:\"endAt\",LIMIT_TO_FIRST:\"limitToFirst\",LIMIT_TO_LAST:\"limitToLast\"};QueryParams.DEFAULT=new QueryParams;return QueryParams}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Reference=function(_super){tslib_1.__extends(Reference,_super);function Reference(repo,path){var _this=this;if(!(repo instanceof Repo)){throw new Error(\"new Reference() no longer supported - use app.database().\")}_this=_super.call(this,repo,path,QueryParams.DEFAULT,false)||this;return _this}Reference.prototype.getKey=function(){util.validateArgCount(\"Reference.key\",0,0,arguments.length);if(this.path.isEmpty())return null;else return this.path.getBack()};Reference.prototype.child=function(pathString){util.validateArgCount(\"Reference.child\",1,1,arguments.length);if(typeof pathString===\"number\"){pathString=String(pathString)}else if(!(pathString instanceof Path)){if(this.path.getFront()===null)validateRootPathString(\"Reference.child\",1,pathString,false);else validatePathString(\"Reference.child\",1,pathString,false)}return new Reference(this.repo,this.path.child(pathString))};Reference.prototype.getParent=function(){util.validateArgCount(\"Reference.parent\",0,0,arguments.length);var parentPath=this.path.parent();return parentPath===null?null:new Reference(this.repo,parentPath)};Reference.prototype.getRoot=function(){util.validateArgCount(\"Reference.root\",0,0,arguments.length);var ref=this;while(ref.getParent()!==null){ref=ref.getParent()}return ref};Reference.prototype.databaseProp=function(){return this.repo.database};Reference.prototype.set=function(newVal,onComplete){util.validateArgCount(\"Reference.set\",1,2,arguments.length);validateWritablePath(\"Reference.set\",this.path);validateFirebaseDataArg(\"Reference.set\",1,newVal,this.path,false);util.validateCallback(\"Reference.set\",2,onComplete,true);var deferred=new util.Deferred;this.repo.setWithPriority(this.path,newVal,null,deferred.wrapCallback(onComplete));return deferred.promise};Reference.prototype.update=function(objectToMerge,onComplete){util.validateArgCount(\"Reference.update\",1,2,arguments.length);validateWritablePath(\"Reference.update\",this.path);if(Array.isArray(objectToMerge)){var newObjectToMerge={};for(var i=0;i<objectToMerge.length;++i){newObjectToMerge[\"\"+i]=objectToMerge[i]}objectToMerge=newObjectToMerge;warn(\"Passing an Array to Firebase.update() is deprecated. \"+\"Use set() if you want to overwrite the existing data, or \"+\"an Object with integer keys if you really do want to \"+\"only update some of the children.\")}validateFirebaseMergeDataArg(\"Reference.update\",1,objectToMerge,this.path,false);util.validateCallback(\"Reference.update\",2,onComplete,true);var deferred=new util.Deferred;this.repo.update(this.path,objectToMerge,deferred.wrapCallback(onComplete));return deferred.promise};Reference.prototype.setWithPriority=function(newVal,newPriority,onComplete){util.validateArgCount(\"Reference.setWithPriority\",2,3,arguments.length);validateWritablePath(\"Reference.setWithPriority\",this.path);validateFirebaseDataArg(\"Reference.setWithPriority\",1,newVal,this.path,false);validatePriority(\"Reference.setWithPriority\",2,newPriority,false);util.validateCallback(\"Reference.setWithPriority\",3,onComplete,true);if(this.getKey()===\".length\"||this.getKey()===\".keys\")throw\"Reference.setWithPriority failed: \"+this.getKey()+\" is a read-only object.\";var deferred=new util.Deferred;this.repo.setWithPriority(this.path,newVal,newPriority,deferred.wrapCallback(onComplete));return deferred.promise};Reference.prototype.remove=function(onComplete){util.validateArgCount(\"Reference.remove\",0,1,arguments.length);validateWritablePath(\"Reference.remove\",this.path);util.validateCallback(\"Reference.remove\",1,onComplete,true);return this.set(null,onComplete)};Reference.prototype.transaction=function(transactionUpdate,onComplete,applyLocally){util.validateArgCount(\"Reference.transaction\",1,3,arguments.length);validateWritablePath(\"Reference.transaction\",this.path);util.validateCallback(\"Reference.transaction\",1,transactionUpdate,false);util.validateCallback(\"Reference.transaction\",2,onComplete,true);validateBoolean(\"Reference.transaction\",3,applyLocally,true);if(this.getKey()===\".length\"||this.getKey()===\".keys\")throw\"Reference.transaction failed: \"+this.getKey()+\" is a read-only object.\";if(applyLocally===undefined)applyLocally=true;var deferred=new util.Deferred;if(typeof onComplete===\"function\"){deferred.promise.catch(function(){})}var promiseComplete=function(error,committed,snapshot){if(error){deferred.reject(error)}else{deferred.resolve(new TransactionResult(committed,snapshot))}if(typeof onComplete===\"function\"){onComplete(error,committed,snapshot)}};this.repo.startTransaction(this.path,transactionUpdate,promiseComplete,applyLocally);return deferred.promise};Reference.prototype.setPriority=function(priority,onComplete){util.validateArgCount(\"Reference.setPriority\",1,2,arguments.length);validateWritablePath(\"Reference.setPriority\",this.path);validatePriority(\"Reference.setPriority\",1,priority,false);util.validateCallback(\"Reference.setPriority\",2,onComplete,true);var deferred=new util.Deferred;this.repo.setWithPriority(this.path.child(\".priority\"),priority,null,deferred.wrapCallback(onComplete));return deferred.promise};Reference.prototype.push=function(value,onComplete){util.validateArgCount(\"Reference.push\",0,2,arguments.length);validateWritablePath(\"Reference.push\",this.path);validateFirebaseDataArg(\"Reference.push\",1,value,this.path,true);util.validateCallback(\"Reference.push\",2,onComplete,true);var now=this.repo.serverTime();var name=nextPushId(now);var thennablePushRef=this.child(name);var pushRef=this.child(name);var promise;if(value!=null){promise=thennablePushRef.set(value,onComplete).then(function(){return pushRef})}else{promise=Promise.resolve(pushRef)}thennablePushRef.then=promise.then.bind(promise);thennablePushRef.catch=promise.then.bind(promise,undefined);if(typeof onComplete===\"function\"){promise.catch(function(){})}return thennablePushRef};Reference.prototype.onDisconnect=function(){validateWritablePath(\"Reference.onDisconnect\",this.path);return new OnDisconnect(this.repo,this.path)};Object.defineProperty(Reference.prototype,\"database\",{get:function(){return this.databaseProp()},enumerable:true,configurable:true});Object.defineProperty(Reference.prototype,\"key\",{get:function(){return this.getKey()},enumerable:true,configurable:true});Object.defineProperty(Reference.prototype,\"parent\",{get:function(){return this.getParent()},enumerable:true,configurable:true});Object.defineProperty(Reference.prototype,\"root\",{get:function(){return this.getRoot()},enumerable:true,configurable:true});return Reference}(Query);Query.__referenceConstructor=Reference;SyncPoint.__referenceConstructor=Reference;\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var TreeNode=function(){function TreeNode(){this.children={};this.childCount=0;this.value=null}return TreeNode}();var Tree=function(){function Tree(name_,parent_,node_){if(name_===void 0){name_=\"\"}if(parent_===void 0){parent_=null}if(node_===void 0){node_=new TreeNode}this.name_=name_;this.parent_=parent_;this.node_=node_}Tree.prototype.subTree=function(pathObj){var path=pathObj instanceof Path?pathObj:new Path(pathObj);var child=this,next;while((next=path.getFront())!==null){var childNode=util.safeGet(child.node_.children,next)||new TreeNode;child=new Tree(next,child,childNode);path=path.popFront()}return child};Tree.prototype.getValue=function(){return this.node_.value};Tree.prototype.setValue=function(value){util.assert(typeof value!==\"undefined\",\"Cannot set value to undefined\");this.node_.value=value;this.updateParents_()};Tree.prototype.clear=function(){this.node_.value=null;this.node_.children={};this.node_.childCount=0;this.updateParents_()};Tree.prototype.hasChildren=function(){return this.node_.childCount>0};Tree.prototype.isEmpty=function(){return this.getValue()===null&&!this.hasChildren()};Tree.prototype.forEachChild=function(action){var _this=this;util.forEach(this.node_.children,function(child,childTree){action(new Tree(child,_this,childTree))})};Tree.prototype.forEachDescendant=function(action,includeSelf,childrenFirst){if(includeSelf&&!childrenFirst)action(this);this.forEachChild(function(child){child.forEachDescendant(action,true,childrenFirst)});if(includeSelf&&childrenFirst)action(this)};Tree.prototype.forEachAncestor=function(action,includeSelf){var node=includeSelf?this:this.parent();while(node!==null){if(action(node)){return true}node=node.parent()}return false};Tree.prototype.forEachImmediateDescendantWithValue=function(action){this.forEachChild(function(child){if(child.getValue()!==null)action(child);else child.forEachImmediateDescendantWithValue(action)})};Tree.prototype.path=function(){return new Path(this.parent_===null?this.name_:this.parent_.path()+\"/\"+this.name_)};Tree.prototype.name=function(){return this.name_};Tree.prototype.parent=function(){return this.parent_};Tree.prototype.updateParents_=function(){if(this.parent_!==null)this.parent_.updateChild_(this.name_,this)};Tree.prototype.updateChild_=function(childName,child){var childEmpty=child.isEmpty();var childExists=util.contains(this.node_.children,childName);if(childEmpty&&childExists){delete this.node_.children[childName];this.node_.childCount--;this.updateParents_()}else if(!childEmpty&&!childExists){this.node_.children[childName]=child.node_;this.node_.childCount++;this.updateParents_()}};return Tree}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var TransactionStatus;(function(TransactionStatus){TransactionStatus[TransactionStatus[\"RUN\"]=0]=\"RUN\";TransactionStatus[TransactionStatus[\"SENT\"]=1]=\"SENT\";TransactionStatus[TransactionStatus[\"COMPLETED\"]=2]=\"COMPLETED\";TransactionStatus[TransactionStatus[\"SENT_NEEDS_ABORT\"]=3]=\"SENT_NEEDS_ABORT\";TransactionStatus[TransactionStatus[\"NEEDS_ABORT\"]=4]=\"NEEDS_ABORT\"})(TransactionStatus||(TransactionStatus={}));Repo.MAX_TRANSACTION_RETRIES_=25;Repo.prototype.transactions_init_=function(){this.transactionQueueTree_=new Tree};Repo.prototype.startTransaction=function(path,transactionUpdate,onComplete,applyLocally){this.log_(\"transaction on \"+path);var valueCallback=function(){};var watchRef=new Reference(this,path);watchRef.on(\"value\",valueCallback);var unwatcher=function(){watchRef.off(\"value\",valueCallback)};var transaction={path:path,update:transactionUpdate,onComplete:onComplete,status:null,order:LUIDGenerator(),applyLocally:applyLocally,retryCount:0,unwatcher:unwatcher,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null};var currentState=this.getLatestState_(path);transaction.currentInputSnapshot=currentState;var newVal=transaction.update(currentState.val());if(newVal===undefined){transaction.unwatcher();transaction.currentOutputSnapshotRaw=null;transaction.currentOutputSnapshotResolved=null;if(transaction.onComplete){var snapshot=new DataSnapshot(transaction.currentInputSnapshot,new Reference(this,transaction.path),PRIORITY_INDEX);transaction.onComplete(null,false,snapshot)}}else{validateFirebaseData(\"transaction failed: Data returned \",newVal,transaction.path);transaction.status=TransactionStatus.RUN;var queueNode=this.transactionQueueTree_.subTree(path);var nodeQueue=queueNode.getValue()||[];nodeQueue.push(transaction);queueNode.setValue(nodeQueue);var priorityForNode=void 0;if(typeof newVal===\"object\"&&newVal!==null&&util.contains(newVal,\".priority\")){priorityForNode=util.safeGet(newVal,\".priority\");util.assert(isValidPriority(priorityForNode),\"Invalid priority returned by transaction. \"+\"Priority must be a valid string, finite number, server value, or null.\")}else{var currentNode=this.serverSyncTree_.calcCompleteEventCache(path)||ChildrenNode.EMPTY_NODE;priorityForNode=currentNode.getPriority().val()}priorityForNode=priorityForNode;var serverValues=this.generateServerValues();var newNodeUnresolved=nodeFromJSON$1(newVal,priorityForNode);var newNode=resolveDeferredValueSnapshot(newNodeUnresolved,serverValues);transaction.currentOutputSnapshotRaw=newNodeUnresolved;transaction.currentOutputSnapshotResolved=newNode;transaction.currentWriteId=this.getNextWriteId_();var events=this.serverSyncTree_.applyUserOverwrite(path,newNode,transaction.currentWriteId,transaction.applyLocally);this.eventQueue_.raiseEventsForChangedPath(path,events);this.sendReadyTransactions_()}};Repo.prototype.getLatestState_=function(path,excludeSets){return this.serverSyncTree_.calcCompleteEventCache(path,excludeSets)||ChildrenNode.EMPTY_NODE};Repo.prototype.sendReadyTransactions_=function(node){var _this=this;if(node===void 0){node=this.transactionQueueTree_}if(!node){this.pruneCompletedTransactionsBelowNode_(node)}if(node.getValue()!==null){var queue=this.buildTransactionQueue_(node);util.assert(queue.length>0,\"Sending zero length transaction queue\");var allRun=queue.every(function(transaction){return transaction.status===TransactionStatus.RUN});if(allRun){this.sendTransactionQueue_(node.path(),queue)}}else if(node.hasChildren()){node.forEachChild(function(childNode){_this.sendReadyTransactions_(childNode)})}};Repo.prototype.sendTransactionQueue_=function(path,queue){var _this=this;var setsToIgnore=queue.map(function(txn){return txn.currentWriteId});var latestState=this.getLatestState_(path,setsToIgnore);var snapToSend=latestState;var latestHash=latestState.hash();for(var i=0;i<queue.length;i++){var txn=queue[i];util.assert(txn.status===TransactionStatus.RUN,\"tryToSendTransactionQueue_: items in queue should all be run.\");txn.status=TransactionStatus.SENT;txn.retryCount++;var relativePath=Path.relativePath(path,txn.path);snapToSend=snapToSend.updateChild(relativePath,txn.currentOutputSnapshotRaw)}var dataToSend=snapToSend.val(true);var pathToSend=path;this.server_.put(pathToSend.toString(),dataToSend,function(status){_this.log_(\"transaction put response\",{path:pathToSend.toString(),status:status});var events=[];if(status===\"ok\"){var callbacks=[];for(var i=0;i<queue.length;i++){queue[i].status=TransactionStatus.COMPLETED;events=events.concat(_this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId));if(queue[i].onComplete){var node=queue[i].currentOutputSnapshotResolved;var ref=new Reference(_this,queue[i].path);var snapshot=new DataSnapshot(node,ref,PRIORITY_INDEX);callbacks.push(queue[i].onComplete.bind(null,null,true,snapshot))}queue[i].unwatcher()}_this.pruneCompletedTransactionsBelowNode_(_this.transactionQueueTree_.subTree(path));_this.sendReadyTransactions_();_this.eventQueue_.raiseEventsForChangedPath(path,events);for(var i=0;i<callbacks.length;i++){exceptionGuard(callbacks[i])}}else{if(status===\"datastale\"){for(var i=0;i<queue.length;i++){if(queue[i].status===TransactionStatus.SENT_NEEDS_ABORT)queue[i].status=TransactionStatus.NEEDS_ABORT;else queue[i].status=TransactionStatus.RUN}}else{warn(\"transaction at \"+pathToSend.toString()+\" failed: \"+status);for(var i=0;i<queue.length;i++){queue[i].status=TransactionStatus.NEEDS_ABORT;queue[i].abortReason=status}}_this.rerunTransactions_(path)}},latestHash)};Repo.prototype.rerunTransactions_=function(changedPath){var rootMostTransactionNode=this.getAncestorTransactionNode_(changedPath);var path=rootMostTransactionNode.path();var queue=this.buildTransactionQueue_(rootMostTransactionNode);this.rerunTransactionQueue_(queue,path);return path};Repo.prototype.rerunTransactionQueue_=function(queue,path){if(queue.length===0){return}var callbacks=[];var events=[];var txnsToRerun=queue.filter(function(q){return q.status===TransactionStatus.RUN});var setsToIgnore=txnsToRerun.map(function(q){return q.currentWriteId});for(var i=0;i<queue.length;i++){var transaction=queue[i];var relativePath=Path.relativePath(path,transaction.path);var abortTransaction=false,abortReason=void 0;util.assert(relativePath!==null,\"rerunTransactionsUnderNode_: relativePath should not be null.\");if(transaction.status===TransactionStatus.NEEDS_ABORT){abortTransaction=true;abortReason=transaction.abortReason;events=events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId,true))}else if(transaction.status===TransactionStatus.RUN){if(transaction.retryCount>=Repo.MAX_TRANSACTION_RETRIES_){abortTransaction=true;abortReason=\"maxretry\";events=events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId,true))}else{var currentNode=this.getLatestState_(transaction.path,setsToIgnore);transaction.currentInputSnapshot=currentNode;var newData=queue[i].update(currentNode.val());if(newData!==undefined){validateFirebaseData(\"transaction failed: Data returned \",newData,transaction.path);var newDataNode=nodeFromJSON$1(newData);var hasExplicitPriority=typeof newData===\"object\"&&newData!=null&&util.contains(newData,\".priority\");if(!hasExplicitPriority){newDataNode=newDataNode.updatePriority(currentNode.getPriority())}var oldWriteId=transaction.currentWriteId;var serverValues=this.generateServerValues();var newNodeResolved=resolveDeferredValueSnapshot(newDataNode,serverValues);transaction.currentOutputSnapshotRaw=newDataNode;transaction.currentOutputSnapshotResolved=newNodeResolved;transaction.currentWriteId=this.getNextWriteId_();setsToIgnore.splice(setsToIgnore.indexOf(oldWriteId),1);events=events.concat(this.serverSyncTree_.applyUserOverwrite(transaction.path,newNodeResolved,transaction.currentWriteId,transaction.applyLocally));events=events.concat(this.serverSyncTree_.ackUserWrite(oldWriteId,true))}else{abortTransaction=true;abortReason=\"nodata\";events=events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId,true))}}}this.eventQueue_.raiseEventsForChangedPath(path,events);events=[];if(abortTransaction){queue[i].status=TransactionStatus.COMPLETED;(function(unwatcher){setTimeout(unwatcher,Math.floor(0))})(queue[i].unwatcher);if(queue[i].onComplete){if(abortReason===\"nodata\"){var ref=new Reference(this,queue[i].path);var lastInput=queue[i].currentInputSnapshot;var snapshot=new DataSnapshot(lastInput,ref,PRIORITY_INDEX);callbacks.push(queue[i].onComplete.bind(null,null,false,snapshot))}else{callbacks.push(queue[i].onComplete.bind(null,new Error(abortReason),false,null))}}}}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(var i=0;i<callbacks.length;i++){exceptionGuard(callbacks[i])}this.sendReadyTransactions_()};Repo.prototype.getAncestorTransactionNode_=function(path){var front;var transactionNode=this.transactionQueueTree_;while((front=path.getFront())!==null&&transactionNode.getValue()===null){transactionNode=transactionNode.subTree(front);path=path.popFront()}return transactionNode};Repo.prototype.buildTransactionQueue_=function(transactionNode){var transactionQueue=[];this.aggregateTransactionQueuesForNode_(transactionNode,transactionQueue);transactionQueue.sort(function(a,b){return a.order-b.order});return transactionQueue};Repo.prototype.aggregateTransactionQueuesForNode_=function(node,queue){var _this=this;var nodeQueue=node.getValue();if(nodeQueue!==null){for(var i=0;i<nodeQueue.length;i++){queue.push(nodeQueue[i])}}node.forEachChild(function(child){_this.aggregateTransactionQueuesForNode_(child,queue)})};Repo.prototype.pruneCompletedTransactionsBelowNode_=function(node){var _this=this;var queue=node.getValue();if(queue){var to=0;for(var from=0;from<queue.length;from++){if(queue[from].status!==TransactionStatus.COMPLETED){queue[to]=queue[from];to++}}queue.length=to;node.setValue(queue.length>0?queue:null)}node.forEachChild(function(childNode){_this.pruneCompletedTransactionsBelowNode_(childNode)})};Repo.prototype.abortTransactions_=function(path){var _this=this;var affectedPath=this.getAncestorTransactionNode_(path).path();var transactionNode=this.transactionQueueTree_.subTree(path);transactionNode.forEachAncestor(function(node){_this.abortTransactionsOnNode_(node)});this.abortTransactionsOnNode_(transactionNode);transactionNode.forEachDescendant(function(node){_this.abortTransactionsOnNode_(node)});return affectedPath};Repo.prototype.abortTransactionsOnNode_=function(node){var queue=node.getValue();if(queue!==null){var callbacks=[];var events=[];var lastSent=-1;for(var i=0;i<queue.length;i++){if(queue[i].status===TransactionStatus.SENT_NEEDS_ABORT);else if(queue[i].status===TransactionStatus.SENT){util.assert(lastSent===i-1,\"All SENT items should be at beginning of queue.\");lastSent=i;queue[i].status=TransactionStatus.SENT_NEEDS_ABORT;queue[i].abortReason=\"set\"}else{util.assert(queue[i].status===TransactionStatus.RUN,\"Unexpected transaction status in abort\");queue[i].unwatcher();events=events.concat(this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId,true));if(queue[i].onComplete){var snapshot=null;callbacks.push(queue[i].onComplete.bind(null,new Error(\"set\"),false,snapshot))}}}if(lastSent===-1){node.setValue(null)}else{queue.length=lastSent+1}this.eventQueue_.raiseEventsForChangedPath(node.path(),events);for(var i=0;i<callbacks.length;i++){exceptionGuard(callbacks[i])}}};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var DATABASE_URL_OPTION=\"databaseURL\";var _staticInstance;var RepoManager=function(){function RepoManager(){this.repos_={};this.useRestClient_=false}RepoManager.getInstance=function(){if(!_staticInstance){_staticInstance=new RepoManager}return _staticInstance};RepoManager.prototype.interrupt=function(){for(var appName in this.repos_){for(var dbUrl in this.repos_[appName]){this.repos_[appName][dbUrl].interrupt()}}};RepoManager.prototype.resume=function(){for(var appName in this.repos_){for(var dbUrl in this.repos_[appName]){this.repos_[appName][dbUrl].resume()}}};RepoManager.prototype.databaseFromApp=function(app,url){var dbUrl=url||app.options[DATABASE_URL_OPTION];if(dbUrl===undefined){fatal(\"Can't determine Firebase Database URL.  Be sure to include \"+DATABASE_URL_OPTION+\" option when calling firebase.initializeApp().\")}var parsedUrl=parseRepoInfo(dbUrl);var repoInfo=parsedUrl.repoInfo;validateUrl(\"Invalid Firebase Database URL\",1,parsedUrl);if(!parsedUrl.path.isEmpty()){fatal(\"Database URL must point to the root of a Firebase Database \"+\"(not including a child path).\")}var repo=this.createRepo(repoInfo,app);return repo.database};RepoManager.prototype.deleteRepo=function(repo){var appRepos=util.safeGet(this.repos_,repo.app.name);if(!appRepos||util.safeGet(appRepos,repo.repoInfo_.toURLString())!==repo){fatal(\"Database \"+repo.app.name+\"(\"+repo.repoInfo_+\") has already been deleted.\")}repo.interrupt();delete appRepos[repo.repoInfo_.toURLString()]};RepoManager.prototype.createRepo=function(repoInfo,app){var appRepos=util.safeGet(this.repos_,app.name);if(!appRepos){appRepos={};this.repos_[app.name]=appRepos}var repo=util.safeGet(appRepos,repoInfo.toURLString());if(repo){fatal(\"Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.\")}repo=new Repo(repoInfo,this.useRestClient_,app);appRepos[repoInfo.toURLString()]=repo;return repo};RepoManager.prototype.forceRestClient=function(forceRestClient){this.useRestClient_=forceRestClient};return RepoManager}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Database=function(){function Database(repo_){this.repo_=repo_;if(!(repo_ instanceof Repo)){fatal(\"Don't call new Database() directly - please use firebase.database().\")}this.root_=new Reference(repo_,Path.Empty);this.INTERNAL=new DatabaseInternals(this)}Object.defineProperty(Database.prototype,\"app\",{get:function(){return this.repo_.app},enumerable:true,configurable:true});Database.prototype.ref=function(path){this.checkDeleted_(\"ref\");util.validateArgCount(\"database.ref\",0,1,arguments.length);if(path instanceof Reference){return this.refFromURL(path.toString())}return path!==undefined?this.root_.child(path):this.root_};Database.prototype.refFromURL=function(url){var apiName=\"database.refFromURL\";this.checkDeleted_(apiName);util.validateArgCount(apiName,1,1,arguments.length);var parsedURL=parseRepoInfo(url);validateUrl(apiName,1,parsedURL);var repoInfo=parsedURL.repoInfo;if(repoInfo.host!==this.repo_.repoInfo_.host){fatal(apiName+\": Host name does not match the current database: \"+\"(found \"+repoInfo.host+\" but expected \"+this.repo_.repoInfo_.host+\")\")}return this.ref(parsedURL.path.toString())};Database.prototype.checkDeleted_=function(apiName){if(this.repo_===null){fatal(\"Cannot call \"+apiName+\" on a deleted database.\")}};Database.prototype.goOffline=function(){util.validateArgCount(\"database.goOffline\",0,0,arguments.length);this.checkDeleted_(\"goOffline\");this.repo_.interrupt()};Database.prototype.goOnline=function(){util.validateArgCount(\"database.goOnline\",0,0,arguments.length);this.checkDeleted_(\"goOnline\");this.repo_.resume()};Database.ServerValue={TIMESTAMP:{\".sv\":\"timestamp\"}};return Database}();var DatabaseInternals=function(){function DatabaseInternals(database){this.database=database}DatabaseInternals.prototype.delete=function(){return tslib_1.__awaiter(this,void 0,void 0,function(){return tslib_1.__generator(this,function(_a){this.database.checkDeleted_(\"delete\");RepoManager.getInstance().deleteRepo(this.database.repo_);this.database.repo_=null;this.database.root_=null;this.database.INTERNAL=null;this.database=null;return[2]})})};return DatabaseInternals}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var forceLongPolling=function(){WebSocketConnection.forceDisallow();BrowserPollConnection.forceAllow()};var forceWebSockets=function(){BrowserPollConnection.forceDisallow()};var isWebSocketsAvailable=function(){return WebSocketConnection[\"isAvailable\"]()};var setSecurityDebugCallback=function(ref,callback){ref.repo.persistentConnection_.securityDebugCallback_=callback};var stats=function(ref,showDelta){ref.repo.stats(showDelta)};var statsIncrementCounter=function(ref,metric){ref.repo.statsIncrementCounter(metric)};var dataUpdateCount=function(ref){return ref.repo.dataUpdateCount};var interceptServerData=function(ref,callback){return ref.repo.interceptServerData_(callback)};var INTERNAL=Object.freeze({forceLongPolling:forceLongPolling,forceWebSockets:forceWebSockets,isWebSocketsAvailable:isWebSocketsAvailable,setSecurityDebugCallback:setSecurityDebugCallback,stats:stats,statsIncrementCounter:statsIncrementCounter,dataUpdateCount:dataUpdateCount,interceptServerData:interceptServerData});\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var DataConnection=PersistentConnection;PersistentConnection.prototype.simpleListen=function(pathString,onComplete){this.sendRequest(\"q\",{p:pathString},onComplete)};PersistentConnection.prototype.echo=function(data,onEcho){this.sendRequest(\"echo\",{d:data},onEcho)};var RealTimeConnection=Connection;var hijackHash=function(newHash){var oldPut=PersistentConnection.prototype.put;PersistentConnection.prototype.put=function(pathString,data,opt_onComplete,opt_hash){if(opt_hash!==undefined){opt_hash=newHash()}oldPut.call(this,pathString,data,opt_onComplete,opt_hash)};return function(){PersistentConnection.prototype.put=oldPut}};var ConnectionTarget=RepoInfo;var queryIdentifier=function(query){return query.queryIdentifier()};var listens=function(firebaseRef){return firebaseRef.repo.persistentConnection_.listens_};var forceRestClient=function(forceRestClient){RepoManager.getInstance().forceRestClient(forceRestClient)};var TEST_ACCESS=Object.freeze({DataConnection:DataConnection,RealTimeConnection:RealTimeConnection,hijackHash:hijackHash,ConnectionTarget:ConnectionTarget,queryIdentifier:queryIdentifier,listens:listens,forceRestClient:forceRestClient});\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */setWebSocketImpl(fayeWebsocket.Client);(function(){var version=process[\"version\"];if(version!==\"v0.10.22\"&&version!==\"v0.10.23\"&&version!==\"v0.10.24\")return;var Writable=__webpack_require__(\"VmYk\");Writable[\"prototype\"][\"write\"]=function(chunk,encoding,cb){var state=this[\"_writableState\"];var ret=false;if(typeof encoding===\"function\"){cb=encoding;encoding=null}if(Buffer[\"isBuffer\"](chunk))encoding=\"buffer\";else if(!encoding)encoding=state[\"defaultEncoding\"];if(typeof cb!==\"function\")cb=function(){};if(state[\"ended\"])writeAfterEnd(this,state,cb);else if(validChunk(this,state,chunk,cb))ret=writeOrBuffer(this,state,chunk,encoding,cb);return ret};function writeAfterEnd(stream,state,cb){var er=new Error(\"write after end\");stream[\"emit\"](\"error\",er);process[\"nextTick\"](function(){cb(er)})}function validChunk(stream,state,chunk,cb){var valid=true;if(!Buffer[\"isBuffer\"](chunk)&&\"string\"!==typeof chunk&&chunk!==null&&chunk!==undefined&&!state[\"objectMode\"]){var er=new TypeError(\"Invalid non-string/buffer chunk\");stream[\"emit\"](\"error\",er);process[\"nextTick\"](function(){cb(er)});valid=false}return valid}function writeOrBuffer(stream,state,chunk,encoding,cb){chunk=decodeChunk(state,chunk,encoding);if(Buffer[\"isBuffer\"](chunk))encoding=\"buffer\";var len=state[\"objectMode\"]?1:chunk[\"length\"];state[\"length\"]+=len;var ret=state[\"length\"]<state[\"highWaterMark\"];if(!ret)state[\"needDrain\"]=true;if(state[\"writing\"])state[\"buffer\"][\"push\"](new WriteReq(chunk,encoding,cb));else doWrite(stream,state,len,chunk,encoding,cb);return ret}function decodeChunk(state,chunk,encoding){if(!state[\"objectMode\"]&&state[\"decodeStrings\"]!==false&&typeof chunk===\"string\"){chunk=new Buffer(chunk,encoding)}return chunk}function WriteReq(chunk,encoding,cb){this[\"chunk\"]=chunk;this[\"encoding\"]=encoding;this[\"callback\"]=cb}function doWrite(stream,state,len,chunk,encoding,cb){state[\"writelen\"]=len;state[\"writecb\"]=cb;state[\"writing\"]=true;state[\"sync\"]=true;stream[\"_write\"](chunk,encoding,state[\"onwrite\"]);state[\"sync\"]=false}var Duplex=__webpack_require__(\"4IPr\");Duplex[\"prototype\"][\"write\"]=Writable[\"prototype\"][\"write\"]})();FirebaseIFrameScriptHolder.request=null;FirebaseIFrameScriptHolder.nodeRestRequest=function(req,onComplete){if(!FirebaseIFrameScriptHolder.request)FirebaseIFrameScriptHolder.request=__webpack_require__(!function webpackMissingModule(){var e=new Error(\"Cannot find module 'request'\");e.code=\"MODULE_NOT_FOUND\";throw e}());FirebaseIFrameScriptHolder.request(req,function(error,response,body){if(error)throw\"Rest request for \"+req.url+\" failed.\";if(onComplete)onComplete(body)})};FirebaseIFrameScriptHolder.prototype.doNodeLongPoll=function(url,loadCB){var self=this;FirebaseIFrameScriptHolder.nodeRestRequest({url:url,forever:true},function(body){self.evalBody(body);loadCB()})};FirebaseIFrameScriptHolder.prototype.evalBody=function(body){var jsonpCB;eval(\"jsonpCB = function(\"+FIREBASE_LONGPOLL_COMMAND_CB_NAME+\", \"+FIREBASE_LONGPOLL_DATA_CB_NAME+\") {\"+body+\"}\");jsonpCB(this.commandCB,this.onMessageCB)};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var ServerValue=Database.ServerValue;function initStandalone(app,url,version){util.CONSTANTS.NODE_ADMIN=true;if(version){firebase.SDK_VERSION=version}return{instance:RepoManager.getInstance().databaseFromApp(app,url),namespace:{Reference:Reference,Query:Query,Database:Database,DataSnapshot:DataSnapshot,enableLogging:enableLogging,INTERNAL:INTERNAL,ServerValue:ServerValue,TEST_ACCESS:TEST_ACCESS}}}function registerDatabase(instance){var namespace=instance.INTERNAL.registerService(\"database\",function(app,unused,url){return RepoManager.getInstance().databaseFromApp(app,url)},{Reference:Reference,Query:Query,Database:Database,DataSnapshot:DataSnapshot,enableLogging:enableLogging,INTERNAL:INTERNAL,ServerValue:ServerValue,TEST_ACCESS:TEST_ACCESS},null,true);if(util.isNodeSdk()){module.exports=Object.assign({},namespace,{initStandalone:initStandalone})}}registerDatabase(firebase);exports.DataSnapshot=DataSnapshot;exports.Database=Database;exports.OnDisconnect=OnDisconnect;exports.Query=Query;exports.Reference=Reference;exports.ServerValue=ServerValue;exports.enableLogging=enableLogging;exports.initStandalone=initStandalone;exports.registerDatabase=registerDatabase},rr1i:function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}},rs5h:function(module,exports,__webpack_require__){var document=__webpack_require__(\"ysHE\").document;module.exports=document&&document.documentElement},sLSF:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,\"default\",function(){return _createClass});var _core_js_object_define_property__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"hfKm\");var _core_js_object_define_property__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_core_js_object_define_property__WEBPACK_IMPORTED_MODULE_0__);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;_core_js_object_define_property__WEBPACK_IMPORTED_MODULE_0___default()(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}},sNwI:function(module,exports,__webpack_require__){var anObject=__webpack_require__(\"5K7Z\");module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator[\"return\"];if(ret!==undefined)anObject(ret.call(iterator));throw e}}},sWNQ:function(module,exports,__webpack_require__){var Event=__webpack_require__(\"AhIK\");var EventTarget={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(eventType,listener,useCapture){this.on(eventType,listener)},removeEventListener:function(eventType,listener,useCapture){this.removeListener(eventType,listener)},dispatchEvent:function(event){event.target=event.currentTarget=this;event.eventPhase=Event.AT_TARGET;if(this[\"on\"+event.type])this[\"on\"+event.type](event);this.emit(event.type,event)}};module.exports=EventTarget},spD4:function(module,exports,__webpack_require__){var DOMIterables=__webpack_require__(\"1VRj\");var ArrayIteratorMethods=__webpack_require__(\"K8G7\");var global=__webpack_require__(\"ysHE\");var hide=__webpack_require__(\"wBs/\");var wellKnownSymbol=__webpack_require__(\"aXXJ\");var ITERATOR=wellKnownSymbol(\"iterator\");var TO_STRING_TAG=wellKnownSymbol(\"toStringTag\");var ArrayValues=ArrayIteratorMethods.values;for(var COLLECTION_NAME in DOMIterables){var Collection=global[COLLECTION_NAME];var CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype){if(CollectionPrototype[ITERATOR]!==ArrayValues)try{hide(CollectionPrototype,ITERATOR,ArrayValues)}catch(e){CollectionPrototype[ITERATOR]=ArrayValues}if(!CollectionPrototype[TO_STRING_TAG])hide(CollectionPrototype,TO_STRING_TAG,COLLECTION_NAME);if(DOMIterables[COLLECTION_NAME])for(var METHOD_NAME in ArrayIteratorMethods){if(CollectionPrototype[METHOD_NAME]!==ArrayIteratorMethods[METHOD_NAME])try{hide(CollectionPrototype,METHOD_NAME,ArrayIteratorMethods[METHOD_NAME])}catch(e){CollectionPrototype[METHOD_NAME]=ArrayIteratorMethods[METHOD_NAME]}}}}},stQs:function(module,exports,__webpack_require__){\"use strict\";var $export=__webpack_require__(\"pSMy\");var createIteratorConstructor=__webpack_require__(\"A9d8\");var getPrototypeOf=__webpack_require__(\"0idE\");var setPrototypeOf=__webpack_require__(\"XCog\");var setToStringTag=__webpack_require__(\"S4gH\");var hide=__webpack_require__(\"wBs/\");var redefine=__webpack_require__(\"1f/i\");var IS_PURE=__webpack_require__(\"U5J1\");var ITERATOR=__webpack_require__(\"aXXJ\")(\"iterator\");var Iterators=__webpack_require__(\"0i0S\");var IteratorsCore=__webpack_require__(\"YxH6\");var IteratorPrototype=IteratorsCore.IteratorPrototype;var BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS;var KEYS=\"keys\";var VALUES=\"values\";var ENTRIES=\"entries\";var returnThis=function(){return this};module.exports=function(Iterable,NAME,IteratorConstructor,next,DEFAULT,IS_SET,FORCED){createIteratorConstructor(IteratorConstructor,NAME,next);var getIterationMethod=function(KIND){if(KIND===DEFAULT&&defaultIterator)return defaultIterator;if(!BUGGY_SAFARI_ITERATORS&&KIND in IterablePrototype)return IterablePrototype[KIND];switch(KIND){case KEYS:return function keys(){return new IteratorConstructor(this,KIND)};case VALUES:return function values(){return new IteratorConstructor(this,KIND)};case ENTRIES:return function entries(){return new IteratorConstructor(this,KIND)}}return function(){return new IteratorConstructor(this)}};var TO_STRING_TAG=NAME+\" Iterator\";var INCORRECT_VALUES_NAME=false;var IterablePrototype=Iterable.prototype;var nativeIterator=IterablePrototype[ITERATOR]||IterablePrototype[\"@@iterator\"]||DEFAULT&&IterablePrototype[DEFAULT];var defaultIterator=!BUGGY_SAFARI_ITERATORS&&nativeIterator||getIterationMethod(DEFAULT);var anyNativeIterator=NAME==\"Array\"?IterablePrototype.entries||nativeIterator:nativeIterator;var CurrentIteratorPrototype,methods,KEY;if(anyNativeIterator){CurrentIteratorPrototype=getPrototypeOf(anyNativeIterator.call(new Iterable));if(IteratorPrototype!==Object.prototype&&CurrentIteratorPrototype.next){if(!IS_PURE&&getPrototypeOf(CurrentIteratorPrototype)!==IteratorPrototype){if(setPrototypeOf){setPrototypeOf(CurrentIteratorPrototype,IteratorPrototype)}else if(typeof CurrentIteratorPrototype[ITERATOR]!=\"function\"){hide(CurrentIteratorPrototype,ITERATOR,returnThis)}}setToStringTag(CurrentIteratorPrototype,TO_STRING_TAG,true,true);if(IS_PURE)Iterators[TO_STRING_TAG]=returnThis}}if(DEFAULT==VALUES&&nativeIterator&&nativeIterator.name!==VALUES){INCORRECT_VALUES_NAME=true;defaultIterator=function values(){return nativeIterator.call(this)}}if((!IS_PURE||FORCED)&&IterablePrototype[ITERATOR]!==defaultIterator){hide(IterablePrototype,ITERATOR,defaultIterator)}Iterators[NAME]=defaultIterator;if(DEFAULT){methods={values:getIterationMethod(VALUES),keys:IS_SET?defaultIterator:getIterationMethod(KEYS),entries:getIterationMethod(ENTRIES)};if(FORCED)for(KEY in methods){if(BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME||!(KEY in IterablePrototype)){redefine(IterablePrototype,KEY,methods[KEY])}}else $export({target:NAME,proto:true,forced:BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME},methods)}return methods}},t5mC:function(module,exports,__webpack_require__){var fails=__webpack_require__(\"0HDe\");var classof=__webpack_require__(\"hdqJ\");var split=\"\".split;module.exports=fails(function(){return!Object(\"z\").propertyIsEnumerable(0)})?function(it){return classof(it)==\"String\"?split.call(it,\"\"):Object(it)}:Object},tEej:function(module,exports,__webpack_require__){var toInteger=__webpack_require__(\"Ojgd\");var min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},ttDY:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"+iuc\")},tuBy:function(module,exports,__webpack_require__){__webpack_require__(\"WBJg\");module.exports=__webpack_require__(\"vLVD\")(\"String\",\"repeat\")},tzov:function(module,exports,__webpack_require__){var anObject=__webpack_require__(\"bcPd\");var defineProperties=__webpack_require__(\"JzIs\");var enumBugKeys=__webpack_require__(\"o9j8\");var html=__webpack_require__(\"rs5h\");var documentCreateElement=__webpack_require__(\"JIMt\");var IE_PROTO=__webpack_require__(\"qBi7\")(\"IE_PROTO\");var PROTOTYPE=\"prototype\";var Empty=function(){};var createDict=function(){var iframe=documentCreateElement(\"iframe\");var length=enumBugKeys.length;var lt=\"<\";var script=\"script\";var gt=\">\";var js=\"java\"+script+\":\";var iframeDocument;iframe.style.display=\"none\";html.appendChild(iframe);iframe.src=String(js);iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+script+gt+\"document.F=Object\"+lt+\"/\"+script+gt);iframeDocument.close();createDict=iframeDocument.F;while(length--)delete createDict[PROTOTYPE][enumBugKeys[length]];return createDict()};module.exports=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE]=anObject(O);result=new Empty;Empty[PROTOTYPE]=null;result[IE_PROTO]=O}else result=createDict();return Properties===undefined?result:defineProperties(result,Properties)};__webpack_require__(\"vcTx\")[IE_PROTO]=true},u4G8:function(module,exports,__webpack_require__){\"use strict\";var Stream=__webpack_require__(\"msIP\").Stream,util=__webpack_require__(\"jK02\");var IO=function(driver){this.readable=this.writable=true;this._paused=false;this._driver=driver};util.inherits(IO,Stream);IO.prototype.pause=function(){this._paused=true;this._driver.messages._paused=true};IO.prototype.resume=function(){this._paused=false;this.emit(\"drain\");var messages=this._driver.messages;messages._paused=false;messages.emit(\"drain\")};IO.prototype.write=function(chunk){if(!this.writable)return false;this._driver.parse(chunk);return!this._paused};IO.prototype.end=function(chunk){if(!this.writable)return;if(chunk!==undefined)this.write(chunk);this.writable=false;var messages=this._driver.messages;if(messages.readable){messages.readable=messages.writable=false;messages.emit(\"end\")}};IO.prototype.destroy=function(){this.end()};var Messages=function(driver){this.readable=this.writable=true;this._paused=false;this._driver=driver};util.inherits(Messages,Stream);Messages.prototype.pause=function(){this._driver.io._paused=true};Messages.prototype.resume=function(){this._driver.io._paused=false;this._driver.io.emit(\"drain\")};Messages.prototype.write=function(message){if(!this.writable)return false;if(typeof message===\"string\")this._driver.text(message);else this._driver.binary(message);return!this._paused};Messages.prototype.end=function(message){if(message!==undefined)this.write(message)};Messages.prototype.destroy=function(){};exports.IO=IO;exports.Messages=Messages},u5A6:function(module,exports,__webpack_require__){\"use strict\";var RingBuffer=function(bufferSize){this._bufferSize=bufferSize;this.clear()};RingBuffer.prototype.clear=function(){this._buffer=new Array(this._bufferSize);this._ringOffset=0;this._ringSize=this._bufferSize;this._head=0;this._tail=0;this.length=0};RingBuffer.prototype.push=function(value){var expandBuffer=false,expandRing=false;if(this._ringSize<this._bufferSize){expandBuffer=this._tail===0}else if(this._ringOffset===this._ringSize){expandBuffer=true;expandRing=this._tail===0}if(expandBuffer){this._tail=this._bufferSize;this._buffer=this._buffer.concat(new Array(this._bufferSize));this._bufferSize=this._buffer.length;if(expandRing)this._ringSize=this._bufferSize}this._buffer[this._tail]=value;this.length+=1;if(this._tail<this._ringSize)this._ringOffset+=1;this._tail=(this._tail+1)%this._bufferSize};RingBuffer.prototype.peek=function(){if(this.length===0)return void 0;return this._buffer[this._head]};RingBuffer.prototype.shift=function(){if(this.length===0)return void 0;var value=this._buffer[this._head];this._buffer[this._head]=void 0;this.length-=1;this._ringOffset-=1;if(this._ringOffset===0&&this.length>0){this._head=this._ringSize;this._ringOffset=this.length;this._ringSize=this._bufferSize}else{this._head=(this._head+1)%this._ringSize}return value};module.exports=RingBuffer},u938:function(module,exports,__webpack_require__){var g=function(){return this||typeof self===\"object\"&&self}()||Function(\"return this\")();var hadRuntime=g.regeneratorRuntime&&Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\")>=0;var oldRuntime=hadRuntime&&g.regeneratorRuntime;g.regeneratorRuntime=undefined;module.exports=__webpack_require__(\"ls82\");if(hadRuntime){g.regeneratorRuntime=oldRuntime}else{try{delete g.regeneratorRuntime}catch(e){g.regeneratorRuntime=undefined}}},uLJa:function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"toStringTag\")},uOPS:function(module,exports){module.exports=true},ugmf:function(module,exports){module.exports=require(\"tls\")},\"uiB+\":function(module,exports,__webpack_require__){__webpack_require__(\"q94Q\")(\"isConcatSpreadable\")},uzDk:function(module,exports,__webpack_require__){__webpack_require__(\"4mOR\");module.exports=__webpack_require__(\"vLVD\")(\"Array\",\"findIndex\")},v6xn:function(module,exports,__webpack_require__){var speciesConstructor=__webpack_require__(\"C2SN\");module.exports=function(original,length){return new(speciesConstructor(original))(length)}},vBP9:function(module,exports,__webpack_require__){var global=__webpack_require__(\"5T2Y\");var navigator=global.navigator;module.exports=navigator&&navigator.userAgent||\"\"},vLVD:function(module,exports,__webpack_require__){var global=__webpack_require__(\"ysHE\");var bind=__webpack_require__(\"JpPu\");var call=Function.call;module.exports=function(CONSTRUCTOR,METHOD,length){return bind(call,global[CONSTRUCTOR].prototype[METHOD],length)}},vQkR:function(module,exports,__webpack_require__){var bind=__webpack_require__(\"JpPu\");var IndexedObject=__webpack_require__(\"t5mC\");var toObject=__webpack_require__(\"SAp2\");var toLength=__webpack_require__(\"H6ty\");var arraySpeciesCreate=__webpack_require__(\"rhCS\");module.exports=function(TYPE,specificCreate){var IS_MAP=TYPE==1;var IS_FILTER=TYPE==2;var IS_SOME=TYPE==3;var IS_EVERY=TYPE==4;var IS_FIND_INDEX=TYPE==6;var NO_HOLES=TYPE==5||IS_FIND_INDEX;var create=specificCreate||arraySpeciesCreate;return function($this,callbackfn,that){var O=toObject($this);var self=IndexedObject(O);var boundFunction=bind(callbackfn,that,3);var length=toLength(self.length);var index=0;var target=IS_MAP?create($this,length):IS_FILTER?create($this,0):undefined;var value,result;for(;length>index;index++)if(NO_HOLES||index in self){value=self[index];result=boundFunction(value,index,O);if(TYPE){if(IS_MAP)target[index]=result;else if(result)switch(TYPE){case 3:return true;case 5:return value;case 6:return index;case 2:target.push(value)}else if(IS_EVERY)return false}}return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:target}}},\"vb+c\":function(module,exports,__webpack_require__){__webpack_require__(\"S4gH\")(Math,\"Math\",true)},vcTx:function(module,exports){module.exports={}},viRO:function(module,exports,__webpack_require__){\"use strict\";\n/** @license React v16.8.6\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var k=__webpack_require__(\"MgzW\"),n=\"function\"===typeof Symbol&&Symbol.for,p=n?Symbol.for(\"react.element\"):60103,q=n?Symbol.for(\"react.portal\"):60106,r=n?Symbol.for(\"react.fragment\"):60107,t=n?Symbol.for(\"react.strict_mode\"):60108,u=n?Symbol.for(\"react.profiler\"):60114,v=n?Symbol.for(\"react.provider\"):60109,w=n?Symbol.for(\"react.context\"):60110,x=n?Symbol.for(\"react.concurrent_mode\"):60111,y=n?Symbol.for(\"react.forward_ref\"):60112,z=n?Symbol.for(\"react.suspense\"):60113,aa=n?Symbol.for(\"react.memo\"):60115,ba=n?Symbol.for(\"react.lazy\"):60116,A=\"function\"===typeof Symbol&&Symbol.iterator;function ca(a,b,d,c,e,g,h,f){if(!a){a=void 0;if(void 0===b)a=Error(\"Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.\");else{var l=[d,c,e,g,h,f],m=0;a=Error(b.replace(/%s/g,function(){return l[m++]}));a.name=\"Invariant Violation\"}a.framesToPop=1;throw a}}function B(a){for(var b=arguments.length-1,d=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=0;c<b;c++)d+=\"&args[]=\"+encodeURIComponent(arguments[c+1]);ca(!1,\"Minified React error #\"+a+\"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \",d)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D={};function E(a,b,d){this.props=a;this.context=b;this.refs=D;this.updater=d||C}E.prototype.isReactComponent={};E.prototype.setState=function(a,b){\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a?B(\"85\"):void 0;this.updater.enqueueSetState(this,a,b,\"setState\")};E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function F(){}F.prototype=E.prototype;function G(a,b,d){this.props=a;this.context=b;this.refs=D;this.updater=d||C}var H=G.prototype=new F;H.constructor=G;k(H,E.prototype);H.isPureReactComponent=!0;var I={current:null},J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};function M(a,b,d){var c=void 0,e={},g=null,h=null;if(null!=b)for(c in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(g=\"\"+b.key),b)K.call(b,c)&&!L.hasOwnProperty(c)&&(e[c]=b[c]);var f=arguments.length-2;if(1===f)e.children=d;else if(1<f){for(var l=Array(f),m=0;m<f;m++)l[m]=arguments[m+2];e.children=l}if(a&&a.defaultProps)for(c in f=a.defaultProps,f)void 0===e[c]&&(e[c]=f[c]);return{$$typeof:p,type:a,key:g,ref:h,props:e,_owner:J.current}}function da(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===p}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+a).replace(/[=:]/g,function(a){return b[a]})}var O=/\\/+/g,P=[];function Q(a,b,d,c){if(P.length){var e=P.pop();e.result=a;e.keyPrefix=b;e.func=d;e.context=c;e.count=0;return e}return{result:a,keyPrefix:b,func:d,context:c,count:0}}function R(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>P.length&&P.push(a)}function S(a,b,d,c){var e=typeof a;if(\"undefined\"===e||\"boolean\"===e)a=null;var g=!1;if(null===a)g=!0;else switch(e){case\"string\":case\"number\":g=!0;break;case\"object\":switch(a.$$typeof){case p:case q:g=!0}}if(g)return d(c,a,\"\"===b?\".\"+T(a,0):b),1;g=0;b=\"\"===b?\".\":b+\":\";if(Array.isArray(a))for(var h=0;h<a.length;h++){e=a[h];var f=b+T(e,h);g+=S(e,f,d,c)}else if(null===a||\"object\"!==typeof a?f=null:(f=A&&a[A]||a[\"@@iterator\"],f=\"function\"===typeof f?f:null),\"function\"===typeof f)for(a=f.call(a),h=0;!(e=a.next()).done;)e=e.value,f=b+T(e,h++),g+=S(e,f,d,c);else\"object\"===e&&(d=\"\"+a,B(\"31\",\"[object Object]\"===d?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":d,\"\"));return g}function U(a,b,d){return null==a?0:S(a,\"\",b,d)}function T(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(a.key):b.toString(36)}function ea(a,b){a.func.call(a.context,b,a.count++)}function fa(a,b,d){var c=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?V(a,c,d,function(a){return a}):null!=a&&(N(a)&&(a=da(a,e+(!a.key||b&&b.key===a.key?\"\":(\"\"+a.key).replace(O,\"$&/\")+\"/\")+d)),c.push(a))}function V(a,b,d,c,e){var g=\"\";null!=d&&(g=(\"\"+d).replace(O,\"$&/\")+\"/\");b=Q(b,g,c,e);U(a,fa,b);R(b)}function W(){var a=I.current;null===a?B(\"321\"):void 0;return a}var X={Children:{map:function(a,b,d){if(null==a)return a;var c=[];V(a,c,null,b,d);return c},forEach:function(a,b,d){if(null==a)return a;b=Q(null,null,b,d);U(a,ea,b);R(b)},count:function(a){return U(a,function(){return null},null)},toArray:function(a){var b=[];V(a,b,null,function(a){return a});return b},only:function(a){N(a)?void 0:B(\"143\");return a}},createRef:function(){return{current:null}},Component:E,PureComponent:G,createContext:function(a,b){void 0===b&&(b=null);a={$$typeof:w,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:v,_context:a};return a.Consumer=a},forwardRef:function(a){return{$$typeof:y,render:a}},lazy:function(a){return{$$typeof:ba,_ctor:a,_status:-1,_result:null}},memo:function(a,b){return{$$typeof:aa,type:a,compare:void 0===b?null:b}},useCallback:function(a,b){return W().useCallback(a,b)},useContext:function(a,b){return W().useContext(a,b)},useEffect:function(a,b){return W().useEffect(a,b)},useImperativeHandle:function(a,b,d){return W().useImperativeHandle(a,b,d)},useDebugValue:function(){},useLayoutEffect:function(a,b){return W().useLayoutEffect(a,b)},useMemo:function(a,b){return W().useMemo(a,b)},useReducer:function(a,b,d){return W().useReducer(a,b,d)},useRef:function(a){return W().useRef(a)},useState:function(a){return W().useState(a)},Fragment:r,StrictMode:t,Suspense:z,createElement:M,cloneElement:function(a,b,d){null===a||void 0===a?B(\"267\",a):void 0;var c=void 0,e=k({},a.props),g=a.key,h=a.ref,f=a._owner;if(null!=b){void 0!==b.ref&&(h=b.ref,f=J.current);void 0!==b.key&&(g=\"\"+b.key);var l=void 0;a.type&&a.type.defaultProps&&(l=a.type.defaultProps);for(c in b)K.call(b,c)&&!L.hasOwnProperty(c)&&(e[c]=void 0===b[c]&&void 0!==l?l[c]:b[c])}c=arguments.length-2;if(1===c)e.children=d;else if(1<c){l=Array(c);for(var m=0;m<c;m++)l[m]=arguments[m+2];e.children=l}return{$$typeof:p,type:a.type,key:g,ref:h,props:e,_owner:f}},createFactory:function(a){var b=M.bind(null,a);b.type=a;return b},isValidElement:N,version:\"16.8.6\",unstable_ConcurrentMode:x,unstable_Profiler:u,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:I,ReactCurrentOwner:J,assign:k}},Y={default:X},Z=Y&&X||Y;module.exports=Z.default||Z},vjea:function(module,exports,__webpack_require__){var _Object$setPrototypeOf=__webpack_require__(\"TRZx\");function _setPrototypeOf(o,p){module.exports=_setPrototypeOf=_Object$setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}module.exports=_setPrototypeOf},vwuL:function(module,exports,__webpack_require__){var pIE=__webpack_require__(\"NV0k\");var createDesc=__webpack_require__(\"rr1i\");var toIObject=__webpack_require__(\"NsO/\");var toPrimitive=__webpack_require__(\"G8Mo\");var has=__webpack_require__(\"B+OT\");var IE8_DOM_DEFINE=__webpack_require__(\"eUtF\");var gOPD=Object.getOwnPropertyDescriptor;exports.f=__webpack_require__(\"jmDH\")?gOPD:function getOwnPropertyDescriptor(O,P){O=toIObject(O);P=toPrimitive(P,true);if(IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},\"w2d+\":function(module,exports,__webpack_require__){\"use strict\";var addToUnscopables=__webpack_require__(\"hDam\");var step=__webpack_require__(\"UO39\");var Iterators=__webpack_require__(\"SBuE\");var toIObject=__webpack_require__(\"NsO/\");module.exports=__webpack_require__(\"MPFp\")(Array,\"Array\",function(iterated,kind){this._t=toIObject(iterated);this._i=0;this._k=kind},function(){var O=this._t;var kind=this._k;var index=this._i++;if(!O||index>=O.length){this._t=undefined;return step(1)}if(kind==\"keys\")return step(0,index);if(kind==\"values\")return step(0,O[index]);return step(0,[index,O[index]])},\"values\");Iterators.Arguments=Iterators.Array;addToUnscopables(\"keys\");addToUnscopables(\"values\");addToUnscopables(\"entries\")},w6GO:function(module,exports,__webpack_require__){var $keys=__webpack_require__(\"5vMV\");var enumBugKeys=__webpack_require__(\"FpHa\");module.exports=Object.keys||function keys(O){return $keys(O,enumBugKeys)}},\"wBs/\":function(module,exports,__webpack_require__){var definePropertyModule=__webpack_require__(\"TIpl\");var createPropertyDescriptor=__webpack_require__(\"2Hee\");module.exports=__webpack_require__(\"lb/b\")?function(object,key,value){return definePropertyModule.f(object,key,createPropertyDescriptor(1,value))}:function(object,key,value){object[key]=value;return object}},wYmx:function(module,exports,__webpack_require__){\"use strict\";var aFunction=__webpack_require__(\"eaoh\");var isObject=__webpack_require__(\"93I4\");var invoke=__webpack_require__(\"MCSJ\");var arraySlice=[].slice;var factories={};var construct=function(F,len,args){if(!(len in factories)){for(var n=[],i=0;i<len;i++)n[i]=\"a[\"+i+\"]\";factories[len]=Function(\"F,a\",\"return new F(\"+n.join(\",\")+\")\")}return factories[len](F,args)};module.exports=Function.bind||function bind(that){var fn=aFunction(this);var partArgs=arraySlice.call(arguments,1);var bound=function(){var args=partArgs.concat(arraySlice.call(arguments));return this instanceof bound?construct(fn,args.length,args):invoke(fn,args,that)};if(isObject(fn.prototype))bound.prototype=fn.prototype;return bound}},wgeU:function(module,exports){},\"wmU/\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var external_url_=__webpack_require__(\"bzos\");var server_render=__webpack_require__(\"R+7f\");var send_html=__webpack_require__(\"I8F5\");var build_manifest=__webpack_require__(\"LZ9C\");var react_loadable_manifest=__webpack_require__(\"67Bq\");var _document=__webpack_require__(\"VDXt\");var _document_default=__webpack_require__.n(_document);var _error=__webpack_require__(\"/a9y\");var _error_default=__webpack_require__.n(_error);var _app=__webpack_require__(\"B5Ud\");var _app_default=__webpack_require__.n(_app);var keys=__webpack_require__(\"pLtp\");var keys_default=__webpack_require__.n(keys);var classCallCheck=__webpack_require__(\"0iUn\");var createClass=__webpack_require__(\"sLSF\");var possibleConstructorReturn=__webpack_require__(\"MI3g\");var getPrototypeOf=__webpack_require__(\"a7VT\");var inherits=__webpack_require__(\"Tit0\");var style=__webpack_require__(\"MX0m\");var style_default=__webpack_require__.n(style);var next_link=__webpack_require__(\"YFqc\");var link_default=__webpack_require__.n(next_link);var react=__webpack_require__(\"q1tI\");var react_default=__webpack_require__.n(react);var profile_image_ImageCircle=function ImageCircle(props){return react_default.a.createElement(\"div\",{className:style_default.a.dynamic([[\"1103661359\",[props.image]]])},react_default.a.createElement(\"div\",{className:style_default.a.dynamic([[\"1103661359\",[props.image]]])+\" \"+\"image\"}),react_default.a.createElement(style_default.a,{id:\"1103661359\",dynamic:[props.image]},[\".image.__jsx-style-dynamic-selector{width:190px;height:190px;background-image:url('\".concat(props.image,\"');background-size:cover;background-position:center center;border-radius:50%;margin-right:46px;}\")]))};var profile_image=profile_image_ImageCircle;var firebase=__webpack_require__(\"VxiW\");var profile_Profile=function(_React$Component){Object(inherits[\"default\"])(Profile,_React$Component);function Profile(){var _this;Object(classCallCheck[\"default\"])(this,Profile);_this=Object(possibleConstructorReturn[\"default\"])(this,Object(getPrototypeOf[\"default\"])(Profile).call(this));_this.state={folders:[],posts:[],user:{}};return _this}Object(createClass[\"default\"])(Profile,[{key:\"getData\",value:function getData(){var _this2=this;firebase[\"a\"].ref(\"users/-LcH3_cySnZobSDrvnhc\").once(\"value\").then(function(snapshot){_this2.setState({user:snapshot.val()})});firebase[\"a\"].ref(\"folders\").once(\"value\").then(function(snapshot){_this2.setState({folders:snapshot.val()})});firebase[\"a\"].ref(\"posts\").once(\"value\").then(function(snapshot){_this2.setState({posts:snapshot.val()})})}},{key:\"componentDidMount\",value:function componentDidMount(){this.getData()}},{key:\"render\",value:function render(){var _this3=this;return react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"},react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"page-info\"},react_default.a.createElement(profile_image,{image:this.state.user.userImage}),react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"page-text\"},react_default.a.createElement(\"h1\",{className:\"jsx-2617564006\"+\" \"+\"page-name\"},this.state.user.userName),react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"stat-grid\"},react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"stat\"},react_default.a.createElement(\"h3\",{className:\"jsx-2617564006\"+\" \"+\"stat-title\"},\"24\"),react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"stat-text\"},\"Posts\")),react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"stat\"},react_default.a.createElement(\"h3\",{className:\"jsx-2617564006\"+\" \"+\"stat-title\"},\"143\"),react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"stat-text\"},\"Views\")),react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"stat stat-long\"},react_default.a.createElement(\"h3\",{className:\"jsx-2617564006\"+\" \"+\"stat-title\"},\"2 days ago\"),react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"stat-text\"},\"Last Added to\"))))),react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"heading\"},react_default.a.createElement(\"h2\",{className:\"jsx-2617564006\"},\"Collections\")),react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"grid\"},react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"grid-container\"},keys_default()(this.state.folders).map(function(key){return react_default.a.createElement(link_default.a,{key:key,href:\"/folder?id=\".concat(key)},react_default.a.createElement(\"a\",{className:\"jsx-2617564006\"+\" \"+\"grid-item\"},react_default.a.createElement(\"div\",{style:{backgroundImage:\"url(\"+_this3.state.folders[key].folderImage+\")\"},className:\"jsx-2617564006\"+\" \"+\"image image-circle\"}),react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"text\"},_this3.state.folders[key].folderTitle)))})),react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"clear\"})),react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"heading\"},react_default.a.createElement(\"h2\",{className:\"jsx-2617564006\"},\"Most Recent\")),react_default.a.createElement(\"div\",{className:\"jsx-2617564006\"+\" \"+\"grid-container\"},keys_default()(this.state.posts).map(function(key){return react_default.a.createElement(link_default.a,{key:key,href:\"/folder\"},react_default.a.createElement(\"a\",{style:{backgroundImage:\"url(\"+_this3.state.posts[key].postImage+\")\"},className:\"jsx-2617564006\"+\" \"+\"grid-item image image-scale\"}))})),react_default.a.createElement(style_default.a,{id:\"3335784710\"},[\".heading.jsx-2617564006{border-top:solid 1px #e5e5e5;}\",\".heading.jsx-2617564006 h2.jsx-2617564006{text-align:center;font-size:21px;color:#5a5a5a;font-weight:normal;margin-top:57px;margin-bottom:35px;}\",\".grid.jsx-2617564006{margin-bottom:50px;}\",\".grid-container.jsx-2617564006{margin:0px auto;}\",\".grid-item.jsx-2617564006{float:left;width:33.3333vw;height:33.3333vw;text-align:center;}\",\".image.jsx-2617564006{background-image:url('static/images/photos/instagram-photo.jpg');background-size:cover;background-position:center center;min-height:190px;max-width:190px;margin:0px auto;}\",\".image-circle.jsx-2617564006{border-radius:50%;}\",\".image-circle.jsx-2617564006{border-radius:50%;}\",\".image-scale.jsx-2617564006{min-height:inherit;max-width:inherit;}\",\".text.jsx-2617564006{font-size:23px;font-weight:bold;margin-top:12px;color:black;}\",\"a.jsx-2617564006{-webkit-text-decoration:none;text-decoration:none;}\",\"@media only screen and (min-width:840px){.grid-item.jsx-2617564006{width:25vw;height:25vw;}}\",\"@media only screen and (min-width:1172px){.grid-item.jsx-2617564006{width:293px;height:293px;}}\",\"@media only screen and (min-width:1172px){.grid-item.jsx-2617564006{width:20vw;height:20vw;}}\",\".clear.jsx-2617564006{clear:both;}\",\".page-info.jsx-2617564006{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;vertical-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:40px 25px 25px 25px;}\",\".page-name.jsx-2617564006{font-size:33px;font-weight:bold;-webkit-letter-spacing:-1px;-moz-letter-spacing:-1px;-ms-letter-spacing:-1px;letter-spacing:-1px;margin:0px 0px 20px;}\",\".page-image.jsx-2617564006{width:190px;height:190px;background-image:url('static/images/folders/folder-cookbook.jpg');background-size:cover;background-position:center center;border-radius:50%;margin-right:46px;}\",\".stat-grid.jsx-2617564006{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;max-width:600px;}\",\".stat.jsx-2617564006{-webkit-flex:1;-ms-flex:1;flex:1;margin-right:35px;}\",\".stat-long.jsx-2617564006{min-width:200px;}\",\".stat-title.jsx-2617564006{font-size:29px;margin:0px 0px 10px;-webkit-letter-spacing:-0.9px;-moz-letter-spacing:-0.9px;-ms-letter-spacing:-0.9px;letter-spacing:-0.9px;}\",\".stat-text.jsx-2617564006{font-size:19px;color:#999999;-webkit-letter-spacing:-0.6px;-moz-letter-spacing:-0.6px;-ms-letter-spacing:-0.6px;letter-spacing:-0.6px;}\",\".back.jsx-2617564006{margin:17px 25px 40px;color:#7e7e7e;font-size:16px;-webkit-letter-spacing:-0.5px;-moz-letter-spacing:-0.5px;-ms-letter-spacing:-0.5px;letter-spacing:-0.5px;}\"]),react_default.a.createElement(style_default.a,{id:\"1144304041\"},[\"body{padding:0px;margin:0px;font-family:Helvetica;}\"]))}}]);return Profile}(react_default.a.Component);var profile=profile_Profile;__webpack_require__.d(__webpack_exports__,\"render\",function(){return next_serverless_loaderpage_2Fprofile_absolutePagePath_private_next_pages_2Fprofile_js_absoluteAppPath_next_2Fdist_2Fpages_2F_app_absoluteDocumentPath_next_2Fdist_2Fpages_2F_document_absoluteErrorPath_next_2Fdist_2Fpages_2F_error_distDir_private_dot_next_assetPrefix_generateEtags_true_render});async function renderReqToHTML(req,res){const options={App:_app_default.a,Document:_document_default.a,buildManifest:build_manifest,reactLoadableManifest:react_loadable_manifest,buildId:\"__NEXT_REPLACE__BUILD_ID__\",assetPrefix:\"\"};const parsedUrl=Object(external_url_[\"parse\"])(req.url,true);try{const result=await Object(server_render[\"renderToHTML\"])(req,res,\"/profile\",parsedUrl.query,Object.assign({},options,{Component:profile}));return result}catch(err){if(err.code===\"ENOENT\"){res.statusCode=404;const result=await Object(server_render[\"renderToHTML\"])(req,res,\"/_error\",parsedUrl.query,Object.assign({},options,{Component:_error_default.a}));return result}else{console.error(err);res.statusCode=500;const result=await Object(server_render[\"renderToHTML\"])(req,res,\"/_error\",parsedUrl.query,Object.assign({},options,{Component:_error_default.a,err:err}));return result}}}async function next_serverless_loaderpage_2Fprofile_absolutePagePath_private_next_pages_2Fprofile_js_absoluteAppPath_next_2Fdist_2Fpages_2F_app_absoluteDocumentPath_next_2Fdist_2Fpages_2F_document_absoluteErrorPath_next_2Fdist_2Fpages_2F_error_distDir_private_dot_next_assetPrefix_generateEtags_true_render(req,res){try{const html=await renderReqToHTML(req,res);Object(send_html[\"sendHTML\"])(req,res,html,{generateEtags:true})}catch(err){console.error(err);res.statusCode=500;res.end(\"Internal Server Error\")}}},xvv9:function(module,exports,__webpack_require__){__webpack_require__(\"cHUd\")(\"Set\")},y2cN:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"HefZ\");__webpack_require__(\"9UdO\");__webpack_require__(\"FoKB\");__webpack_require__(\"QURa\")},yC6l:function(module,exports,__webpack_require__){__webpack_require__(\"Ksdp\");module.exports=__webpack_require__(\"4Ea8\").Object.assign},yLu3:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"VKFn\")},ySdl:function(module,exports,__webpack_require__){var getOwnPropertyNamesModule=__webpack_require__(\"3Gxb\");var getOwnPropertySymbolsModule=__webpack_require__(\"fw2a\");var anObject=__webpack_require__(\"bcPd\");var Reflect=__webpack_require__(\"ysHE\").Reflect;module.exports=Reflect&&Reflect.ownKeys||function ownKeys(it){var keys=getOwnPropertyNamesModule.f(anObject(it));var getOwnPropertySymbols=getOwnPropertySymbolsModule.f;return getOwnPropertySymbols?keys.concat(getOwnPropertySymbols(it)):keys}},ysHE:function(module,exports){module.exports=typeof window==\"object\"&&window&&window.Math==Math?window:typeof self==\"object\"&&self&&self.Math==Math?self:Function(\"return this\")()},z5Af:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"yC6l\")},z5ME:function(module,exports,__webpack_require__){var MATCH=__webpack_require__(\"aXXJ\")(\"match\");module.exports=function(METHOD_NAME){var regexp=/./;try{\"/./\"[METHOD_NAME](regexp)}catch(e){try{regexp[MATCH]=false;return\"/./\"[METHOD_NAME](regexp)}catch(f){}}return false}},zLkG:function(module,exports,__webpack_require__){exports.f=__webpack_require__(\"UWiX\")},zOht:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */var __extends;var __assign;var __rest;var __decorate;var __param;var __metadata;var __awaiter;var __generator;var __exportStar;var __values;var __read;var __spread;var __await;var __asyncGenerator;var __asyncDelegator;var __asyncValues;var __makeTemplateObject;var __importStar;var __importDefault;(function(factory){var root=typeof global===\"object\"?global:typeof self===\"object\"?self:typeof this===\"object\"?this:{};if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[exports],__WEBPACK_AMD_DEFINE_RESULT__=function(exports){factory(createExporter(root,createExporter(exports)))}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}function createExporter(exports,previous){if(exports!==root){if(typeof Object.create===\"function\"){Object.defineProperty(exports,\"__esModule\",{value:true})}else{exports.__esModule=true}}return function(id,v){return exports[id]=previous?previous(id,v):v}}})(function(exporter){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};__extends=function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};__rest=function(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols===\"function\")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)if(e.indexOf(p[i])<0)t[p[i]]=s[p[i]];return t};__decorate=function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};__param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};__metadata=function(metadataKey,metadataValue){if(typeof Reflect===\"object\"&&typeof Reflect.metadata===\"function\")return Reflect.metadata(metadataKey,metadataValue)};__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator[\"throw\"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};__generator=function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol===\"function\"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError(\"Generator is already executing.\");while(_)try{if(f=1,y&&(t=op[0]&2?y[\"return\"]:op[0]?y[\"throw\"]||((t=y[\"return\"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};__exportStar=function(m,exports){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]};__values=function(o){var m=typeof Symbol===\"function\"&&o[Symbol.iterator],i=0;if(m)return m.call(o);return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}}};__read=function(o,n){var m=typeof Symbol===\"function\"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-- >0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error:error}}finally{try{if(r&&!r.done&&(m=i[\"return\"]))m.call(i)}finally{if(e)throw e.error}}return ar};__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};__await=function(v){return this instanceof __await?(this.v=v,this):new __await(v)};__asyncGenerator=function(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var g=generator.apply(thisArg,_arguments||[]),i,q=[];return i={},verb(\"next\"),verb(\"throw\"),verb(\"return\"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){if(g[n])i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v)})}}function resume(n,v){try{step(g[n](v))}catch(e){settle(q[0][3],e)}}function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}function fulfill(value){resume(\"next\",value)}function reject(value){resume(\"throw\",value)}function settle(f,v){if(f(v),q.shift(),q.length)resume(q[0][0],q[0][1])}};__asyncDelegator=function(o){var i,p;return i={},verb(\"next\"),verb(\"throw\",function(e){throw e}),verb(\"return\"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:n===\"return\"}:f?f(v):v}:f}};__asyncValues=function(o){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var m=o[Symbol.asyncIterator],i;return m?m.call(o):(o=typeof __values===\"function\"?__values(o):o[Symbol.iterator](),i={},verb(\"next\"),verb(\"throw\"),verb(\"return\"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){v=o[n](v),settle(resolve,reject,v.done,v.value)})}}function settle(resolve,reject,d,v){Promise.resolve(v).then(function(v){resolve({value:v,done:d})},reject)}};__makeTemplateObject=function(cooked,raw){if(Object.defineProperty){Object.defineProperty(cooked,\"raw\",{value:raw})}else{cooked.raw=raw}return cooked};__importStar=function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result[\"default\"]=mod;return result};__importDefault=function(mod){return mod&&mod.__esModule?mod:{default:mod}};exporter(\"__extends\",__extends);exporter(\"__assign\",__assign);exporter(\"__rest\",__rest);exporter(\"__decorate\",__decorate);exporter(\"__param\",__param);exporter(\"__metadata\",__metadata);exporter(\"__awaiter\",__awaiter);exporter(\"__generator\",__generator);exporter(\"__exportStar\",__exportStar);exporter(\"__values\",__values);exporter(\"__read\",__read);exporter(\"__spread\",__spread);exporter(\"__await\",__await);exporter(\"__asyncGenerator\",__asyncGenerator);exporter(\"__asyncDelegator\",__asyncDelegator);exporter(\"__asyncValues\",__asyncValues);exporter(\"__makeTemplateObject\",__makeTemplateObject);exporter(\"__importStar\",__importStar);exporter(\"__importDefault\",__importDefault)})},zXhZ:function(module,exports,__webpack_require__){var anObject=__webpack_require__(\"5K7Z\");var isObject=__webpack_require__(\"93I4\");var newPromiseCapability=__webpack_require__(\"ZW5q\");module.exports=function(C,x){anObject(C);if(isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);var resolve=promiseCapability.resolve;resolve(x);return promiseCapability.promise}},ziip:function(module,exports,__webpack_require__){\"use strict\";var NodeHTTPParser=__webpack_require__(\"cKJ5\").HTTPParser;var VERSION=process.version.match(/[0-9]+/g).map(function(n){return parseInt(n,10)});var TYPES={request:NodeHTTPParser.REQUEST||\"request\",response:NodeHTTPParser.RESPONSE||\"response\"};var HttpParser=function(type){this._type=type;this._parser=new NodeHTTPParser(TYPES[type]);this._complete=false;this.headers={};var current=null,self=this;this._parser.onHeaderField=function(b,start,length){current=b.toString(\"utf8\",start,start+length).toLowerCase()};this._parser.onHeaderValue=function(b,start,length){var value=b.toString(\"utf8\",start,start+length);if(self.headers.hasOwnProperty(current))self.headers[current]+=\", \"+value;else self.headers[current]=value};this._parser.onHeadersComplete=this._parser[NodeHTTPParser.kOnHeadersComplete]=function(majorVersion,minorVersion,headers,method,pathname,statusCode){var info=arguments[0];if(typeof info===\"object\"){method=info.method;pathname=info.url;statusCode=info.statusCode;headers=info.headers}self.method=typeof method===\"number\"?HttpParser.METHODS[method]:method;self.statusCode=statusCode;self.url=pathname;if(!headers)return;for(var i=0,n=headers.length,key,value;i<n;i+=2){key=headers[i].toLowerCase();value=headers[i+1];if(self.headers.hasOwnProperty(key))self.headers[key]+=\", \"+value;else self.headers[key]=value}self._complete=true}};HttpParser.METHODS={0:\"DELETE\",1:\"GET\",2:\"HEAD\",3:\"POST\",4:\"PUT\",5:\"CONNECT\",6:\"OPTIONS\",7:\"TRACE\",8:\"COPY\",9:\"LOCK\",10:\"MKCOL\",11:\"MOVE\",12:\"PROPFIND\",13:\"PROPPATCH\",14:\"SEARCH\",15:\"UNLOCK\",16:\"BIND\",17:\"REBIND\",18:\"UNBIND\",19:\"ACL\",20:\"REPORT\",21:\"MKACTIVITY\",22:\"CHECKOUT\",23:\"MERGE\",24:\"M-SEARCH\",25:\"NOTIFY\",26:\"SUBSCRIBE\",27:\"UNSUBSCRIBE\",28:\"PATCH\",29:\"PURGE\",30:\"MKCALENDAR\",31:\"LINK\",32:\"UNLINK\"};if(VERSION[0]===0&&VERSION[1]===12){HttpParser.METHODS[16]=\"REPORT\";HttpParser.METHODS[17]=\"MKACTIVITY\";HttpParser.METHODS[18]=\"CHECKOUT\";HttpParser.METHODS[19]=\"MERGE\";HttpParser.METHODS[20]=\"M-SEARCH\";HttpParser.METHODS[21]=\"NOTIFY\";HttpParser.METHODS[22]=\"SUBSCRIBE\";HttpParser.METHODS[23]=\"UNSUBSCRIBE\";HttpParser.METHODS[24]=\"PATCH\";HttpParser.METHODS[25]=\"PURGE\"}HttpParser.prototype.isComplete=function(){return this._complete};HttpParser.prototype.parse=function(chunk){var consumed=this._parser.execute(chunk,0,chunk.length);if(typeof consumed!==\"number\"){this.error=consumed;this._complete=true;return}if(VERSION[0]===0&&VERSION[1]<6)consumed+=1;if(this._complete)this.body=consumed<chunk.length?chunk.slice(consumed):new Buffer(0)};module.exports=HttpParser},\"zkF/\":function(module,exports,__webpack_require__){var toIndexedObject=__webpack_require__(\"IutQ\");var nativeGetOwnPropertyNames=__webpack_require__(\"3Gxb\").f;var toString={}.toString;var windowNames=typeof window==\"object\"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return nativeGetOwnPropertyNames(it)}catch(e){return windowNames.slice()}};module.exports.f=function getOwnPropertyNames(it){return windowNames&&toString.call(it)==\"[object Window]\"?getWindowNames(it):nativeGetOwnPropertyNames(toIndexedObject(it))}},zn7N:function(module,exports,__webpack_require__){var $export=__webpack_require__(\"Y7ZC\");var core=__webpack_require__(\"WEpk\");var fails=__webpack_require__(\"KUxP\");module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY];var exp={};exp[KEY]=exec(fn);$export($export.S+$export.F*fails(function(){fn(1)}),\"Object\",exp)}},zzpY:function(module,exports,__webpack_require__){\"use strict\";var Stream=__webpack_require__(\"msIP\").Stream,url=__webpack_require__(\"bzos\"),util=__webpack_require__(\"jK02\"),Base=__webpack_require__(\"Wdmt\"),Headers=__webpack_require__(\"q+85\"),HttpParser=__webpack_require__(\"ziip\");var PORTS={\"ws:\":80,\"wss:\":443};var Proxy=function(client,origin,options){this._client=client;this._http=new HttpParser(\"response\");this._origin=typeof client.url===\"object\"?client.url:url.parse(client.url);this._url=typeof origin===\"object\"?origin:url.parse(origin);this._options=options||{};this._state=0;this.readable=this.writable=true;this._paused=false;this._headers=new Headers;this._headers.set(\"Host\",this._origin.host);this._headers.set(\"Connection\",\"keep-alive\");this._headers.set(\"Proxy-Connection\",\"keep-alive\");var auth=this._url.auth&&new Buffer(this._url.auth,\"utf8\").toString(\"base64\");if(auth)this._headers.set(\"Proxy-Authorization\",\"Basic \"+auth)};util.inherits(Proxy,Stream);var instance={setHeader:function(name,value){if(this._state!==0)return false;this._headers.set(name,value);return true},start:function(){if(this._state!==0)return false;this._state=1;var origin=this._origin,port=origin.port||PORTS[origin.protocol],start=\"CONNECT \"+origin.hostname+\":\"+port+\" HTTP/1.1\";var headers=[start,this._headers.toString(),\"\"];this.emit(\"data\",new Buffer(headers.join(\"\\r\\n\"),\"utf8\"));return true},pause:function(){this._paused=true},resume:function(){this._paused=false;this.emit(\"drain\")},write:function(chunk){if(!this.writable)return false;this._http.parse(chunk);if(!this._http.isComplete())return!this._paused;this.statusCode=this._http.statusCode;this.headers=this._http.headers;if(this.statusCode===200){this.emit(\"connect\",new Base.ConnectEvent)}else{var message=\"Can't establish a connection to the server at \"+this._origin.href;this.emit(\"error\",new Error(message))}this.end();return!this._paused},end:function(chunk){if(!this.writable)return;if(chunk!==undefined)this.write(chunk);this.readable=this.writable=false;this.emit(\"close\");this.emit(\"end\")},destroy:function(){this.end()}};for(var key in instance)Proxy.prototype[key]=instance[key];module.exports=Proxy}});"}